import{createRequire as ks}from"node:module";var Cs=Object.create;var{getPrototypeOf:Ts,defineProperty:mN,getOwnPropertyNames:Rs}=Object;var Is=Object.prototype.hasOwnProperty;var q5=($,J,Y)=>{Y=$!=null?Cs(Ts($)):{};let X=J||!$||!$.__esModule?mN(Y,"default",{value:$,enumerable:!0}):Y;for(let W of Rs($))if(!Is.call(X,W))mN(X,W,{get:()=>$[W],enumerable:!0});return X};var t$=($,J)=>()=>(J||$((J={exports:{}}).exports,J),J.exports);var k4=($,J)=>{for(var Y in J)mN($,Y,{get:J[Y],enumerable:!0,configurable:!0,set:(X)=>J[Y]=()=>X})};var C=($,J)=>()=>($&&(J=$($=0)),J);var $4=ks(import.meta.url);var yQ=t$((BS$,tv)=>{var rv=12,S6$=0,V_=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function A6$($){var J=$.indexOf("%");if(J===-1)return $;var Y=$.length,X="",W=0,Z=0,G=J,Q=rv;while(J>-1&&J<Y){var H=ov($[J+1],4),z=ov($[J+2],0),K=H|z,w=V_[K];if(Q=V_[256+Q+w],Z=Z<<6|K&V_[364+w],Q===rv)X+=$.slice(W,G),X+=Z<=65535?String.fromCharCode(Z):String.fromCharCode(55232+(Z>>10),56320+(Z&1023)),Z=0,W=J+3,J=G=$.indexOf("%",W);else if(Q===S6$)return null;else{if(J+=3,J<Y&&$.charCodeAt(J)===37)continue;return null}}return X+$.slice(W)}var j6$={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function ov($,J){var Y=j6$[$];return Y===void 0?255:Y<<J}tv.exports=A6$});var K4,m5;var iQ=C(()=>{K4=class K4 extends Error{constructor(){super("End-Of-Stream");this.name="EndOfStreamError"}};m5=class m5 extends Error{constructor($="The operation was aborted"){super($);this.name="AbortError"}}});class c_{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise(($,J)=>{this.reject=J,this.resolve=$})}}class u5{constructor(){this.endOfStream=!1,this.interrupted=!1,this.peekQueue=[]}async peek($,J=!1){let Y=await this.read($,J);return this.peekQueue.push($.subarray(0,Y)),Y}async read($,J=!1){if($.length===0)return 0;let Y=this.readFromPeekBuffer($);if(!this.endOfStream)Y+=await this.readRemainderFromStream($.subarray(Y),J);if(Y===0&&!J)throw new K4;return Y}readFromPeekBuffer($){let J=$.length,Y=0;while(this.peekQueue.length>0&&J>0){let X=this.peekQueue.pop();if(!X)throw Error("peekData should be defined");let W=Math.min(X.length,J);if($.set(X.subarray(0,W),Y),Y+=W,J-=W,W<X.length)this.peekQueue.push(X.subarray(W))}return Y}async readRemainderFromStream($,J){let Y=0;while(Y<$.length&&!this.endOfStream){if(this.interrupted)throw new m5;let X=await this.readFromStream($.subarray(Y),J);if(X===0)break;Y+=X}if(!J&&Y<$.length)throw new K4;return Y}}var j3=C(()=>{iQ()});var E3;var hf=C(()=>{iQ();j3();E3=class E3 extends u5{constructor($){super();if(this.s=$,this.deferred=null,!$.read||!$.once)throw Error("Expected an instance of stream.Readable");this.s.once("end",()=>{if(this.endOfStream=!0,this.deferred)this.deferred.resolve(0)}),this.s.once("error",(J)=>this.reject(J)),this.s.once("close",()=>this.abort())}async readFromStream($,J){if($.length===0)return 0;let Y=this.s.read($.length);if(Y)return $.set(Y),Y.length;let X={buffer:$,mayBeLess:J,deferred:new c_};return this.deferred=X.deferred,this.s.once("readable",()=>{this.readDeferred(X)}),X.deferred.promise}readDeferred($){let J=this.s.read($.buffer.length);if(J)$.buffer.set(J),$.deferred.resolve(J.length),this.deferred=null;else this.s.once("readable",()=>{this.readDeferred($)})}reject($){if(this.interrupted=!0,this.deferred)this.deferred.reject($),this.deferred=null}async abort(){this.reject(new m5)}async close(){return this.abort()}}});var p_;var mf=C(()=>{j3();p_=class p_ extends u5{constructor($){super();this.reader=$}async abort(){return this.close()}async close(){this.reader.releaseLock()}}});var C3;var l_=C(()=>{mf();C3=class C3 extends p_{async readFromStream($,J){if($.length===0)return 0;let Y=await this.reader.read(new Uint8Array($.length),{min:J?void 0:$.length});if(Y.done)this.endOfStream=Y.done;if(Y.value)return $.set(Y.value),Y.value.length;return 0}}});var rQ;var n_=C(()=>{iQ();j3();rQ=class rQ extends u5{constructor($){super();this.reader=$,this.buffer=null}writeChunk($,J){let Y=Math.min(J.length,$.length);if($.set(J.subarray(0,Y)),Y<J.length)this.buffer=J.subarray(Y);else this.buffer=null;return Y}async readFromStream($,J){if($.length===0)return 0;let Y=0;if(this.buffer)Y+=this.writeChunk($,this.buffer);while(Y<$.length&&!this.endOfStream){let X=await this.reader.read();if(X.done){this.endOfStream=!0;break}if(X.value)Y+=this.writeChunk($.subarray(Y),X.value)}if(!J&&Y===0&&this.endOfStream)throw new K4;return Y}abort(){return this.interrupted=!0,this.reader.cancel()}async close(){await this.abort(),this.reader.releaseLock()}}});function i_($){try{let J=$.getReader({mode:"byob"});if(J instanceof ReadableStreamDefaultReader)return new rQ(J);return new C3(J)}catch(J){if(J instanceof TypeError)return new rQ($.getReader());throw J}}var uf=C(()=>{l_();n_()});var U9=C(()=>{iQ();hf();l_();n_();uf()});class zX{constructor($){if(this.numBuffer=new Uint8Array(8),this.position=0,this.onClose=$?.onClose,$?.abortSignal)$.abortSignal.addEventListener("abort",()=>{this.abort()})}async readToken($,J=this.position){let Y=new Uint8Array($.len);if(await this.readBuffer(Y,{position:J})<$.len)throw new K4;return $.get(Y,0)}async peekToken($,J=this.position){let Y=new Uint8Array($.len);if(await this.peekBuffer(Y,{position:J})<$.len)throw new K4;return $.get(Y,0)}async readNumber($){if(await this.readBuffer(this.numBuffer,{length:$.len})<$.len)throw new K4;return $.get(this.numBuffer,0)}async peekNumber($){if(await this.peekBuffer(this.numBuffer,{length:$.len})<$.len)throw new K4;return $.get(this.numBuffer,0)}async ignore($){if(this.fileInfo.size!==void 0){let J=this.fileInfo.size-this.position;if($>J)return this.position+=J,J}return this.position+=$,$}async close(){await this.abort(),await this.onClose?.()}normalizeOptions($,J){if(!this.supportsRandomAccess()&&J&&J.position!==void 0&&J.position<this.position)throw Error("`options.position` must be equal or greater than `tokenizer.position`");return{...{mayBeLess:!1,offset:0,length:$.length,position:this.position},...J}}abort(){return Promise.resolve()}}var o7=C(()=>{U9()});var PX$=256000,T3;var df=C(()=>{o7();U9();T3=class T3 extends zX{constructor($,J){super(J);this.streamReader=$,this.fileInfo=J?.fileInfo??{}}async readBuffer($,J){let Y=this.normalizeOptions($,J),X=Y.position-this.position;if(X>0)return await this.ignore(X),this.readBuffer($,J);if(X<0)throw Error("`options.position` must be equal or greater than `tokenizer.position`");if(Y.length===0)return 0;let W=await this.streamReader.read($.subarray(0,Y.length),Y.mayBeLess);if(this.position+=W,(!J||!J.mayBeLess)&&W<Y.length)throw new K4;return W}async peekBuffer($,J){let Y=this.normalizeOptions($,J),X=0;if(Y.position){let W=Y.position-this.position;if(W>0){let Z=new Uint8Array(Y.length+W);return X=await this.peekBuffer(Z,{mayBeLess:Y.mayBeLess}),$.set(Z.subarray(W)),X-W}if(W<0)throw Error("Cannot peek from a negative offset in a stream")}if(Y.length>0){try{X=await this.streamReader.peek($.subarray(0,Y.length),Y.mayBeLess)}catch(W){if(J?.mayBeLess&&W instanceof K4)return 0;throw W}if(!Y.mayBeLess&&X<Y.length)throw new K4}return X}async ignore($){let J=Math.min(PX$,$),Y=new Uint8Array(J),X=0;while(X<$){let W=$-X,Z=await this.readBuffer(Y,{length:Math.min(J,W)});if(Z<0)return Z;X+=Z}return X}abort(){return this.streamReader.abort()}async close(){return this.streamReader.close()}supportsRandomAccess(){return!1}}});var r_;var cf=C(()=>{U9();o7();r_=class r_ extends zX{constructor($,J){super(J);this.uint8Array=$,this.fileInfo={...J?.fileInfo??{},...{size:$.length}}}async readBuffer($,J){if(J?.position)this.position=J.position;let Y=await this.peekBuffer($,J);return this.position+=Y,Y}async peekBuffer($,J){let Y=this.normalizeOptions($,J),X=Math.min(this.uint8Array.length-Y.position,Y.length);if(!Y.mayBeLess&&X<Y.length)throw new K4;return $.set(this.uint8Array.subarray(Y.position,Y.position+X)),X}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});var o_;var pf=C(()=>{U9();o7();o_=class o_ extends zX{constructor($,J){super(J);this.blob=$,this.fileInfo={...J?.fileInfo??{},...{size:$.size,mimeType:$.type}}}async readBuffer($,J){if(J?.position)this.position=J.position;let Y=await this.peekBuffer($,J);return this.position+=Y,Y}async peekBuffer($,J){let Y=this.normalizeOptions($,J),X=Math.min(this.blob.size-Y.position,Y.length);if(!Y.mayBeLess&&X<Y.length)throw new K4;let W=await this.blob.slice(Y.position,Y.position+X).arrayBuffer();return $.set(new Uint8Array(W)),X}close(){return super.close()}supportsRandomAccess(){return!0}setPosition($){this.position=$}}});function lf($,J){let Y=new E3($),X=J??{},W=X.onClose;return X.onClose=async()=>{if(await Y.close(),W)return W()},new T3(Y,X)}function R3($,J){let Y=i_($),X=J??{},W=X.onClose;return X.onClose=async()=>{if(await Y.close(),W)return W()},new T3(Y,X)}function nf($,J){return new r_($,J)}function rf($,J){return new o_($,J)}var I3=C(()=>{U9();df();cf();pf();U9();o7()});import{open as AX$}from"node:fs/promises";var oQ;var t_=C(()=>{o7();U9();oQ=class oQ extends zX{static async fromFile($){let J=await AX$($,"r"),Y=await J.stat();return new oQ(J,{fileInfo:{path:$,size:Y.size}})}constructor($,J){super(J);this.fileHandle=$,this.fileInfo=J.fileInfo}async readBuffer($,J){let Y=this.normalizeOptions($,J);if(this.position=Y.position,Y.length===0)return 0;let X=await this.fileHandle.read($,0,Y.length,Y.position);if(this.position+=X.bytesRead,X.bytesRead<Y.length&&(!J||!J.mayBeLess))throw new K4;return X.bytesRead}async peekBuffer($,J){let Y=this.normalizeOptions($,J),X=await this.fileHandle.read($,0,Y.length,Y.position);if(!Y.mayBeLess&&X.bytesRead<Y.length)throw new K4;return X.bytesRead}async close(){return await this.fileHandle.close(),super.close()}setPosition($){this.position=$}supportsRandomAccess(){return!0}}});import{stat as jX$}from"node:fs/promises";async function of($,J){let Y=lf($,J);if($.path){let X=await jX$($.path);Y.fileInfo.path=$.path,Y.fileInfo.size=X.size}return Y}var tf;var af=C(()=>{I3();t_();t_();I3();tf=oQ.fromFile});var sf=C(()=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */});function RX$(){if(typeof globalThis.TextDecoder>"u")return;return k3!==null&&k3!==void 0?k3:k3=new globalThis.TextDecoder("utf-8")}function $g($,J="utf-8"){switch(J.toLowerCase()){case"utf-8":case"utf8":{let Y=RX$();return Y?Y.decode($):IX$($)}case"utf-16le":return kX$($);case"us-ascii":case"ascii":return bX$($);case"latin1":case"iso-8859-1":return vX$($);case"windows-1252":return fX$($);default:throw RangeError(`Encoding '${J}' not supported`)}}function IX$($){let J=[],Y="",X=0;while(X<$.length){let W=$[X++];if(W<128)Y+=String.fromCharCode(W);else if(W<224){let Z=$[X++]&63;Y+=String.fromCharCode((W&31)<<6|Z)}else if(W<240){let Z=$[X++]&63,G=$[X++]&63;Y+=String.fromCharCode((W&15)<<12|Z<<6|G)}else{let Z=$[X++]&63,G=$[X++]&63,Q=$[X++]&63,H=(W&7)<<18|Z<<12|G<<6|Q;H-=65536,Y+=String.fromCharCode(55296+(H>>10&1023),56320+(H&1023))}if(Y.length>=d5)J.push(Y),Y=""}if(Y)J.push(Y);return J.join("")}function kX$($){let J=$.length&-2;if(J===0)return"";let Y=[],X=d5;for(let W=0;W<J;){let Z=Math.min(X,J-W>>1),G=Array(Z);for(let Q=0;Q<Z;Q++,W+=2)G[Q]=$[W]|$[W+1]<<8;Y.push(String.fromCharCode.apply(null,G))}return Y.join("")}function bX$($){let J=[];for(let Y=0;Y<$.length;Y+=d5){let X=Math.min($.length,Y+d5),W=Array(X-Y);for(let Z=Y,G=0;Z<X;Z++,G++)W[G]=$[Z]&127;J.push(String.fromCharCode.apply(null,W))}return J.join("")}function vX$($){let J=[];for(let Y=0;Y<$.length;Y+=d5){let X=Math.min($.length,Y+d5),W=Array(X-Y);for(let Z=Y,G=0;Z<X;Z++,G++)W[G]=$[Z];J.push(String.fromCharCode.apply(null,W))}return J.join("")}function fX$($){let J=[],Y="";for(let X=0;X<$.length;X++){let W=$[X],Z=W>=128&&W<=159?ef[W]:void 0;if(Y+=Z!==null&&Z!==void 0?Z:String.fromCharCode(W),Y.length>=d5)J.push(Y),Y=""}if(Y)J.push(Y);return J.join("")}var ef,TX$,k3,d5=32768;var Jg=C(()=>{ef={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},TX$={};for(let[$,J]of Object.entries(ef))TX$[J]=Number.parseInt($,10)});function N1($){return new DataView($.buffer,$.byteOffset)}class s1{constructor($,J){this.len=$,this.encoding=J}get($,J=0){let Y=$.subarray(J,J+this.len);return $g(Y,this.encoding)}}var Yg,Q6,c5,C6,a_,Xg,Wg;var tQ=C(()=>{sf();Jg();Yg={len:1,get($,J){return N1($).getUint8(J)},put($,J,Y){return N1($).setUint8(J,Y),J+1}},Q6={len:2,get($,J){return N1($).getUint16(J,!0)},put($,J,Y){return N1($).setUint16(J,Y,!0),J+2}},c5={len:2,get($,J){return N1($).getUint16(J)},put($,J,Y){return N1($).setUint16(J,Y),J+2}},C6={len:4,get($,J){return N1($).getUint32(J,!0)},put($,J,Y){return N1($).setUint32(J,Y,!0),J+4}},a_={len:4,get($,J){return N1($).getUint32(J)},put($,J,Y){return N1($).setUint32(J,Y),J+4}},Xg={len:4,get($,J){return N1($).getInt32(J)},put($,J,Y){return N1($).setInt32(J,Y),J+4}},Wg={len:8,get($,J){return N1($).getBigUint64(J,!0)},put($,J,Y){return N1($).setBigUint64(J,Y,!0),J+8}}});var Gg=t$((wT$,Zg)=>{var t7=1000,a7=t7*60,s7=a7*60,p5=s7*24,xX$=p5*7,yX$=p5*365.25;Zg.exports=function($,J){J=J||{};var Y=typeof $;if(Y==="string"&&$.length>0)return hX$($);else if(Y==="number"&&isFinite($))return J.long?uX$($):mX$($);throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify($))};function hX$($){if($=String($),$.length>100)return;var J=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec($);if(!J)return;var Y=parseFloat(J[1]),X=(J[2]||"ms").toLowerCase();switch(X){case"years":case"year":case"yrs":case"yr":case"y":return Y*yX$;case"weeks":case"week":case"w":return Y*xX$;case"days":case"day":case"d":return Y*p5;case"hours":case"hour":case"hrs":case"hr":case"h":return Y*s7;case"minutes":case"minute":case"mins":case"min":case"m":return Y*a7;case"seconds":case"second":case"secs":case"sec":case"s":return Y*t7;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return Y;default:return}}function mX$($){var J=Math.abs($);if(J>=p5)return Math.round($/p5)+"d";if(J>=s7)return Math.round($/s7)+"h";if(J>=a7)return Math.round($/a7)+"m";if(J>=t7)return Math.round($/t7)+"s";return $+"ms"}function uX$($){var J=Math.abs($);if(J>=p5)return b3($,J,p5,"day");if(J>=s7)return b3($,J,s7,"hour");if(J>=a7)return b3($,J,a7,"minute");if(J>=t7)return b3($,J,t7,"second");return $+" ms"}function b3($,J,Y,X){var W=J>=Y*1.5;return Math.round($/Y)+" "+X+(W?"s":"")}});var s_=t$((UT$,Qg)=>{function dX$($){Y.debug=Y,Y.default=Y,Y.coerce=H,Y.disable=G,Y.enable=W,Y.enabled=Q,Y.humanize=Gg(),Y.destroy=z,Object.keys($).forEach((K)=>{Y[K]=$[K]}),Y.names=[],Y.skips=[],Y.formatters={};function J(K){let w=0;for(let F=0;F<K.length;F++)w=(w<<5)-w+K.charCodeAt(F),w|=0;return Y.colors[Math.abs(w)%Y.colors.length]}Y.selectColor=J;function Y(K){let w,F=null,U,V;function N(...P){if(!N.enabled)return;let B=N,L=Number(new Date),g=L-(w||L);if(B.diff=g,B.prev=w,B.curr=L,w=L,P[0]=Y.coerce(P[0]),typeof P[0]!=="string")P.unshift("%O");let k=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(O,b)=>{if(O==="%%")return"%";k++;let D=Y.formatters[b];if(typeof D==="function"){let _=P[k];O=D.call(B,_),P.splice(k,1),k--}return O}),Y.formatArgs.call(B,P),(B.log||Y.log).apply(B,P)}if(N.namespace=K,N.useColors=Y.useColors(),N.color=Y.selectColor(K),N.extend=X,N.destroy=Y.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(F!==null)return F;if(U!==Y.namespaces)U=Y.namespaces,V=Y.enabled(K);return V},set:(P)=>{F=P}}),typeof Y.init==="function")Y.init(N);return N}function X(K,w){let F=Y(this.namespace+(typeof w>"u"?":":w)+K);return F.log=this.log,F}function W(K){Y.save(K),Y.namespaces=K,Y.names=[],Y.skips=[];let w=(typeof K==="string"?K:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let F of w)if(F[0]==="-")Y.skips.push(F.slice(1));else Y.names.push(F)}function Z(K,w){let F=0,U=0,V=-1,N=0;while(F<K.length)if(U<w.length&&(w[U]===K[F]||w[U]==="*"))if(w[U]==="*")V=U,N=F,U++;else F++,U++;else if(V!==-1)U=V+1,N++,F=N;else return!1;while(U<w.length&&w[U]==="*")U++;return U===w.length}function G(){let K=[...Y.names,...Y.skips.map((w)=>"-"+w)].join(",");return Y.enable(""),K}function Q(K){for(let w of Y.skips)if(Z(K,w))return!1;for(let w of Y.names)if(Z(K,w))return!0;return!1}function H(K){if(K instanceof Error)return K.stack||K.message;return K}function z(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return Y.enable(Y.load()),Y}Qg.exports=dX$});var zg=t$((Hg,v3)=>{Hg.formatArgs=pX$;Hg.save=lX$;Hg.load=nX$;Hg.useColors=cX$;Hg.storage=iX$();Hg.destroy=(()=>{let $=!1;return()=>{if(!$)$=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();Hg.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cX$(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let $;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&($=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt($[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function pX$($){if($[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+$[0]+(this.useColors?"%c ":" ")+"+"+v3.exports.humanize(this.diff),!this.useColors)return;let J="color: "+this.color;$.splice(1,0,J,"color: inherit");let Y=0,X=0;$[0].replace(/%[a-zA-Z%]/g,(W)=>{if(W==="%%")return;if(Y++,W==="%c")X=Y}),$.splice(X,0,J)}Hg.log=console.debug||console.log||(()=>{});function lX$($){try{if($)Hg.storage.setItem("debug",$);else Hg.storage.removeItem("debug")}catch(J){}}function nX$(){let $;try{$=Hg.storage.getItem("debug")||Hg.storage.getItem("DEBUG")}catch(J){}if(!$&&typeof process<"u"&&"env"in process)$=process.env.DEBUG;return $}function iX$(){try{return localStorage}catch($){}}v3.exports=s_()(Hg);var{formatters:rX$}=v3.exports;rX$.j=function($){try{return JSON.stringify($)}catch(J){return"[UnexpectedJSONParseError]: "+J.message}}});var Fg=t$((wg,g3)=>{var YW$=$4("tty"),f3=$4("util");wg.init=zW$;wg.log=GW$;wg.formatArgs=WW$;wg.save=QW$;wg.load=HW$;wg.useColors=XW$;wg.destroy=f3.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");wg.colors=[6,2,3,4,5,1];try{let $=(()=>{throw new Error("Cannot require module "+"supports-color");})();if($&&($.stderr||$).level>=2)wg.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch($){}wg.inspectOpts=Object.keys(process.env).filter(($)=>{return/^debug_/i.test($)}).reduce(($,J)=>{let Y=J.substring(6).toLowerCase().replace(/_([a-z])/g,(W,Z)=>{return Z.toUpperCase()}),X=process.env[J];if(/^(yes|on|true|enabled)$/i.test(X))X=!0;else if(/^(no|off|false|disabled)$/i.test(X))X=!1;else if(X==="null")X=null;else X=Number(X);return $[Y]=X,$},{});function XW$(){return"colors"in wg.inspectOpts?Boolean(wg.inspectOpts.colors):YW$.isatty(process.stderr.fd)}function WW$($){let{namespace:J,useColors:Y}=this;if(Y){let X=this.color,W="\x1B[3"+(X<8?X:"8;5;"+X),Z=`  ${W};1m${J} \x1B[0m`;$[0]=Z+$[0].split(`
`).join(`
`+Z),$.push(W+"m+"+g3.exports.humanize(this.diff)+"\x1B[0m")}else $[0]=ZW$()+J+" "+$[0]}function ZW$(){if(wg.inspectOpts.hideDate)return"";return new Date().toISOString()+" "}function GW$(...$){return process.stderr.write(f3.formatWithOptions(wg.inspectOpts,...$)+`
`)}function QW$($){if($)process.env.DEBUG=$;else delete process.env.DEBUG}function HW$(){return process.env.DEBUG}function zW$($){$.inspectOpts={};let J=Object.keys(wg.inspectOpts);for(let Y=0;Y<J.length;Y++)$.inspectOpts[J[Y]]=wg.inspectOpts[J[Y]]}g3.exports=s_()(wg);var{formatters:Kg}=g3.exports;Kg.o=function($){return this.inspectOpts.colors=this.useColors,f3.inspect($,this.inspectOpts).split(`
`).map((J)=>J.trim()).join(" ")};Kg.O=function($){return this.inspectOpts.colors=this.useColors,f3.inspect($,this.inspectOpts)}});var Dg=t$((MT$,e_)=>{if(typeof process>"u"||process.type==="renderer"||!1||process.__nwjs)e_.exports=zg();else e_.exports=Fg()});var n5,$L,Mg,Vg,Ng;var _g=C(()=>{tQ();n5={LocalFileHeader:67324752,DataDescriptor:134695760,CentralFileHeader:33639248,EndOfCentralDirectory:101010256},$L={get($){return{signature:C6.get($,0),compressedSize:C6.get($,8),uncompressedSize:C6.get($,12)}},len:16},Mg={get($){let J=Q6.get($,6);return{signature:C6.get($,0),minVersion:Q6.get($,4),dataDescriptor:!!(J&8),compressedMethod:Q6.get($,8),compressedSize:C6.get($,18),uncompressedSize:C6.get($,22),filenameLength:Q6.get($,26),extraFieldLength:Q6.get($,28),filename:null}},len:30},Vg={get($){return{signature:C6.get($,0),nrOfThisDisk:Q6.get($,4),nrOfThisDiskWithTheStart:Q6.get($,6),nrOfEntriesOnThisDisk:Q6.get($,8),nrOfEntriesOfSize:Q6.get($,10),sizeOfCd:C6.get($,12),offsetOfStartOfCd:C6.get($,16),zipFileCommentLength:Q6.get($,20)}},len:22},Ng={get($){let J=Q6.get($,8);return{signature:C6.get($,0),minVersion:Q6.get($,6),dataDescriptor:!!(J&8),compressedMethod:Q6.get($,10),compressedSize:C6.get($,20),uncompressedSize:C6.get($,24),filenameLength:Q6.get($,28),extraFieldLength:Q6.get($,30),fileCommentLength:Q6.get($,32),relativeOffsetOfLocalHeader:C6.get($,42),filename:null}},len:46}});function qg($){let J=new Uint8Array(C6.len);return C6.put(J,0,$),J}class sQ{constructor($){this.tokenizer=$,this.syncBuffer=new Uint8Array(JL)}async isZip(){return await this.peekSignature()===n5.LocalFileHeader}peekSignature(){return this.tokenizer.peekToken(C6)}async findEndOfCentralDirectoryLocator(){let $=this.tokenizer,J=Math.min(16384,$.fileInfo.size),Y=this.syncBuffer.subarray(0,J);await this.tokenizer.readBuffer(Y,{position:$.fileInfo.size-J});for(let X=Y.length-4;X>=0;X--)if(Y[X]===x3[0]&&Y[X+1]===x3[1]&&Y[X+2]===x3[2]&&Y[X+3]===x3[3])return $.fileInfo.size-J+X;return-1}async readCentralDirectory(){if(!this.tokenizer.supportsRandomAccess()){KX("Cannot reading central-directory without random-read support");return}KX("Reading central-directory...");let $=this.tokenizer.position,J=await this.findEndOfCentralDirectoryLocator();if(J>0){KX("Central-directory 32-bit signature found");let Y=await this.tokenizer.readToken(Vg,J),X=[];this.tokenizer.setPosition(Y.offsetOfStartOfCd);for(let W=0;W<Y.nrOfEntriesOfSize;++W){let Z=await this.tokenizer.readToken(Ng);if(Z.signature!==n5.CentralFileHeader)throw Error("Expected Central-File-Header signature");Z.filename=await this.tokenizer.readToken(new s1(Z.filenameLength,"utf-8")),await this.tokenizer.ignore(Z.extraFieldLength),await this.tokenizer.ignore(Z.fileCommentLength),X.push(Z),KX(`Add central-directory file-entry: n=${W+1}/${X.length}: filename=${X[W].filename}`)}return this.tokenizer.setPosition($),X}this.tokenizer.setPosition($)}async unzip($){let J=await this.readCentralDirectory();if(J)return this.iterateOverCentralDirectory(J,$);let Y=!1;do{let X=await this.readLocalFileHeader();if(!X)break;let W=$(X);Y=!!W.stop;let Z;if(await this.tokenizer.ignore(X.extraFieldLength),X.dataDescriptor&&X.compressedSize===0){let G=[],Q=JL;KX("Compressed-file-size unknown, scanning for next data-descriptor-signature....");let H=-1;while(H<0&&Q===JL){Q=await this.tokenizer.peekBuffer(this.syncBuffer,{mayBeLess:!0}),H=_W$(this.syncBuffer.subarray(0,Q),NW$);let z=H>=0?H:Q;if(W.handler){let K=new Uint8Array(z);await this.tokenizer.readBuffer(K),G.push(K)}else await this.tokenizer.ignore(z)}if(KX(`Found data-descriptor-signature at pos=${this.tokenizer.position}`),W.handler)await this.inflate(X,LW$(G),W.handler)}else if(W.handler)KX(`Reading compressed-file-data: ${X.compressedSize} bytes`),Z=new Uint8Array(X.compressedSize),await this.tokenizer.readBuffer(Z),await this.inflate(X,Z,W.handler);else KX(`Ignoring compressed-file-data: ${X.compressedSize} bytes`),await this.tokenizer.ignore(X.compressedSize);if(KX(`Reading data-descriptor at pos=${this.tokenizer.position}`),X.dataDescriptor){if((await this.tokenizer.readToken($L)).signature!==134695760)throw Error(`Expected data-descriptor-signature at position ${this.tokenizer.position-$L.len}`)}}while(!Y)}async iterateOverCentralDirectory($,J){for(let Y of $){let X=J(Y);if(X.handler){this.tokenizer.setPosition(Y.relativeOffsetOfLocalHeader);let W=await this.readLocalFileHeader();if(W){await this.tokenizer.ignore(W.extraFieldLength);let Z=new Uint8Array(Y.compressedSize);await this.tokenizer.readBuffer(Z),await this.inflate(W,Z,X.handler)}}if(X.stop)break}}async inflate($,J,Y){if($.compressedMethod===0)return Y(J);if($.compressedMethod!==8)throw Error(`Unsupported ZIP compression method: ${$.compressedMethod}`);KX(`Decompress filename=${$.filename}, compressed-size=${J.length}`);let X=await sQ.decompressDeflateRaw(J);return Y(X)}static async decompressDeflateRaw($){let J=new ReadableStream({start(W){W.enqueue($),W.close()}}),Y=new DecompressionStream("deflate-raw"),X=J.pipeThrough(Y);try{let Z=await new Response(X).arrayBuffer();return new Uint8Array(Z)}catch(W){let Z=W instanceof Error?`Failed to deflate ZIP entry: ${W.message}`:"Unknown decompression error in ZIP entry";throw TypeError(Z)}}async readLocalFileHeader(){let $=await this.tokenizer.peekToken(C6);if($===n5.LocalFileHeader){let J=await this.tokenizer.readToken(Mg);return J.filename=await this.tokenizer.readToken(new s1(J.filenameLength,"utf-8")),J}if($===n5.CentralFileHeader)return!1;if($===3759263696)throw Error("Encrypted ZIP");throw Error("Unexpected signature")}}function _W$($,J){let Y=$.length,X=J.length;if(X>Y)return-1;for(let W=0;W<=Y-X;W++){let Z=!0;for(let G=0;G<X;G++)if($[W+G]!==J[G]){Z=!1;break}if(Z)return W}return-1}function LW$($){let J=$.reduce((W,Z)=>W+Z.length,0),Y=new Uint8Array(J),X=0;for(let W of $)Y.set(W,X),X+=W.length;return Y}var Lg,KX,JL=262144,NW$,x3;var Bg=C(()=>{tQ();_g();Lg=q5(Dg(),1);KX=Lg.default("tokenizer:inflate"),NW$=qg(n5.DataDescriptor),x3=qg(n5.EndOfCentralDirectory)});class y3{constructor($){this.tokenizer=$}inflate(){let $=this.tokenizer;return new ReadableStream({async pull(J){let Y=new Uint8Array(1024),X=await $.readBuffer(Y,{mayBeLess:!0});if(X===0){J.close();return}J.enqueue(Y.subarray(0,X))}}).pipeThrough(new DecompressionStream("gzip"))}}var Og=C(()=>{Bg()});function YL($){let{byteLength:J}=$;if(J===6)return $.getUint16(0)*4294967296+$.getUint32(2);if(J===5)return $.getUint8(0)*4294967296+$.getUint32(1);if(J===4)return $.getUint32(0);if(J===3)return $.getUint8(0)*65536+$.getUint16(1);if(J===2)return $.getUint16(0);if(J===1)return $.getUint8(0)}var AT$,jT$,ET$;var Pg=C(()=>{AT$={utf8:new globalThis.TextDecoder("utf8")},jT$=new globalThis.TextEncoder,ET$=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"))});function Sg($,J){if(J==="utf-16le"){let Y=[];for(let X=0;X<$.length;X++){let W=$.charCodeAt(X);Y.push(W&255,W>>8&255)}return Y}if(J==="utf-16be"){let Y=[];for(let X=0;X<$.length;X++){let W=$.charCodeAt(X);Y.push(W>>8&255,W&255)}return Y}return[...$].map((Y)=>Y.charCodeAt(0))}function Ag($,J=0){let Y=Number.parseInt(new s1(6).get($,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(Y))return!1;let X=256;for(let W=J;W<J+148;W++)X+=$[W];for(let W=J+156;W<J+512;W++)X+=$[W];return Y===X}var jg;var Eg=C(()=>{tQ();jg={get:($,J)=>$[J+3]&127|$[J+2]<<7|$[J+1]<<14|$[J]<<21,len:4}});var Cg,Tg;var Rg=C(()=>{Cg=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ttc","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx","vtt","apk","drc","lz4","potx","xltx","dotx","xltm","ott","ots","otp","odg","otg","xlsm","docm","dotm","potm","pptm","jar","jmp","rm","sav","ppsm","ppsx","tar.gz","reg","dat"],Tg=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.ms-powerpoint.slideshow.macroenabled.12","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/vnd.apache.arrow.file","video/mp4","audio/midi","video/matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","video/ogg","audio/ogg","audio/ogg; codecs=opus","application/ogg","audio/flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","font/collection","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","text/vtt","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/vnd.apache.parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio","application/vnd.android.package-archive","application/vnd.google.draco","application/x-lz4","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-excel.template.macroenabled.12","application/vnd.oasis.opendocument.text-template","application/vnd.oasis.opendocument.spreadsheet-template","application/vnd.oasis.opendocument.presentation-template","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.graphics-template","application/vnd.ms-excel.sheet.macroenabled.12","application/vnd.ms-word.document.macroenabled.12","application/vnd.ms-word.template.macroenabled.12","application/vnd.ms-powerpoint.template.macroenabled.12","application/vnd.ms-powerpoint.presentation.macroenabled.12","application/java-archive","application/vnd.rn-realmedia","application/x-spss-sav","application/x-ms-regedit","application/x-ft-windows-registry-hive","application/x-jmp-data"]});async function Ig($,J){return new e7(J).fromBuffer($)}async function kg($,J){return new e7(J).fromBlob($)}function XL($){switch($=$.toLowerCase(),$){case"application/epub+zip":return{ext:"epub",mime:$};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:$};case"application/vnd.oasis.opendocument.text-template":return{ext:"ott",mime:$};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:$};case"application/vnd.oasis.opendocument.spreadsheet-template":return{ext:"ots",mime:$};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:$};case"application/vnd.oasis.opendocument.presentation-template":return{ext:"otp",mime:$};case"application/vnd.oasis.opendocument.graphics":return{ext:"odg",mime:$};case"application/vnd.oasis.opendocument.graphics-template":return{ext:"otg",mime:$};case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":return{ext:"ppsx",mime:$};case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return{ext:"xlsx",mime:$};case"application/vnd.ms-excel.sheet.macroenabled":return{ext:"xlsm",mime:"application/vnd.ms-excel.sheet.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":return{ext:"xltx",mime:$};case"application/vnd.ms-excel.template.macroenabled":return{ext:"xltm",mime:"application/vnd.ms-excel.template.macroenabled.12"};case"application/vnd.ms-powerpoint.slideshow.macroenabled":return{ext:"ppsm",mime:"application/vnd.ms-powerpoint.slideshow.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return{ext:"docx",mime:$};case"application/vnd.ms-word.document.macroenabled":return{ext:"docm",mime:"application/vnd.ms-word.document.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":return{ext:"dotx",mime:$};case"application/vnd.ms-word.template.macroenabledtemplate":return{ext:"dotm",mime:"application/vnd.ms-word.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.template":return{ext:"potx",mime:$};case"application/vnd.ms-powerpoint.template.macroenabled":return{ext:"potm",mime:"application/vnd.ms-powerpoint.template.macroenabled.12"};case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return{ext:"pptx",mime:$};case"application/vnd.ms-powerpoint.presentation.macroenabled":return{ext:"pptm",mime:"application/vnd.ms-powerpoint.presentation.macroenabled.12"};case"application/vnd.ms-visio.drawing":return{ext:"vsdx",mime:"application/vnd.visio"};case"application/vnd.ms-package.3dmanufacturing-3dmodel+xml":return{ext:"3mf",mime:"model/3mf"};default:}}function wX($,J,Y){Y={offset:0,...Y};for(let[X,W]of J.entries())if(Y.mask){if(W!==(Y.mask[X]&$[X+Y.offset]))return!1}else if(W!==$[X+Y.offset])return!1;return!0}async function bg($,J){return new e7(J).fromTokenizer($)}class e7{constructor($){this.options={mpegOffsetTolerance:0,...$},this.detectors=[...$?.customDetectors??[],{id:"core",detect:this.detectConfident},{id:"core.imprecise",detect:this.detectImprecise}],this.tokenizerOptions={abortSignal:$?.signal}}async fromTokenizer($){let J=$.position;for(let Y of this.detectors){let X=await Y.detect($);if(X)return X;if(J!==$.position)return}}async fromBuffer($){if(!($ instanceof Uint8Array||$ instanceof ArrayBuffer))throw TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof $}\``);let J=$ instanceof Uint8Array?$:new Uint8Array($);if(!(J?.length>1))return;return this.fromTokenizer(nf(J,this.tokenizerOptions))}async fromBlob($){let J=rf($,this.tokenizerOptions);try{return await this.fromTokenizer(J)}finally{await J.close()}}async fromStream($){let J=R3($,this.tokenizerOptions);try{return await this.fromTokenizer(J)}finally{await J.close()}}async toDetectionStream($,J){let{sampleSize:Y=eQ}=J,X,W,Z=$.getReader({mode:"byob"});try{let{value:H,done:z}=await Z.read(new Uint8Array(Y));if(W=H,!z&&H)try{X=await this.fromBuffer(H.subarray(0,Y))}catch(K){if(!(K instanceof K4))throw K;X=void 0}W=H}finally{Z.releaseLock()}let G=new TransformStream({async start(H){H.enqueue(W)},transform(H,z){z.enqueue(H)}}),Q=$.pipeThrough(G);return Q.fileType=X,Q}check($,J){return wX(this.buffer,$,J)}checkString($,J){return this.check(Sg($,J?.encoding),J)}detectConfident=async($)=>{if(this.buffer=new Uint8Array(eQ),$.fileInfo.size===void 0)$.fileInfo.size=Number.MAX_SAFE_INTEGER;if(this.tokenizer=$,await $.peekBuffer(this.buffer,{length:32,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33])){if(await $.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14}))return{ext:"eps",mime:"application/eps"};return{ext:"ps",mime:"application/postscript"}}if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.detectConfident($);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8])){let Y=new y3($).inflate(),X=!0;try{let W;try{W=await this.fromStream(Y)}catch{X=!1}if(W&&W.ext==="tar")return{ext:"tar.gz",mime:"application/gzip"}}finally{if(X)await Y.cancel()}return{ext:"gz",mime:"application/gzip"}}if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await $.ignore(6);let J=await $.readToken(jg);if($.position+J>$.fileInfo.size)return{ext:"mp3",mime:"audio/mpeg"};return await $.ignore(J),this.fromTokenizer($)}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255])){if(this.check([247],{offset:3}))return{ext:"jls",mime:"image/jls"};return{ext:"jpg",mime:"image/jpeg"}}if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){let J;return await new sQ($).unzip((Y)=>{switch(Y.filename){case"META-INF/mozilla.rsa":return J={ext:"xpi",mime:"application/x-xpinstall"},{stop:!0};case"META-INF/MANIFEST.MF":return J={ext:"jar",mime:"application/java-archive"},{stop:!0};case"mimetype":return{async handler(X){let W=new TextDecoder("utf-8").decode(X).trim();J=XL(W)},stop:!0};case"[Content_Types].xml":return{async handler(X){let W=new TextDecoder("utf-8").decode(X),Z=W.indexOf('.main+xml"');if(Z===-1){if(W.includes('ContentType="application/vnd.ms-package.3dmanufacturing-3dmodel+xml"'))J=XL("application/vnd.ms-package.3dmanufacturing-3dmodel+xml")}else{W=W.slice(0,Math.max(0,Z));let G=W.lastIndexOf('"'),Q=W.slice(Math.max(0,G+1));J=XL(Q)}},stop:!0};default:if(/classes\d*\.dex/.test(Y.filename))return J={ext:"apk",mime:"application/vnd.android.package-archive"},{stop:!0};return{}}}).catch((Y)=>{if(!(Y instanceof K4))throw Y}),J??{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await $.ignore(28);let J=new Uint8Array(8);if(await $.readBuffer(J),wX(J,[79,112,117,115,72,101,97,100]))return{ext:"opus",mime:"audio/ogg; codecs=opus"};if(wX(J,[128,116,104,101,111,114,97]))return{ext:"ogv",mime:"video/ogg"};if(wX(J,[1,118,105,100,101,111,0]))return{ext:"ogm",mime:"video/ogg"};if(wX(J,[127,70,76,65,67]))return{ext:"oga",mime:"audio/ogg"};if(wX(J,[83,112,101,101,120,32,32]))return{ext:"spx",mime:"audio/ogg"};if(wX(J,[1,118,111,114,98,105,115]))return{ext:"ogg",mime:"audio/ogg"};return{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF"))return{ext:"pdf",mime:"application/pdf"};if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let J=await this.readTiffHeader(!1);if(J)return J}if(this.check([77,77])){let J=await this.readTiffHeader(!0);if(J)return J}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function J(){let G=await $.peekNumber(Yg),Q=128,H=0;while((G&Q)===0&&Q!==0)++H,Q>>=1;let z=new Uint8Array(H+1);return await $.readBuffer(z),z}async function Y(){let G=await J(),Q=await J();Q[0]^=128>>Q.length-1;let H=Math.min(6,Q.length),z=new DataView(G.buffer),K=new DataView(Q.buffer,Q.length-H,H);return{id:YL(z),len:YL(K)}}async function X(G){while(G>0){let Q=await Y();if(Q.id===17026)return(await $.readToken(new s1(Q.len))).replaceAll(/\00.*$/g,"");await $.ignore(Q.len),--G}}let W=await Y();switch(await X(W.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/matroska"};default:return}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1")||this.checkString("PARE"))return{ext:"parquet",mime:"application/vnd.apache.parquet"};if(this.checkString("ttcf"))return{ext:"ttc",mime:"font/collection"};if(this.check([254,237,250,206])||this.check([254,237,250,207])||this.check([206,250,237,254])||this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([4,34,77,24]))return{ext:"lz4",mime:"application/x-lz4"};if(this.checkString("regf"))return{ext:"dat",mime:"application/x-ft-windows-registry-hive"};if(this.checkString("$FL2")||this.checkString("$FL3"))return{ext:"sav",mime:"application/x-spss-sav"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190])){let J=a_.get(this.buffer,4),Y=c5.get(this.buffer,6);if(J>0&&J<=30)return{ext:"macho",mime:"application/x-mach-binary"};if(Y>30)return{ext:"class",mime:"application/java-vm"}}if(this.checkString(".RMF"))return{ext:"rm",mime:"application/vnd.rn-realmedia"};if(this.checkString("DRACO"))return{ext:"drc",mime:"application/vnd.google.draco"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let J=new s1(4,"latin1").get(this.buffer,2);if(J.match("^d*")&&J>=1000&&J<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>")){if(await $.ignore(8),await $.readToken(new s1(13,"ascii"))==="debian-binary")return{ext:"deb",mime:"application/x-deb"};return{ext:"ar",mime:"application/x-unix-archive"}}if(this.checkString("WEBVTT")&&[`
`,"\r","\t"," ","\x00"].some((J)=>this.checkString(J,{offset:6})))return{ext:"vtt",mime:"text/vtt"};if(this.check([137,80,78,71,13,10,26,10])){await $.ignore(8);async function J(){return{length:await $.readToken(Xg),type:await $.readToken(new s1(4,"latin1"))}}do{let Y=await J();if(Y.length<0)return;switch(Y.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await $.ignore(Y.length+4)}}while($.position+8<$.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/vnd.apache.arrow.file"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let J=new s1(4,"latin1").get(this.buffer,8).replace("\x00"," ").trim();switch(J){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:if(J.startsWith("3g")){if(J.startsWith("3g2"))return{ext:"3g2",mime:"video/3gpp2"};return{ext:"3gp",mime:"video/3gpp"}}return{ext:"mp4",mime:"video/mp4"}}}if(this.checkString(`REGEDIT4\r
`))return{ext:"reg",mime:"application/x-ms-regedit"};if(this.check([82,73,70,70])){if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function J(){let Y=new Uint8Array(16);return await $.readBuffer(Y),{id:Y,size:Number(await $.readToken(Wg))}}await $.ignore(30);while($.position+24<$.fileInfo.size){let Y=await J(),X=Y.size-24;if(wX(Y.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let W=new Uint8Array(16);if(X-=await $.readBuffer(W),wX(W,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(wX(W,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await $.ignore(X)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await $.ignore(20),await $.readToken(new s1(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255])){if(this.checkString("<?xml ",{offset:2,encoding:"utf-16be"}))return{ext:"xml",mime:"application/xml"};return}if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await $.peekBuffer(this.buffer,{length:Math.min(256,$.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("**ACE",{offset:7})&&this.checkString("**",{offset:12}))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let J=new DataView(this.buffer.buffer).getUint32(12,!0);if(J>12&&this.buffer.length>=J+16)try{let Y=new TextDecoder().decode(this.buffer.subarray(16,J+16));if(JSON.parse(Y).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \x00"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(this.check([255,255,0,0,7,0,0,0,4,0,0,0,1,0,1,0])||this.check([0,0,255,255,0,0,0,7,0,0,0,4,0,1,0,1]))return{ext:"jmp",mime:"application/x-jmp-data"};if(await $.peekBuffer(this.buffer,{length:Math.min(512,$.fileInfo.size),mayBeLess:!0}),this.checkString("ustar",{offset:257})&&(this.checkString("\x00",{offset:262})||this.checkString(" ",{offset:262}))||this.check([0,0,0,0,0,0],{offset:257})&&Ag(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254])){if(this.checkString("<?xml ",{offset:2,encoding:"utf-16le"}))return{ext:"xml",mime:"application/xml"};if(this.check([255,14],{offset:2})&&this.checkString("SketchUp Model",{offset:4,encoding:"utf-16le"}))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(this.checkString(`Windows Registry Editor Version 5.00\r
`,{offset:2,encoding:"utf-16le"}))return{ext:"reg",mime:"application/x-ms-regedit"};return}if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"}};detectImprecise=async($)=>{if(this.buffer=new Uint8Array(eQ),await $.peekBuffer(this.buffer,{length:Math.min(8,$.fileInfo.size),mayBeLess:!0}),this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(await $.peekBuffer(this.buffer,{length:Math.min(2+this.options.mpegOffsetTolerance,$.fileInfo.size),mayBeLess:!0}),this.buffer.length>=2+this.options.mpegOffsetTolerance)for(let J=0;J<=this.options.mpegOffsetTolerance;++J){let Y=this.scanMpeg(J);if(Y)return Y}};async readTiffTag($){let J=await this.tokenizer.readToken($?c5:Q6);switch(this.tokenizer.ignore(10),J){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD($){let J=await this.tokenizer.readToken($?c5:Q6);for(let Y=0;Y<J;++Y){let X=await this.readTiffTag($);if(X)return X}}async readTiffHeader($){let J=($?c5:Q6).get(this.buffer,2),Y=($?a_:C6).get(this.buffer,4);if(J===42){if(Y>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(Y>=8){let W=($?c5:Q6).get(this.buffer,8),Z=($?c5:Q6).get(this.buffer,10);if(W===28&&Z===254||W===31&&Z===11)return{ext:"nef",mime:"image/x-nikon-nef"}}}return await this.tokenizer.ignore(Y),await this.readTiffIFD($)??{ext:"tif",mime:"image/tiff"}}if(J===43)return{ext:"tif",mime:"image/tiff"}}scanMpeg($){if(this.check([255,224],{offset:$,mask:[255,224]})){if(this.check([16],{offset:$+1,mask:[22]})){if(this.check([8],{offset:$+1,mask:[8]}))return{ext:"aac",mime:"audio/aac"};return{ext:"aac",mime:"audio/aac"}}if(this.check([2],{offset:$+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:$+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:$+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}}var eQ=4100,vg,fg;var WL=C(()=>{tQ();I3();Og();Pg();Eg();Rg();vg=new Set(Cg),fg=new Set(Tg)});var xg={};k4(xg,{supportedMimeTypes:()=>fg,supportedExtensions:()=>vg,fileTypeStream:()=>AW$,fileTypeFromTokenizer:()=>bg,fileTypeFromStream:()=>SW$,fileTypeFromFile:()=>PW$,fileTypeFromBuffer:()=>Ig,fileTypeFromBlob:()=>kg,FileTypeParser:()=>$H});import{ReadableStream as qW$}from"node:stream/web";import{pipeline as gg,PassThrough as BW$,Readable as OW$}from"node:stream";async function PW$($,J){return new $H(J).fromFile($,J)}async function SW$($,J){return new $H(J).fromStream($)}async function AW$($,J={}){return new $H(J).toDetectionStream($,J)}var $H;var yg=C(()=>{af();WL();WL();$H=class $H extends e7{async fromStream($){let J=await($ instanceof qW$?R3($,this.tokenizerOptions):of($,this.tokenizerOptions));try{return await super.fromTokenizer(J)}finally{await J.close()}}async fromFile($){let J=await tf($);try{return await super.fromTokenizer(J)}finally{await J.close()}}async toDetectionStream($,J={}){if(!($ instanceof OW$))return super.toDetectionStream($,J);let{sampleSize:Y=eQ}=J;return new Promise((X,W)=>{$.on("error",W),$.once("readable",()=>{(async()=>{try{let Z=new BW$,G=gg?gg($,Z,()=>{}):$.pipe(Z),Q=$.read(Y)??$.read()??new Uint8Array(0);try{Z.fileType=await this.fromBuffer(Q)}catch(H){if(H instanceof K4)Z.fileType=void 0;else W(H)}X(G)}catch(Z){W(Z)}})()})})}}});var Zx=t$((Yx)=>{Object.defineProperty(Yx,"__esModule",{value:!0});Yx.parseCookie=$x;Yx.parse=$x;Yx.stringifyCookie=G9$;Yx.stringifySetCookie=i3;Yx.serialize=i3;Yx.parseSetCookie=Q9$;Yx.stringifySetCookie=i3;Yx.serialize=i3;var sg=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,eg=/^[\u0021-\u003A\u003C-\u007E]*$/,J9$=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Y9$=/^[\u0020-\u003A\u003D-\u007E]*$/,X9$=/^-?\d+$/,W9$=Object.prototype.toString,Z9$=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function $x($,J){let Y=new Z9$,X=$.length;if(X<2)return Y;let W=J?.decode||Jx,Z=0;do{let G=HL($,Z,X);if(G===-1)break;let Q=QL($,Z,X);if(G>Q){Z=$.lastIndexOf(";",G-1)+1;continue}let H=F9($,Z,G);if(Y[H]===void 0)Y[H]=W(F9($,G+1,Q));Z=Q+1}while(Z<X);return Y}function G9$($,J){let Y=J?.encode||encodeURIComponent,X=[];for(let W of Object.keys($)){let Z=$[W];if(Z===void 0)continue;if(!sg.test(W))throw TypeError(`cookie name is invalid: ${W}`);let G=Y(Z);if(!eg.test(G))throw TypeError(`cookie val is invalid: ${Z}`);X.push(`${W}=${G}`)}return X.join("; ")}function i3($,J,Y){let X=typeof $==="object"?$:{...Y,name:$,value:String(J)},Z=(typeof J==="object"?J:Y)?.encode||encodeURIComponent;if(!sg.test(X.name))throw TypeError(`argument name is invalid: ${X.name}`);let G=X.value?Z(X.value):"";if(!eg.test(G))throw TypeError(`argument val is invalid: ${X.value}`);let Q=X.name+"="+G;if(X.maxAge!==void 0){if(!Number.isInteger(X.maxAge))throw TypeError(`option maxAge is invalid: ${X.maxAge}`);Q+="; Max-Age="+X.maxAge}if(X.domain){if(!J9$.test(X.domain))throw TypeError(`option domain is invalid: ${X.domain}`);Q+="; Domain="+X.domain}if(X.path){if(!Y9$.test(X.path))throw TypeError(`option path is invalid: ${X.path}`);Q+="; Path="+X.path}if(X.expires){if(!H9$(X.expires)||!Number.isFinite(X.expires.valueOf()))throw TypeError(`option expires is invalid: ${X.expires}`);Q+="; Expires="+X.expires.toUTCString()}if(X.httpOnly)Q+="; HttpOnly";if(X.secure)Q+="; Secure";if(X.partitioned)Q+="; Partitioned";if(X.priority)switch(typeof X.priority==="string"?X.priority.toLowerCase():void 0){case"low":Q+="; Priority=Low";break;case"medium":Q+="; Priority=Medium";break;case"high":Q+="; Priority=High";break;default:throw TypeError(`option priority is invalid: ${X.priority}`)}if(X.sameSite)switch(typeof X.sameSite==="string"?X.sameSite.toLowerCase():X.sameSite){case!0:case"strict":Q+="; SameSite=Strict";break;case"lax":Q+="; SameSite=Lax";break;case"none":Q+="; SameSite=None";break;default:throw TypeError(`option sameSite is invalid: ${X.sameSite}`)}return Q}function Q9$($,J){let Y=J?.decode||Jx,X=$.length,W=QL($,0,X),Z=HL($,0,W),G=Z===-1?{name:"",value:Y(F9($,0,W))}:{name:F9($,0,Z),value:Y(F9($,Z+1,W))},Q=W+1;while(Q<X){let H=QL($,Q,X),z=HL($,Q,H),K=z===-1?F9($,Q,H):F9($,Q,z),w=z===-1?void 0:F9($,z+1,H);switch(K.toLowerCase()){case"httponly":G.httpOnly=!0;break;case"secure":G.secure=!0;break;case"partitioned":G.partitioned=!0;break;case"domain":G.domain=w;break;case"path":G.path=w;break;case"max-age":if(w&&X9$.test(w))G.maxAge=Number(w);break;case"expires":if(!w)break;let F=new Date(w);if(Number.isFinite(F.valueOf()))G.expires=F;break;case"priority":if(!w)break;let U=w.toLowerCase();if(U==="low"||U==="medium"||U==="high")G.priority=U;break;case"samesite":if(!w)break;let V=w.toLowerCase();if(V==="lax"||V==="strict"||V==="none")G.sameSite=V;break}Q=H+1}return G}function QL($,J,Y){let X=$.indexOf(";",J);return X===-1?Y:X}function HL($,J,Y){let X=$.indexOf("=",J);return X<Y?X:-1}function F9($,J,Y){let X=J,W=Y;do{let Z=$.charCodeAt(X);if(Z!==32&&Z!==9)break}while(++X<W);while(W>X){let Z=$.charCodeAt(W-1);if(Z!==32&&Z!==9)break;W--}return $.slice(X,W)}function Jx($){if($.indexOf("%")===-1)return $;try{return decodeURIComponent($)}catch(J){return $}}function H9$($){return W9$.call($)==="[object Date]"}});function xx($){switch($){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw Error(`Unsupported alphabet: ${$}`)}}function zG(...$){let J=$.map(xx).join("");if(J.length===0)throw Error("No valid characters provided for random string generation.");let Y=J.length;return(X,...W)=>{if(X<=0)throw Error("Length must be a positive integer.");let Z=J,G=Y;if(W.length>0)Z=W.map(xx).join(""),G=Z.length;let Q=Math.floor(256/G)*G,H=new Uint8Array(X*2),z=H.length,K="",w=z,F;while(K.length<X){if(w>=z)crypto.getRandomValues(H),w=0;if(F=H[w++],F<Q)K+=Z[F%G]}return K}}var HU=()=>{};function Y4($){return $}var Jq=()=>{};function gU($,J){if(!$||!J)return $;let Y=Object.entries(J).filter(([,{returned:X}])=>X===!1).map(([X])=>X);return Object.entries(structuredClone($)).filter(([X])=>!Y.includes(X)).reduce((X,[W,Z])=>({...X,[W]:Z}),{})}var ly=()=>{};function OG($,J,Y){let X=!1;return function(...W){if(!X)(Y?.warn??console.warn)(`[Deprecation] ${J}`),X=!0;return $.apply(this,W)}}var ny=()=>{};var T6=($)=>{return zG("a-z","A-Z","0-9")($||32)};var Yq=C(()=>{HU()});function i($,J,Y){function X(Q,H){if(!Q._zod)Object.defineProperty(Q,"_zod",{value:{def:H,constr:G,traits:new Set},enumerable:!1});if(Q._zod.traits.has($))return;Q._zod.traits.add($),J(Q,H);let z=G.prototype,K=Object.keys(z);for(let w=0;w<K.length;w++){let F=K[w];if(!(F in Q))Q[F]=z[F].bind(Q)}}let W=Y?.Parent??Object;class Z extends W{}Object.defineProperty(Z,"name",{value:$});function G(Q){var H;let z=Y?.Parent?new Z:this;X(z,Q),(H=z._zod).deferred??(H.deferred=[]);for(let K of z._zod.deferred)K();return z}return Object.defineProperty(G,"init",{value:X}),Object.defineProperty(G,Symbol.hasInstance,{value:(Q)=>{if(Y?.Parent&&Q instanceof Y.Parent)return!0;return Q?._zod?.traits?.has($)}}),Object.defineProperty(G,"name",{value:$}),G}function B6($){if($)Object.assign(TH,$);return TH}var xU,yU,qX,zZ,TH;var PG=C(()=>{xU=Object.freeze({status:"aborted"});yU=Symbol("zod_brand");qX=class qX extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}};zZ=class zZ extends Error{constructor($){super(`Encountered unidirectional transform during encode: ${$}`);this.name="ZodEncodeError"}};TH={}});var w$={};k4(w$,{unwrapMessage:()=>RH,uint8ArrayToHex:()=>t5$,uint8ArrayToBase64url:()=>r5$,uint8ArrayToBase64:()=>oy,stringifyPrimitive:()=>z$,slugify:()=>Zq,shallowClone:()=>Qq,safeExtend:()=>d5$,required:()=>l5$,randomString:()=>f5$,propertyKeyTypes:()=>bH,promiseAllObject:()=>v5$,primitiveTypes:()=>Hq,prefixIssues:()=>$J,pick:()=>h5$,partial:()=>p5$,parsedType:()=>K$,optionalKeys:()=>zq,omit:()=>m5$,objectClone:()=>I5$,numKeys:()=>g5$,nullish:()=>E9,normalizeParams:()=>M$,mergeDefs:()=>VW,merge:()=>c5$,jsonStringifyReplacer:()=>SG,joinValues:()=>e,issue:()=>jG,isPlainObject:()=>T9,isObject:()=>KZ,hexToUint8Array:()=>o5$,getSizableOrigin:()=>vH,getParsedType:()=>x5$,getLengthableOrigin:()=>fH,getEnumValues:()=>IH,getElementAtPath:()=>b5$,floatSafeRemainder:()=>Wq,finalizeIssue:()=>B1,extend:()=>u5$,escapeRegex:()=>bJ,esc:()=>hU,defineLazy:()=>w0,createTransparentProxy:()=>y5$,cloneDef:()=>k5$,clone:()=>h8,cleanRegex:()=>kH,cleanEnum:()=>n5$,captureStackTrace:()=>mU,cached:()=>AG,base64urlToUint8Array:()=>i5$,base64ToUint8Array:()=>ry,assignProp:()=>C9,assertNotEqual:()=>E5$,assertNever:()=>T5$,assertIs:()=>C5$,assertEqual:()=>j5$,assert:()=>R5$,allowsEval:()=>Gq,aborted:()=>R9,NUMBER_FORMAT_RANGES:()=>Kq,Class:()=>ty,BIGINT_FORMAT_RANGES:()=>wq});function j5$($){return $}function E5$($){return $}function C5$($){}function T5$($){throw Error("Unexpected value in exhaustive check")}function R5$($){}function IH($){let J=Object.values($).filter((X)=>typeof X==="number");return Object.entries($).filter(([X,W])=>J.indexOf(+X)===-1).map(([X,W])=>W)}function e($,J="|"){return $.map((Y)=>z$(Y)).join(J)}function SG($,J){if(typeof J==="bigint")return J.toString();return J}function AG($){return{get value(){{let Y=$();return Object.defineProperty(this,"value",{value:Y}),Y}throw Error("cached value already set")}}}function E9($){return $===null||$===void 0}function kH($){let J=$.startsWith("^")?1:0,Y=$.endsWith("$")?$.length-1:$.length;return $.slice(J,Y)}function Wq($,J){let Y=($.toString().split(".")[1]||"").length,X=J.toString(),W=(X.split(".")[1]||"").length;if(W===0&&/\d?e-\d?/.test(X)){let H=X.match(/\d?e-(\d?)/);if(H?.[1])W=Number.parseInt(H[1])}let Z=Y>W?Y:W,G=Number.parseInt($.toFixed(Z).replace(".","")),Q=Number.parseInt(J.toFixed(Z).replace(".",""));return G%Q/10**Z}function w0($,J,Y){let X=void 0;Object.defineProperty($,J,{get(){if(X===iy)return;if(X===void 0)X=iy,X=Y();return X},set(W){Object.defineProperty($,J,{value:W})},configurable:!0})}function I5$($){return Object.create(Object.getPrototypeOf($),Object.getOwnPropertyDescriptors($))}function C9($,J,Y){Object.defineProperty($,J,{value:Y,writable:!0,enumerable:!0,configurable:!0})}function VW(...$){let J={};for(let Y of $){let X=Object.getOwnPropertyDescriptors(Y);Object.assign(J,X)}return Object.defineProperties({},J)}function k5$($){return VW($._zod.def)}function b5$($,J){if(!J)return $;return J.reduce((Y,X)=>Y?.[X],$)}function v5$($){let J=Object.keys($),Y=J.map((X)=>$[X]);return Promise.all(Y).then((X)=>{let W={};for(let Z=0;Z<J.length;Z++)W[J[Z]]=X[Z];return W})}function f5$($=10){let Y="";for(let X=0;X<$;X++)Y+="abcdefghijklmnopqrstuvwxyz"[Math.floor(Math.random()*26)];return Y}function hU($){return JSON.stringify($)}function Zq($){return $.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function KZ($){return typeof $==="object"&&$!==null&&!Array.isArray($)}function T9($){if(KZ($)===!1)return!1;let J=$.constructor;if(J===void 0)return!0;if(typeof J!=="function")return!0;let Y=J.prototype;if(KZ(Y)===!1)return!1;if(Object.prototype.hasOwnProperty.call(Y,"isPrototypeOf")===!1)return!1;return!0}function Qq($){if(T9($))return{...$};if(Array.isArray($))return[...$];return $}function g5$($){let J=0;for(let Y in $)if(Object.prototype.hasOwnProperty.call($,Y))J++;return J}function bJ($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function h8($,J,Y){let X=new $._zod.constr(J??$._zod.def);if(!J||Y?.parent)X._zod.parent=$;return X}function M$($){let J=$;if(!J)return{};if(typeof J==="string")return{error:()=>J};if(J?.message!==void 0){if(J?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");J.error=J.message}if(delete J.message,typeof J.error==="string")return{...J,error:()=>J.error};return J}function y5$($){let J;return new Proxy({},{get(Y,X,W){return J??(J=$()),Reflect.get(J,X,W)},set(Y,X,W,Z){return J??(J=$()),Reflect.set(J,X,W,Z)},has(Y,X){return J??(J=$()),Reflect.has(J,X)},deleteProperty(Y,X){return J??(J=$()),Reflect.deleteProperty(J,X)},ownKeys(Y){return J??(J=$()),Reflect.ownKeys(J)},getOwnPropertyDescriptor(Y,X){return J??(J=$()),Reflect.getOwnPropertyDescriptor(J,X)},defineProperty(Y,X,W){return J??(J=$()),Reflect.defineProperty(J,X,W)}})}function z$($){if(typeof $==="bigint")return $.toString()+"n";if(typeof $==="string")return`"${$}"`;return`${$}`}function zq($){return Object.keys($).filter((J)=>{return $[J]._zod.optin==="optional"&&$[J]._zod.optout==="optional"})}function h5$($,J){let Y=$._zod.def,X=Y.checks;if(X&&X.length>0)throw Error(".pick() cannot be used on object schemas containing refinements");let Z=VW($._zod.def,{get shape(){let G={};for(let Q in J){if(!(Q in Y.shape))throw Error(`Unrecognized key: "${Q}"`);if(!J[Q])continue;G[Q]=Y.shape[Q]}return C9(this,"shape",G),G},checks:[]});return h8($,Z)}function m5$($,J){let Y=$._zod.def,X=Y.checks;if(X&&X.length>0)throw Error(".omit() cannot be used on object schemas containing refinements");let Z=VW($._zod.def,{get shape(){let G={...$._zod.def.shape};for(let Q in J){if(!(Q in Y.shape))throw Error(`Unrecognized key: "${Q}"`);if(!J[Q])continue;delete G[Q]}return C9(this,"shape",G),G},checks:[]});return h8($,Z)}function u5$($,J){if(!T9(J))throw Error("Invalid input to extend: expected a plain object");let Y=$._zod.def.checks;if(Y&&Y.length>0){let Z=$._zod.def.shape;for(let G in J)if(Object.getOwnPropertyDescriptor(Z,G)!==void 0)throw Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}let W=VW($._zod.def,{get shape(){let Z={...$._zod.def.shape,...J};return C9(this,"shape",Z),Z}});return h8($,W)}function d5$($,J){if(!T9(J))throw Error("Invalid input to safeExtend: expected a plain object");let Y=VW($._zod.def,{get shape(){let X={...$._zod.def.shape,...J};return C9(this,"shape",X),X}});return h8($,Y)}function c5$($,J){let Y=VW($._zod.def,{get shape(){let X={...$._zod.def.shape,...J._zod.def.shape};return C9(this,"shape",X),X},get catchall(){return J._zod.def.catchall},checks:[]});return h8($,Y)}function p5$($,J,Y){let W=J._zod.def.checks;if(W&&W.length>0)throw Error(".partial() cannot be used on object schemas containing refinements");let G=VW(J._zod.def,{get shape(){let Q=J._zod.def.shape,H={...Q};if(Y)for(let z in Y){if(!(z in Q))throw Error(`Unrecognized key: "${z}"`);if(!Y[z])continue;H[z]=$?new $({type:"optional",innerType:Q[z]}):Q[z]}else for(let z in Q)H[z]=$?new $({type:"optional",innerType:Q[z]}):Q[z];return C9(this,"shape",H),H},checks:[]});return h8(J,G)}function l5$($,J,Y){let X=VW(J._zod.def,{get shape(){let W=J._zod.def.shape,Z={...W};if(Y)for(let G in Y){if(!(G in Z))throw Error(`Unrecognized key: "${G}"`);if(!Y[G])continue;Z[G]=new $({type:"nonoptional",innerType:W[G]})}else for(let G in W)Z[G]=new $({type:"nonoptional",innerType:W[G]});return C9(this,"shape",Z),Z}});return h8(J,X)}function R9($,J=0){if($.aborted===!0)return!0;for(let Y=J;Y<$.issues.length;Y++)if($.issues[Y]?.continue!==!0)return!0;return!1}function $J($,J){return J.map((Y)=>{var X;return(X=Y).path??(X.path=[]),Y.path.unshift($),Y})}function RH($){return typeof $==="string"?$:$?.message}function B1($,J,Y){let X={...$,path:$.path??[]};if(!$.message){let W=RH($.inst?._zod.def?.error?.($))??RH(J?.error?.($))??RH(Y.customError?.($))??RH(Y.localeError?.($))??"Invalid input";X.message=W}if(delete X.inst,delete X.continue,!J?.reportInput)delete X.input;return X}function vH($){if($ instanceof Set)return"set";if($ instanceof Map)return"map";if($ instanceof File)return"file";return"unknown"}function fH($){if(Array.isArray($))return"array";if(typeof $==="string")return"string";return"unknown"}function K$($){let J=typeof $;switch(J){case"number":return Number.isNaN($)?"nan":"number";case"object":{if($===null)return"null";if(Array.isArray($))return"array";let Y=$;if(Y&&Object.getPrototypeOf(Y)!==Object.prototype&&"constructor"in Y&&Y.constructor)return Y.constructor.name}}return J}function jG(...$){let[J,Y,X]=$;if(typeof J==="string")return{message:J,code:"custom",input:Y,inst:X};return{...J}}function n5$($){return Object.entries($).filter(([J,Y])=>{return Number.isNaN(Number.parseInt(J,10))}).map((J)=>J[1])}function ry($){let J=atob($),Y=new Uint8Array(J.length);for(let X=0;X<J.length;X++)Y[X]=J.charCodeAt(X);return Y}function oy($){let J="";for(let Y=0;Y<$.length;Y++)J+=String.fromCharCode($[Y]);return btoa(J)}function i5$($){let J=$.replace(/-/g,"+").replace(/_/g,"/"),Y="=".repeat((4-J.length%4)%4);return ry(J+Y)}function r5$($){return oy($).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function o5$($){let J=$.replace(/^0x/,"");if(J.length%2!==0)throw Error("Invalid hex string length");let Y=new Uint8Array(J.length/2);for(let X=0;X<J.length;X+=2)Y[X/2]=Number.parseInt(J.slice(X,X+2),16);return Y}function t5$($){return Array.from($).map((J)=>J.toString(16).padStart(2,"0")).join("")}class ty{constructor(...$){}}var iy,mU,Gq,x5$=($)=>{let J=typeof $;switch(J){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN($)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":if(Array.isArray($))return"array";if($===null)return"null";if($.then&&typeof $.then==="function"&&$.catch&&typeof $.catch==="function")return"promise";if(typeof Map<"u"&&$ instanceof Map)return"map";if(typeof Set<"u"&&$ instanceof Set)return"set";if(typeof Date<"u"&&$ instanceof Date)return"date";if(typeof File<"u"&&$ instanceof File)return"file";return"object";default:throw Error(`Unknown data type: ${J}`)}},bH,Hq,Kq,wq;var f$=C(()=>{iy=Symbol("evaluating");mU="captureStackTrace"in Error?Error.captureStackTrace:(...$)=>{};Gq=AG(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch($){return!1}});bH=new Set(["string","number","symbol"]),Hq=new Set(["string","number","bigint","boolean","symbol","undefined"]);Kq={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-340282346638528860000000000000000000000,340282346638528860000000000000000000000],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},wq={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]}});function EG($,J=(Y)=>Y.message){let Y={},X=[];for(let W of $.issues)if(W.path.length>0)Y[W.path[0]]=Y[W.path[0]]||[],Y[W.path[0]].push(J(W));else X.push(J(W));return{formErrors:X,fieldErrors:Y}}function CG($,J=(Y)=>Y.message){let Y={_errors:[]},X=(W)=>{for(let Z of W.issues)if(Z.code==="invalid_union"&&Z.errors.length)Z.errors.map((G)=>X({issues:G}));else if(Z.code==="invalid_key")X({issues:Z.issues});else if(Z.code==="invalid_element")X({issues:Z.issues});else if(Z.path.length===0)Y._errors.push(J(Z));else{let G=Y,Q=0;while(Q<Z.path.length){let H=Z.path[Q];if(Q!==Z.path.length-1)G[H]=G[H]||{_errors:[]};else G[H]=G[H]||{_errors:[]},G[H]._errors.push(J(Z));G=G[H],Q++}}};return X($),Y}function uU($,J=(Y)=>Y.message){let Y={errors:[]},X=(W,Z=[])=>{var G,Q;for(let H of W.issues)if(H.code==="invalid_union"&&H.errors.length)H.errors.map((z)=>X({issues:z},H.path));else if(H.code==="invalid_key")X({issues:H.issues},H.path);else if(H.code==="invalid_element")X({issues:H.issues},H.path);else{let z=[...Z,...H.path];if(z.length===0){Y.errors.push(J(H));continue}let K=Y,w=0;while(w<z.length){let F=z[w],U=w===z.length-1;if(typeof F==="string")K.properties??(K.properties={}),(G=K.properties)[F]??(G[F]={errors:[]}),K=K.properties[F];else K.items??(K.items=[]),(Q=K.items)[F]??(Q[F]={errors:[]}),K=K.items[F];if(U)K.errors.push(J(H));w++}}};return X($),Y}function sy($){let J=[],Y=$.map((X)=>typeof X==="object"?X.key:X);for(let X of Y)if(typeof X==="number")J.push(`[${X}]`);else if(typeof X==="symbol")J.push(`[${JSON.stringify(String(X))}]`);else if(/[^\w$]/.test(X))J.push(`[${JSON.stringify(X)}]`);else{if(J.length)J.push(".");J.push(X)}return J.join("")}function dU($){let J=[],Y=[...$.issues].sort((X,W)=>(X.path??[]).length-(W.path??[]).length);for(let X of Y)if(J.push(`✖ ${X.message}`),X.path?.length)J.push(`  → at ${sy(X.path)}`);return J.join(`
`)}var ay=($,J)=>{$.name="$ZodError",Object.defineProperty($,"_zod",{value:$._zod,enumerable:!1}),Object.defineProperty($,"issues",{value:J,enumerable:!1}),$.message=JSON.stringify(J,SG,2),Object.defineProperty($,"toString",{value:()=>$.message,enumerable:!1})},gH,O1;var Uq=C(()=>{PG();f$();gH=i("$ZodError",ay),O1=i("$ZodError",ay,{Parent:Error})});var TG=($)=>(J,Y,X,W)=>{let Z=X?Object.assign(X,{async:!1}):{async:!1},G=J._zod.run({value:Y,issues:[]},Z);if(G instanceof Promise)throw new qX;if(G.issues.length){let Q=new(W?.Err??$)(G.issues.map((H)=>B1(H,Z,B6())));throw mU(Q,W?.callee),Q}return G.value},cU,RG=($)=>async(J,Y,X,W)=>{let Z=X?Object.assign(X,{async:!0}):{async:!0},G=J._zod.run({value:Y,issues:[]},Z);if(G instanceof Promise)G=await G;if(G.issues.length){let Q=new(W?.Err??$)(G.issues.map((H)=>B1(H,Z,B6())));throw mU(Q,W?.callee),Q}return G.value},pU,IG=($)=>(J,Y,X)=>{let W=X?{...X,async:!1}:{async:!1},Z=J._zod.run({value:Y,issues:[]},W);if(Z instanceof Promise)throw new qX;return Z.issues.length?{success:!1,error:new($??gH)(Z.issues.map((G)=>B1(G,W,B6())))}:{success:!0,data:Z.value}},Fq,kG=($)=>async(J,Y,X)=>{let W=X?Object.assign(X,{async:!0}):{async:!0},Z=J._zod.run({value:Y,issues:[]},W);if(Z instanceof Promise)Z=await Z;return Z.issues.length?{success:!1,error:new $(Z.issues.map((G)=>B1(G,W,B6())))}:{success:!0,data:Z.value}},Dq,lU=($)=>(J,Y,X)=>{let W=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return TG($)(J,Y,W)},s5$,nU=($)=>(J,Y,X)=>{return TG($)(J,Y,X)},e5$,iU=($)=>async(J,Y,X)=>{let W=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return RG($)(J,Y,W)},$Z$,rU=($)=>async(J,Y,X)=>{return RG($)(J,Y,X)},JZ$,oU=($)=>(J,Y,X)=>{let W=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return IG($)(J,Y,W)},YZ$,tU=($)=>(J,Y,X)=>{return IG($)(J,Y,X)},XZ$,aU=($)=>async(J,Y,X)=>{let W=X?Object.assign(X,{direction:"backward"}):{direction:"backward"};return kG($)(J,Y,W)},WZ$,sU=($)=>async(J,Y,X)=>{return kG($)(J,Y,X)},ZZ$;var Mq=C(()=>{PG();Uq();f$();cU=TG(O1),pU=RG(O1),Fq=IG(O1),Dq=kG(O1),s5$=lU(O1),e5$=nU(O1),$Z$=iU(O1),JZ$=rU(O1),YZ$=oU(O1),XZ$=tU(O1),WZ$=aU(O1),ZZ$=sU(O1)});var JJ={};k4(JJ,{xid:()=>Lq,uuid7:()=>zZ$,uuid6:()=>HZ$,uuid4:()=>QZ$,uuid:()=>wZ,uppercase:()=>cq,unicodeEmail:()=>ey,undefined:()=>uq,ulid:()=>_q,time:()=>vq,string:()=>gq,sha512_hex:()=>RZ$,sha512_base64url:()=>kZ$,sha512_base64:()=>IZ$,sha384_hex:()=>EZ$,sha384_base64url:()=>TZ$,sha384_base64:()=>CZ$,sha256_hex:()=>SZ$,sha256_base64url:()=>jZ$,sha256_base64:()=>AZ$,sha1_hex:()=>BZ$,sha1_base64url:()=>PZ$,sha1_base64:()=>OZ$,rfc5322Email:()=>wZ$,number:()=>xH,null:()=>mq,nanoid:()=>Bq,md5_hex:()=>_Z$,md5_base64url:()=>qZ$,md5_base64:()=>LZ$,mac:()=>Cq,lowercase:()=>dq,ksuid:()=>qq,ipv6:()=>Eq,ipv4:()=>jq,integer:()=>yq,idnEmail:()=>UZ$,html5Email:()=>KZ$,hostname:()=>MZ$,hex:()=>NZ$,guid:()=>Pq,extendedDuration:()=>GZ$,emoji:()=>Aq,email:()=>Sq,e164:()=>kq,duration:()=>Oq,domain:()=>VZ$,datetime:()=>fq,date:()=>bq,cuid2:()=>Nq,cuid:()=>Vq,cidrv6:()=>Rq,cidrv4:()=>Tq,browserEmail:()=>FZ$,boolean:()=>hq,bigint:()=>xq,base64url:()=>eU,base64:()=>Iq});function Aq(){return new RegExp(DZ$,"u")}function Jh($){return typeof $.precision==="number"?$.precision===-1?"(?:[01]\\d|2[0-3]):[0-5]\\d":$.precision===0?"(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d":`(?:[01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d\\.\\d{${$.precision}}`:"(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d(?:\\.\\d+)?)?"}function vq($){return new RegExp(`^${Jh($)}$`)}function fq($){let J=Jh({precision:$.precision}),Y=["Z"];if($.local)Y.push("");if($.offset)Y.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let X=`${J}(?:${Y.join("|")})`;return new RegExp(`^${$h}T(?:${X})$`)}function yH($,J){return new RegExp(`^[A-Za-z0-9+/]{${$}}${J}$`)}function hH($){return new RegExp(`^[A-Za-z0-9_-]{${$}}$`)}var Vq,Nq,_q,Lq,qq,Bq,Oq,GZ$,Pq,wZ=($)=>{if(!$)return/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/;return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${$}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`)},QZ$,HZ$,zZ$,Sq,KZ$,wZ$,ey,UZ$,FZ$,DZ$="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",jq,Eq,Cq=($)=>{let J=bJ($??":");return new RegExp(`^(?:[0-9A-F]{2}${J}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${J}){5}[0-9a-f]{2}$`)},Tq,Rq,Iq,eU,MZ$,VZ$,kq,$h="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",bq,gq=($)=>{let J=$?`[\\s\\S]{${$?.minimum??0},${$?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${J}$`)},xq,yq,xH,hq,mq,uq,dq,cq,NZ$,_Z$,LZ$,qZ$,BZ$,OZ$,PZ$,SZ$,AZ$,jZ$,EZ$,CZ$,TZ$,RZ$,IZ$,kZ$;var $F=C(()=>{f$();Vq=/^[cC][^\s-]{8,}$/,Nq=/^[0-9a-z]+$/,_q=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Lq=/^[0-9a-vA-V]{20}$/,qq=/^[A-Za-z0-9]{27}$/,Bq=/^[a-zA-Z0-9_-]{21}$/,Oq=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,GZ$=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Pq=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,QZ$=wZ(4),HZ$=wZ(6),zZ$=wZ(7),Sq=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,KZ$=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,wZ$=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ey=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,UZ$=ey,FZ$=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;jq=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Eq=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Tq=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Rq=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Iq=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,eU=/^[A-Za-z0-9_-]*$/,MZ$=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,VZ$=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,kq=/^\+[1-9]\d{6,14}$/,bq=new RegExp(`^${$h}$`);xq=/^-?\d+n?$/,yq=/^-?\d+$/,xH=/^-?\d+(?:\.\d+)?$/,hq=/^(?:true|false)$/i,mq=/^null$/i,uq=/^undefined$/i,dq=/^[^A-Z]*$/,cq=/^[^a-z]*$/,NZ$=/^[0-9a-fA-F]*$/;_Z$=/^[0-9a-fA-F]{32}$/,LZ$=yH(22,"=="),qZ$=hH(22),BZ$=/^[0-9a-fA-F]{40}$/,OZ$=yH(27,"="),PZ$=hH(27),SZ$=/^[0-9a-fA-F]{64}$/,AZ$=yH(43,"="),jZ$=hH(43),EZ$=/^[0-9a-fA-F]{96}$/,CZ$=yH(64,""),TZ$=hH(64),RZ$=/^[0-9a-fA-F]{128}$/,IZ$=yH(86,"=="),kZ$=hH(86)});function Yh($,J,Y){if($.issues.length)J.issues.push(...$J(Y,$.issues))}var A4,Xh,JF,YF,pq,lq,nq,iq,rq,oq,tq,aq,sq,bG,eq,$B,JB,YB,XB,WB,ZB,GB,QB;var XF=C(()=>{PG();$F();f$();A4=i("$ZodCheck",($,J)=>{var Y;$._zod??($._zod={}),$._zod.def=J,(Y=$._zod).onattach??(Y.onattach=[])}),Xh={number:"number",bigint:"bigint",object:"date"},JF=i("$ZodCheckLessThan",($,J)=>{A4.init($,J);let Y=Xh[typeof J.value];$._zod.onattach.push((X)=>{let W=X._zod.bag,Z=(J.inclusive?W.maximum:W.exclusiveMaximum)??Number.POSITIVE_INFINITY;if(J.value<Z)if(J.inclusive)W.maximum=J.value;else W.exclusiveMaximum=J.value}),$._zod.check=(X)=>{if(J.inclusive?X.value<=J.value:X.value<J.value)return;X.issues.push({origin:Y,code:"too_big",maximum:typeof J.value==="object"?J.value.getTime():J.value,input:X.value,inclusive:J.inclusive,inst:$,continue:!J.abort})}}),YF=i("$ZodCheckGreaterThan",($,J)=>{A4.init($,J);let Y=Xh[typeof J.value];$._zod.onattach.push((X)=>{let W=X._zod.bag,Z=(J.inclusive?W.minimum:W.exclusiveMinimum)??Number.NEGATIVE_INFINITY;if(J.value>Z)if(J.inclusive)W.minimum=J.value;else W.exclusiveMinimum=J.value}),$._zod.check=(X)=>{if(J.inclusive?X.value>=J.value:X.value>J.value)return;X.issues.push({origin:Y,code:"too_small",minimum:typeof J.value==="object"?J.value.getTime():J.value,input:X.value,inclusive:J.inclusive,inst:$,continue:!J.abort})}}),pq=i("$ZodCheckMultipleOf",($,J)=>{A4.init($,J),$._zod.onattach.push((Y)=>{var X;(X=Y._zod.bag).multipleOf??(X.multipleOf=J.value)}),$._zod.check=(Y)=>{if(typeof Y.value!==typeof J.value)throw Error("Cannot mix number and bigint in multiple_of check.");if(typeof Y.value==="bigint"?Y.value%J.value===BigInt(0):Wq(Y.value,J.value)===0)return;Y.issues.push({origin:typeof Y.value,code:"not_multiple_of",divisor:J.value,input:Y.value,inst:$,continue:!J.abort})}}),lq=i("$ZodCheckNumberFormat",($,J)=>{A4.init($,J),J.format=J.format||"float64";let Y=J.format?.includes("int"),X=Y?"int":"number",[W,Z]=Kq[J.format];$._zod.onattach.push((G)=>{let Q=G._zod.bag;if(Q.format=J.format,Q.minimum=W,Q.maximum=Z,Y)Q.pattern=yq}),$._zod.check=(G)=>{let Q=G.value;if(Y){if(!Number.isInteger(Q)){G.issues.push({expected:X,format:J.format,code:"invalid_type",continue:!1,input:Q,inst:$});return}if(!Number.isSafeInteger(Q)){if(Q>0)G.issues.push({input:Q,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:X,inclusive:!0,continue:!J.abort});else G.issues.push({input:Q,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:$,origin:X,inclusive:!0,continue:!J.abort});return}}if(Q<W)G.issues.push({origin:"number",input:Q,code:"too_small",minimum:W,inclusive:!0,inst:$,continue:!J.abort});if(Q>Z)G.issues.push({origin:"number",input:Q,code:"too_big",maximum:Z,inclusive:!0,inst:$,continue:!J.abort})}}),nq=i("$ZodCheckBigIntFormat",($,J)=>{A4.init($,J);let[Y,X]=wq[J.format];$._zod.onattach.push((W)=>{let Z=W._zod.bag;Z.format=J.format,Z.minimum=Y,Z.maximum=X}),$._zod.check=(W)=>{let Z=W.value;if(Z<Y)W.issues.push({origin:"bigint",input:Z,code:"too_small",minimum:Y,inclusive:!0,inst:$,continue:!J.abort});if(Z>X)W.issues.push({origin:"bigint",input:Z,code:"too_big",maximum:X,inclusive:!0,inst:$,continue:!J.abort})}}),iq=i("$ZodCheckMaxSize",($,J)=>{var Y;A4.init($,J),(Y=$._zod.def).when??(Y.when=(X)=>{let W=X.value;return!E9(W)&&W.size!==void 0}),$._zod.onattach.push((X)=>{let W=X._zod.bag.maximum??Number.POSITIVE_INFINITY;if(J.maximum<W)X._zod.bag.maximum=J.maximum}),$._zod.check=(X)=>{let W=X.value;if(W.size<=J.maximum)return;X.issues.push({origin:vH(W),code:"too_big",maximum:J.maximum,inclusive:!0,input:W,inst:$,continue:!J.abort})}}),rq=i("$ZodCheckMinSize",($,J)=>{var Y;A4.init($,J),(Y=$._zod.def).when??(Y.when=(X)=>{let W=X.value;return!E9(W)&&W.size!==void 0}),$._zod.onattach.push((X)=>{let W=X._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(J.minimum>W)X._zod.bag.minimum=J.minimum}),$._zod.check=(X)=>{let W=X.value;if(W.size>=J.minimum)return;X.issues.push({origin:vH(W),code:"too_small",minimum:J.minimum,inclusive:!0,input:W,inst:$,continue:!J.abort})}}),oq=i("$ZodCheckSizeEquals",($,J)=>{var Y;A4.init($,J),(Y=$._zod.def).when??(Y.when=(X)=>{let W=X.value;return!E9(W)&&W.size!==void 0}),$._zod.onattach.push((X)=>{let W=X._zod.bag;W.minimum=J.size,W.maximum=J.size,W.size=J.size}),$._zod.check=(X)=>{let W=X.value,Z=W.size;if(Z===J.size)return;let G=Z>J.size;X.issues.push({origin:vH(W),...G?{code:"too_big",maximum:J.size}:{code:"too_small",minimum:J.size},inclusive:!0,exact:!0,input:X.value,inst:$,continue:!J.abort})}}),tq=i("$ZodCheckMaxLength",($,J)=>{var Y;A4.init($,J),(Y=$._zod.def).when??(Y.when=(X)=>{let W=X.value;return!E9(W)&&W.length!==void 0}),$._zod.onattach.push((X)=>{let W=X._zod.bag.maximum??Number.POSITIVE_INFINITY;if(J.maximum<W)X._zod.bag.maximum=J.maximum}),$._zod.check=(X)=>{let W=X.value;if(W.length<=J.maximum)return;let G=fH(W);X.issues.push({origin:G,code:"too_big",maximum:J.maximum,inclusive:!0,input:W,inst:$,continue:!J.abort})}}),aq=i("$ZodCheckMinLength",($,J)=>{var Y;A4.init($,J),(Y=$._zod.def).when??(Y.when=(X)=>{let W=X.value;return!E9(W)&&W.length!==void 0}),$._zod.onattach.push((X)=>{let W=X._zod.bag.minimum??Number.NEGATIVE_INFINITY;if(J.minimum>W)X._zod.bag.minimum=J.minimum}),$._zod.check=(X)=>{let W=X.value;if(W.length>=J.minimum)return;let G=fH(W);X.issues.push({origin:G,code:"too_small",minimum:J.minimum,inclusive:!0,input:W,inst:$,continue:!J.abort})}}),sq=i("$ZodCheckLengthEquals",($,J)=>{var Y;A4.init($,J),(Y=$._zod.def).when??(Y.when=(X)=>{let W=X.value;return!E9(W)&&W.length!==void 0}),$._zod.onattach.push((X)=>{let W=X._zod.bag;W.minimum=J.length,W.maximum=J.length,W.length=J.length}),$._zod.check=(X)=>{let W=X.value,Z=W.length;if(Z===J.length)return;let G=fH(W),Q=Z>J.length;X.issues.push({origin:G,...Q?{code:"too_big",maximum:J.length}:{code:"too_small",minimum:J.length},inclusive:!0,exact:!0,input:X.value,inst:$,continue:!J.abort})}}),bG=i("$ZodCheckStringFormat",($,J)=>{var Y,X;if(A4.init($,J),$._zod.onattach.push((W)=>{let Z=W._zod.bag;if(Z.format=J.format,J.pattern)Z.patterns??(Z.patterns=new Set),Z.patterns.add(J.pattern)}),J.pattern)(Y=$._zod).check??(Y.check=(W)=>{if(J.pattern.lastIndex=0,J.pattern.test(W.value))return;W.issues.push({origin:"string",code:"invalid_format",format:J.format,input:W.value,...J.pattern?{pattern:J.pattern.toString()}:{},inst:$,continue:!J.abort})});else(X=$._zod).check??(X.check=()=>{})}),eq=i("$ZodCheckRegex",($,J)=>{bG.init($,J),$._zod.check=(Y)=>{if(J.pattern.lastIndex=0,J.pattern.test(Y.value))return;Y.issues.push({origin:"string",code:"invalid_format",format:"regex",input:Y.value,pattern:J.pattern.toString(),inst:$,continue:!J.abort})}}),$B=i("$ZodCheckLowerCase",($,J)=>{J.pattern??(J.pattern=dq),bG.init($,J)}),JB=i("$ZodCheckUpperCase",($,J)=>{J.pattern??(J.pattern=cq),bG.init($,J)}),YB=i("$ZodCheckIncludes",($,J)=>{A4.init($,J);let Y=bJ(J.includes),X=new RegExp(typeof J.position==="number"?`^.{${J.position}}${Y}`:Y);J.pattern=X,$._zod.onattach.push((W)=>{let Z=W._zod.bag;Z.patterns??(Z.patterns=new Set),Z.patterns.add(X)}),$._zod.check=(W)=>{if(W.value.includes(J.includes,J.position))return;W.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:J.includes,input:W.value,inst:$,continue:!J.abort})}}),XB=i("$ZodCheckStartsWith",($,J)=>{A4.init($,J);let Y=new RegExp(`^${bJ(J.prefix)}.*`);J.pattern??(J.pattern=Y),$._zod.onattach.push((X)=>{let W=X._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(Y)}),$._zod.check=(X)=>{if(X.value.startsWith(J.prefix))return;X.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:J.prefix,input:X.value,inst:$,continue:!J.abort})}}),WB=i("$ZodCheckEndsWith",($,J)=>{A4.init($,J);let Y=new RegExp(`.*${bJ(J.suffix)}$`);J.pattern??(J.pattern=Y),$._zod.onattach.push((X)=>{let W=X._zod.bag;W.patterns??(W.patterns=new Set),W.patterns.add(Y)}),$._zod.check=(X)=>{if(X.value.endsWith(J.suffix))return;X.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:J.suffix,input:X.value,inst:$,continue:!J.abort})}});ZB=i("$ZodCheckProperty",($,J)=>{A4.init($,J),$._zod.check=(Y)=>{let X=J.schema._zod.run({value:Y.value[J.property],issues:[]},{});if(X instanceof Promise)return X.then((W)=>Yh(W,Y,J.property));Yh(X,Y,J.property);return}}),GB=i("$ZodCheckMimeType",($,J)=>{A4.init($,J);let Y=new Set(J.mime);$._zod.onattach.push((X)=>{X._zod.bag.mime=J.mime}),$._zod.check=(X)=>{if(Y.has(X.value.type))return;X.issues.push({code:"invalid_value",values:J.mime,input:X.value.type,inst:$,continue:!J.abort})}}),QB=i("$ZodCheckOverwrite",($,J)=>{A4.init($,J),$._zod.check=(Y)=>{Y.value=J.tx(Y.value)}})});class WF{constructor($=[]){if(this.content=[],this.indent=0,this)this.args=$}indented($){this.indent+=1,$(this),this.indent-=1}write($){if(typeof $==="function"){$(this,{execution:"sync"}),$(this,{execution:"async"});return}let Y=$.split(`
`).filter((Z)=>Z),X=Math.min(...Y.map((Z)=>Z.length-Z.trimStart().length)),W=Y.map((Z)=>Z.slice(X)).map((Z)=>" ".repeat(this.indent*2)+Z);for(let Z of W)this.content.push(Z)}compile(){let $=Function,J=this?.args,X=[...(this?.content??[""]).map((W)=>`  ${W}`)];return new $(...J,X.join(`
`))}}var HB;var zB=C(()=>{HB={major:4,minor:3,patch:6}});function IB($){if($==="")return!0;if($.length%4!==0)return!1;try{return atob($),!0}catch{return!1}}function Vh($){if(!eU.test($))return!1;let J=$.replace(/[-_]/g,(X)=>X==="-"?"+":"/"),Y=J.padEnd(Math.ceil(J.length/4)*4,"=");return IB(Y)}function Nh($,J=null){try{let Y=$.split(".");if(Y.length!==3)return!1;let[X]=Y;if(!X)return!1;let W=JSON.parse(atob(X));if("typ"in W&&W?.typ!=="JWT")return!1;if(!W.alg)return!1;if(J&&(!("alg"in W)||W.alg!==J))return!1;return!0}catch{return!1}}function Zh($,J,Y){if($.issues.length)J.issues.push(...$J(Y,$.issues));J.value[Y]=$.value}function zF($,J,Y,X,W){if($.issues.length){if(W&&!(Y in X))return;J.issues.push(...$J(Y,$.issues))}if($.value===void 0){if(Y in X)J.value[Y]=void 0}else J.value[Y]=$.value}function _h($){let J=Object.keys($.shape);for(let X of J)if(!$.shape?.[X]?._zod?.traits?.has("$ZodType"))throw Error(`Invalid element at key "${X}": expected a Zod schema`);let Y=zq($.shape);return{...$,keys:J,keySet:new Set(J),numKeys:J.length,optionalKeys:new Set(Y)}}function Lh($,J,Y,X,W,Z){let G=[],Q=W.keySet,H=W.catchall._zod,z=H.def.type,K=H.optout==="optional";for(let w in J){if(Q.has(w))continue;if(z==="never"){G.push(w);continue}let F=H.run({value:J[w],issues:[]},X);if(F instanceof Promise)$.push(F.then((U)=>zF(U,Y,w,J,K)));else zF(F,Y,w,J,K)}if(G.length)Y.issues.push({code:"unrecognized_keys",keys:G,input:J,inst:Z});if(!$.length)return Y;return Promise.all($).then(()=>{return Y})}function Gh($,J,Y,X){for(let Z of $)if(Z.issues.length===0)return J.value=Z.value,J;let W=$.filter((Z)=>!R9(Z));if(W.length===1)return J.value=W[0].value,W[0];return J.issues.push({code:"invalid_union",input:J.value,inst:Y,errors:$.map((Z)=>Z.issues.map((G)=>B1(G,X,B6())))}),J}function Qh($,J,Y,X){let W=$.filter((Z)=>Z.issues.length===0);if(W.length===1)return J.value=W[0].value,J;if(W.length===0)J.issues.push({code:"invalid_union",input:J.value,inst:Y,errors:$.map((Z)=>Z.issues.map((G)=>B1(G,X,B6())))});else J.issues.push({code:"invalid_union",input:J.value,inst:Y,errors:[],inclusive:!1});return J}function KB($,J){if($===J)return{valid:!0,data:$};if($ instanceof Date&&J instanceof Date&&+$===+J)return{valid:!0,data:$};if(T9($)&&T9(J)){let Y=Object.keys(J),X=Object.keys($).filter((Z)=>Y.indexOf(Z)!==-1),W={...$,...J};for(let Z of X){let G=KB($[Z],J[Z]);if(!G.valid)return{valid:!1,mergeErrorPath:[Z,...G.mergeErrorPath]};W[Z]=G.data}return{valid:!0,data:W}}if(Array.isArray($)&&Array.isArray(J)){if($.length!==J.length)return{valid:!1,mergeErrorPath:[]};let Y=[];for(let X=0;X<$.length;X++){let W=$[X],Z=J[X],G=KB(W,Z);if(!G.valid)return{valid:!1,mergeErrorPath:[X,...G.mergeErrorPath]};Y.push(G.data)}return{valid:!0,data:Y}}return{valid:!1,mergeErrorPath:[]}}function Hh($,J,Y){let X=new Map,W;for(let Q of J.issues)if(Q.code==="unrecognized_keys"){W??(W=Q);for(let H of Q.keys){if(!X.has(H))X.set(H,{});X.get(H).l=!0}}else $.issues.push(Q);for(let Q of Y.issues)if(Q.code==="unrecognized_keys")for(let H of Q.keys){if(!X.has(H))X.set(H,{});X.get(H).r=!0}else $.issues.push(Q);let Z=[...X].filter(([,Q])=>Q.l&&Q.r).map(([Q])=>Q);if(Z.length&&W)$.issues.push({...W,keys:Z});if(R9($))return $;let G=KB(J.value,Y.value);if(!G.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(G.mergeErrorPath)}`);return $.value=G.data,$}function ZF($,J,Y){if($.issues.length)J.issues.push(...$J(Y,$.issues));J.value[Y]=$.value}function zh($,J,Y,X,W,Z,G){if($.issues.length)if(bH.has(typeof X))Y.issues.push(...$J(X,$.issues));else Y.issues.push({code:"invalid_key",origin:"map",input:W,inst:Z,issues:$.issues.map((Q)=>B1(Q,G,B6()))});if(J.issues.length)if(bH.has(typeof X))Y.issues.push(...$J(X,J.issues));else Y.issues.push({origin:"map",code:"invalid_element",input:W,inst:Z,key:X,issues:J.issues.map((Q)=>B1(Q,G,B6()))});Y.value.set($.value,J.value)}function Kh($,J){if($.issues.length)J.issues.push(...$.issues);J.value.add($.value)}function wh($,J){if($.issues.length&&J===void 0)return{issues:[],value:void 0};return $}function Uh($,J){if($.value===void 0)$.value=J.defaultValue;return $}function Fh($,J){if(!$.issues.length&&$.value===void 0)$.issues.push({code:"invalid_type",expected:"nonoptional",input:$.value,inst:J});return $}function GF($,J,Y){if($.issues.length)return $.aborted=!0,$;return J._zod.run({value:$.value,issues:$.issues},Y)}function QF($,J,Y){if($.issues.length)return $.aborted=!0,$;if((Y.direction||"forward")==="forward"){let W=J.transform($.value,$);if(W instanceof Promise)return W.then((Z)=>HF($,Z,J.out,Y));return HF($,W,J.out,Y)}else{let W=J.reverseTransform($.value,$);if(W instanceof Promise)return W.then((Z)=>HF($,Z,J.in,Y));return HF($,W,J.in,Y)}}function HF($,J,Y,X){if($.issues.length)return $.aborted=!0,$;return Y._zod.run({value:J,issues:$.issues},X)}function Dh($){return $.value=Object.freeze($.value),$}function Mh($,J,Y,X){if(!$){let W={code:"custom",input:Y,inst:X,path:[...X._zod.def.path??[]],continue:!X._zod.def.abort};if(X._zod.def.params)W.params=X._zod.def.params;J.issues.push(jG(W))}}var e$,UZ,M4,wB,UB,FB,DB,MB,VB,NB,_B,LB,qB,BB,OB,PB,SB,AB,jB,EB,CB,TB,RB,kB,bB,vB,fB,gB,KF,xB,mH,wF,yB,hB,mB,uB,dB,cB,pB,lB,nB,iB,qh,rB,uH,oB,tB,aB,UF,sB,eB,$O,JO,YO,XO,WO,FF,ZO,GO,QO,HO,zO,KO,wO,UO,FO,dH,DO,MO,VO,NO,_O,LO;var qO=C(()=>{XF();PG();Mq();$F();f$();zB();f$();e$=i("$ZodType",($,J)=>{var Y;$??($={}),$._zod.def=J,$._zod.bag=$._zod.bag||{},$._zod.version=HB;let X=[...$._zod.def.checks??[]];if($._zod.traits.has("$ZodCheck"))X.unshift($);for(let W of X)for(let Z of W._zod.onattach)Z($);if(X.length===0)(Y=$._zod).deferred??(Y.deferred=[]),$._zod.deferred?.push(()=>{$._zod.run=$._zod.parse});else{let W=(G,Q,H)=>{let z=R9(G),K;for(let w of Q){if(w._zod.def.when){if(!w._zod.def.when(G))continue}else if(z)continue;let F=G.issues.length,U=w._zod.check(G);if(U instanceof Promise&&H?.async===!1)throw new qX;if(K||U instanceof Promise)K=(K??Promise.resolve()).then(async()=>{if(await U,G.issues.length===F)return;if(!z)z=R9(G,F)});else{if(G.issues.length===F)continue;if(!z)z=R9(G,F)}}if(K)return K.then(()=>{return G});return G},Z=(G,Q,H)=>{if(R9(G))return G.aborted=!0,G;let z=W(Q,X,H);if(z instanceof Promise){if(H.async===!1)throw new qX;return z.then((K)=>$._zod.parse(K,H))}return $._zod.parse(z,H)};$._zod.run=(G,Q)=>{if(Q.skipChecks)return $._zod.parse(G,Q);if(Q.direction==="backward"){let z=$._zod.parse({value:G.value,issues:[]},{...Q,skipChecks:!0});if(z instanceof Promise)return z.then((K)=>{return Z(K,G,Q)});return Z(z,G,Q)}let H=$._zod.parse(G,Q);if(H instanceof Promise){if(Q.async===!1)throw new qX;return H.then((z)=>W(z,X,Q))}return W(H,X,Q)}}w0($,"~standard",()=>({validate:(W)=>{try{let Z=Fq($,W);return Z.success?{value:Z.data}:{issues:Z.error?.issues}}catch(Z){return Dq($,W).then((G)=>G.success?{value:G.data}:{issues:G.error?.issues})}},vendor:"zod",version:1}))}),UZ=i("$ZodString",($,J)=>{e$.init($,J),$._zod.pattern=[...$?._zod.bag?.patterns??[]].pop()??gq($._zod.bag),$._zod.parse=(Y,X)=>{if(J.coerce)try{Y.value=String(Y.value)}catch(W){}if(typeof Y.value==="string")return Y;return Y.issues.push({expected:"string",code:"invalid_type",input:Y.value,inst:$}),Y}}),M4=i("$ZodStringFormat",($,J)=>{bG.init($,J),UZ.init($,J)}),wB=i("$ZodGUID",($,J)=>{J.pattern??(J.pattern=Pq),M4.init($,J)}),UB=i("$ZodUUID",($,J)=>{if(J.version){let X={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[J.version];if(X===void 0)throw Error(`Invalid UUID version: "${J.version}"`);J.pattern??(J.pattern=wZ(X))}else J.pattern??(J.pattern=wZ());M4.init($,J)}),FB=i("$ZodEmail",($,J)=>{J.pattern??(J.pattern=Sq),M4.init($,J)}),DB=i("$ZodURL",($,J)=>{M4.init($,J),$._zod.check=(Y)=>{try{let X=Y.value.trim(),W=new URL(X);if(J.hostname){if(J.hostname.lastIndex=0,!J.hostname.test(W.hostname))Y.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:J.hostname.source,input:Y.value,inst:$,continue:!J.abort})}if(J.protocol){if(J.protocol.lastIndex=0,!J.protocol.test(W.protocol.endsWith(":")?W.protocol.slice(0,-1):W.protocol))Y.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:J.protocol.source,input:Y.value,inst:$,continue:!J.abort})}if(J.normalize)Y.value=W.href;else Y.value=X;return}catch(X){Y.issues.push({code:"invalid_format",format:"url",input:Y.value,inst:$,continue:!J.abort})}}}),MB=i("$ZodEmoji",($,J)=>{J.pattern??(J.pattern=Aq()),M4.init($,J)}),VB=i("$ZodNanoID",($,J)=>{J.pattern??(J.pattern=Bq),M4.init($,J)}),NB=i("$ZodCUID",($,J)=>{J.pattern??(J.pattern=Vq),M4.init($,J)}),_B=i("$ZodCUID2",($,J)=>{J.pattern??(J.pattern=Nq),M4.init($,J)}),LB=i("$ZodULID",($,J)=>{J.pattern??(J.pattern=_q),M4.init($,J)}),qB=i("$ZodXID",($,J)=>{J.pattern??(J.pattern=Lq),M4.init($,J)}),BB=i("$ZodKSUID",($,J)=>{J.pattern??(J.pattern=qq),M4.init($,J)}),OB=i("$ZodISODateTime",($,J)=>{J.pattern??(J.pattern=fq(J)),M4.init($,J)}),PB=i("$ZodISODate",($,J)=>{J.pattern??(J.pattern=bq),M4.init($,J)}),SB=i("$ZodISOTime",($,J)=>{J.pattern??(J.pattern=vq(J)),M4.init($,J)}),AB=i("$ZodISODuration",($,J)=>{J.pattern??(J.pattern=Oq),M4.init($,J)}),jB=i("$ZodIPv4",($,J)=>{J.pattern??(J.pattern=jq),M4.init($,J),$._zod.bag.format="ipv4"}),EB=i("$ZodIPv6",($,J)=>{J.pattern??(J.pattern=Eq),M4.init($,J),$._zod.bag.format="ipv6",$._zod.check=(Y)=>{try{new URL(`http://[${Y.value}]`)}catch{Y.issues.push({code:"invalid_format",format:"ipv6",input:Y.value,inst:$,continue:!J.abort})}}}),CB=i("$ZodMAC",($,J)=>{J.pattern??(J.pattern=Cq(J.delimiter)),M4.init($,J),$._zod.bag.format="mac"}),TB=i("$ZodCIDRv4",($,J)=>{J.pattern??(J.pattern=Tq),M4.init($,J)}),RB=i("$ZodCIDRv6",($,J)=>{J.pattern??(J.pattern=Rq),M4.init($,J),$._zod.check=(Y)=>{let X=Y.value.split("/");try{if(X.length!==2)throw Error();let[W,Z]=X;if(!Z)throw Error();let G=Number(Z);if(`${G}`!==Z)throw Error();if(G<0||G>128)throw Error();new URL(`http://[${W}]`)}catch{Y.issues.push({code:"invalid_format",format:"cidrv6",input:Y.value,inst:$,continue:!J.abort})}}});kB=i("$ZodBase64",($,J)=>{J.pattern??(J.pattern=Iq),M4.init($,J),$._zod.bag.contentEncoding="base64",$._zod.check=(Y)=>{if(IB(Y.value))return;Y.issues.push({code:"invalid_format",format:"base64",input:Y.value,inst:$,continue:!J.abort})}});bB=i("$ZodBase64URL",($,J)=>{J.pattern??(J.pattern=eU),M4.init($,J),$._zod.bag.contentEncoding="base64url",$._zod.check=(Y)=>{if(Vh(Y.value))return;Y.issues.push({code:"invalid_format",format:"base64url",input:Y.value,inst:$,continue:!J.abort})}}),vB=i("$ZodE164",($,J)=>{J.pattern??(J.pattern=kq),M4.init($,J)});fB=i("$ZodJWT",($,J)=>{M4.init($,J),$._zod.check=(Y)=>{if(Nh(Y.value,J.alg))return;Y.issues.push({code:"invalid_format",format:"jwt",input:Y.value,inst:$,continue:!J.abort})}}),gB=i("$ZodCustomStringFormat",($,J)=>{M4.init($,J),$._zod.check=(Y)=>{if(J.fn(Y.value))return;Y.issues.push({code:"invalid_format",format:J.format,input:Y.value,inst:$,continue:!J.abort})}}),KF=i("$ZodNumber",($,J)=>{e$.init($,J),$._zod.pattern=$._zod.bag.pattern??xH,$._zod.parse=(Y,X)=>{if(J.coerce)try{Y.value=Number(Y.value)}catch(G){}let W=Y.value;if(typeof W==="number"&&!Number.isNaN(W)&&Number.isFinite(W))return Y;let Z=typeof W==="number"?Number.isNaN(W)?"NaN":!Number.isFinite(W)?"Infinity":void 0:void 0;return Y.issues.push({expected:"number",code:"invalid_type",input:W,inst:$,...Z?{received:Z}:{}}),Y}}),xB=i("$ZodNumberFormat",($,J)=>{lq.init($,J),KF.init($,J)}),mH=i("$ZodBoolean",($,J)=>{e$.init($,J),$._zod.pattern=hq,$._zod.parse=(Y,X)=>{if(J.coerce)try{Y.value=Boolean(Y.value)}catch(Z){}let W=Y.value;if(typeof W==="boolean")return Y;return Y.issues.push({expected:"boolean",code:"invalid_type",input:W,inst:$}),Y}}),wF=i("$ZodBigInt",($,J)=>{e$.init($,J),$._zod.pattern=xq,$._zod.parse=(Y,X)=>{if(J.coerce)try{Y.value=BigInt(Y.value)}catch(W){}if(typeof Y.value==="bigint")return Y;return Y.issues.push({expected:"bigint",code:"invalid_type",input:Y.value,inst:$}),Y}}),yB=i("$ZodBigIntFormat",($,J)=>{nq.init($,J),wF.init($,J)}),hB=i("$ZodSymbol",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(typeof W==="symbol")return Y;return Y.issues.push({expected:"symbol",code:"invalid_type",input:W,inst:$}),Y}}),mB=i("$ZodUndefined",($,J)=>{e$.init($,J),$._zod.pattern=uq,$._zod.values=new Set([void 0]),$._zod.optin="optional",$._zod.optout="optional",$._zod.parse=(Y,X)=>{let W=Y.value;if(typeof W>"u")return Y;return Y.issues.push({expected:"undefined",code:"invalid_type",input:W,inst:$}),Y}}),uB=i("$ZodNull",($,J)=>{e$.init($,J),$._zod.pattern=mq,$._zod.values=new Set([null]),$._zod.parse=(Y,X)=>{let W=Y.value;if(W===null)return Y;return Y.issues.push({expected:"null",code:"invalid_type",input:W,inst:$}),Y}}),dB=i("$ZodAny",($,J)=>{e$.init($,J),$._zod.parse=(Y)=>Y}),cB=i("$ZodUnknown",($,J)=>{e$.init($,J),$._zod.parse=(Y)=>Y}),pB=i("$ZodNever",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{return Y.issues.push({expected:"never",code:"invalid_type",input:Y.value,inst:$}),Y}}),lB=i("$ZodVoid",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(typeof W>"u")return Y;return Y.issues.push({expected:"void",code:"invalid_type",input:W,inst:$}),Y}}),nB=i("$ZodDate",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{if(J.coerce)try{Y.value=new Date(Y.value)}catch(Q){}let W=Y.value,Z=W instanceof Date;if(Z&&!Number.isNaN(W.getTime()))return Y;return Y.issues.push({expected:"date",code:"invalid_type",input:W,...Z?{received:"Invalid Date"}:{},inst:$}),Y}});iB=i("$ZodArray",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(!Array.isArray(W))return Y.issues.push({expected:"array",code:"invalid_type",input:W,inst:$}),Y;Y.value=Array(W.length);let Z=[];for(let G=0;G<W.length;G++){let Q=W[G],H=J.element._zod.run({value:Q,issues:[]},X);if(H instanceof Promise)Z.push(H.then((z)=>Zh(z,Y,G)));else Zh(H,Y,G)}if(Z.length)return Promise.all(Z).then(()=>Y);return Y}});qh=i("$ZodObject",($,J)=>{if(e$.init($,J),!Object.getOwnPropertyDescriptor(J,"shape")?.get){let Q=J.shape;Object.defineProperty(J,"shape",{get:()=>{let H={...Q};return Object.defineProperty(J,"shape",{value:H}),H}})}let X=AG(()=>_h(J));w0($._zod,"propValues",()=>{let Q=J.shape,H={};for(let z in Q){let K=Q[z]._zod;if(K.values){H[z]??(H[z]=new Set);for(let w of K.values)H[z].add(w)}}return H});let W=KZ,Z=J.catchall,G;$._zod.parse=(Q,H)=>{G??(G=X.value);let z=Q.value;if(!W(z))return Q.issues.push({expected:"object",code:"invalid_type",input:z,inst:$}),Q;Q.value={};let K=[],w=G.shape;for(let F of G.keys){let U=w[F],V=U._zod.optout==="optional",N=U._zod.run({value:z[F],issues:[]},H);if(N instanceof Promise)K.push(N.then((P)=>zF(P,Q,F,z,V)));else zF(N,Q,F,z,V)}if(!Z)return K.length?Promise.all(K).then(()=>Q):Q;return Lh(K,z,Q,H,X.value,$)}}),rB=i("$ZodObjectJIT",($,J)=>{qh.init($,J);let Y=$._zod.parse,X=AG(()=>_h(J)),W=(F)=>{let U=new WF(["shape","payload","ctx"]),V=X.value,N=(g)=>{let k=hU(g);return`shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`};U.write("const input = payload.value;");let P=Object.create(null),B=0;for(let g of V.keys)P[g]=`key_${B++}`;U.write("const newResult = {};");for(let g of V.keys){let k=P[g],I=hU(g),b=F[g]?._zod?.optout==="optional";if(U.write(`const ${k} = ${N(g)};`),b)U.write(`
        if (${k}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${k}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${k}.value;
        }
        
      `);else U.write(`
        if (${k}.issues.length) {
          payload.issues = payload.issues.concat(${k}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${k}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${k}.value;
        }
        
      `)}U.write("payload.value = newResult;"),U.write("return payload;");let L=U.compile();return(g,k)=>L(F,g,k)},Z,G=KZ,Q=!TH.jitless,z=Q&&Gq.value,K=J.catchall,w;$._zod.parse=(F,U)=>{w??(w=X.value);let V=F.value;if(!G(V))return F.issues.push({expected:"object",code:"invalid_type",input:V,inst:$}),F;if(Q&&z&&U?.async===!1&&U.jitless!==!0){if(!Z)Z=W(J.shape);if(F=Z(F,U),!K)return F;return Lh([],V,F,U,w,$)}return Y(F,U)}});uH=i("$ZodUnion",($,J)=>{e$.init($,J),w0($._zod,"optin",()=>J.options.some((W)=>W._zod.optin==="optional")?"optional":void 0),w0($._zod,"optout",()=>J.options.some((W)=>W._zod.optout==="optional")?"optional":void 0),w0($._zod,"values",()=>{if(J.options.every((W)=>W._zod.values))return new Set(J.options.flatMap((W)=>Array.from(W._zod.values)));return}),w0($._zod,"pattern",()=>{if(J.options.every((W)=>W._zod.pattern)){let W=J.options.map((Z)=>Z._zod.pattern);return new RegExp(`^(${W.map((Z)=>kH(Z.source)).join("|")})$`)}return});let Y=J.options.length===1,X=J.options[0]._zod.run;$._zod.parse=(W,Z)=>{if(Y)return X(W,Z);let G=!1,Q=[];for(let H of J.options){let z=H._zod.run({value:W.value,issues:[]},Z);if(z instanceof Promise)Q.push(z),G=!0;else{if(z.issues.length===0)return z;Q.push(z)}}if(!G)return Gh(Q,W,$,Z);return Promise.all(Q).then((H)=>{return Gh(H,W,$,Z)})}});oB=i("$ZodXor",($,J)=>{uH.init($,J),J.inclusive=!1;let Y=J.options.length===1,X=J.options[0]._zod.run;$._zod.parse=(W,Z)=>{if(Y)return X(W,Z);let G=!1,Q=[];for(let H of J.options){let z=H._zod.run({value:W.value,issues:[]},Z);if(z instanceof Promise)Q.push(z),G=!0;else Q.push(z)}if(!G)return Qh(Q,W,$,Z);return Promise.all(Q).then((H)=>{return Qh(H,W,$,Z)})}}),tB=i("$ZodDiscriminatedUnion",($,J)=>{J.inclusive=!1,uH.init($,J);let Y=$._zod.parse;w0($._zod,"propValues",()=>{let W={};for(let Z of J.options){let G=Z._zod.propValues;if(!G||Object.keys(G).length===0)throw Error(`Invalid discriminated union option at index "${J.options.indexOf(Z)}"`);for(let[Q,H]of Object.entries(G)){if(!W[Q])W[Q]=new Set;for(let z of H)W[Q].add(z)}}return W});let X=AG(()=>{let W=J.options,Z=new Map;for(let G of W){let Q=G._zod.propValues?.[J.discriminator];if(!Q||Q.size===0)throw Error(`Invalid discriminated union option at index "${J.options.indexOf(G)}"`);for(let H of Q){if(Z.has(H))throw Error(`Duplicate discriminator value "${String(H)}"`);Z.set(H,G)}}return Z});$._zod.parse=(W,Z)=>{let G=W.value;if(!KZ(G))return W.issues.push({code:"invalid_type",expected:"object",input:G,inst:$}),W;let Q=X.value.get(G?.[J.discriminator]);if(Q)return Q._zod.run(W,Z);if(J.unionFallback)return Y(W,Z);return W.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:J.discriminator,input:G,path:[J.discriminator],inst:$}),W}}),aB=i("$ZodIntersection",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value,Z=J.left._zod.run({value:W,issues:[]},X),G=J.right._zod.run({value:W,issues:[]},X);if(Z instanceof Promise||G instanceof Promise)return Promise.all([Z,G]).then(([H,z])=>{return Hh(Y,H,z)});return Hh(Y,Z,G)}});UF=i("$ZodTuple",($,J)=>{e$.init($,J);let Y=J.items;$._zod.parse=(X,W)=>{let Z=X.value;if(!Array.isArray(Z))return X.issues.push({input:Z,inst:$,expected:"tuple",code:"invalid_type"}),X;X.value=[];let G=[],Q=[...Y].reverse().findIndex((K)=>K._zod.optin!=="optional"),H=Q===-1?0:Y.length-Q;if(!J.rest){let K=Z.length>Y.length,w=Z.length<H-1;if(K||w)return X.issues.push({...K?{code:"too_big",maximum:Y.length,inclusive:!0}:{code:"too_small",minimum:Y.length},input:Z,inst:$,origin:"array"}),X}let z=-1;for(let K of Y){if(z++,z>=Z.length){if(z>=H)continue}let w=K._zod.run({value:Z[z],issues:[]},W);if(w instanceof Promise)G.push(w.then((F)=>ZF(F,X,z)));else ZF(w,X,z)}if(J.rest){let K=Z.slice(Y.length);for(let w of K){z++;let F=J.rest._zod.run({value:w,issues:[]},W);if(F instanceof Promise)G.push(F.then((U)=>ZF(U,X,z)));else ZF(F,X,z)}}if(G.length)return Promise.all(G).then(()=>X);return X}});sB=i("$ZodRecord",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(!T9(W))return Y.issues.push({expected:"record",code:"invalid_type",input:W,inst:$}),Y;let Z=[],G=J.keyType._zod.values;if(G){Y.value={};let Q=new Set;for(let z of G)if(typeof z==="string"||typeof z==="number"||typeof z==="symbol"){Q.add(typeof z==="number"?z.toString():z);let K=J.valueType._zod.run({value:W[z],issues:[]},X);if(K instanceof Promise)Z.push(K.then((w)=>{if(w.issues.length)Y.issues.push(...$J(z,w.issues));Y.value[z]=w.value}));else{if(K.issues.length)Y.issues.push(...$J(z,K.issues));Y.value[z]=K.value}}let H;for(let z in W)if(!Q.has(z))H=H??[],H.push(z);if(H&&H.length>0)Y.issues.push({code:"unrecognized_keys",input:W,inst:$,keys:H})}else{Y.value={};for(let Q of Reflect.ownKeys(W)){if(Q==="__proto__")continue;let H=J.keyType._zod.run({value:Q,issues:[]},X);if(H instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(typeof Q==="string"&&xH.test(Q)&&H.issues.length){let w=J.keyType._zod.run({value:Number(Q),issues:[]},X);if(w instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(w.issues.length===0)H=w}if(H.issues.length){if(J.mode==="loose")Y.value[Q]=W[Q];else Y.issues.push({code:"invalid_key",origin:"record",issues:H.issues.map((w)=>B1(w,X,B6())),input:Q,path:[Q],inst:$});continue}let K=J.valueType._zod.run({value:W[Q],issues:[]},X);if(K instanceof Promise)Z.push(K.then((w)=>{if(w.issues.length)Y.issues.push(...$J(Q,w.issues));Y.value[H.value]=w.value}));else{if(K.issues.length)Y.issues.push(...$J(Q,K.issues));Y.value[H.value]=K.value}}}if(Z.length)return Promise.all(Z).then(()=>Y);return Y}}),eB=i("$ZodMap",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(!(W instanceof Map))return Y.issues.push({expected:"map",code:"invalid_type",input:W,inst:$}),Y;let Z=[];Y.value=new Map;for(let[G,Q]of W){let H=J.keyType._zod.run({value:G,issues:[]},X),z=J.valueType._zod.run({value:Q,issues:[]},X);if(H instanceof Promise||z instanceof Promise)Z.push(Promise.all([H,z]).then(([K,w])=>{zh(K,w,Y,G,W,$,X)}));else zh(H,z,Y,G,W,$,X)}if(Z.length)return Promise.all(Z).then(()=>Y);return Y}});$O=i("$ZodSet",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(!(W instanceof Set))return Y.issues.push({input:W,inst:$,expected:"set",code:"invalid_type"}),Y;let Z=[];Y.value=new Set;for(let G of W){let Q=J.valueType._zod.run({value:G,issues:[]},X);if(Q instanceof Promise)Z.push(Q.then((H)=>Kh(H,Y)));else Kh(Q,Y)}if(Z.length)return Promise.all(Z).then(()=>Y);return Y}});JO=i("$ZodEnum",($,J)=>{e$.init($,J);let Y=IH(J.entries),X=new Set(Y);$._zod.values=X,$._zod.pattern=new RegExp(`^(${Y.filter((W)=>bH.has(typeof W)).map((W)=>typeof W==="string"?bJ(W):W.toString()).join("|")})$`),$._zod.parse=(W,Z)=>{let G=W.value;if(X.has(G))return W;return W.issues.push({code:"invalid_value",values:Y,input:G,inst:$}),W}}),YO=i("$ZodLiteral",($,J)=>{if(e$.init($,J),J.values.length===0)throw Error("Cannot create literal schema with no valid values");let Y=new Set(J.values);$._zod.values=Y,$._zod.pattern=new RegExp(`^(${J.values.map((X)=>typeof X==="string"?bJ(X):X?bJ(X.toString()):String(X)).join("|")})$`),$._zod.parse=(X,W)=>{let Z=X.value;if(Y.has(Z))return X;return X.issues.push({code:"invalid_value",values:J.values,input:Z,inst:$}),X}}),XO=i("$ZodFile",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{let W=Y.value;if(W instanceof File)return Y;return Y.issues.push({expected:"file",code:"invalid_type",input:W,inst:$}),Y}}),WO=i("$ZodTransform",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{if(X.direction==="backward")throw new zZ($.constructor.name);let W=J.transform(Y.value,Y);if(X.async)return(W instanceof Promise?W:Promise.resolve(W)).then((G)=>{return Y.value=G,Y});if(W instanceof Promise)throw new qX;return Y.value=W,Y}});FF=i("$ZodOptional",($,J)=>{e$.init($,J),$._zod.optin="optional",$._zod.optout="optional",w0($._zod,"values",()=>{return J.innerType._zod.values?new Set([...J.innerType._zod.values,void 0]):void 0}),w0($._zod,"pattern",()=>{let Y=J.innerType._zod.pattern;return Y?new RegExp(`^(${kH(Y.source)})?$`):void 0}),$._zod.parse=(Y,X)=>{if(J.innerType._zod.optin==="optional"){let W=J.innerType._zod.run(Y,X);if(W instanceof Promise)return W.then((Z)=>wh(Z,Y.value));return wh(W,Y.value)}if(Y.value===void 0)return Y;return J.innerType._zod.run(Y,X)}}),ZO=i("$ZodExactOptional",($,J)=>{FF.init($,J),w0($._zod,"values",()=>J.innerType._zod.values),w0($._zod,"pattern",()=>J.innerType._zod.pattern),$._zod.parse=(Y,X)=>{return J.innerType._zod.run(Y,X)}}),GO=i("$ZodNullable",($,J)=>{e$.init($,J),w0($._zod,"optin",()=>J.innerType._zod.optin),w0($._zod,"optout",()=>J.innerType._zod.optout),w0($._zod,"pattern",()=>{let Y=J.innerType._zod.pattern;return Y?new RegExp(`^(${kH(Y.source)}|null)$`):void 0}),w0($._zod,"values",()=>{return J.innerType._zod.values?new Set([...J.innerType._zod.values,null]):void 0}),$._zod.parse=(Y,X)=>{if(Y.value===null)return Y;return J.innerType._zod.run(Y,X)}}),QO=i("$ZodDefault",($,J)=>{e$.init($,J),$._zod.optin="optional",w0($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(Y,X)=>{if(X.direction==="backward")return J.innerType._zod.run(Y,X);if(Y.value===void 0)return Y.value=J.defaultValue,Y;let W=J.innerType._zod.run(Y,X);if(W instanceof Promise)return W.then((Z)=>Uh(Z,J));return Uh(W,J)}});HO=i("$ZodPrefault",($,J)=>{e$.init($,J),$._zod.optin="optional",w0($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(Y,X)=>{if(X.direction==="backward")return J.innerType._zod.run(Y,X);if(Y.value===void 0)Y.value=J.defaultValue;return J.innerType._zod.run(Y,X)}}),zO=i("$ZodNonOptional",($,J)=>{e$.init($,J),w0($._zod,"values",()=>{let Y=J.innerType._zod.values;return Y?new Set([...Y].filter((X)=>X!==void 0)):void 0}),$._zod.parse=(Y,X)=>{let W=J.innerType._zod.run(Y,X);if(W instanceof Promise)return W.then((Z)=>Fh(Z,$));return Fh(W,$)}});KO=i("$ZodSuccess",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{if(X.direction==="backward")throw new zZ("ZodSuccess");let W=J.innerType._zod.run(Y,X);if(W instanceof Promise)return W.then((Z)=>{return Y.value=Z.issues.length===0,Y});return Y.value=W.issues.length===0,Y}}),wO=i("$ZodCatch",($,J)=>{e$.init($,J),w0($._zod,"optin",()=>J.innerType._zod.optin),w0($._zod,"optout",()=>J.innerType._zod.optout),w0($._zod,"values",()=>J.innerType._zod.values),$._zod.parse=(Y,X)=>{if(X.direction==="backward")return J.innerType._zod.run(Y,X);let W=J.innerType._zod.run(Y,X);if(W instanceof Promise)return W.then((Z)=>{if(Y.value=Z.value,Z.issues.length)Y.value=J.catchValue({...Y,error:{issues:Z.issues.map((G)=>B1(G,X,B6()))},input:Y.value}),Y.issues=[];return Y});if(Y.value=W.value,W.issues.length)Y.value=J.catchValue({...Y,error:{issues:W.issues.map((Z)=>B1(Z,X,B6()))},input:Y.value}),Y.issues=[];return Y}}),UO=i("$ZodNaN",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{if(typeof Y.value!=="number"||!Number.isNaN(Y.value))return Y.issues.push({input:Y.value,inst:$,expected:"nan",code:"invalid_type"}),Y;return Y}}),FO=i("$ZodPipe",($,J)=>{e$.init($,J),w0($._zod,"values",()=>J.in._zod.values),w0($._zod,"optin",()=>J.in._zod.optin),w0($._zod,"optout",()=>J.out._zod.optout),w0($._zod,"propValues",()=>J.in._zod.propValues),$._zod.parse=(Y,X)=>{if(X.direction==="backward"){let Z=J.out._zod.run(Y,X);if(Z instanceof Promise)return Z.then((G)=>GF(G,J.in,X));return GF(Z,J.in,X)}let W=J.in._zod.run(Y,X);if(W instanceof Promise)return W.then((Z)=>GF(Z,J.out,X));return GF(W,J.out,X)}});dH=i("$ZodCodec",($,J)=>{e$.init($,J),w0($._zod,"values",()=>J.in._zod.values),w0($._zod,"optin",()=>J.in._zod.optin),w0($._zod,"optout",()=>J.out._zod.optout),w0($._zod,"propValues",()=>J.in._zod.propValues),$._zod.parse=(Y,X)=>{if((X.direction||"forward")==="forward"){let Z=J.in._zod.run(Y,X);if(Z instanceof Promise)return Z.then((G)=>QF(G,J,X));return QF(Z,J,X)}else{let Z=J.out._zod.run(Y,X);if(Z instanceof Promise)return Z.then((G)=>QF(G,J,X));return QF(Z,J,X)}}});DO=i("$ZodReadonly",($,J)=>{e$.init($,J),w0($._zod,"propValues",()=>J.innerType._zod.propValues),w0($._zod,"values",()=>J.innerType._zod.values),w0($._zod,"optin",()=>J.innerType?._zod?.optin),w0($._zod,"optout",()=>J.innerType?._zod?.optout),$._zod.parse=(Y,X)=>{if(X.direction==="backward")return J.innerType._zod.run(Y,X);let W=J.innerType._zod.run(Y,X);if(W instanceof Promise)return W.then(Dh);return Dh(W)}});MO=i("$ZodTemplateLiteral",($,J)=>{e$.init($,J);let Y=[];for(let X of J.parts)if(typeof X==="object"&&X!==null){if(!X._zod.pattern)throw Error(`Invalid template literal part, no pattern found: ${[...X._zod.traits].shift()}`);let W=X._zod.pattern instanceof RegExp?X._zod.pattern.source:X._zod.pattern;if(!W)throw Error(`Invalid template literal part: ${X._zod.traits}`);let Z=W.startsWith("^")?1:0,G=W.endsWith("$")?W.length-1:W.length;Y.push(W.slice(Z,G))}else if(X===null||Hq.has(typeof X))Y.push(bJ(`${X}`));else throw Error(`Invalid template literal part: ${X}`);$._zod.pattern=new RegExp(`^${Y.join("")}$`),$._zod.parse=(X,W)=>{if(typeof X.value!=="string")return X.issues.push({input:X.value,inst:$,expected:"string",code:"invalid_type"}),X;if($._zod.pattern.lastIndex=0,!$._zod.pattern.test(X.value))return X.issues.push({input:X.value,inst:$,code:"invalid_format",format:J.format??"template_literal",pattern:$._zod.pattern.source}),X;return X}}),VO=i("$ZodFunction",($,J)=>{return e$.init($,J),$._def=J,$._zod.def=J,$.implement=(Y)=>{if(typeof Y!=="function")throw Error("implement() must be called with a function");return function(...X){let W=$._def.input?cU($._def.input,X):X,Z=Reflect.apply(Y,this,W);if($._def.output)return cU($._def.output,Z);return Z}},$.implementAsync=(Y)=>{if(typeof Y!=="function")throw Error("implementAsync() must be called with a function");return async function(...X){let W=$._def.input?await pU($._def.input,X):X,Z=await Reflect.apply(Y,this,W);if($._def.output)return await pU($._def.output,Z);return Z}},$._zod.parse=(Y,X)=>{if(typeof Y.value!=="function")return Y.issues.push({code:"invalid_type",expected:"function",input:Y.value,inst:$}),Y;if($._def.output&&$._def.output._zod.def.type==="promise")Y.value=$.implementAsync(Y.value);else Y.value=$.implement(Y.value);return Y},$.input=(...Y)=>{let X=$.constructor;if(Array.isArray(Y[0]))return new X({type:"function",input:new UF({type:"tuple",items:Y[0],rest:Y[1]}),output:$._def.output});return new X({type:"function",input:Y[0],output:$._def.output})},$.output=(Y)=>{return new $.constructor({type:"function",input:$._def.input,output:Y})},$}),NO=i("$ZodPromise",($,J)=>{e$.init($,J),$._zod.parse=(Y,X)=>{return Promise.resolve(Y.value).then((W)=>J.innerType._zod.run({value:W,issues:[]},X))}}),_O=i("$ZodLazy",($,J)=>{e$.init($,J),w0($._zod,"innerType",()=>J.getter()),w0($._zod,"pattern",()=>$._zod.innerType?._zod?.pattern),w0($._zod,"propValues",()=>$._zod.innerType?._zod?.propValues),w0($._zod,"optin",()=>$._zod.innerType?._zod?.optin??void 0),w0($._zod,"optout",()=>$._zod.innerType?._zod?.optout??void 0),$._zod.parse=(Y,X)=>{return $._zod.innerType._zod.run(Y,X)}}),LO=i("$ZodCustom",($,J)=>{A4.init($,J),e$.init($,J),$._zod.parse=(Y,X)=>{return Y},$._zod.check=(Y)=>{let X=Y.value,W=J.fn(X);if(W instanceof Promise)return W.then((Z)=>Mh(Z,Y,X,$));Mh(W,Y,X,$);return}})});function BO(){return{localeError:vZ$()}}var vZ$=()=>{let $={string:{unit:"حرف",verb:"أن يحوي"},file:{unit:"بايت",verb:"أن يحوي"},array:{unit:"عنصر",verb:"أن يحوي"},set:{unit:"عنصر",verb:"أن يحوي"}};function J(W){return $[W]??null}let Y={regex:"مدخل",email:"بريد إلكتروني",url:"رابط",emoji:"إيموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاريخ ووقت بمعيار ISO",date:"تاريخ بمعيار ISO",time:"وقت بمعيار ISO",duration:"مدة بمعيار ISO",ipv4:"عنوان IPv4",ipv6:"عنوان IPv6",cidrv4:"مدى عناوين بصيغة IPv4",cidrv6:"مدى عناوين بصيغة IPv6",base64:"نَص بترميز base64-encoded",base64url:"نَص بترميز base64url-encoded",json_string:"نَص على هيئة JSON",e164:"رقم هاتف بمعيار E.164",jwt:"JWT",template_literal:"مدخل"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`مدخلات غير مقبولة: يفترض إدخال instanceof ${W.expected}، ولكن تم إدخال ${Q}`;return`مدخلات غير مقبولة: يفترض إدخال ${Z}، ولكن تم إدخال ${Q}`}case"invalid_value":if(W.values.length===1)return`مدخلات غير مقبولة: يفترض إدخال ${z$(W.values[0])}`;return`اختيار غير مقبول: يتوقع انتقاء أحد هذه الخيارات: ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return` أكبر من اللازم: يفترض أن تكون ${W.origin??"القيمة"} ${Z} ${W.maximum.toString()} ${G.unit??"عنصر"}`;return`أكبر من اللازم: يفترض أن تكون ${W.origin??"القيمة"} ${Z} ${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`أصغر من اللازم: يفترض لـ ${W.origin} أن يكون ${Z} ${W.minimum.toString()} ${G.unit}`;return`أصغر من اللازم: يفترض لـ ${W.origin} أن يكون ${Z} ${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`نَص غير مقبول: يجب أن يبدأ بـ "${W.prefix}"`;if(Z.format==="ends_with")return`نَص غير مقبول: يجب أن ينتهي بـ "${Z.suffix}"`;if(Z.format==="includes")return`نَص غير مقبول: يجب أن يتضمَّن "${Z.includes}"`;if(Z.format==="regex")return`نَص غير مقبول: يجب أن يطابق النمط ${Z.pattern}`;return`${Y[Z.format]??W.format} غير مقبول`}case"not_multiple_of":return`رقم غير مقبول: يجب أن يكون من مضاعفات ${W.divisor}`;case"unrecognized_keys":return`معرف${W.keys.length>1?"ات":""} غريب${W.keys.length>1?"ة":""}: ${e(W.keys,"، ")}`;case"invalid_key":return`معرف غير مقبول في ${W.origin}`;case"invalid_union":return"مدخل غير مقبول";case"invalid_element":return`مدخل غير مقبول في ${W.origin}`;default:return"مدخل غير مقبول"}}};var Bh=C(()=>{f$()});function OO(){return{localeError:fZ$()}}var fZ$=()=>{let $={string:{unit:"simvol",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"element",verb:"olmalıdır"},set:{unit:"element",verb:"olmalıdır"}};function J(W){return $[W]??null}let Y={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Yanlış dəyər: gözlənilən instanceof ${W.expected}, daxil olan ${Q}`;return`Yanlış dəyər: gözlənilən ${Z}, daxil olan ${Q}`}case"invalid_value":if(W.values.length===1)return`Yanlış dəyər: gözlənilən ${z$(W.values[0])}`;return`Yanlış seçim: aşağıdakılardan biri olmalıdır: ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Çox böyük: gözlənilən ${W.origin??"dəyər"} ${Z}${W.maximum.toString()} ${G.unit??"element"}`;return`Çox böyük: gözlənilən ${W.origin??"dəyər"} ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Çox kiçik: gözlənilən ${W.origin} ${Z}${W.minimum.toString()} ${G.unit}`;return`Çox kiçik: gözlənilən ${W.origin} ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Yanlış mətn: "${Z.prefix}" ilə başlamalıdır`;if(Z.format==="ends_with")return`Yanlış mətn: "${Z.suffix}" ilə bitməlidir`;if(Z.format==="includes")return`Yanlış mətn: "${Z.includes}" daxil olmalıdır`;if(Z.format==="regex")return`Yanlış mətn: ${Z.pattern} şablonuna uyğun olmalıdır`;return`Yanlış ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Yanlış ədəd: ${W.divisor} ilə bölünə bilən olmalıdır`;case"unrecognized_keys":return`Tanınmayan açar${W.keys.length>1?"lar":""}: ${e(W.keys,", ")}`;case"invalid_key":return`${W.origin} daxilində yanlış açar`;case"invalid_union":return"Yanlış dəyər";case"invalid_element":return`${W.origin} daxilində yanlış dəyər`;default:return"Yanlış dəyər"}}};var Oh=C(()=>{f$()});function Ph($,J,Y,X){let W=Math.abs($),Z=W%10,G=W%100;if(G>=11&&G<=19)return X;if(Z===1)return J;if(Z>=2&&Z<=4)return Y;return X}function PO(){return{localeError:gZ$()}}var gZ$=()=>{let $={string:{unit:{one:"сімвал",few:"сімвалы",many:"сімвалаў"},verb:"мець"},array:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},set:{unit:{one:"элемент",few:"элементы",many:"элементаў"},verb:"мець"},file:{unit:{one:"байт",few:"байты",many:"байтаў"},verb:"мець"}};function J(W){return $[W]??null}let Y={regex:"увод",email:"email адрас",url:"URL",emoji:"эмодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата і час",date:"ISO дата",time:"ISO час",duration:"ISO працягласць",ipv4:"IPv4 адрас",ipv6:"IPv6 адрас",cidrv4:"IPv4 дыяпазон",cidrv6:"IPv6 дыяпазон",base64:"радок у фармаце base64",base64url:"радок у фармаце base64url",json_string:"JSON радок",e164:"нумар E.164",jwt:"JWT",template_literal:"увод"},X={nan:"NaN",number:"лік",array:"масіў"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Няправільны ўвод: чакаўся instanceof ${W.expected}, атрымана ${Q}`;return`Няправільны ўвод: чакаўся ${Z}, атрымана ${Q}`}case"invalid_value":if(W.values.length===1)return`Няправільны ўвод: чакалася ${z$(W.values[0])}`;return`Няправільны варыянт: чакаўся адзін з ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G){let Q=Number(W.maximum),H=Ph(Q,G.unit.one,G.unit.few,G.unit.many);return`Занадта вялікі: чакалася, што ${W.origin??"значэнне"} павінна ${G.verb} ${Z}${W.maximum.toString()} ${H}`}return`Занадта вялікі: чакалася, што ${W.origin??"значэнне"} павінна быць ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G){let Q=Number(W.minimum),H=Ph(Q,G.unit.one,G.unit.few,G.unit.many);return`Занадта малы: чакалася, што ${W.origin} павінна ${G.verb} ${Z}${W.minimum.toString()} ${H}`}return`Занадта малы: чакалася, што ${W.origin} павінна быць ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Няправільны радок: павінен пачынацца з "${Z.prefix}"`;if(Z.format==="ends_with")return`Няправільны радок: павінен заканчвацца на "${Z.suffix}"`;if(Z.format==="includes")return`Няправільны радок: павінен змяшчаць "${Z.includes}"`;if(Z.format==="regex")return`Няправільны радок: павінен адпавядаць шаблону ${Z.pattern}`;return`Няправільны ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Няправільны лік: павінен быць кратным ${W.divisor}`;case"unrecognized_keys":return`Нераспазнаны ${W.keys.length>1?"ключы":"ключ"}: ${e(W.keys,", ")}`;case"invalid_key":return`Няправільны ключ у ${W.origin}`;case"invalid_union":return"Няправільны ўвод";case"invalid_element":return`Няправільнае значэнне ў ${W.origin}`;default:return"Няправільны ўвод"}}};var Sh=C(()=>{f$()});function SO(){return{localeError:xZ$()}}var xZ$=()=>{let $={string:{unit:"символа",verb:"да съдържа"},file:{unit:"байта",verb:"да съдържа"},array:{unit:"елемента",verb:"да съдържа"},set:{unit:"елемента",verb:"да съдържа"}};function J(W){return $[W]??null}let Y={regex:"вход",email:"имейл адрес",url:"URL",emoji:"емоджи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO време",date:"ISO дата",time:"ISO време",duration:"ISO продължителност",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"base64-кодиран низ",base64url:"base64url-кодиран низ",json_string:"JSON низ",e164:"E.164 номер",jwt:"JWT",template_literal:"вход"},X={nan:"NaN",number:"число",array:"масив"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Невалиден вход: очакван instanceof ${W.expected}, получен ${Q}`;return`Невалиден вход: очакван ${Z}, получен ${Q}`}case"invalid_value":if(W.values.length===1)return`Невалиден вход: очакван ${z$(W.values[0])}`;return`Невалидна опция: очаквано едно от ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Твърде голямо: очаква се ${W.origin??"стойност"} да съдържа ${Z}${W.maximum.toString()} ${G.unit??"елемента"}`;return`Твърде голямо: очаква се ${W.origin??"стойност"} да бъде ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Твърде малко: очаква се ${W.origin} да съдържа ${Z}${W.minimum.toString()} ${G.unit}`;return`Твърде малко: очаква се ${W.origin} да бъде ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Невалиден низ: трябва да започва с "${Z.prefix}"`;if(Z.format==="ends_with")return`Невалиден низ: трябва да завършва с "${Z.suffix}"`;if(Z.format==="includes")return`Невалиден низ: трябва да включва "${Z.includes}"`;if(Z.format==="regex")return`Невалиден низ: трябва да съвпада с ${Z.pattern}`;let G="Невалиден";if(Z.format==="emoji")G="Невалидно";if(Z.format==="datetime")G="Невалидно";if(Z.format==="date")G="Невалидна";if(Z.format==="time")G="Невалидно";if(Z.format==="duration")G="Невалидна";return`${G} ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Невалидно число: трябва да бъде кратно на ${W.divisor}`;case"unrecognized_keys":return`Неразпознат${W.keys.length>1?"и":""} ключ${W.keys.length>1?"ове":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Невалиден ключ в ${W.origin}`;case"invalid_union":return"Невалиден вход";case"invalid_element":return`Невалидна стойност в ${W.origin}`;default:return"Невалиден вход"}}};var Ah=C(()=>{f$()});function AO(){return{localeError:yZ$()}}var yZ$=()=>{let $={string:{unit:"caràcters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function J(W){return $[W]??null}let Y={regex:"entrada",email:"adreça electrònica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adreça IPv4",ipv6:"adreça IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Tipus invàlid: s'esperava instanceof ${W.expected}, s'ha rebut ${Q}`;return`Tipus invàlid: s'esperava ${Z}, s'ha rebut ${Q}`}case"invalid_value":if(W.values.length===1)return`Valor invàlid: s'esperava ${z$(W.values[0])}`;return`Opció invàlida: s'esperava una de ${e(W.values," o ")}`;case"too_big":{let Z=W.inclusive?"com a màxim":"menys de",G=J(W.origin);if(G)return`Massa gran: s'esperava que ${W.origin??"el valor"} contingués ${Z} ${W.maximum.toString()} ${G.unit??"elements"}`;return`Massa gran: s'esperava que ${W.origin??"el valor"} fos ${Z} ${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?"com a mínim":"més de",G=J(W.origin);if(G)return`Massa petit: s'esperava que ${W.origin} contingués ${Z} ${W.minimum.toString()} ${G.unit}`;return`Massa petit: s'esperava que ${W.origin} fos ${Z} ${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Format invàlid: ha de començar amb "${Z.prefix}"`;if(Z.format==="ends_with")return`Format invàlid: ha d'acabar amb "${Z.suffix}"`;if(Z.format==="includes")return`Format invàlid: ha d'incloure "${Z.includes}"`;if(Z.format==="regex")return`Format invàlid: ha de coincidir amb el patró ${Z.pattern}`;return`Format invàlid per a ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Número invàlid: ha de ser múltiple de ${W.divisor}`;case"unrecognized_keys":return`Clau${W.keys.length>1?"s":""} no reconeguda${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Clau invàlida a ${W.origin}`;case"invalid_union":return"Entrada invàlida";case"invalid_element":return`Element invàlid a ${W.origin}`;default:return"Entrada invàlida"}}};var jh=C(()=>{f$()});function jO(){return{localeError:hZ$()}}var hZ$=()=>{let $={string:{unit:"znaků",verb:"mít"},file:{unit:"bajtů",verb:"mít"},array:{unit:"prvků",verb:"mít"},set:{unit:"prvků",verb:"mít"}};function J(W){return $[W]??null}let Y={regex:"regulární výraz",email:"e-mailová adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a čas ve formátu ISO",date:"datum ve formátu ISO",time:"čas ve formátu ISO",duration:"doba trvání ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"řetězec zakódovaný ve formátu base64",base64url:"řetězec zakódovaný ve formátu base64url",json_string:"řetězec ve formátu JSON",e164:"číslo E.164",jwt:"JWT",template_literal:"vstup"},X={nan:"NaN",number:"číslo",string:"řetězec",function:"funkce",array:"pole"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Neplatný vstup: očekáváno instanceof ${W.expected}, obdrženo ${Q}`;return`Neplatný vstup: očekáváno ${Z}, obdrženo ${Q}`}case"invalid_value":if(W.values.length===1)return`Neplatný vstup: očekáváno ${z$(W.values[0])}`;return`Neplatná možnost: očekávána jedna z hodnot ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Hodnota je příliš velká: ${W.origin??"hodnota"} musí mít ${Z}${W.maximum.toString()} ${G.unit??"prvků"}`;return`Hodnota je příliš velká: ${W.origin??"hodnota"} musí být ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Hodnota je příliš malá: ${W.origin??"hodnota"} musí mít ${Z}${W.minimum.toString()} ${G.unit??"prvků"}`;return`Hodnota je příliš malá: ${W.origin??"hodnota"} musí být ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Neplatný řetězec: musí začínat na "${Z.prefix}"`;if(Z.format==="ends_with")return`Neplatný řetězec: musí končit na "${Z.suffix}"`;if(Z.format==="includes")return`Neplatný řetězec: musí obsahovat "${Z.includes}"`;if(Z.format==="regex")return`Neplatný řetězec: musí odpovídat vzoru ${Z.pattern}`;return`Neplatný formát ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Neplatné číslo: musí být násobkem ${W.divisor}`;case"unrecognized_keys":return`Neznámé klíče: ${e(W.keys,", ")}`;case"invalid_key":return`Neplatný klíč v ${W.origin}`;case"invalid_union":return"Neplatný vstup";case"invalid_element":return`Neplatná hodnota v ${W.origin}`;default:return"Neplatný vstup"}}};var Eh=C(()=>{f$()});function EO(){return{localeError:mZ$()}}var mZ$=()=>{let $={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}};function J(W){return $[W]??null}let Y={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslæt",date:"ISO-dato",time:"ISO-klokkeslæt",duration:"ISO-varighed",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},X={nan:"NaN",string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"sæt",file:"fil"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Ugyldigt input: forventede instanceof ${W.expected}, fik ${Q}`;return`Ugyldigt input: forventede ${Z}, fik ${Q}`}case"invalid_value":if(W.values.length===1)return`Ugyldig værdi: forventede ${z$(W.values[0])}`;return`Ugyldigt valg: forventede en af følgende ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin),Q=X[W.origin]??W.origin;if(G)return`For stor: forventede ${Q??"value"} ${G.verb} ${Z} ${W.maximum.toString()} ${G.unit??"elementer"}`;return`For stor: forventede ${Q??"value"} havde ${Z} ${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin),Q=X[W.origin]??W.origin;if(G)return`For lille: forventede ${Q} ${G.verb} ${Z} ${W.minimum.toString()} ${G.unit}`;return`For lille: forventede ${Q} havde ${Z} ${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ugyldig streng: skal starte med "${Z.prefix}"`;if(Z.format==="ends_with")return`Ugyldig streng: skal ende med "${Z.suffix}"`;if(Z.format==="includes")return`Ugyldig streng: skal indeholde "${Z.includes}"`;if(Z.format==="regex")return`Ugyldig streng: skal matche mønsteret ${Z.pattern}`;return`Ugyldig ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Ugyldigt tal: skal være deleligt med ${W.divisor}`;case"unrecognized_keys":return`${W.keys.length>1?"Ukendte nøgler":"Ukendt nøgle"}: ${e(W.keys,", ")}`;case"invalid_key":return`Ugyldig nøgle i ${W.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig værdi i ${W.origin}`;default:return"Ugyldigt input"}}};var Ch=C(()=>{f$()});function CO(){return{localeError:uZ$()}}var uZ$=()=>{let $={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function J(W){return $[W]??null}let Y={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"},X={nan:"NaN",number:"Zahl",array:"Array"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Ungültige Eingabe: erwartet instanceof ${W.expected}, erhalten ${Q}`;return`Ungültige Eingabe: erwartet ${Z}, erhalten ${Q}`}case"invalid_value":if(W.values.length===1)return`Ungültige Eingabe: erwartet ${z$(W.values[0])}`;return`Ungültige Option: erwartet eine von ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Zu groß: erwartet, dass ${W.origin??"Wert"} ${Z}${W.maximum.toString()} ${G.unit??"Elemente"} hat`;return`Zu groß: erwartet, dass ${W.origin??"Wert"} ${Z}${W.maximum.toString()} ist`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Zu klein: erwartet, dass ${W.origin} ${Z}${W.minimum.toString()} ${G.unit} hat`;return`Zu klein: erwartet, dass ${W.origin} ${Z}${W.minimum.toString()} ist`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ungültiger String: muss mit "${Z.prefix}" beginnen`;if(Z.format==="ends_with")return`Ungültiger String: muss mit "${Z.suffix}" enden`;if(Z.format==="includes")return`Ungültiger String: muss "${Z.includes}" enthalten`;if(Z.format==="regex")return`Ungültiger String: muss dem Muster ${Z.pattern} entsprechen`;return`Ungültig: ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Ungültige Zahl: muss ein Vielfaches von ${W.divisor} sein`;case"unrecognized_keys":return`${W.keys.length>1?"Unbekannte Schlüssel":"Unbekannter Schlüssel"}: ${e(W.keys,", ")}`;case"invalid_key":return`Ungültiger Schlüssel in ${W.origin}`;case"invalid_union":return"Ungültige Eingabe";case"invalid_element":return`Ungültiger Wert in ${W.origin}`;default:return"Ungültige Eingabe"}}};var Th=C(()=>{f$()});function cH(){return{localeError:dZ$()}}var dZ$=()=>{let $={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"},map:{unit:"entries",verb:"to have"}};function J(W){return $[W]??null}let Y={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;return`Invalid input: expected ${Z}, received ${Q}`}case"invalid_value":if(W.values.length===1)return`Invalid input: expected ${z$(W.values[0])}`;return`Invalid option: expected one of ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Too big: expected ${W.origin??"value"} to have ${Z}${W.maximum.toString()} ${G.unit??"elements"}`;return`Too big: expected ${W.origin??"value"} to be ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Too small: expected ${W.origin} to have ${Z}${W.minimum.toString()} ${G.unit}`;return`Too small: expected ${W.origin} to be ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Invalid string: must start with "${Z.prefix}"`;if(Z.format==="ends_with")return`Invalid string: must end with "${Z.suffix}"`;if(Z.format==="includes")return`Invalid string: must include "${Z.includes}"`;if(Z.format==="regex")return`Invalid string: must match pattern ${Z.pattern}`;return`Invalid ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${W.divisor}`;case"unrecognized_keys":return`Unrecognized key${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Invalid key in ${W.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${W.origin}`;default:return"Invalid input"}}};var TO=C(()=>{f$()});function RO(){return{localeError:cZ$()}}var cZ$=()=>{let $={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function J(W){return $[W]??null}let Y={regex:"enigo",email:"retadreso",url:"URL",emoji:"emoĝio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-daŭro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"},X={nan:"NaN",number:"nombro",array:"tabelo",null:"senvalora"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Nevalida enigo: atendiĝis instanceof ${W.expected}, riceviĝis ${Q}`;return`Nevalida enigo: atendiĝis ${Z}, riceviĝis ${Q}`}case"invalid_value":if(W.values.length===1)return`Nevalida enigo: atendiĝis ${z$(W.values[0])}`;return`Nevalida opcio: atendiĝis unu el ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Tro granda: atendiĝis ke ${W.origin??"valoro"} havu ${Z}${W.maximum.toString()} ${G.unit??"elementojn"}`;return`Tro granda: atendiĝis ke ${W.origin??"valoro"} havu ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Tro malgranda: atendiĝis ke ${W.origin} havu ${Z}${W.minimum.toString()} ${G.unit}`;return`Tro malgranda: atendiĝis ke ${W.origin} estu ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Nevalida karaktraro: devas komenciĝi per "${Z.prefix}"`;if(Z.format==="ends_with")return`Nevalida karaktraro: devas finiĝi per "${Z.suffix}"`;if(Z.format==="includes")return`Nevalida karaktraro: devas inkluzivi "${Z.includes}"`;if(Z.format==="regex")return`Nevalida karaktraro: devas kongrui kun la modelo ${Z.pattern}`;return`Nevalida ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${W.divisor}`;case"unrecognized_keys":return`Nekonata${W.keys.length>1?"j":""} ŝlosilo${W.keys.length>1?"j":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Nevalida ŝlosilo en ${W.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${W.origin}`;default:return"Nevalida enigo"}}};var Rh=C(()=>{f$()});function IO(){return{localeError:pZ$()}}var pZ$=()=>{let $={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function J(W){return $[W]??null}let Y={regex:"entrada",email:"dirección de correo electrónico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duración ISO",ipv4:"dirección IPv4",ipv6:"dirección IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"},X={nan:"NaN",string:"texto",number:"número",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"número grande",symbol:"símbolo",undefined:"indefinido",null:"nulo",function:"función",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeración",union:"unión",literal:"literal",promise:"promesa",void:"vacío",never:"nunca",unknown:"desconocido",any:"cualquiera"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Entrada inválida: se esperaba instanceof ${W.expected}, recibido ${Q}`;return`Entrada inválida: se esperaba ${Z}, recibido ${Q}`}case"invalid_value":if(W.values.length===1)return`Entrada inválida: se esperaba ${z$(W.values[0])}`;return`Opción inválida: se esperaba una de ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin),Q=X[W.origin]??W.origin;if(G)return`Demasiado grande: se esperaba que ${Q??"valor"} tuviera ${Z}${W.maximum.toString()} ${G.unit??"elementos"}`;return`Demasiado grande: se esperaba que ${Q??"valor"} fuera ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin),Q=X[W.origin]??W.origin;if(G)return`Demasiado pequeño: se esperaba que ${Q} tuviera ${Z}${W.minimum.toString()} ${G.unit}`;return`Demasiado pequeño: se esperaba que ${Q} fuera ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Cadena inválida: debe comenzar con "${Z.prefix}"`;if(Z.format==="ends_with")return`Cadena inválida: debe terminar en "${Z.suffix}"`;if(Z.format==="includes")return`Cadena inválida: debe incluir "${Z.includes}"`;if(Z.format==="regex")return`Cadena inválida: debe coincidir con el patrón ${Z.pattern}`;return`Inválido ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Número inválido: debe ser múltiplo de ${W.divisor}`;case"unrecognized_keys":return`Llave${W.keys.length>1?"s":""} desconocida${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Llave inválida en ${X[W.origin]??W.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido en ${X[W.origin]??W.origin}`;default:return"Entrada inválida"}}};var Ih=C(()=>{f$()});function kO(){return{localeError:lZ$()}}var lZ$=()=>{let $={string:{unit:"کاراکتر",verb:"داشته باشد"},file:{unit:"بایت",verb:"داشته باشد"},array:{unit:"آیتم",verb:"داشته باشد"},set:{unit:"آیتم",verb:"داشته باشد"}};function J(W){return $[W]??null}let Y={regex:"ورودی",email:"آدرس ایمیل",url:"URL",emoji:"ایموجی",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"تاریخ و زمان ایزو",date:"تاریخ ایزو",time:"زمان ایزو",duration:"مدت زمان ایزو",ipv4:"IPv4 آدرس",ipv6:"IPv6 آدرس",cidrv4:"IPv4 دامنه",cidrv6:"IPv6 دامنه",base64:"base64-encoded رشته",base64url:"base64url-encoded رشته",json_string:"JSON رشته",e164:"E.164 عدد",jwt:"JWT",template_literal:"ورودی"},X={nan:"NaN",number:"عدد",array:"آرایه"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`ورودی نامعتبر: می‌بایست instanceof ${W.expected} می‌بود، ${Q} دریافت شد`;return`ورودی نامعتبر: می‌بایست ${Z} می‌بود، ${Q} دریافت شد`}case"invalid_value":if(W.values.length===1)return`ورودی نامعتبر: می‌بایست ${z$(W.values[0])} می‌بود`;return`گزینه نامعتبر: می‌بایست یکی از ${e(W.values,"|")} می‌بود`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`خیلی بزرگ: ${W.origin??"مقدار"} باید ${Z}${W.maximum.toString()} ${G.unit??"عنصر"} باشد`;return`خیلی بزرگ: ${W.origin??"مقدار"} باید ${Z}${W.maximum.toString()} باشد`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`خیلی کوچک: ${W.origin} باید ${Z}${W.minimum.toString()} ${G.unit} باشد`;return`خیلی کوچک: ${W.origin} باید ${Z}${W.minimum.toString()} باشد`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`رشته نامعتبر: باید با "${Z.prefix}" شروع شود`;if(Z.format==="ends_with")return`رشته نامعتبر: باید با "${Z.suffix}" تمام شود`;if(Z.format==="includes")return`رشته نامعتبر: باید شامل "${Z.includes}" باشد`;if(Z.format==="regex")return`رشته نامعتبر: باید با الگوی ${Z.pattern} مطابقت داشته باشد`;return`${Y[Z.format]??W.format} نامعتبر`}case"not_multiple_of":return`عدد نامعتبر: باید مضرب ${W.divisor} باشد`;case"unrecognized_keys":return`کلید${W.keys.length>1?"های":""} ناشناس: ${e(W.keys,", ")}`;case"invalid_key":return`کلید ناشناس در ${W.origin}`;case"invalid_union":return"ورودی نامعتبر";case"invalid_element":return`مقدار نامعتبر در ${W.origin}`;default:return"ورودی نامعتبر"}}};var kh=C(()=>{f$()});function bO(){return{localeError:nZ$()}}var nZ$=()=>{let $={string:{unit:"merkkiä",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"päivämäärän"}};function J(W){return $[W]??null}let Y={regex:"säännöllinen lauseke",email:"sähköpostiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-päivämäärä",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Virheellinen tyyppi: odotettiin instanceof ${W.expected}, oli ${Q}`;return`Virheellinen tyyppi: odotettiin ${Z}, oli ${Q}`}case"invalid_value":if(W.values.length===1)return`Virheellinen syöte: täytyy olla ${z$(W.values[0])}`;return`Virheellinen valinta: täytyy olla yksi seuraavista: ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Liian suuri: ${G.subject} täytyy olla ${Z}${W.maximum.toString()} ${G.unit}`.trim();return`Liian suuri: arvon täytyy olla ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Liian pieni: ${G.subject} täytyy olla ${Z}${W.minimum.toString()} ${G.unit}`.trim();return`Liian pieni: arvon täytyy olla ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Virheellinen syöte: täytyy alkaa "${Z.prefix}"`;if(Z.format==="ends_with")return`Virheellinen syöte: täytyy loppua "${Z.suffix}"`;if(Z.format==="includes")return`Virheellinen syöte: täytyy sisältää "${Z.includes}"`;if(Z.format==="regex")return`Virheellinen syöte: täytyy vastata säännöllistä lauseketta ${Z.pattern}`;return`Virheellinen ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Virheellinen luku: täytyy olla luvun ${W.divisor} monikerta`;case"unrecognized_keys":return`${W.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${e(W.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen syöte"}}};var bh=C(()=>{f$()});function vO(){return{localeError:iZ$()}}var iZ$=()=>{let $={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function J(W){return $[W]??null}let Y={regex:"entrée",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"},X={nan:"NaN",number:"nombre",array:"tableau"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Entrée invalide : instanceof ${W.expected} attendu, ${Q} reçu`;return`Entrée invalide : ${Z} attendu, ${Q} reçu`}case"invalid_value":if(W.values.length===1)return`Entrée invalide : ${z$(W.values[0])} attendu`;return`Option invalide : une valeur parmi ${e(W.values,"|")} attendue`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Trop grand : ${W.origin??"valeur"} doit ${G.verb} ${Z}${W.maximum.toString()} ${G.unit??"élément(s)"}`;return`Trop grand : ${W.origin??"valeur"} doit être ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Trop petit : ${W.origin} doit ${G.verb} ${Z}${W.minimum.toString()} ${G.unit}`;return`Trop petit : ${W.origin} doit être ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Chaîne invalide : doit commencer par "${Z.prefix}"`;if(Z.format==="ends_with")return`Chaîne invalide : doit se terminer par "${Z.suffix}"`;if(Z.format==="includes")return`Chaîne invalide : doit inclure "${Z.includes}"`;if(Z.format==="regex")return`Chaîne invalide : doit correspondre au modèle ${Z.pattern}`;return`${Y[Z.format]??W.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${W.divisor}`;case"unrecognized_keys":return`Clé${W.keys.length>1?"s":""} non reconnue${W.keys.length>1?"s":""} : ${e(W.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${W.origin}`;case"invalid_union":return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${W.origin}`;default:return"Entrée invalide"}}};var vh=C(()=>{f$()});function fO(){return{localeError:rZ$()}}var rZ$=()=>{let $={string:{unit:"caractères",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"éléments",verb:"avoir"},set:{unit:"éléments",verb:"avoir"}};function J(W){return $[W]??null}let Y={regex:"entrée",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"durée ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"chaîne encodée en base64",base64url:"chaîne encodée en base64url",json_string:"chaîne JSON",e164:"numéro E.164",jwt:"JWT",template_literal:"entrée"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Entrée invalide : attendu instanceof ${W.expected}, reçu ${Q}`;return`Entrée invalide : attendu ${Z}, reçu ${Q}`}case"invalid_value":if(W.values.length===1)return`Entrée invalide : attendu ${z$(W.values[0])}`;return`Option invalide : attendu l'une des valeurs suivantes ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"≤":"<",G=J(W.origin);if(G)return`Trop grand : attendu que ${W.origin??"la valeur"} ait ${Z}${W.maximum.toString()} ${G.unit}`;return`Trop grand : attendu que ${W.origin??"la valeur"} soit ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?"≥":">",G=J(W.origin);if(G)return`Trop petit : attendu que ${W.origin} ait ${Z}${W.minimum.toString()} ${G.unit}`;return`Trop petit : attendu que ${W.origin} soit ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Chaîne invalide : doit commencer par "${Z.prefix}"`;if(Z.format==="ends_with")return`Chaîne invalide : doit se terminer par "${Z.suffix}"`;if(Z.format==="includes")return`Chaîne invalide : doit inclure "${Z.includes}"`;if(Z.format==="regex")return`Chaîne invalide : doit correspondre au motif ${Z.pattern}`;return`${Y[Z.format]??W.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit être un multiple de ${W.divisor}`;case"unrecognized_keys":return`Clé${W.keys.length>1?"s":""} non reconnue${W.keys.length>1?"s":""} : ${e(W.keys,", ")}`;case"invalid_key":return`Clé invalide dans ${W.origin}`;case"invalid_union":return"Entrée invalide";case"invalid_element":return`Valeur invalide dans ${W.origin}`;default:return"Entrée invalide"}}};var fh=C(()=>{f$()});function gO(){return{localeError:oZ$()}}var oZ$=()=>{let $={string:{label:"מחרוזת",gender:"f"},number:{label:"מספר",gender:"m"},boolean:{label:"ערך בוליאני",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"תאריך",gender:"m"},array:{label:"מערך",gender:"m"},object:{label:"אובייקט",gender:"m"},null:{label:"ערך ריק (null)",gender:"m"},undefined:{label:"ערך לא מוגדר (undefined)",gender:"m"},symbol:{label:"סימבול (Symbol)",gender:"m"},function:{label:"פונקציה",gender:"f"},map:{label:"מפה (Map)",gender:"f"},set:{label:"קבוצה (Set)",gender:"f"},file:{label:"קובץ",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"ערך לא ידוע",gender:"m"},value:{label:"ערך",gender:"m"}},J={string:{unit:"תווים",shortLabel:"קצר",longLabel:"ארוך"},file:{unit:"בייטים",shortLabel:"קטן",longLabel:"גדול"},array:{unit:"פריטים",shortLabel:"קטן",longLabel:"גדול"},set:{unit:"פריטים",shortLabel:"קטן",longLabel:"גדול"},number:{unit:"",shortLabel:"קטן",longLabel:"גדול"}},Y=(z)=>z?$[z]:void 0,X=(z)=>{let K=Y(z);if(K)return K.label;return z??$.unknown.label},W=(z)=>`ה${X(z)}`,Z=(z)=>{return(Y(z)?.gender??"m")==="f"?"צריכה להיות":"צריך להיות"},G=(z)=>{if(!z)return null;return J[z]??null},Q={regex:{label:"קלט",gender:"m"},email:{label:"כתובת אימייל",gender:"f"},url:{label:"כתובת רשת",gender:"f"},emoji:{label:"אימוג'י",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"תאריך וזמן ISO",gender:"m"},date:{label:"תאריך ISO",gender:"m"},time:{label:"זמן ISO",gender:"m"},duration:{label:"משך זמן ISO",gender:"m"},ipv4:{label:"כתובת IPv4",gender:"f"},ipv6:{label:"כתובת IPv6",gender:"f"},cidrv4:{label:"טווח IPv4",gender:"m"},cidrv6:{label:"טווח IPv6",gender:"m"},base64:{label:"מחרוזת בבסיס 64",gender:"f"},base64url:{label:"מחרוזת בבסיס 64 לכתובות רשת",gender:"f"},json_string:{label:"מחרוזת JSON",gender:"f"},e164:{label:"מספר E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"קלט",gender:"m"},includes:{label:"קלט",gender:"m"},lowercase:{label:"קלט",gender:"m"},starts_with:{label:"קלט",gender:"m"},uppercase:{label:"קלט",gender:"m"}},H={nan:"NaN"};return(z)=>{switch(z.code){case"invalid_type":{let K=z.expected,w=H[K??""]??X(K),F=K$(z.input),U=H[F]??$[F]?.label??F;if(/^[A-Z]/.test(z.expected))return`קלט לא תקין: צריך להיות instanceof ${z.expected}, התקבל ${U}`;return`קלט לא תקין: צריך להיות ${w}, התקבל ${U}`}case"invalid_value":{if(z.values.length===1)return`ערך לא תקין: הערך חייב להיות ${z$(z.values[0])}`;let K=z.values.map((U)=>z$(U));if(z.values.length===2)return`ערך לא תקין: האפשרויות המתאימות הן ${K[0]} או ${K[1]}`;let w=K[K.length-1];return`ערך לא תקין: האפשרויות המתאימות הן ${K.slice(0,-1).join(", ")} או ${w}`}case"too_big":{let K=G(z.origin),w=W(z.origin??"value");if(z.origin==="string")return`${K?.longLabel??"ארוך"} מדי: ${w} צריכה להכיל ${z.maximum.toString()} ${K?.unit??""} ${z.inclusive?"או פחות":"לכל היותר"}`.trim();if(z.origin==="number"){let V=z.inclusive?`קטן או שווה ל-${z.maximum}`:`קטן מ-${z.maximum}`;return`גדול מדי: ${w} צריך להיות ${V}`}if(z.origin==="array"||z.origin==="set"){let V=z.origin==="set"?"צריכה":"צריך",N=z.inclusive?`${z.maximum} ${K?.unit??""} או פחות`:`פחות מ-${z.maximum} ${K?.unit??""}`;return`גדול מדי: ${w} ${V} להכיל ${N}`.trim()}let F=z.inclusive?"<=":"<",U=Z(z.origin??"value");if(K?.unit)return`${K.longLabel} מדי: ${w} ${U} ${F}${z.maximum.toString()} ${K.unit}`;return`${K?.longLabel??"גדול"} מדי: ${w} ${U} ${F}${z.maximum.toString()}`}case"too_small":{let K=G(z.origin),w=W(z.origin??"value");if(z.origin==="string")return`${K?.shortLabel??"קצר"} מדי: ${w} צריכה להכיל ${z.minimum.toString()} ${K?.unit??""} ${z.inclusive?"או יותר":"לפחות"}`.trim();if(z.origin==="number"){let V=z.inclusive?`גדול או שווה ל-${z.minimum}`:`גדול מ-${z.minimum}`;return`קטן מדי: ${w} צריך להיות ${V}`}if(z.origin==="array"||z.origin==="set"){let V=z.origin==="set"?"צריכה":"צריך";if(z.minimum===1&&z.inclusive){let P=z.origin==="set"?"לפחות פריט אחד":"לפחות פריט אחד";return`קטן מדי: ${w} ${V} להכיל ${P}`}let N=z.inclusive?`${z.minimum} ${K?.unit??""} או יותר`:`יותר מ-${z.minimum} ${K?.unit??""}`;return`קטן מדי: ${w} ${V} להכיל ${N}`.trim()}let F=z.inclusive?">=":">",U=Z(z.origin??"value");if(K?.unit)return`${K.shortLabel} מדי: ${w} ${U} ${F}${z.minimum.toString()} ${K.unit}`;return`${K?.shortLabel??"קטן"} מדי: ${w} ${U} ${F}${z.minimum.toString()}`}case"invalid_format":{let K=z;if(K.format==="starts_with")return`המחרוזת חייבת להתחיל ב "${K.prefix}"`;if(K.format==="ends_with")return`המחרוזת חייבת להסתיים ב "${K.suffix}"`;if(K.format==="includes")return`המחרוזת חייבת לכלול "${K.includes}"`;if(K.format==="regex")return`המחרוזת חייבת להתאים לתבנית ${K.pattern}`;let w=Q[K.format],F=w?.label??K.format,V=(w?.gender??"m")==="f"?"תקינה":"תקין";return`${F} לא ${V}`}case"not_multiple_of":return`מספר לא תקין: חייב להיות מכפלה של ${z.divisor}`;case"unrecognized_keys":return`מפתח${z.keys.length>1?"ות":""} לא מזוה${z.keys.length>1?"ים":"ה"}: ${e(z.keys,", ")}`;case"invalid_key":return"שדה לא תקין באובייקט";case"invalid_union":return"קלט לא תקין";case"invalid_element":return`ערך לא תקין ב${W(z.origin??"array")}`;default:return"קלט לא תקין"}}};var gh=C(()=>{f$()});function xO(){return{localeError:tZ$()}}var tZ$=()=>{let $={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function J(W){return $[W]??null}let Y={regex:"bemenet",email:"email cím",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO időbélyeg",date:"ISO dátum",time:"ISO idő",duration:"ISO időintervallum",ipv4:"IPv4 cím",ipv6:"IPv6 cím",cidrv4:"IPv4 tartomány",cidrv6:"IPv6 tartomány",base64:"base64-kódolt string",base64url:"base64url-kódolt string",json_string:"JSON string",e164:"E.164 szám",jwt:"JWT",template_literal:"bemenet"},X={nan:"NaN",number:"szám",array:"tömb"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Érvénytelen bemenet: a várt érték instanceof ${W.expected}, a kapott érték ${Q}`;return`Érvénytelen bemenet: a várt érték ${Z}, a kapott érték ${Q}`}case"invalid_value":if(W.values.length===1)return`Érvénytelen bemenet: a várt érték ${z$(W.values[0])}`;return`Érvénytelen opció: valamelyik érték várt ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Túl nagy: ${W.origin??"érték"} mérete túl nagy ${Z}${W.maximum.toString()} ${G.unit??"elem"}`;return`Túl nagy: a bemeneti érték ${W.origin??"érték"} túl nagy: ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Túl kicsi: a bemeneti érték ${W.origin} mérete túl kicsi ${Z}${W.minimum.toString()} ${G.unit}`;return`Túl kicsi: a bemeneti érték ${W.origin} túl kicsi ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Érvénytelen string: "${Z.prefix}" értékkel kell kezdődnie`;if(Z.format==="ends_with")return`Érvénytelen string: "${Z.suffix}" értékkel kell végződnie`;if(Z.format==="includes")return`Érvénytelen string: "${Z.includes}" értéket kell tartalmaznia`;if(Z.format==="regex")return`Érvénytelen string: ${Z.pattern} mintának kell megfelelnie`;return`Érvénytelen ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Érvénytelen szám: ${W.divisor} többszörösének kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Érvénytelen kulcs ${W.origin}`;case"invalid_union":return"Érvénytelen bemenet";case"invalid_element":return`Érvénytelen érték: ${W.origin}`;default:return"Érvénytelen bemenet"}}};var xh=C(()=>{f$()});function yh($,J,Y){return Math.abs($)===1?J:Y}function vG($){if(!$)return"";let J=["ա","ե","ը","ի","ո","ու","օ"],Y=$[$.length-1];return $+(J.includes(Y)?"ն":"ը")}function yO(){return{localeError:aZ$()}}var aZ$=()=>{let $={string:{unit:{one:"նշան",many:"նշաններ"},verb:"ունենալ"},file:{unit:{one:"բայթ",many:"բայթեր"},verb:"ունենալ"},array:{unit:{one:"տարր",many:"տարրեր"},verb:"ունենալ"},set:{unit:{one:"տարր",many:"տարրեր"},verb:"ունենալ"}};function J(W){return $[W]??null}let Y={regex:"մուտք",email:"էլ. հասցե",url:"URL",emoji:"էմոջի",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO ամսաթիվ և ժամ",date:"ISO ամսաթիվ",time:"ISO ժամ",duration:"ISO տևողություն",ipv4:"IPv4 հասցե",ipv6:"IPv6 հասցե",cidrv4:"IPv4 միջակայք",cidrv6:"IPv6 միջակայք",base64:"base64 ձևաչափով տող",base64url:"base64url ձևաչափով տող",json_string:"JSON տող",e164:"E.164 համար",jwt:"JWT",template_literal:"մուտք"},X={nan:"NaN",number:"թիվ",array:"զանգված"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Սխալ մուտքագրում․ սպասվում էր instanceof ${W.expected}, ստացվել է ${Q}`;return`Սխալ մուտքագրում․ սպասվում էր ${Z}, ստացվել է ${Q}`}case"invalid_value":if(W.values.length===1)return`Սխալ մուտքագրում․ սպասվում էր ${z$(W.values[1])}`;return`Սխալ տարբերակ․ սպասվում էր հետևյալներից մեկը՝ ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G){let Q=Number(W.maximum),H=yh(Q,G.unit.one,G.unit.many);return`Չափազանց մեծ արժեք․ սպասվում է, որ ${vG(W.origin??"արժեք")} կունենա ${Z}${W.maximum.toString()} ${H}`}return`Չափազանց մեծ արժեք․ սպասվում է, որ ${vG(W.origin??"արժեք")} լինի ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G){let Q=Number(W.minimum),H=yh(Q,G.unit.one,G.unit.many);return`Չափազանց փոքր արժեք․ սպասվում է, որ ${vG(W.origin)} կունենա ${Z}${W.minimum.toString()} ${H}`}return`Չափազանց փոքր արժեք․ սպասվում է, որ ${vG(W.origin)} լինի ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Սխալ տող․ պետք է սկսվի "${Z.prefix}"-ով`;if(Z.format==="ends_with")return`Սխալ տող․ պետք է ավարտվի "${Z.suffix}"-ով`;if(Z.format==="includes")return`Սխալ տող․ պետք է պարունակի "${Z.includes}"`;if(Z.format==="regex")return`Սխալ տող․ պետք է համապատասխանի ${Z.pattern} ձևաչափին`;return`Սխալ ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Սխալ թիվ․ պետք է բազմապատիկ լինի ${W.divisor}-ի`;case"unrecognized_keys":return`Չճանաչված բանալի${W.keys.length>1?"ներ":""}. ${e(W.keys,", ")}`;case"invalid_key":return`Սխալ բանալի ${vG(W.origin)}-ում`;case"invalid_union":return"Սխալ մուտքագրում";case"invalid_element":return`Սխալ արժեք ${vG(W.origin)}-ում`;default:return"Սխալ մուտքագրում"}}};var hh=C(()=>{f$()});function hO(){return{localeError:sZ$()}}var sZ$=()=>{let $={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function J(W){return $[W]??null}let Y={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Input tidak valid: diharapkan instanceof ${W.expected}, diterima ${Q}`;return`Input tidak valid: diharapkan ${Z}, diterima ${Q}`}case"invalid_value":if(W.values.length===1)return`Input tidak valid: diharapkan ${z$(W.values[0])}`;return`Pilihan tidak valid: diharapkan salah satu dari ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Terlalu besar: diharapkan ${W.origin??"value"} memiliki ${Z}${W.maximum.toString()} ${G.unit??"elemen"}`;return`Terlalu besar: diharapkan ${W.origin??"value"} menjadi ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Terlalu kecil: diharapkan ${W.origin} memiliki ${Z}${W.minimum.toString()} ${G.unit}`;return`Terlalu kecil: diharapkan ${W.origin} menjadi ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`String tidak valid: harus dimulai dengan "${Z.prefix}"`;if(Z.format==="ends_with")return`String tidak valid: harus berakhir dengan "${Z.suffix}"`;if(Z.format==="includes")return`String tidak valid: harus menyertakan "${Z.includes}"`;if(Z.format==="regex")return`String tidak valid: harus sesuai pola ${Z.pattern}`;return`${Y[Z.format]??W.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${W.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${W.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${W.origin}`;default:return"Input tidak valid"}}};var mh=C(()=>{f$()});function mO(){return{localeError:eZ$()}}var eZ$=()=>{let $={string:{unit:"stafi",verb:"að hafa"},file:{unit:"bæti",verb:"að hafa"},array:{unit:"hluti",verb:"að hafa"},set:{unit:"hluti",verb:"að hafa"}};function J(W){return $[W]??null}let Y={regex:"gildi",email:"netfang",url:"vefslóð",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og tími",date:"ISO dagsetning",time:"ISO tími",duration:"ISO tímalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 tölugildi",jwt:"JWT",template_literal:"gildi"},X={nan:"NaN",number:"númer",array:"fylki"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Rangt gildi: Þú slóst inn ${Q} þar sem á að vera instanceof ${W.expected}`;return`Rangt gildi: Þú slóst inn ${Q} þar sem á að vera ${Z}`}case"invalid_value":if(W.values.length===1)return`Rangt gildi: gert ráð fyrir ${z$(W.values[0])}`;return`Ógilt val: má vera eitt af eftirfarandi ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Of stórt: gert er ráð fyrir að ${W.origin??"gildi"} hafi ${Z}${W.maximum.toString()} ${G.unit??"hluti"}`;return`Of stórt: gert er ráð fyrir að ${W.origin??"gildi"} sé ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Of lítið: gert er ráð fyrir að ${W.origin} hafi ${Z}${W.minimum.toString()} ${G.unit}`;return`Of lítið: gert er ráð fyrir að ${W.origin} sé ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ógildur strengur: verður að byrja á "${Z.prefix}"`;if(Z.format==="ends_with")return`Ógildur strengur: verður að enda á "${Z.suffix}"`;if(Z.format==="includes")return`Ógildur strengur: verður að innihalda "${Z.includes}"`;if(Z.format==="regex")return`Ógildur strengur: verður að fylgja mynstri ${Z.pattern}`;return`Rangt ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Röng tala: verður að vera margfeldi af ${W.divisor}`;case"unrecognized_keys":return`Óþekkt ${W.keys.length>1?"ir lyklar":"ur lykill"}: ${e(W.keys,", ")}`;case"invalid_key":return`Rangur lykill í ${W.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi í ${W.origin}`;default:return"Rangt gildi"}}};var uh=C(()=>{f$()});function uO(){return{localeError:$7$()}}var $7$=()=>{let $={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function J(W){return $[W]??null}let Y={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"},X={nan:"NaN",number:"numero",array:"vettore"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Input non valido: atteso instanceof ${W.expected}, ricevuto ${Q}`;return`Input non valido: atteso ${Z}, ricevuto ${Q}`}case"invalid_value":if(W.values.length===1)return`Input non valido: atteso ${z$(W.values[0])}`;return`Opzione non valida: atteso uno tra ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Troppo grande: ${W.origin??"valore"} deve avere ${Z}${W.maximum.toString()} ${G.unit??"elementi"}`;return`Troppo grande: ${W.origin??"valore"} deve essere ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Troppo piccolo: ${W.origin} deve avere ${Z}${W.minimum.toString()} ${G.unit}`;return`Troppo piccolo: ${W.origin} deve essere ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Stringa non valida: deve iniziare con "${Z.prefix}"`;if(Z.format==="ends_with")return`Stringa non valida: deve terminare con "${Z.suffix}"`;if(Z.format==="includes")return`Stringa non valida: deve includere "${Z.includes}"`;if(Z.format==="regex")return`Stringa non valida: deve corrispondere al pattern ${Z.pattern}`;return`Invalid ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${W.divisor}`;case"unrecognized_keys":return`Chiav${W.keys.length>1?"i":"e"} non riconosciut${W.keys.length>1?"e":"a"}: ${e(W.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${W.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${W.origin}`;default:return"Input non valido"}}};var dh=C(()=>{f$()});function dO(){return{localeError:J7$()}}var J7$=()=>{let $={string:{unit:"文字",verb:"である"},file:{unit:"バイト",verb:"である"},array:{unit:"要素",verb:"である"},set:{unit:"要素",verb:"である"}};function J(W){return $[W]??null}let Y={regex:"入力値",email:"メールアドレス",url:"URL",emoji:"絵文字",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日時",date:"ISO日付",time:"ISO時刻",duration:"ISO期間",ipv4:"IPv4アドレス",ipv6:"IPv6アドレス",cidrv4:"IPv4範囲",cidrv6:"IPv6範囲",base64:"base64エンコード文字列",base64url:"base64urlエンコード文字列",json_string:"JSON文字列",e164:"E.164番号",jwt:"JWT",template_literal:"入力値"},X={nan:"NaN",number:"数値",array:"配列"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`無効な入力: instanceof ${W.expected}が期待されましたが、${Q}が入力されました`;return`無効な入力: ${Z}が期待されましたが、${Q}が入力されました`}case"invalid_value":if(W.values.length===1)return`無効な入力: ${z$(W.values[0])}が期待されました`;return`無効な選択: ${e(W.values,"、")}のいずれかである必要があります`;case"too_big":{let Z=W.inclusive?"以下である":"より小さい",G=J(W.origin);if(G)return`大きすぎる値: ${W.origin??"値"}は${W.maximum.toString()}${G.unit??"要素"}${Z}必要があります`;return`大きすぎる値: ${W.origin??"値"}は${W.maximum.toString()}${Z}必要があります`}case"too_small":{let Z=W.inclusive?"以上である":"より大きい",G=J(W.origin);if(G)return`小さすぎる値: ${W.origin}は${W.minimum.toString()}${G.unit}${Z}必要があります`;return`小さすぎる値: ${W.origin}は${W.minimum.toString()}${Z}必要があります`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`無効な文字列: "${Z.prefix}"で始まる必要があります`;if(Z.format==="ends_with")return`無効な文字列: "${Z.suffix}"で終わる必要があります`;if(Z.format==="includes")return`無効な文字列: "${Z.includes}"を含む必要があります`;if(Z.format==="regex")return`無効な文字列: パターン${Z.pattern}に一致する必要があります`;return`無効な${Y[Z.format]??W.format}`}case"not_multiple_of":return`無効な数値: ${W.divisor}の倍数である必要があります`;case"unrecognized_keys":return`認識されていないキー${W.keys.length>1?"群":""}: ${e(W.keys,"、")}`;case"invalid_key":return`${W.origin}内の無効なキー`;case"invalid_union":return"無効な入力";case"invalid_element":return`${W.origin}内の無効な値`;default:return"無効な入力"}}};var ch=C(()=>{f$()});function cO(){return{localeError:Y7$()}}var Y7$=()=>{let $={string:{unit:"სიმბოლო",verb:"უნდა შეიცავდეს"},file:{unit:"ბაიტი",verb:"უნდა შეიცავდეს"},array:{unit:"ელემენტი",verb:"უნდა შეიცავდეს"},set:{unit:"ელემენტი",verb:"უნდა შეიცავდეს"}};function J(W){return $[W]??null}let Y={regex:"შეყვანა",email:"ელ-ფოსტის მისამართი",url:"URL",emoji:"ემოჯი",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"თარიღი-დრო",date:"თარიღი",time:"დრო",duration:"ხანგრძლივობა",ipv4:"IPv4 მისამართი",ipv6:"IPv6 მისამართი",cidrv4:"IPv4 დიაპაზონი",cidrv6:"IPv6 დიაპაზონი",base64:"base64-კოდირებული სტრინგი",base64url:"base64url-კოდირებული სტრინგი",json_string:"JSON სტრინგი",e164:"E.164 ნომერი",jwt:"JWT",template_literal:"შეყვანა"},X={nan:"NaN",number:"რიცხვი",string:"სტრინგი",boolean:"ბულეანი",function:"ფუნქცია",array:"მასივი"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`არასწორი შეყვანა: მოსალოდნელი instanceof ${W.expected}, მიღებული ${Q}`;return`არასწორი შეყვანა: მოსალოდნელი ${Z}, მიღებული ${Q}`}case"invalid_value":if(W.values.length===1)return`არასწორი შეყვანა: მოსალოდნელი ${z$(W.values[0])}`;return`არასწორი ვარიანტი: მოსალოდნელია ერთ-ერთი ${e(W.values,"|")}-დან`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`ზედმეტად დიდი: მოსალოდნელი ${W.origin??"მნიშვნელობა"} ${G.verb} ${Z}${W.maximum.toString()} ${G.unit}`;return`ზედმეტად დიდი: მოსალოდნელი ${W.origin??"მნიშვნელობა"} იყოს ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`ზედმეტად პატარა: მოსალოდნელი ${W.origin} ${G.verb} ${Z}${W.minimum.toString()} ${G.unit}`;return`ზედმეტად პატარა: მოსალოდნელი ${W.origin} იყოს ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`არასწორი სტრინგი: უნდა იწყებოდეს "${Z.prefix}"-ით`;if(Z.format==="ends_with")return`არასწორი სტრინგი: უნდა მთავრდებოდეს "${Z.suffix}"-ით`;if(Z.format==="includes")return`არასწორი სტრინგი: უნდა შეიცავდეს "${Z.includes}"-ს`;if(Z.format==="regex")return`არასწორი სტრინგი: უნდა შეესაბამებოდეს შაბლონს ${Z.pattern}`;return`არასწორი ${Y[Z.format]??W.format}`}case"not_multiple_of":return`არასწორი რიცხვი: უნდა იყოს ${W.divisor}-ის ჯერადი`;case"unrecognized_keys":return`უცნობი გასაღებ${W.keys.length>1?"ები":"ი"}: ${e(W.keys,", ")}`;case"invalid_key":return`არასწორი გასაღები ${W.origin}-ში`;case"invalid_union":return"არასწორი შეყვანა";case"invalid_element":return`არასწორი მნიშვნელობა ${W.origin}-ში`;default:return"არასწორი შეყვანა"}}};var ph=C(()=>{f$()});function pH(){return{localeError:X7$()}}var X7$=()=>{let $={string:{unit:"តួអក្សរ",verb:"គួរមាន"},file:{unit:"បៃ",verb:"គួរមាន"},array:{unit:"ធាតុ",verb:"គួរមាន"},set:{unit:"ធាតុ",verb:"គួរមាន"}};function J(W){return $[W]??null}let Y={regex:"ទិន្នន័យបញ្ចូល",email:"អាសយដ្ឋានអ៊ីមែល",url:"URL",emoji:"សញ្ញាអារម្មណ៍",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"កាលបរិច្ឆេទ និងម៉ោង ISO",date:"កាលបរិច្ឆេទ ISO",time:"ម៉ោង ISO",duration:"រយៈពេល ISO",ipv4:"អាសយដ្ឋាន IPv4",ipv6:"អាសយដ្ឋាន IPv6",cidrv4:"ដែនអាសយដ្ឋាន IPv4",cidrv6:"ដែនអាសយដ្ឋាន IPv6",base64:"ខ្សែអក្សរអ៊ិកូដ base64",base64url:"ខ្សែអក្សរអ៊ិកូដ base64url",json_string:"ខ្សែអក្សរ JSON",e164:"លេខ E.164",jwt:"JWT",template_literal:"ទិន្នន័យបញ្ចូល"},X={nan:"NaN",number:"លេខ",array:"អារេ (Array)",null:"គ្មានតម្លៃ (null)"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ instanceof ${W.expected} ប៉ុន្តែទទួលបាន ${Q}`;return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${Z} ប៉ុន្តែទទួលបាន ${Q}`}case"invalid_value":if(W.values.length===1)return`ទិន្នន័យបញ្ចូលមិនត្រឹមត្រូវ៖ ត្រូវការ ${z$(W.values[0])}`;return`ជម្រើសមិនត្រឹមត្រូវ៖ ត្រូវជាមួយក្នុងចំណោម ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`ធំពេក៖ ត្រូវការ ${W.origin??"តម្លៃ"} ${Z} ${W.maximum.toString()} ${G.unit??"ធាតុ"}`;return`ធំពេក៖ ត្រូវការ ${W.origin??"តម្លៃ"} ${Z} ${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`តូចពេក៖ ត្រូវការ ${W.origin} ${Z} ${W.minimum.toString()} ${G.unit}`;return`តូចពេក៖ ត្រូវការ ${W.origin} ${Z} ${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវចាប់ផ្តើមដោយ "${Z.prefix}"`;if(Z.format==="ends_with")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវបញ្ចប់ដោយ "${Z.suffix}"`;if(Z.format==="includes")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវមាន "${Z.includes}"`;if(Z.format==="regex")return`ខ្សែអក្សរមិនត្រឹមត្រូវ៖ ត្រូវតែផ្គូផ្គងនឹងទម្រង់ដែលបានកំណត់ ${Z.pattern}`;return`មិនត្រឹមត្រូវ៖ ${Y[Z.format]??W.format}`}case"not_multiple_of":return`លេខមិនត្រឹមត្រូវ៖ ត្រូវតែជាពហុគុណនៃ ${W.divisor}`;case"unrecognized_keys":return`រកឃើញសោមិនស្គាល់៖ ${e(W.keys,", ")}`;case"invalid_key":return`សោមិនត្រឹមត្រូវនៅក្នុង ${W.origin}`;case"invalid_union":return"ទិន្នន័យមិនត្រឹមត្រូវ";case"invalid_element":return`ទិន្នន័យមិនត្រឹមត្រូវនៅក្នុង ${W.origin}`;default:return"ទិន្នន័យមិនត្រឹមត្រូវ"}}};var pO=C(()=>{f$()});function lO(){return pH()}var lh=C(()=>{pO()});function nO(){return{localeError:W7$()}}var W7$=()=>{let $={string:{unit:"문자",verb:"to have"},file:{unit:"바이트",verb:"to have"},array:{unit:"개",verb:"to have"},set:{unit:"개",verb:"to have"}};function J(W){return $[W]??null}let Y={regex:"입력",email:"이메일 주소",url:"URL",emoji:"이모지",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 날짜시간",date:"ISO 날짜",time:"ISO 시간",duration:"ISO 기간",ipv4:"IPv4 주소",ipv6:"IPv6 주소",cidrv4:"IPv4 범위",cidrv6:"IPv6 범위",base64:"base64 인코딩 문자열",base64url:"base64url 인코딩 문자열",json_string:"JSON 문자열",e164:"E.164 번호",jwt:"JWT",template_literal:"입력"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`잘못된 입력: 예상 타입은 instanceof ${W.expected}, 받은 타입은 ${Q}입니다`;return`잘못된 입력: 예상 타입은 ${Z}, 받은 타입은 ${Q}입니다`}case"invalid_value":if(W.values.length===1)return`잘못된 입력: 값은 ${z$(W.values[0])} 이어야 합니다`;return`잘못된 옵션: ${e(W.values,"또는 ")} 중 하나여야 합니다`;case"too_big":{let Z=W.inclusive?"이하":"미만",G=Z==="미만"?"이어야 합니다":"여야 합니다",Q=J(W.origin),H=Q?.unit??"요소";if(Q)return`${W.origin??"값"}이 너무 큽니다: ${W.maximum.toString()}${H} ${Z}${G}`;return`${W.origin??"값"}이 너무 큽니다: ${W.maximum.toString()} ${Z}${G}`}case"too_small":{let Z=W.inclusive?"이상":"초과",G=Z==="이상"?"이어야 합니다":"여야 합니다",Q=J(W.origin),H=Q?.unit??"요소";if(Q)return`${W.origin??"값"}이 너무 작습니다: ${W.minimum.toString()}${H} ${Z}${G}`;return`${W.origin??"값"}이 너무 작습니다: ${W.minimum.toString()} ${Z}${G}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`잘못된 문자열: "${Z.prefix}"(으)로 시작해야 합니다`;if(Z.format==="ends_with")return`잘못된 문자열: "${Z.suffix}"(으)로 끝나야 합니다`;if(Z.format==="includes")return`잘못된 문자열: "${Z.includes}"을(를) 포함해야 합니다`;if(Z.format==="regex")return`잘못된 문자열: 정규식 ${Z.pattern} 패턴과 일치해야 합니다`;return`잘못된 ${Y[Z.format]??W.format}`}case"not_multiple_of":return`잘못된 숫자: ${W.divisor}의 배수여야 합니다`;case"unrecognized_keys":return`인식할 수 없는 키: ${e(W.keys,", ")}`;case"invalid_key":return`잘못된 키: ${W.origin}`;case"invalid_union":return"잘못된 입력";case"invalid_element":return`잘못된 값: ${W.origin}`;default:return"잘못된 입력"}}};var nh=C(()=>{f$()});function ih($){let J=Math.abs($),Y=J%10,X=J%100;if(X>=11&&X<=19||Y===0)return"many";if(Y===1)return"one";return"few"}function iO(){return{localeError:Z7$()}}var lH=($)=>{return $.charAt(0).toUpperCase()+$.slice(1)},Z7$=()=>{let $={string:{unit:{one:"simbolis",few:"simboliai",many:"simbolių"},verb:{smaller:{inclusive:"turi būti ne ilgesnė kaip",notInclusive:"turi būti trumpesnė kaip"},bigger:{inclusive:"turi būti ne trumpesnė kaip",notInclusive:"turi būti ilgesnė kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"baitų"},verb:{smaller:{inclusive:"turi būti ne didesnis kaip",notInclusive:"turi būti mažesnis kaip"},bigger:{inclusive:"turi būti ne mažesnis kaip",notInclusive:"turi būti didesnis kaip"}}},array:{unit:{one:"elementą",few:"elementus",many:"elementų"},verb:{smaller:{inclusive:"turi turėti ne daugiau kaip",notInclusive:"turi turėti mažiau kaip"},bigger:{inclusive:"turi turėti ne mažiau kaip",notInclusive:"turi turėti daugiau kaip"}}},set:{unit:{one:"elementą",few:"elementus",many:"elementų"},verb:{smaller:{inclusive:"turi turėti ne daugiau kaip",notInclusive:"turi turėti mažiau kaip"},bigger:{inclusive:"turi turėti ne mažiau kaip",notInclusive:"turi turėti daugiau kaip"}}}};function J(W,Z,G,Q){let H=$[W]??null;if(H===null)return H;return{unit:H.unit[Z],verb:H.verb[Q][G?"inclusive":"notInclusive"]}}let Y={regex:"įvestis",email:"el. pašto adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukmė",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 užkoduota eilutė",base64url:"base64url užkoduota eilutė",json_string:"JSON eilutė",e164:"E.164 numeris",jwt:"JWT",template_literal:"įvestis"},X={nan:"NaN",number:"skaičius",bigint:"sveikasis skaičius",string:"eilutė",boolean:"loginė reikšmė",undefined:"neapibrėžta reikšmė",function:"funkcija",symbol:"simbolis",array:"masyvas",object:"objektas",null:"nulinė reikšmė"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Gautas tipas ${Q}, o tikėtasi - instanceof ${W.expected}`;return`Gautas tipas ${Q}, o tikėtasi - ${Z}`}case"invalid_value":if(W.values.length===1)return`Privalo būti ${z$(W.values[0])}`;return`Privalo būti vienas iš ${e(W.values,"|")} pasirinkimų`;case"too_big":{let Z=X[W.origin]??W.origin,G=J(W.origin,ih(Number(W.maximum)),W.inclusive??!1,"smaller");if(G?.verb)return`${lH(Z??W.origin??"reikšmė")} ${G.verb} ${W.maximum.toString()} ${G.unit??"elementų"}`;let Q=W.inclusive?"ne didesnis kaip":"mažesnis kaip";return`${lH(Z??W.origin??"reikšmė")} turi būti ${Q} ${W.maximum.toString()} ${G?.unit}`}case"too_small":{let Z=X[W.origin]??W.origin,G=J(W.origin,ih(Number(W.minimum)),W.inclusive??!1,"bigger");if(G?.verb)return`${lH(Z??W.origin??"reikšmė")} ${G.verb} ${W.minimum.toString()} ${G.unit??"elementų"}`;let Q=W.inclusive?"ne mažesnis kaip":"didesnis kaip";return`${lH(Z??W.origin??"reikšmė")} turi būti ${Q} ${W.minimum.toString()} ${G?.unit}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Eilutė privalo prasidėti "${Z.prefix}"`;if(Z.format==="ends_with")return`Eilutė privalo pasibaigti "${Z.suffix}"`;if(Z.format==="includes")return`Eilutė privalo įtraukti "${Z.includes}"`;if(Z.format==="regex")return`Eilutė privalo atitikti ${Z.pattern}`;return`Neteisingas ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Skaičius privalo būti ${W.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpažint${W.keys.length>1?"i":"as"} rakt${W.keys.length>1?"ai":"as"}: ${e(W.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga įvestis";case"invalid_element":{let Z=X[W.origin]??W.origin;return`${lH(Z??W.origin??"reikšmė")} turi klaidingą įvestį`}default:return"Klaidinga įvestis"}}};var rh=C(()=>{f$()});function rO(){return{localeError:G7$()}}var G7$=()=>{let $={string:{unit:"знаци",verb:"да имаат"},file:{unit:"бајти",verb:"да имаат"},array:{unit:"ставки",verb:"да имаат"},set:{unit:"ставки",verb:"да имаат"}};function J(W){return $[W]??null}let Y={regex:"внес",email:"адреса на е-пошта",url:"URL",emoji:"емоџи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO датум и време",date:"ISO датум",time:"ISO време",duration:"ISO времетраење",ipv4:"IPv4 адреса",ipv6:"IPv6 адреса",cidrv4:"IPv4 опсег",cidrv6:"IPv6 опсег",base64:"base64-енкодирана низа",base64url:"base64url-енкодирана низа",json_string:"JSON низа",e164:"E.164 број",jwt:"JWT",template_literal:"внес"},X={nan:"NaN",number:"број",array:"низа"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Грешен внес: се очекува instanceof ${W.expected}, примено ${Q}`;return`Грешен внес: се очекува ${Z}, примено ${Q}`}case"invalid_value":if(W.values.length===1)return`Invalid input: expected ${z$(W.values[0])}`;return`Грешана опција: се очекува една ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Премногу голем: се очекува ${W.origin??"вредноста"} да има ${Z}${W.maximum.toString()} ${G.unit??"елементи"}`;return`Премногу голем: се очекува ${W.origin??"вредноста"} да биде ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Премногу мал: се очекува ${W.origin} да има ${Z}${W.minimum.toString()} ${G.unit}`;return`Премногу мал: се очекува ${W.origin} да биде ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Неважечка низа: мора да започнува со "${Z.prefix}"`;if(Z.format==="ends_with")return`Неважечка низа: мора да завршува со "${Z.suffix}"`;if(Z.format==="includes")return`Неважечка низа: мора да вклучува "${Z.includes}"`;if(Z.format==="regex")return`Неважечка низа: мора да одгоара на патернот ${Z.pattern}`;return`Invalid ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Грешен број: мора да биде делив со ${W.divisor}`;case"unrecognized_keys":return`${W.keys.length>1?"Непрепознаени клучеви":"Непрепознаен клуч"}: ${e(W.keys,", ")}`;case"invalid_key":return`Грешен клуч во ${W.origin}`;case"invalid_union":return"Грешен внес";case"invalid_element":return`Грешна вредност во ${W.origin}`;default:return"Грешен внес"}}};var oh=C(()=>{f$()});function oO(){return{localeError:Q7$()}}var Q7$=()=>{let $={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function J(W){return $[W]??null}let Y={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"},X={nan:"NaN",number:"nombor"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Input tidak sah: dijangka instanceof ${W.expected}, diterima ${Q}`;return`Input tidak sah: dijangka ${Z}, diterima ${Q}`}case"invalid_value":if(W.values.length===1)return`Input tidak sah: dijangka ${z$(W.values[0])}`;return`Pilihan tidak sah: dijangka salah satu daripada ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Terlalu besar: dijangka ${W.origin??"nilai"} ${G.verb} ${Z}${W.maximum.toString()} ${G.unit??"elemen"}`;return`Terlalu besar: dijangka ${W.origin??"nilai"} adalah ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Terlalu kecil: dijangka ${W.origin} ${G.verb} ${Z}${W.minimum.toString()} ${G.unit}`;return`Terlalu kecil: dijangka ${W.origin} adalah ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`String tidak sah: mesti bermula dengan "${Z.prefix}"`;if(Z.format==="ends_with")return`String tidak sah: mesti berakhir dengan "${Z.suffix}"`;if(Z.format==="includes")return`String tidak sah: mesti mengandungi "${Z.includes}"`;if(Z.format==="regex")return`String tidak sah: mesti sepadan dengan corak ${Z.pattern}`;return`${Y[Z.format]??W.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${W.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${e(W.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${W.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${W.origin}`;default:return"Input tidak sah"}}};var th=C(()=>{f$()});function tO(){return{localeError:H7$()}}var H7$=()=>{let $={string:{unit:"tekens",verb:"heeft"},file:{unit:"bytes",verb:"heeft"},array:{unit:"elementen",verb:"heeft"},set:{unit:"elementen",verb:"heeft"}};function J(W){return $[W]??null}let Y={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"},X={nan:"NaN",number:"getal"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Ongeldige invoer: verwacht instanceof ${W.expected}, ontving ${Q}`;return`Ongeldige invoer: verwacht ${Z}, ontving ${Q}`}case"invalid_value":if(W.values.length===1)return`Ongeldige invoer: verwacht ${z$(W.values[0])}`;return`Ongeldige optie: verwacht één van ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin),Q=W.origin==="date"?"laat":W.origin==="string"?"lang":"groot";if(G)return`Te ${Q}: verwacht dat ${W.origin??"waarde"} ${Z}${W.maximum.toString()} ${G.unit??"elementen"} ${G.verb}`;return`Te ${Q}: verwacht dat ${W.origin??"waarde"} ${Z}${W.maximum.toString()} is`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin),Q=W.origin==="date"?"vroeg":W.origin==="string"?"kort":"klein";if(G)return`Te ${Q}: verwacht dat ${W.origin} ${Z}${W.minimum.toString()} ${G.unit} ${G.verb}`;return`Te ${Q}: verwacht dat ${W.origin} ${Z}${W.minimum.toString()} is`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ongeldige tekst: moet met "${Z.prefix}" beginnen`;if(Z.format==="ends_with")return`Ongeldige tekst: moet op "${Z.suffix}" eindigen`;if(Z.format==="includes")return`Ongeldige tekst: moet "${Z.includes}" bevatten`;if(Z.format==="regex")return`Ongeldige tekst: moet overeenkomen met patroon ${Z.pattern}`;return`Ongeldig: ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${W.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${W.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${W.origin}`;default:return"Ongeldige invoer"}}};var ah=C(()=>{f$()});function aO(){return{localeError:z7$()}}var z7$=()=>{let $={string:{unit:"tegn",verb:"å ha"},file:{unit:"bytes",verb:"å ha"},array:{unit:"elementer",verb:"å inneholde"},set:{unit:"elementer",verb:"å inneholde"}};function J(W){return $[W]??null}let Y={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-område",ipv6:"IPv6-område",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"},X={nan:"NaN",number:"tall",array:"liste"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Ugyldig input: forventet instanceof ${W.expected}, fikk ${Q}`;return`Ugyldig input: forventet ${Z}, fikk ${Q}`}case"invalid_value":if(W.values.length===1)return`Ugyldig verdi: forventet ${z$(W.values[0])}`;return`Ugyldig valg: forventet en av ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`For stor(t): forventet ${W.origin??"value"} til å ha ${Z}${W.maximum.toString()} ${G.unit??"elementer"}`;return`For stor(t): forventet ${W.origin??"value"} til å ha ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`For lite(n): forventet ${W.origin} til å ha ${Z}${W.minimum.toString()} ${G.unit}`;return`For lite(n): forventet ${W.origin} til å ha ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ugyldig streng: må starte med "${Z.prefix}"`;if(Z.format==="ends_with")return`Ugyldig streng: må ende med "${Z.suffix}"`;if(Z.format==="includes")return`Ugyldig streng: må inneholde "${Z.includes}"`;if(Z.format==="regex")return`Ugyldig streng: må matche mønsteret ${Z.pattern}`;return`Ugyldig ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Ugyldig tall: må være et multiplum av ${W.divisor}`;case"unrecognized_keys":return`${W.keys.length>1?"Ukjente nøkler":"Ukjent nøkkel"}: ${e(W.keys,", ")}`;case"invalid_key":return`Ugyldig nøkkel i ${W.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${W.origin}`;default:return"Ugyldig input"}}};var sh=C(()=>{f$()});function sO(){return{localeError:K7$()}}var K7$=()=>{let $={string:{unit:"harf",verb:"olmalıdır"},file:{unit:"bayt",verb:"olmalıdır"},array:{unit:"unsur",verb:"olmalıdır"},set:{unit:"unsur",verb:"olmalıdır"}};function J(W){return $[W]??null}let Y={regex:"giren",email:"epostagâh",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO hengâmı",date:"ISO tarihi",time:"ISO zamanı",duration:"ISO müddeti",ipv4:"IPv4 nişânı",ipv6:"IPv6 nişânı",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-şifreli metin",base64url:"base64url-şifreli metin",json_string:"JSON metin",e164:"E.164 sayısı",jwt:"JWT",template_literal:"giren"},X={nan:"NaN",number:"numara",array:"saf",null:"gayb"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Fâsit giren: umulan instanceof ${W.expected}, alınan ${Q}`;return`Fâsit giren: umulan ${Z}, alınan ${Q}`}case"invalid_value":if(W.values.length===1)return`Fâsit giren: umulan ${z$(W.values[0])}`;return`Fâsit tercih: mûteberler ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Fazla büyük: ${W.origin??"value"}, ${Z}${W.maximum.toString()} ${G.unit??"elements"} sahip olmalıydı.`;return`Fazla büyük: ${W.origin??"value"}, ${Z}${W.maximum.toString()} olmalıydı.`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Fazla küçük: ${W.origin}, ${Z}${W.minimum.toString()} ${G.unit} sahip olmalıydı.`;return`Fazla küçük: ${W.origin}, ${Z}${W.minimum.toString()} olmalıydı.`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Fâsit metin: "${Z.prefix}" ile başlamalı.`;if(Z.format==="ends_with")return`Fâsit metin: "${Z.suffix}" ile bitmeli.`;if(Z.format==="includes")return`Fâsit metin: "${Z.includes}" ihtivâ etmeli.`;if(Z.format==="regex")return`Fâsit metin: ${Z.pattern} nakşına uymalı.`;return`Fâsit ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Fâsit sayı: ${W.divisor} katı olmalıydı.`;case"unrecognized_keys":return`Tanınmayan anahtar ${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`${W.origin} için tanınmayan anahtar var.`;case"invalid_union":return"Giren tanınamadı.";case"invalid_element":return`${W.origin} için tanınmayan kıymet var.`;default:return"Kıymet tanınamadı."}}};var eh=C(()=>{f$()});function eO(){return{localeError:w7$()}}var w7$=()=>{let $={string:{unit:"توکي",verb:"ولري"},file:{unit:"بایټس",verb:"ولري"},array:{unit:"توکي",verb:"ولري"},set:{unit:"توکي",verb:"ولري"}};function J(W){return $[W]??null}let Y={regex:"ورودي",email:"بریښنالیک",url:"یو آر ال",emoji:"ایموجي",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"نیټه او وخت",date:"نېټه",time:"وخت",duration:"موده",ipv4:"د IPv4 پته",ipv6:"د IPv6 پته",cidrv4:"د IPv4 ساحه",cidrv6:"د IPv6 ساحه",base64:"base64-encoded متن",base64url:"base64url-encoded متن",json_string:"JSON متن",e164:"د E.164 شمېره",jwt:"JWT",template_literal:"ورودي"},X={nan:"NaN",number:"عدد",array:"ارې"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`ناسم ورودي: باید instanceof ${W.expected} وای, مګر ${Q} ترلاسه شو`;return`ناسم ورودي: باید ${Z} وای, مګر ${Q} ترلاسه شو`}case"invalid_value":if(W.values.length===1)return`ناسم ورودي: باید ${z$(W.values[0])} وای`;return`ناسم انتخاب: باید یو له ${e(W.values,"|")} څخه وای`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`ډیر لوی: ${W.origin??"ارزښت"} باید ${Z}${W.maximum.toString()} ${G.unit??"عنصرونه"} ولري`;return`ډیر لوی: ${W.origin??"ارزښت"} باید ${Z}${W.maximum.toString()} وي`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`ډیر کوچنی: ${W.origin} باید ${Z}${W.minimum.toString()} ${G.unit} ولري`;return`ډیر کوچنی: ${W.origin} باید ${Z}${W.minimum.toString()} وي`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`ناسم متن: باید د "${Z.prefix}" سره پیل شي`;if(Z.format==="ends_with")return`ناسم متن: باید د "${Z.suffix}" سره پای ته ورسيږي`;if(Z.format==="includes")return`ناسم متن: باید "${Z.includes}" ولري`;if(Z.format==="regex")return`ناسم متن: باید د ${Z.pattern} سره مطابقت ولري`;return`${Y[Z.format]??W.format} ناسم دی`}case"not_multiple_of":return`ناسم عدد: باید د ${W.divisor} مضرب وي`;case"unrecognized_keys":return`ناسم ${W.keys.length>1?"کلیډونه":"کلیډ"}: ${e(W.keys,", ")}`;case"invalid_key":return`ناسم کلیډ په ${W.origin} کې`;case"invalid_union":return"ناسمه ورودي";case"invalid_element":return`ناسم عنصر په ${W.origin} کې`;default:return"ناسمه ورودي"}}};var $m=C(()=>{f$()});function $P(){return{localeError:U7$()}}var U7$=()=>{let $={string:{unit:"znaków",verb:"mieć"},file:{unit:"bajtów",verb:"mieć"},array:{unit:"elementów",verb:"mieć"},set:{unit:"elementów",verb:"mieć"}};function J(W){return $[W]??null}let Y={regex:"wyrażenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ciąg znaków zakodowany w formacie base64",base64url:"ciąg znaków zakodowany w formacie base64url",json_string:"ciąg znaków w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wejście"},X={nan:"NaN",number:"liczba",array:"tablica"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Nieprawidłowe dane wejściowe: oczekiwano instanceof ${W.expected}, otrzymano ${Q}`;return`Nieprawidłowe dane wejściowe: oczekiwano ${Z}, otrzymano ${Q}`}case"invalid_value":if(W.values.length===1)return`Nieprawidłowe dane wejściowe: oczekiwano ${z$(W.values[0])}`;return`Nieprawidłowa opcja: oczekiwano jednej z wartości ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Za duża wartość: oczekiwano, że ${W.origin??"wartość"} będzie mieć ${Z}${W.maximum.toString()} ${G.unit??"elementów"}`;return`Zbyt duż(y/a/e): oczekiwano, że ${W.origin??"wartość"} będzie wynosić ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Za mała wartość: oczekiwano, że ${W.origin??"wartość"} będzie mieć ${Z}${W.minimum.toString()} ${G.unit??"elementów"}`;return`Zbyt mał(y/a/e): oczekiwano, że ${W.origin??"wartość"} będzie wynosić ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Nieprawidłowy ciąg znaków: musi zaczynać się od "${Z.prefix}"`;if(Z.format==="ends_with")return`Nieprawidłowy ciąg znaków: musi kończyć się na "${Z.suffix}"`;if(Z.format==="includes")return`Nieprawidłowy ciąg znaków: musi zawierać "${Z.includes}"`;if(Z.format==="regex")return`Nieprawidłowy ciąg znaków: musi odpowiadać wzorcowi ${Z.pattern}`;return`Nieprawidłow(y/a/e) ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Nieprawidłowa liczba: musi być wielokrotnością ${W.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Nieprawidłowy klucz w ${W.origin}`;case"invalid_union":return"Nieprawidłowe dane wejściowe";case"invalid_element":return`Nieprawidłowa wartość w ${W.origin}`;default:return"Nieprawidłowe dane wejściowe"}}};var Jm=C(()=>{f$()});function JP(){return{localeError:F7$()}}var F7$=()=>{let $={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function J(W){return $[W]??null}let Y={regex:"padrão",email:"endereço de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"duração ISO",ipv4:"endereço IPv4",ipv6:"endereço IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"número E.164",jwt:"JWT",template_literal:"entrada"},X={nan:"NaN",number:"número",null:"nulo"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Tipo inválido: esperado instanceof ${W.expected}, recebido ${Q}`;return`Tipo inválido: esperado ${Z}, recebido ${Q}`}case"invalid_value":if(W.values.length===1)return`Entrada inválida: esperado ${z$(W.values[0])}`;return`Opção inválida: esperada uma das ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Muito grande: esperado que ${W.origin??"valor"} tivesse ${Z}${W.maximum.toString()} ${G.unit??"elementos"}`;return`Muito grande: esperado que ${W.origin??"valor"} fosse ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Muito pequeno: esperado que ${W.origin} tivesse ${Z}${W.minimum.toString()} ${G.unit}`;return`Muito pequeno: esperado que ${W.origin} fosse ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Texto inválido: deve começar com "${Z.prefix}"`;if(Z.format==="ends_with")return`Texto inválido: deve terminar com "${Z.suffix}"`;if(Z.format==="includes")return`Texto inválido: deve incluir "${Z.includes}"`;if(Z.format==="regex")return`Texto inválido: deve corresponder ao padrão ${Z.pattern}`;return`${Y[Z.format]??W.format} inválido`}case"not_multiple_of":return`Número inválido: deve ser múltiplo de ${W.divisor}`;case"unrecognized_keys":return`Chave${W.keys.length>1?"s":""} desconhecida${W.keys.length>1?"s":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Chave inválida em ${W.origin}`;case"invalid_union":return"Entrada inválida";case"invalid_element":return`Valor inválido em ${W.origin}`;default:return"Campo inválido"}}};var Ym=C(()=>{f$()});function Xm($,J,Y,X){let W=Math.abs($),Z=W%10,G=W%100;if(G>=11&&G<=19)return X;if(Z===1)return J;if(Z>=2&&Z<=4)return Y;return X}function YP(){return{localeError:D7$()}}var D7$=()=>{let $={string:{unit:{one:"символ",few:"символа",many:"символов"},verb:"иметь"},file:{unit:{one:"байт",few:"байта",many:"байт"},verb:"иметь"},array:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"},set:{unit:{one:"элемент",few:"элемента",many:"элементов"},verb:"иметь"}};function J(W){return $[W]??null}let Y={regex:"ввод",email:"email адрес",url:"URL",emoji:"эмодзи",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO дата и время",date:"ISO дата",time:"ISO время",duration:"ISO длительность",ipv4:"IPv4 адрес",ipv6:"IPv6 адрес",cidrv4:"IPv4 диапазон",cidrv6:"IPv6 диапазон",base64:"строка в формате base64",base64url:"строка в формате base64url",json_string:"JSON строка",e164:"номер E.164",jwt:"JWT",template_literal:"ввод"},X={nan:"NaN",number:"число",array:"массив"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Неверный ввод: ожидалось instanceof ${W.expected}, получено ${Q}`;return`Неверный ввод: ожидалось ${Z}, получено ${Q}`}case"invalid_value":if(W.values.length===1)return`Неверный ввод: ожидалось ${z$(W.values[0])}`;return`Неверный вариант: ожидалось одно из ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G){let Q=Number(W.maximum),H=Xm(Q,G.unit.one,G.unit.few,G.unit.many);return`Слишком большое значение: ожидалось, что ${W.origin??"значение"} будет иметь ${Z}${W.maximum.toString()} ${H}`}return`Слишком большое значение: ожидалось, что ${W.origin??"значение"} будет ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G){let Q=Number(W.minimum),H=Xm(Q,G.unit.one,G.unit.few,G.unit.many);return`Слишком маленькое значение: ожидалось, что ${W.origin} будет иметь ${Z}${W.minimum.toString()} ${H}`}return`Слишком маленькое значение: ожидалось, что ${W.origin} будет ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Неверная строка: должна начинаться с "${Z.prefix}"`;if(Z.format==="ends_with")return`Неверная строка: должна заканчиваться на "${Z.suffix}"`;if(Z.format==="includes")return`Неверная строка: должна содержать "${Z.includes}"`;if(Z.format==="regex")return`Неверная строка: должна соответствовать шаблону ${Z.pattern}`;return`Неверный ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Неверное число: должно быть кратным ${W.divisor}`;case"unrecognized_keys":return`Нераспознанн${W.keys.length>1?"ые":"ый"} ключ${W.keys.length>1?"и":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Неверный ключ в ${W.origin}`;case"invalid_union":return"Неверные входные данные";case"invalid_element":return`Неверное значение в ${W.origin}`;default:return"Неверные входные данные"}}};var Wm=C(()=>{f$()});function XP(){return{localeError:M7$()}}var M7$=()=>{let $={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function J(W){return $[W]??null}let Y={regex:"vnos",email:"e-poštni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in čas",date:"ISO datum",time:"ISO čas",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 številka",jwt:"JWT",template_literal:"vnos"},X={nan:"NaN",number:"število",array:"tabela"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Neveljaven vnos: pričakovano instanceof ${W.expected}, prejeto ${Q}`;return`Neveljaven vnos: pričakovano ${Z}, prejeto ${Q}`}case"invalid_value":if(W.values.length===1)return`Neveljaven vnos: pričakovano ${z$(W.values[0])}`;return`Neveljavna možnost: pričakovano eno izmed ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Preveliko: pričakovano, da bo ${W.origin??"vrednost"} imelo ${Z}${W.maximum.toString()} ${G.unit??"elementov"}`;return`Preveliko: pričakovano, da bo ${W.origin??"vrednost"} ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Premajhno: pričakovano, da bo ${W.origin} imelo ${Z}${W.minimum.toString()} ${G.unit}`;return`Premajhno: pričakovano, da bo ${W.origin} ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Neveljaven niz: mora se začeti z "${Z.prefix}"`;if(Z.format==="ends_with")return`Neveljaven niz: mora se končati z "${Z.suffix}"`;if(Z.format==="includes")return`Neveljaven niz: mora vsebovati "${Z.includes}"`;if(Z.format==="regex")return`Neveljaven niz: mora ustrezati vzorcu ${Z.pattern}`;return`Neveljaven ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Neveljavno število: mora biti večkratnik ${W.divisor}`;case"unrecognized_keys":return`Neprepoznan${W.keys.length>1?"i ključi":" ključ"}: ${e(W.keys,", ")}`;case"invalid_key":return`Neveljaven ključ v ${W.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${W.origin}`;default:return"Neveljaven vnos"}}};var Zm=C(()=>{f$()});function WP(){return{localeError:V7$()}}var V7$=()=>{let $={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att innehålla"},set:{unit:"objekt",verb:"att innehålla"}};function J(W){return $[W]??null}let Y={regex:"reguljärt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad sträng",base64url:"base64url-kodad sträng",json_string:"JSON-sträng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"},X={nan:"NaN",number:"antal",array:"lista"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Ogiltig inmatning: förväntat instanceof ${W.expected}, fick ${Q}`;return`Ogiltig inmatning: förväntat ${Z}, fick ${Q}`}case"invalid_value":if(W.values.length===1)return`Ogiltig inmatning: förväntat ${z$(W.values[0])}`;return`Ogiltigt val: förväntade en av ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`För stor(t): förväntade ${W.origin??"värdet"} att ha ${Z}${W.maximum.toString()} ${G.unit??"element"}`;return`För stor(t): förväntat ${W.origin??"värdet"} att ha ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`För lite(t): förväntade ${W.origin??"värdet"} att ha ${Z}${W.minimum.toString()} ${G.unit}`;return`För lite(t): förväntade ${W.origin??"värdet"} att ha ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ogiltig sträng: måste börja med "${Z.prefix}"`;if(Z.format==="ends_with")return`Ogiltig sträng: måste sluta med "${Z.suffix}"`;if(Z.format==="includes")return`Ogiltig sträng: måste innehålla "${Z.includes}"`;if(Z.format==="regex")return`Ogiltig sträng: måste matcha mönstret "${Z.pattern}"`;return`Ogiltig(t) ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Ogiltigt tal: måste vara en multipel av ${W.divisor}`;case"unrecognized_keys":return`${W.keys.length>1?"Okända nycklar":"Okänd nyckel"}: ${e(W.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${W.origin??"värdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt värde i ${W.origin??"värdet"}`;default:return"Ogiltig input"}}};var Gm=C(()=>{f$()});function ZP(){return{localeError:N7$()}}var N7$=()=>{let $={string:{unit:"எழுத்துக்கள்",verb:"கொண்டிருக்க வேண்டும்"},file:{unit:"பைட்டுகள்",verb:"கொண்டிருக்க வேண்டும்"},array:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"},set:{unit:"உறுப்புகள்",verb:"கொண்டிருக்க வேண்டும்"}};function J(W){return $[W]??null}let Y={regex:"உள்ளீடு",email:"மின்னஞ்சல் முகவரி",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO தேதி நேரம்",date:"ISO தேதி",time:"ISO நேரம்",duration:"ISO கால அளவு",ipv4:"IPv4 முகவரி",ipv6:"IPv6 முகவரி",cidrv4:"IPv4 வரம்பு",cidrv6:"IPv6 வரம்பு",base64:"base64-encoded சரம்",base64url:"base64url-encoded சரம்",json_string:"JSON சரம்",e164:"E.164 எண்",jwt:"JWT",template_literal:"input"},X={nan:"NaN",number:"எண்",array:"அணி",null:"வெறுமை"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது instanceof ${W.expected}, பெறப்பட்டது ${Q}`;return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${Z}, பெறப்பட்டது ${Q}`}case"invalid_value":if(W.values.length===1)return`தவறான உள்ளீடு: எதிர்பார்க்கப்பட்டது ${z$(W.values[0])}`;return`தவறான விருப்பம்: எதிர்பார்க்கப்பட்டது ${e(W.values,"|")} இல் ஒன்று`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${W.origin??"மதிப்பு"} ${Z}${W.maximum.toString()} ${G.unit??"உறுப்புகள்"} ஆக இருக்க வேண்டும்`;return`மிக பெரியது: எதிர்பார்க்கப்பட்டது ${W.origin??"மதிப்பு"} ${Z}${W.maximum.toString()} ஆக இருக்க வேண்டும்`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${W.origin} ${Z}${W.minimum.toString()} ${G.unit} ஆக இருக்க வேண்டும்`;return`மிகச் சிறியது: எதிர்பார்க்கப்பட்டது ${W.origin} ${Z}${W.minimum.toString()} ஆக இருக்க வேண்டும்`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`தவறான சரம்: "${Z.prefix}" இல் தொடங்க வேண்டும்`;if(Z.format==="ends_with")return`தவறான சரம்: "${Z.suffix}" இல் முடிவடைய வேண்டும்`;if(Z.format==="includes")return`தவறான சரம்: "${Z.includes}" ஐ உள்ளடக்க வேண்டும்`;if(Z.format==="regex")return`தவறான சரம்: ${Z.pattern} முறைபாட்டுடன் பொருந்த வேண்டும்`;return`தவறான ${Y[Z.format]??W.format}`}case"not_multiple_of":return`தவறான எண்: ${W.divisor} இன் பலமாக இருக்க வேண்டும்`;case"unrecognized_keys":return`அடையாளம் தெரியாத விசை${W.keys.length>1?"கள்":""}: ${e(W.keys,", ")}`;case"invalid_key":return`${W.origin} இல் தவறான விசை`;case"invalid_union":return"தவறான உள்ளீடு";case"invalid_element":return`${W.origin} இல் தவறான மதிப்பு`;default:return"தவறான உள்ளீடு"}}};var Qm=C(()=>{f$()});function GP(){return{localeError:_7$()}}var _7$=()=>{let $={string:{unit:"ตัวอักษร",verb:"ควรมี"},file:{unit:"ไบต์",verb:"ควรมี"},array:{unit:"รายการ",verb:"ควรมี"},set:{unit:"รายการ",verb:"ควรมี"}};function J(W){return $[W]??null}let Y={regex:"ข้อมูลที่ป้อน",email:"ที่อยู่อีเมล",url:"URL",emoji:"อิโมจิ",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"วันที่เวลาแบบ ISO",date:"วันที่แบบ ISO",time:"เวลาแบบ ISO",duration:"ช่วงเวลาแบบ ISO",ipv4:"ที่อยู่ IPv4",ipv6:"ที่อยู่ IPv6",cidrv4:"ช่วง IP แบบ IPv4",cidrv6:"ช่วง IP แบบ IPv6",base64:"ข้อความแบบ Base64",base64url:"ข้อความแบบ Base64 สำหรับ URL",json_string:"ข้อความแบบ JSON",e164:"เบอร์โทรศัพท์ระหว่างประเทศ (E.164)",jwt:"โทเคน JWT",template_literal:"ข้อมูลที่ป้อน"},X={nan:"NaN",number:"ตัวเลข",array:"อาร์เรย์ (Array)",null:"ไม่มีค่า (null)"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`ประเภทข้อมูลไม่ถูกต้อง: ควรเป็น instanceof ${W.expected} แต่ได้รับ ${Q}`;return`ประเภทข้อมูลไม่ถูกต้อง: ควรเป็น ${Z} แต่ได้รับ ${Q}`}case"invalid_value":if(W.values.length===1)return`ค่าไม่ถูกต้อง: ควรเป็น ${z$(W.values[0])}`;return`ตัวเลือกไม่ถูกต้อง: ควรเป็นหนึ่งใน ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"ไม่เกิน":"น้อยกว่า",G=J(W.origin);if(G)return`เกินกำหนด: ${W.origin??"ค่า"} ควรมี${Z} ${W.maximum.toString()} ${G.unit??"รายการ"}`;return`เกินกำหนด: ${W.origin??"ค่า"} ควรมี${Z} ${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?"อย่างน้อย":"มากกว่า",G=J(W.origin);if(G)return`น้อยกว่ากำหนด: ${W.origin} ควรมี${Z} ${W.minimum.toString()} ${G.unit}`;return`น้อยกว่ากำหนด: ${W.origin} ควรมี${Z} ${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`รูปแบบไม่ถูกต้อง: ข้อความต้องขึ้นต้นด้วย "${Z.prefix}"`;if(Z.format==="ends_with")return`รูปแบบไม่ถูกต้อง: ข้อความต้องลงท้ายด้วย "${Z.suffix}"`;if(Z.format==="includes")return`รูปแบบไม่ถูกต้อง: ข้อความต้องมี "${Z.includes}" อยู่ในข้อความ`;if(Z.format==="regex")return`รูปแบบไม่ถูกต้อง: ต้องตรงกับรูปแบบที่กำหนด ${Z.pattern}`;return`รูปแบบไม่ถูกต้อง: ${Y[Z.format]??W.format}`}case"not_multiple_of":return`ตัวเลขไม่ถูกต้อง: ต้องเป็นจำนวนที่หารด้วย ${W.divisor} ได้ลงตัว`;case"unrecognized_keys":return`พบคีย์ที่ไม่รู้จัก: ${e(W.keys,", ")}`;case"invalid_key":return`คีย์ไม่ถูกต้องใน ${W.origin}`;case"invalid_union":return"ข้อมูลไม่ถูกต้อง: ไม่ตรงกับรูปแบบยูเนียนที่กำหนดไว้";case"invalid_element":return`ข้อมูลไม่ถูกต้องใน ${W.origin}`;default:return"ข้อมูลไม่ถูกต้อง"}}};var Hm=C(()=>{f$()});function QP(){return{localeError:L7$()}}var L7$=()=>{let $={string:{unit:"karakter",verb:"olmalı"},file:{unit:"bayt",verb:"olmalı"},array:{unit:"öğe",verb:"olmalı"},set:{unit:"öğe",verb:"olmalı"}};function J(W){return $[W]??null}let Y={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO süre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aralığı",cidrv6:"IPv6 aralığı",base64:"base64 ile şifrelenmiş metin",base64url:"base64url ile şifrelenmiş metin",json_string:"JSON dizesi",e164:"E.164 sayısı",jwt:"JWT",template_literal:"Şablon dizesi"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Geçersiz değer: beklenen instanceof ${W.expected}, alınan ${Q}`;return`Geçersiz değer: beklenen ${Z}, alınan ${Q}`}case"invalid_value":if(W.values.length===1)return`Geçersiz değer: beklenen ${z$(W.values[0])}`;return`Geçersiz seçenek: aşağıdakilerden biri olmalı: ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Çok büyük: beklenen ${W.origin??"değer"} ${Z}${W.maximum.toString()} ${G.unit??"öğe"}`;return`Çok büyük: beklenen ${W.origin??"değer"} ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Çok küçük: beklenen ${W.origin} ${Z}${W.minimum.toString()} ${G.unit}`;return`Çok küçük: beklenen ${W.origin} ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Geçersiz metin: "${Z.prefix}" ile başlamalı`;if(Z.format==="ends_with")return`Geçersiz metin: "${Z.suffix}" ile bitmeli`;if(Z.format==="includes")return`Geçersiz metin: "${Z.includes}" içermeli`;if(Z.format==="regex")return`Geçersiz metin: ${Z.pattern} desenine uymalı`;return`Geçersiz ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Geçersiz sayı: ${W.divisor} ile tam bölünebilmeli`;case"unrecognized_keys":return`Tanınmayan anahtar${W.keys.length>1?"lar":""}: ${e(W.keys,", ")}`;case"invalid_key":return`${W.origin} içinde geçersiz anahtar`;case"invalid_union":return"Geçersiz değer";case"invalid_element":return`${W.origin} içinde geçersiz değer`;default:return"Geçersiz değer"}}};var zm=C(()=>{f$()});function nH(){return{localeError:q7$()}}var q7$=()=>{let $={string:{unit:"символів",verb:"матиме"},file:{unit:"байтів",verb:"матиме"},array:{unit:"елементів",verb:"матиме"},set:{unit:"елементів",verb:"матиме"}};function J(W){return $[W]??null}let Y={regex:"вхідні дані",email:"адреса електронної пошти",url:"URL",emoji:"емодзі",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"дата та час ISO",date:"дата ISO",time:"час ISO",duration:"тривалість ISO",ipv4:"адреса IPv4",ipv6:"адреса IPv6",cidrv4:"діапазон IPv4",cidrv6:"діапазон IPv6",base64:"рядок у кодуванні base64",base64url:"рядок у кодуванні base64url",json_string:"рядок JSON",e164:"номер E.164",jwt:"JWT",template_literal:"вхідні дані"},X={nan:"NaN",number:"число",array:"масив"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Неправильні вхідні дані: очікується instanceof ${W.expected}, отримано ${Q}`;return`Неправильні вхідні дані: очікується ${Z}, отримано ${Q}`}case"invalid_value":if(W.values.length===1)return`Неправильні вхідні дані: очікується ${z$(W.values[0])}`;return`Неправильна опція: очікується одне з ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Занадто велике: очікується, що ${W.origin??"значення"} ${G.verb} ${Z}${W.maximum.toString()} ${G.unit??"елементів"}`;return`Занадто велике: очікується, що ${W.origin??"значення"} буде ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Занадто мале: очікується, що ${W.origin} ${G.verb} ${Z}${W.minimum.toString()} ${G.unit}`;return`Занадто мале: очікується, що ${W.origin} буде ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Неправильний рядок: повинен починатися з "${Z.prefix}"`;if(Z.format==="ends_with")return`Неправильний рядок: повинен закінчуватися на "${Z.suffix}"`;if(Z.format==="includes")return`Неправильний рядок: повинен містити "${Z.includes}"`;if(Z.format==="regex")return`Неправильний рядок: повинен відповідати шаблону ${Z.pattern}`;return`Неправильний ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Неправильне число: повинно бути кратним ${W.divisor}`;case"unrecognized_keys":return`Нерозпізнаний ключ${W.keys.length>1?"і":""}: ${e(W.keys,", ")}`;case"invalid_key":return`Неправильний ключ у ${W.origin}`;case"invalid_union":return"Неправильні вхідні дані";case"invalid_element":return`Неправильне значення у ${W.origin}`;default:return"Неправильні вхідні дані"}}};var HP=C(()=>{f$()});function zP(){return nH()}var Km=C(()=>{HP()});function KP(){return{localeError:B7$()}}var B7$=()=>{let $={string:{unit:"حروف",verb:"ہونا"},file:{unit:"بائٹس",verb:"ہونا"},array:{unit:"آئٹمز",verb:"ہونا"},set:{unit:"آئٹمز",verb:"ہونا"}};function J(W){return $[W]??null}let Y={regex:"ان پٹ",email:"ای میل ایڈریس",url:"یو آر ایل",emoji:"ایموجی",uuid:"یو یو آئی ڈی",uuidv4:"یو یو آئی ڈی وی 4",uuidv6:"یو یو آئی ڈی وی 6",nanoid:"نینو آئی ڈی",guid:"جی یو آئی ڈی",cuid:"سی یو آئی ڈی",cuid2:"سی یو آئی ڈی 2",ulid:"یو ایل آئی ڈی",xid:"ایکس آئی ڈی",ksuid:"کے ایس یو آئی ڈی",datetime:"آئی ایس او ڈیٹ ٹائم",date:"آئی ایس او تاریخ",time:"آئی ایس او وقت",duration:"آئی ایس او مدت",ipv4:"آئی پی وی 4 ایڈریس",ipv6:"آئی پی وی 6 ایڈریس",cidrv4:"آئی پی وی 4 رینج",cidrv6:"آئی پی وی 6 رینج",base64:"بیس 64 ان کوڈڈ سٹرنگ",base64url:"بیس 64 یو آر ایل ان کوڈڈ سٹرنگ",json_string:"جے ایس او این سٹرنگ",e164:"ای 164 نمبر",jwt:"جے ڈبلیو ٹی",template_literal:"ان پٹ"},X={nan:"NaN",number:"نمبر",array:"آرے",null:"نل"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`غلط ان پٹ: instanceof ${W.expected} متوقع تھا، ${Q} موصول ہوا`;return`غلط ان پٹ: ${Z} متوقع تھا، ${Q} موصول ہوا`}case"invalid_value":if(W.values.length===1)return`غلط ان پٹ: ${z$(W.values[0])} متوقع تھا`;return`غلط آپشن: ${e(W.values,"|")} میں سے ایک متوقع تھا`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`بہت بڑا: ${W.origin??"ویلیو"} کے ${Z}${W.maximum.toString()} ${G.unit??"عناصر"} ہونے متوقع تھے`;return`بہت بڑا: ${W.origin??"ویلیو"} کا ${Z}${W.maximum.toString()} ہونا متوقع تھا`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`بہت چھوٹا: ${W.origin} کے ${Z}${W.minimum.toString()} ${G.unit} ہونے متوقع تھے`;return`بہت چھوٹا: ${W.origin} کا ${Z}${W.minimum.toString()} ہونا متوقع تھا`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`غلط سٹرنگ: "${Z.prefix}" سے شروع ہونا چاہیے`;if(Z.format==="ends_with")return`غلط سٹرنگ: "${Z.suffix}" پر ختم ہونا چاہیے`;if(Z.format==="includes")return`غلط سٹرنگ: "${Z.includes}" شامل ہونا چاہیے`;if(Z.format==="regex")return`غلط سٹرنگ: پیٹرن ${Z.pattern} سے میچ ہونا چاہیے`;return`غلط ${Y[Z.format]??W.format}`}case"not_multiple_of":return`غلط نمبر: ${W.divisor} کا مضاعف ہونا چاہیے`;case"unrecognized_keys":return`غیر تسلیم شدہ کی${W.keys.length>1?"ز":""}: ${e(W.keys,"، ")}`;case"invalid_key":return`${W.origin} میں غلط کی`;case"invalid_union":return"غلط ان پٹ";case"invalid_element":return`${W.origin} میں غلط ویلیو`;default:return"غلط ان پٹ"}}};var wm=C(()=>{f$()});function wP(){return{localeError:O7$()}}var O7$=()=>{let $={string:{unit:"belgi",verb:"bo‘lishi kerak"},file:{unit:"bayt",verb:"bo‘lishi kerak"},array:{unit:"element",verb:"bo‘lishi kerak"},set:{unit:"element",verb:"bo‘lishi kerak"}};function J(W){return $[W]??null}let Y={regex:"kirish",email:"elektron pochta manzili",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO sana va vaqti",date:"ISO sana",time:"ISO vaqt",duration:"ISO davomiylik",ipv4:"IPv4 manzil",ipv6:"IPv6 manzil",mac:"MAC manzil",cidrv4:"IPv4 diapazon",cidrv6:"IPv6 diapazon",base64:"base64 kodlangan satr",base64url:"base64url kodlangan satr",json_string:"JSON satr",e164:"E.164 raqam",jwt:"JWT",template_literal:"kirish"},X={nan:"NaN",number:"raqam",array:"massiv"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Noto‘g‘ri kirish: kutilgan instanceof ${W.expected}, qabul qilingan ${Q}`;return`Noto‘g‘ri kirish: kutilgan ${Z}, qabul qilingan ${Q}`}case"invalid_value":if(W.values.length===1)return`Noto‘g‘ri kirish: kutilgan ${z$(W.values[0])}`;return`Noto‘g‘ri variant: quyidagilardan biri kutilgan ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Juda katta: kutilgan ${W.origin??"qiymat"} ${Z}${W.maximum.toString()} ${G.unit} ${G.verb}`;return`Juda katta: kutilgan ${W.origin??"qiymat"} ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Juda kichik: kutilgan ${W.origin} ${Z}${W.minimum.toString()} ${G.unit} ${G.verb}`;return`Juda kichik: kutilgan ${W.origin} ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Noto‘g‘ri satr: "${Z.prefix}" bilan boshlanishi kerak`;if(Z.format==="ends_with")return`Noto‘g‘ri satr: "${Z.suffix}" bilan tugashi kerak`;if(Z.format==="includes")return`Noto‘g‘ri satr: "${Z.includes}" ni o‘z ichiga olishi kerak`;if(Z.format==="regex")return`Noto‘g‘ri satr: ${Z.pattern} shabloniga mos kelishi kerak`;return`Noto‘g‘ri ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Noto‘g‘ri raqam: ${W.divisor} ning karralisi bo‘lishi kerak`;case"unrecognized_keys":return`Noma’lum kalit${W.keys.length>1?"lar":""}: ${e(W.keys,", ")}`;case"invalid_key":return`${W.origin} dagi kalit noto‘g‘ri`;case"invalid_union":return"Noto‘g‘ri kirish";case"invalid_element":return`${W.origin} da noto‘g‘ri qiymat`;default:return"Noto‘g‘ri kirish"}}};var Um=C(()=>{f$()});function UP(){return{localeError:P7$()}}var P7$=()=>{let $={string:{unit:"ký tự",verb:"có"},file:{unit:"byte",verb:"có"},array:{unit:"phần tử",verb:"có"},set:{unit:"phần tử",verb:"có"}};function J(W){return $[W]??null}let Y={regex:"đầu vào",email:"địa chỉ email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ngày giờ ISO",date:"ngày ISO",time:"giờ ISO",duration:"khoảng thời gian ISO",ipv4:"địa chỉ IPv4",ipv6:"địa chỉ IPv6",cidrv4:"dải IPv4",cidrv6:"dải IPv6",base64:"chuỗi mã hóa base64",base64url:"chuỗi mã hóa base64url",json_string:"chuỗi JSON",e164:"số E.164",jwt:"JWT",template_literal:"đầu vào"},X={nan:"NaN",number:"số",array:"mảng"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Đầu vào không hợp lệ: mong đợi instanceof ${W.expected}, nhận được ${Q}`;return`Đầu vào không hợp lệ: mong đợi ${Z}, nhận được ${Q}`}case"invalid_value":if(W.values.length===1)return`Đầu vào không hợp lệ: mong đợi ${z$(W.values[0])}`;return`Tùy chọn không hợp lệ: mong đợi một trong các giá trị ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Quá lớn: mong đợi ${W.origin??"giá trị"} ${G.verb} ${Z}${W.maximum.toString()} ${G.unit??"phần tử"}`;return`Quá lớn: mong đợi ${W.origin??"giá trị"} ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Quá nhỏ: mong đợi ${W.origin} ${G.verb} ${Z}${W.minimum.toString()} ${G.unit}`;return`Quá nhỏ: mong đợi ${W.origin} ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Chuỗi không hợp lệ: phải bắt đầu bằng "${Z.prefix}"`;if(Z.format==="ends_with")return`Chuỗi không hợp lệ: phải kết thúc bằng "${Z.suffix}"`;if(Z.format==="includes")return`Chuỗi không hợp lệ: phải bao gồm "${Z.includes}"`;if(Z.format==="regex")return`Chuỗi không hợp lệ: phải khớp với mẫu ${Z.pattern}`;return`${Y[Z.format]??W.format} không hợp lệ`}case"not_multiple_of":return`Số không hợp lệ: phải là bội số của ${W.divisor}`;case"unrecognized_keys":return`Khóa không được nhận dạng: ${e(W.keys,", ")}`;case"invalid_key":return`Khóa không hợp lệ trong ${W.origin}`;case"invalid_union":return"Đầu vào không hợp lệ";case"invalid_element":return`Giá trị không hợp lệ trong ${W.origin}`;default:return"Đầu vào không hợp lệ"}}};var Fm=C(()=>{f$()});function FP(){return{localeError:S7$()}}var S7$=()=>{let $={string:{unit:"字符",verb:"包含"},file:{unit:"字节",verb:"包含"},array:{unit:"项",verb:"包含"},set:{unit:"项",verb:"包含"}};function J(W){return $[W]??null}let Y={regex:"输入",email:"电子邮件",url:"URL",emoji:"表情符号",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO日期时间",date:"ISO日期",time:"ISO时间",duration:"ISO时长",ipv4:"IPv4地址",ipv6:"IPv6地址",cidrv4:"IPv4网段",cidrv6:"IPv6网段",base64:"base64编码字符串",base64url:"base64url编码字符串",json_string:"JSON字符串",e164:"E.164号码",jwt:"JWT",template_literal:"输入"},X={nan:"NaN",number:"数字",array:"数组",null:"空值(null)"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`无效输入：期望 instanceof ${W.expected}，实际接收 ${Q}`;return`无效输入：期望 ${Z}，实际接收 ${Q}`}case"invalid_value":if(W.values.length===1)return`无效输入：期望 ${z$(W.values[0])}`;return`无效选项：期望以下之一 ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`数值过大：期望 ${W.origin??"值"} ${Z}${W.maximum.toString()} ${G.unit??"个元素"}`;return`数值过大：期望 ${W.origin??"值"} ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`数值过小：期望 ${W.origin} ${Z}${W.minimum.toString()} ${G.unit}`;return`数值过小：期望 ${W.origin} ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`无效字符串：必须以 "${Z.prefix}" 开头`;if(Z.format==="ends_with")return`无效字符串：必须以 "${Z.suffix}" 结尾`;if(Z.format==="includes")return`无效字符串：必须包含 "${Z.includes}"`;if(Z.format==="regex")return`无效字符串：必须满足正则表达式 ${Z.pattern}`;return`无效${Y[Z.format]??W.format}`}case"not_multiple_of":return`无效数字：必须是 ${W.divisor} 的倍数`;case"unrecognized_keys":return`出现未知的键(key): ${e(W.keys,", ")}`;case"invalid_key":return`${W.origin} 中的键(key)无效`;case"invalid_union":return"无效输入";case"invalid_element":return`${W.origin} 中包含无效值(value)`;default:return"无效输入"}}};var Dm=C(()=>{f$()});function DP(){return{localeError:A7$()}}var A7$=()=>{let $={string:{unit:"字元",verb:"擁有"},file:{unit:"位元組",verb:"擁有"},array:{unit:"項目",verb:"擁有"},set:{unit:"項目",verb:"擁有"}};function J(W){return $[W]??null}let Y={regex:"輸入",email:"郵件地址",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO 日期時間",date:"ISO 日期",time:"ISO 時間",duration:"ISO 期間",ipv4:"IPv4 位址",ipv6:"IPv6 位址",cidrv4:"IPv4 範圍",cidrv6:"IPv6 範圍",base64:"base64 編碼字串",base64url:"base64url 編碼字串",json_string:"JSON 字串",e164:"E.164 數值",jwt:"JWT",template_literal:"輸入"},X={nan:"NaN"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`無效的輸入值：預期為 instanceof ${W.expected}，但收到 ${Q}`;return`無效的輸入值：預期為 ${Z}，但收到 ${Q}`}case"invalid_value":if(W.values.length===1)return`無效的輸入值：預期為 ${z$(W.values[0])}`;return`無效的選項：預期為以下其中之一 ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`數值過大：預期 ${W.origin??"值"} 應為 ${Z}${W.maximum.toString()} ${G.unit??"個元素"}`;return`數值過大：預期 ${W.origin??"值"} 應為 ${Z}${W.maximum.toString()}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`數值過小：預期 ${W.origin} 應為 ${Z}${W.minimum.toString()} ${G.unit}`;return`數值過小：預期 ${W.origin} 應為 ${Z}${W.minimum.toString()}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`無效的字串：必須以 "${Z.prefix}" 開頭`;if(Z.format==="ends_with")return`無效的字串：必須以 "${Z.suffix}" 結尾`;if(Z.format==="includes")return`無效的字串：必須包含 "${Z.includes}"`;if(Z.format==="regex")return`無效的字串：必須符合格式 ${Z.pattern}`;return`無效的 ${Y[Z.format]??W.format}`}case"not_multiple_of":return`無效的數字：必須為 ${W.divisor} 的倍數`;case"unrecognized_keys":return`無法識別的鍵值${W.keys.length>1?"們":""}：${e(W.keys,"、")}`;case"invalid_key":return`${W.origin} 中有無效的鍵值`;case"invalid_union":return"無效的輸入值";case"invalid_element":return`${W.origin} 中有無效的值`;default:return"無效的輸入值"}}};var Mm=C(()=>{f$()});function MP(){return{localeError:j7$()}}var j7$=()=>{let $={string:{unit:"àmi",verb:"ní"},file:{unit:"bytes",verb:"ní"},array:{unit:"nkan",verb:"ní"},set:{unit:"nkan",verb:"ní"}};function J(W){return $[W]??null}let Y={regex:"ẹ̀rọ ìbáwọlé",email:"àdírẹ́sì ìmẹ́lì",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"àkókò ISO",date:"ọjọ́ ISO",time:"àkókò ISO",duration:"àkókò tó pé ISO",ipv4:"àdírẹ́sì IPv4",ipv6:"àdírẹ́sì IPv6",cidrv4:"àgbègbè IPv4",cidrv6:"àgbègbè IPv6",base64:"ọ̀rọ̀ tí a kọ́ ní base64",base64url:"ọ̀rọ̀ base64url",json_string:"ọ̀rọ̀ JSON",e164:"nọ́mbà E.164",jwt:"JWT",template_literal:"ẹ̀rọ ìbáwọlé"},X={nan:"NaN",number:"nọ́mbà",array:"akopọ"};return(W)=>{switch(W.code){case"invalid_type":{let Z=X[W.expected]??W.expected,G=K$(W.input),Q=X[G]??G;if(/^[A-Z]/.test(W.expected))return`Ìbáwọlé aṣìṣe: a ní láti fi instanceof ${W.expected}, àmọ̀ a rí ${Q}`;return`Ìbáwọlé aṣìṣe: a ní láti fi ${Z}, àmọ̀ a rí ${Q}`}case"invalid_value":if(W.values.length===1)return`Ìbáwọlé aṣìṣe: a ní láti fi ${z$(W.values[0])}`;return`Àṣàyàn aṣìṣe: yan ọ̀kan lára ${e(W.values,"|")}`;case"too_big":{let Z=W.inclusive?"<=":"<",G=J(W.origin);if(G)return`Tó pọ̀ jù: a ní láti jẹ́ pé ${W.origin??"iye"} ${G.verb} ${Z}${W.maximum} ${G.unit}`;return`Tó pọ̀ jù: a ní láti jẹ́ ${Z}${W.maximum}`}case"too_small":{let Z=W.inclusive?">=":">",G=J(W.origin);if(G)return`Kéré ju: a ní láti jẹ́ pé ${W.origin} ${G.verb} ${Z}${W.minimum} ${G.unit}`;return`Kéré ju: a ní láti jẹ́ ${Z}${W.minimum}`}case"invalid_format":{let Z=W;if(Z.format==="starts_with")return`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ bẹ̀rẹ̀ pẹ̀lú "${Z.prefix}"`;if(Z.format==="ends_with")return`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ parí pẹ̀lú "${Z.suffix}"`;if(Z.format==="includes")return`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ ní "${Z.includes}"`;if(Z.format==="regex")return`Ọ̀rọ̀ aṣìṣe: gbọ́dọ̀ bá àpẹẹrẹ mu ${Z.pattern}`;return`Aṣìṣe: ${Y[Z.format]??W.format}`}case"not_multiple_of":return`Nọ́mbà aṣìṣe: gbọ́dọ̀ jẹ́ èyà pípín ti ${W.divisor}`;case"unrecognized_keys":return`Bọtìnì àìmọ̀: ${e(W.keys,", ")}`;case"invalid_key":return`Bọtìnì aṣìṣe nínú ${W.origin}`;case"invalid_union":return"Ìbáwọlé aṣìṣe";case"invalid_element":return`Iye aṣìṣe nínú ${W.origin}`;default:return"Ìbáwọlé aṣìṣe"}}};var Vm=C(()=>{f$()});var fG={};k4(fG,{zhTW:()=>DP,zhCN:()=>FP,yo:()=>MP,vi:()=>UP,uz:()=>wP,ur:()=>KP,uk:()=>nH,ua:()=>zP,tr:()=>QP,th:()=>GP,ta:()=>ZP,sv:()=>WP,sl:()=>XP,ru:()=>YP,pt:()=>JP,ps:()=>eO,pl:()=>$P,ota:()=>sO,no:()=>aO,nl:()=>tO,ms:()=>oO,mk:()=>rO,lt:()=>iO,ko:()=>nO,km:()=>pH,kh:()=>lO,ka:()=>cO,ja:()=>dO,it:()=>uO,is:()=>mO,id:()=>hO,hy:()=>yO,hu:()=>xO,he:()=>gO,frCA:()=>fO,fr:()=>vO,fi:()=>bO,fa:()=>kO,es:()=>IO,eo:()=>RO,en:()=>cH,de:()=>CO,da:()=>EO,cs:()=>jO,ca:()=>AO,bg:()=>SO,be:()=>PO,az:()=>OO,ar:()=>BO});var VP=C(()=>{Bh();Oh();Sh();Ah();jh();Eh();Ch();Th();TO();Rh();Ih();kh();bh();vh();fh();gh();xh();hh();mh();uh();dh();ch();ph();lh();pO();nh();rh();oh();th();ah();sh();eh();$m();Jm();Ym();Wm();Zm();Gm();Qm();Hm();zm();Km();HP();wm();Um();Fm();Dm();Mm();Vm()});class NP{constructor(){this._map=new WeakMap,this._idmap=new Map}add($,...J){let Y=J[0];if(this._map.set($,Y),Y&&typeof Y==="object"&&"id"in Y)this._idmap.set(Y.id,$);return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove($){let J=this._map.get($);if(J&&typeof J==="object"&&"id"in J)this._idmap.delete(J.id);return this._map.delete($),this}get($){let J=$._zod.parent;if(J){let Y={...this.get(J)??{}};delete Y.id;let X={...Y,...this._map.get($)};return Object.keys(X).length?X:void 0}return this._map.get($)}has($){return this._map.has($)}}function iH(){return new NP}var Nm,DF,MF,Q8;var rH=C(()=>{DF=Symbol("ZodOutput"),MF=Symbol("ZodInput");(Nm=globalThis).__zod_globalRegistry??(Nm.__zod_globalRegistry=iH());Q8=globalThis.__zod_globalRegistry});function _P($,J){return new $({type:"string",...M$(J)})}function LP($,J){return new $({type:"string",coerce:!0,...M$(J)})}function VF($,J){return new $({type:"string",format:"email",check:"string_format",abort:!1,...M$(J)})}function oH($,J){return new $({type:"string",format:"guid",check:"string_format",abort:!1,...M$(J)})}function NF($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,...M$(J)})}function _F($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...M$(J)})}function LF($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...M$(J)})}function qF($,J){return new $({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...M$(J)})}function tH($,J){return new $({type:"string",format:"url",check:"string_format",abort:!1,...M$(J)})}function BF($,J){return new $({type:"string",format:"emoji",check:"string_format",abort:!1,...M$(J)})}function OF($,J){return new $({type:"string",format:"nanoid",check:"string_format",abort:!1,...M$(J)})}function PF($,J){return new $({type:"string",format:"cuid",check:"string_format",abort:!1,...M$(J)})}function SF($,J){return new $({type:"string",format:"cuid2",check:"string_format",abort:!1,...M$(J)})}function AF($,J){return new $({type:"string",format:"ulid",check:"string_format",abort:!1,...M$(J)})}function jF($,J){return new $({type:"string",format:"xid",check:"string_format",abort:!1,...M$(J)})}function EF($,J){return new $({type:"string",format:"ksuid",check:"string_format",abort:!1,...M$(J)})}function CF($,J){return new $({type:"string",format:"ipv4",check:"string_format",abort:!1,...M$(J)})}function TF($,J){return new $({type:"string",format:"ipv6",check:"string_format",abort:!1,...M$(J)})}function qP($,J){return new $({type:"string",format:"mac",check:"string_format",abort:!1,...M$(J)})}function RF($,J){return new $({type:"string",format:"cidrv4",check:"string_format",abort:!1,...M$(J)})}function IF($,J){return new $({type:"string",format:"cidrv6",check:"string_format",abort:!1,...M$(J)})}function kF($,J){return new $({type:"string",format:"base64",check:"string_format",abort:!1,...M$(J)})}function bF($,J){return new $({type:"string",format:"base64url",check:"string_format",abort:!1,...M$(J)})}function vF($,J){return new $({type:"string",format:"e164",check:"string_format",abort:!1,...M$(J)})}function fF($,J){return new $({type:"string",format:"jwt",check:"string_format",abort:!1,...M$(J)})}function BP($,J){return new $({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...M$(J)})}function OP($,J){return new $({type:"string",format:"date",check:"string_format",...M$(J)})}function PP($,J){return new $({type:"string",format:"time",check:"string_format",precision:null,...M$(J)})}function SP($,J){return new $({type:"string",format:"duration",check:"string_format",...M$(J)})}function AP($,J){return new $({type:"number",checks:[],...M$(J)})}function jP($,J){return new $({type:"number",coerce:!0,checks:[],...M$(J)})}function EP($,J){return new $({type:"number",check:"number_format",abort:!1,format:"safeint",...M$(J)})}function CP($,J){return new $({type:"number",check:"number_format",abort:!1,format:"float32",...M$(J)})}function TP($,J){return new $({type:"number",check:"number_format",abort:!1,format:"float64",...M$(J)})}function RP($,J){return new $({type:"number",check:"number_format",abort:!1,format:"int32",...M$(J)})}function IP($,J){return new $({type:"number",check:"number_format",abort:!1,format:"uint32",...M$(J)})}function kP($,J){return new $({type:"boolean",...M$(J)})}function bP($,J){return new $({type:"boolean",coerce:!0,...M$(J)})}function vP($,J){return new $({type:"bigint",...M$(J)})}function fP($,J){return new $({type:"bigint",coerce:!0,...M$(J)})}function gP($,J){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...M$(J)})}function xP($,J){return new $({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...M$(J)})}function yP($,J){return new $({type:"symbol",...M$(J)})}function hP($,J){return new $({type:"undefined",...M$(J)})}function mP($,J){return new $({type:"null",...M$(J)})}function uP($){return new $({type:"any"})}function dP($){return new $({type:"unknown"})}function cP($,J){return new $({type:"never",...M$(J)})}function pP($,J){return new $({type:"void",...M$(J)})}function lP($,J){return new $({type:"date",...M$(J)})}function nP($,J){return new $({type:"date",coerce:!0,...M$(J)})}function iP($,J){return new $({type:"nan",...M$(J)})}function CY($,J){return new JF({check:"less_than",...M$(J),value:$,inclusive:!1})}function P1($,J){return new JF({check:"less_than",...M$(J),value:$,inclusive:!0})}function TY($,J){return new YF({check:"greater_than",...M$(J),value:$,inclusive:!1})}function m8($,J){return new YF({check:"greater_than",...M$(J),value:$,inclusive:!0})}function aH($){return TY(0,$)}function sH($){return CY(0,$)}function eH($){return P1(0,$)}function $z($){return m8(0,$)}function NW($,J){return new pq({check:"multiple_of",...M$(J),value:$})}function _W($,J){return new iq({check:"max_size",...M$(J),maximum:$})}function RY($,J){return new rq({check:"min_size",...M$(J),minimum:$})}function I9($,J){return new oq({check:"size_equals",...M$(J),size:$})}function k9($,J){return new tq({check:"max_length",...M$(J),maximum:$})}function BX($,J){return new aq({check:"min_length",...M$(J),minimum:$})}function b9($,J){return new sq({check:"length_equals",...M$(J),length:$})}function FZ($,J){return new eq({check:"string_format",format:"regex",...M$(J),pattern:$})}function DZ($){return new $B({check:"string_format",format:"lowercase",...M$($)})}function MZ($){return new JB({check:"string_format",format:"uppercase",...M$($)})}function VZ($,J){return new YB({check:"string_format",format:"includes",...M$(J),includes:$})}function NZ($,J){return new XB({check:"string_format",format:"starts_with",...M$(J),prefix:$})}function _Z($,J){return new WB({check:"string_format",format:"ends_with",...M$(J),suffix:$})}function Jz($,J,Y){return new ZB({check:"property",property:$,schema:J,...M$(Y)})}function LZ($,J){return new GB({check:"mime_type",mime:$,...M$(J)})}function vJ($){return new QB({check:"overwrite",tx:$})}function qZ($){return vJ((J)=>J.normalize($))}function BZ(){return vJ(($)=>$.trim())}function OZ(){return vJ(($)=>$.toLowerCase())}function PZ(){return vJ(($)=>$.toUpperCase())}function SZ(){return vJ(($)=>Zq($))}function rP($,J,Y){return new $({type:"array",element:J,...M$(Y)})}function C7$($,J,Y){return new $({type:"union",options:J,...M$(Y)})}function T7$($,J,Y){return new $({type:"union",options:J,inclusive:!1,...M$(Y)})}function R7$($,J,Y,X){return new $({type:"union",options:Y,discriminator:J,...M$(X)})}function I7$($,J,Y){return new $({type:"intersection",left:J,right:Y})}function k7$($,J,Y,X){let W=Y instanceof e$;return new $({type:"tuple",items:J,rest:W?Y:null,...M$(W?X:Y)})}function b7$($,J,Y,X){return new $({type:"record",keyType:J,valueType:Y,...M$(X)})}function v7$($,J,Y,X){return new $({type:"map",keyType:J,valueType:Y,...M$(X)})}function f7$($,J,Y){return new $({type:"set",valueType:J,...M$(Y)})}function g7$($,J,Y){let X=Array.isArray(J)?Object.fromEntries(J.map((W)=>[W,W])):J;return new $({type:"enum",entries:X,...M$(Y)})}function x7$($,J,Y){return new $({type:"enum",entries:J,...M$(Y)})}function y7$($,J,Y){return new $({type:"literal",values:Array.isArray(J)?J:[J],...M$(Y)})}function oP($,J){return new $({type:"file",...M$(J)})}function h7$($,J){return new $({type:"transform",transform:J})}function m7$($,J){return new $({type:"optional",innerType:J})}function u7$($,J){return new $({type:"nullable",innerType:J})}function d7$($,J,Y){return new $({type:"default",innerType:J,get defaultValue(){return typeof Y==="function"?Y():Qq(Y)}})}function c7$($,J,Y){return new $({type:"nonoptional",innerType:J,...M$(Y)})}function p7$($,J){return new $({type:"success",innerType:J})}function l7$($,J,Y){return new $({type:"catch",innerType:J,catchValue:typeof Y==="function"?Y:()=>Y})}function n7$($,J,Y){return new $({type:"pipe",in:J,out:Y})}function i7$($,J){return new $({type:"readonly",innerType:J})}function r7$($,J,Y){return new $({type:"template_literal",parts:J,...M$(Y)})}function o7$($,J){return new $({type:"lazy",getter:J})}function t7$($,J){return new $({type:"promise",innerType:J})}function tP($,J,Y){let X=M$(Y);return X.abort??(X.abort=!0),new $({type:"custom",check:"custom",fn:J,...X})}function aP($,J,Y){return new $({type:"custom",check:"custom",fn:J,...M$(Y)})}function sP($){let J=_m((Y)=>{return Y.addIssue=(X)=>{if(typeof X==="string")Y.issues.push(jG(X,Y.value,J._zod.def));else{let W=X;if(W.fatal)W.continue=!1;W.code??(W.code="custom"),W.input??(W.input=Y.value),W.inst??(W.inst=J),W.continue??(W.continue=!J._zod.def.abort),Y.issues.push(jG(W))}},$(Y.value,Y)});return J}function _m($,J){let Y=new A4({check:"custom",...M$(J)});return Y._zod.check=$,Y}function eP($){let J=new A4({check:"describe"});return J._zod.onattach=[(Y)=>{let X=Q8.get(Y)??{};Q8.add(Y,{...X,description:$})}],J._zod.check=()=>{},J}function $S($){let J=new A4({check:"meta"});return J._zod.onattach=[(Y)=>{let X=Q8.get(Y)??{};Q8.add(Y,{...X,...$})}],J._zod.check=()=>{},J}function JS($,J){let Y=M$(J),X=Y.truthy??["true","1","yes","on","y","enabled"],W=Y.falsy??["false","0","no","off","n","disabled"];if(Y.case!=="sensitive")X=X.map((U)=>typeof U==="string"?U.toLowerCase():U),W=W.map((U)=>typeof U==="string"?U.toLowerCase():U);let Z=new Set(X),G=new Set(W),Q=$.Codec??dH,H=$.Boolean??mH,K=new($.String??UZ)({type:"string",error:Y.error}),w=new H({type:"boolean",error:Y.error}),F=new Q({type:"pipe",in:K,out:w,transform:(U,V)=>{let N=U;if(Y.case!=="sensitive")N=N.toLowerCase();if(Z.has(N))return!0;else if(G.has(N))return!1;else return V.issues.push({code:"invalid_value",expected:"stringbool",values:[...Z,...G],input:V.value,inst:F,continue:!1}),{}},reverseTransform:(U,V)=>{if(U===!0)return X[0]||"true";else return W[0]||"false"},error:Y.error});return F}function gG($,J,Y,X={}){let W=M$(X),Z={...M$(X),check:"string_format",type:"string",format:J,fn:typeof Y==="function"?Y:(Q)=>Y.test(Q),...W};if(Y instanceof RegExp)Z.pattern=Y;return new $(Z)}var gF;var Lm=C(()=>{XF();rH();qO();f$();gF={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6}});function v9($){let J=$?.target??"draft-2020-12";if(J==="draft-4")J="draft-04";if(J==="draft-7")J="draft-07";return{processors:$.processors??{},metadataRegistry:$?.metadata??Q8,target:J,unrepresentable:$?.unrepresentable??"throw",override:$?.override??(()=>{}),io:$?.io??"output",counter:0,seen:new Map,cycles:$?.cycles??"ref",reused:$?.reused??"inline",external:$?.external??void 0}}function X4($,J,Y={path:[],schemaPath:[]}){var X;let W=$._zod.def,Z=J.seen.get($);if(Z){if(Z.count++,Y.schemaPath.includes($))Z.cycle=Y.path;return Z.schema}let G={schema:{},count:1,cycle:void 0,path:Y.path};J.seen.set($,G);let Q=$._zod.toJSONSchema?.();if(Q)G.schema=Q;else{let K={...Y,schemaPath:[...Y.schemaPath,$],path:Y.path};if($._zod.processJSONSchema)$._zod.processJSONSchema(J,G.schema,K);else{let F=G.schema,U=J.processors[W.type];if(!U)throw Error(`[toJSONSchema]: Non-representable type encountered: ${W.type}`);U($,J,F,K)}let w=$._zod.parent;if(w){if(!G.ref)G.ref=w;X4(w,J,K),J.seen.get(w).isParent=!0}}let H=J.metadataRegistry.get($);if(H)Object.assign(G.schema,H);if(J.io==="input"&&Y1($))delete G.schema.examples,delete G.schema.default;if(J.io==="input"&&G.schema._prefault)(X=G.schema).default??(X.default=G.schema._prefault);return delete G.schema._prefault,J.seen.get($).schema}function f9($,J){let Y=$.seen.get(J);if(!Y)throw Error("Unprocessed schema. This is a bug in Zod.");let X=new Map;for(let G of $.seen.entries()){let Q=$.metadataRegistry.get(G[0])?.id;if(Q){let H=X.get(Q);if(H&&H!==G[0])throw Error(`Duplicate schema id "${Q}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);X.set(Q,G[0])}}let W=(G)=>{let Q=$.target==="draft-2020-12"?"$defs":"definitions";if($.external){let w=$.external.registry.get(G[0])?.id,F=$.external.uri??((V)=>V);if(w)return{ref:F(w)};let U=G[1].defId??G[1].schema.id??`schema${$.counter++}`;return G[1].defId=U,{defId:U,ref:`${F("__shared")}#/${Q}/${U}`}}if(G[1]===Y)return{ref:"#"};let z=`${"#"}/${Q}/`,K=G[1].schema.id??`__schema${$.counter++}`;return{defId:K,ref:z+K}},Z=(G)=>{if(G[1].schema.$ref)return;let Q=G[1],{ref:H,defId:z}=W(G);if(Q.def={...Q.schema},z)Q.defId=z;let K=Q.schema;for(let w in K)delete K[w];K.$ref=H};if($.cycles==="throw")for(let G of $.seen.entries()){let Q=G[1];if(Q.cycle)throw Error(`Cycle detected: #/${Q.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let G of $.seen.entries()){let Q=G[1];if(J===G[0]){Z(G);continue}if($.external){let z=$.external.registry.get(G[0])?.id;if(J!==G[0]&&z){Z(G);continue}}if($.metadataRegistry.get(G[0])?.id){Z(G);continue}if(Q.cycle){Z(G);continue}if(Q.count>1){if($.reused==="ref"){Z(G);continue}}}}function g9($,J){let Y=$.seen.get(J);if(!Y)throw Error("Unprocessed schema. This is a bug in Zod.");let X=(G)=>{let Q=$.seen.get(G);if(Q.ref===null)return;let H=Q.def??Q.schema,z={...H},K=Q.ref;if(Q.ref=null,K){X(K);let F=$.seen.get(K),U=F.schema;if(U.$ref&&($.target==="draft-07"||$.target==="draft-04"||$.target==="openapi-3.0"))H.allOf=H.allOf??[],H.allOf.push(U);else Object.assign(H,U);if(Object.assign(H,z),G._zod.parent===K)for(let N in H){if(N==="$ref"||N==="allOf")continue;if(!(N in z))delete H[N]}if(U.$ref&&F.def)for(let N in H){if(N==="$ref"||N==="allOf")continue;if(N in F.def&&JSON.stringify(H[N])===JSON.stringify(F.def[N]))delete H[N]}}let w=G._zod.parent;if(w&&w!==K){X(w);let F=$.seen.get(w);if(F?.schema.$ref){if(H.$ref=F.schema.$ref,F.def)for(let U in H){if(U==="$ref"||U==="allOf")continue;if(U in F.def&&JSON.stringify(H[U])===JSON.stringify(F.def[U]))delete H[U]}}}$.override({zodSchema:G,jsonSchema:H,path:Q.path??[]})};for(let G of[...$.seen.entries()].reverse())X(G[0]);let W={};if($.target==="draft-2020-12")W.$schema="https://json-schema.org/draft/2020-12/schema";else if($.target==="draft-07")W.$schema="http://json-schema.org/draft-07/schema#";else if($.target==="draft-04")W.$schema="http://json-schema.org/draft-04/schema#";else if($.target==="openapi-3.0");if($.external?.uri){let G=$.external.registry.get(J)?.id;if(!G)throw Error("Schema is missing an `id` property");W.$id=$.external.uri(G)}Object.assign(W,Y.def??Y.schema);let Z=$.external?.defs??{};for(let G of $.seen.entries()){let Q=G[1];if(Q.def&&Q.defId)Z[Q.defId]=Q.def}if($.external);else if(Object.keys(Z).length>0)if($.target==="draft-2020-12")W.$defs=Z;else W.definitions=Z;try{let G=JSON.parse(JSON.stringify(W));return Object.defineProperty(G,"~standard",{value:{...J["~standard"],jsonSchema:{input:xG(J,"input",$.processors),output:xG(J,"output",$.processors)}},enumerable:!1,writable:!1}),G}catch(G){throw Error("Error converting schema to JSON.")}}function Y1($,J){let Y=J??{seen:new Set};if(Y.seen.has($))return!1;Y.seen.add($);let X=$._zod.def;if(X.type==="transform")return!0;if(X.type==="array")return Y1(X.element,Y);if(X.type==="set")return Y1(X.valueType,Y);if(X.type==="lazy")return Y1(X.getter(),Y);if(X.type==="promise"||X.type==="optional"||X.type==="nonoptional"||X.type==="nullable"||X.type==="readonly"||X.type==="default"||X.type==="prefault")return Y1(X.innerType,Y);if(X.type==="intersection")return Y1(X.left,Y)||Y1(X.right,Y);if(X.type==="record"||X.type==="map")return Y1(X.keyType,Y)||Y1(X.valueType,Y);if(X.type==="pipe")return Y1(X.in,Y)||Y1(X.out,Y);if(X.type==="object"){for(let W in X.shape)if(Y1(X.shape[W],Y))return!0;return!1}if(X.type==="union"){for(let W of X.options)if(Y1(W,Y))return!0;return!1}if(X.type==="tuple"){for(let W of X.items)if(Y1(W,Y))return!0;if(X.rest&&Y1(X.rest,Y))return!0;return!1}return!1}var YS=($,J={})=>(Y)=>{let X=v9({...Y,processors:J});return X4($,X),f9(X,$),g9(X,$)},xG=($,J,Y={})=>(X)=>{let{libraryOptions:W,target:Z}=X??{},G=v9({...W??{},target:Z,io:J,processors:Y});return X4($,G),f9(G,$),g9(G,$)};var Yz=C(()=>{rH()});function Xz($,J){if("_idmap"in $){let X=$,W=v9({...J,processors:xF}),Z={};for(let H of X._idmap.entries()){let[z,K]=H;X4(K,W)}let G={},Q={registry:X,uri:J?.uri,defs:Z};W.external=Q;for(let H of X._idmap.entries()){let[z,K]=H;f9(W,K),G[z]=g9(W,K)}if(Object.keys(Z).length>0){let H=W.target==="draft-2020-12"?"$defs":"definitions";G.__shared={[H]:Z}}return{schemas:G}}let Y=v9({...J,processors:xF});return X4($,Y),f9(Y,$),g9(Y,$)}var a7$,XS=($,J,Y,X)=>{let W=Y;W.type="string";let{minimum:Z,maximum:G,format:Q,patterns:H,contentEncoding:z}=$._zod.bag;if(typeof Z==="number")W.minLength=Z;if(typeof G==="number")W.maxLength=G;if(Q){if(W.format=a7$[Q]??Q,W.format==="")delete W.format;if(Q==="time")delete W.format}if(z)W.contentEncoding=z;if(H&&H.size>0){let K=[...H];if(K.length===1)W.pattern=K[0].source;else if(K.length>1)W.allOf=[...K.map((w)=>({...J.target==="draft-07"||J.target==="draft-04"||J.target==="openapi-3.0"?{type:"string"}:{},pattern:w.source}))]}},WS=($,J,Y,X)=>{let W=Y,{minimum:Z,maximum:G,format:Q,multipleOf:H,exclusiveMaximum:z,exclusiveMinimum:K}=$._zod.bag;if(typeof Q==="string"&&Q.includes("int"))W.type="integer";else W.type="number";if(typeof K==="number")if(J.target==="draft-04"||J.target==="openapi-3.0")W.minimum=K,W.exclusiveMinimum=!0;else W.exclusiveMinimum=K;if(typeof Z==="number"){if(W.minimum=Z,typeof K==="number"&&J.target!=="draft-04")if(K>=Z)delete W.minimum;else delete W.exclusiveMinimum}if(typeof z==="number")if(J.target==="draft-04"||J.target==="openapi-3.0")W.maximum=z,W.exclusiveMaximum=!0;else W.exclusiveMaximum=z;if(typeof G==="number"){if(W.maximum=G,typeof z==="number"&&J.target!=="draft-04")if(z<=G)delete W.maximum;else delete W.exclusiveMaximum}if(typeof H==="number")W.multipleOf=H},ZS=($,J,Y,X)=>{Y.type="boolean"},GS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("BigInt cannot be represented in JSON Schema")},QS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Symbols cannot be represented in JSON Schema")},HS=($,J,Y,X)=>{if(J.target==="openapi-3.0")Y.type="string",Y.nullable=!0,Y.enum=[null];else Y.type="null"},zS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Undefined cannot be represented in JSON Schema")},KS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Void cannot be represented in JSON Schema")},wS=($,J,Y,X)=>{Y.not={}},US=($,J,Y,X)=>{},FS=($,J,Y,X)=>{},DS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Date cannot be represented in JSON Schema")},MS=($,J,Y,X)=>{let W=$._zod.def,Z=IH(W.entries);if(Z.every((G)=>typeof G==="number"))Y.type="number";if(Z.every((G)=>typeof G==="string"))Y.type="string";Y.enum=Z},VS=($,J,Y,X)=>{let W=$._zod.def,Z=[];for(let G of W.values)if(G===void 0){if(J.unrepresentable==="throw")throw Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof G==="bigint")if(J.unrepresentable==="throw")throw Error("BigInt literals cannot be represented in JSON Schema");else Z.push(Number(G));else Z.push(G);if(Z.length===0);else if(Z.length===1){let G=Z[0];if(Y.type=G===null?"null":typeof G,J.target==="draft-04"||J.target==="openapi-3.0")Y.enum=[G];else Y.const=G}else{if(Z.every((G)=>typeof G==="number"))Y.type="number";if(Z.every((G)=>typeof G==="string"))Y.type="string";if(Z.every((G)=>typeof G==="boolean"))Y.type="boolean";if(Z.every((G)=>G===null))Y.type="null";Y.enum=Z}},NS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("NaN cannot be represented in JSON Schema")},_S=($,J,Y,X)=>{let W=Y,Z=$._zod.pattern;if(!Z)throw Error("Pattern not found in template literal");W.type="string",W.pattern=Z.source},LS=($,J,Y,X)=>{let W=Y,Z={type:"string",format:"binary",contentEncoding:"binary"},{minimum:G,maximum:Q,mime:H}=$._zod.bag;if(G!==void 0)Z.minLength=G;if(Q!==void 0)Z.maxLength=Q;if(H)if(H.length===1)Z.contentMediaType=H[0],Object.assign(W,Z);else Object.assign(W,Z),W.anyOf=H.map((z)=>({contentMediaType:z}));else Object.assign(W,Z)},qS=($,J,Y,X)=>{Y.type="boolean"},BS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Custom types cannot be represented in JSON Schema")},OS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Function types cannot be represented in JSON Schema")},PS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Transforms cannot be represented in JSON Schema")},SS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Map cannot be represented in JSON Schema")},AS=($,J,Y,X)=>{if(J.unrepresentable==="throw")throw Error("Set cannot be represented in JSON Schema")},jS=($,J,Y,X)=>{let W=Y,Z=$._zod.def,{minimum:G,maximum:Q}=$._zod.bag;if(typeof G==="number")W.minItems=G;if(typeof Q==="number")W.maxItems=Q;W.type="array",W.items=X4(Z.element,J,{...X,path:[...X.path,"items"]})},ES=($,J,Y,X)=>{let W=Y,Z=$._zod.def;W.type="object",W.properties={};let G=Z.shape;for(let z in G)W.properties[z]=X4(G[z],J,{...X,path:[...X.path,"properties",z]});let Q=new Set(Object.keys(G)),H=new Set([...Q].filter((z)=>{let K=Z.shape[z]._zod;if(J.io==="input")return K.optin===void 0;else return K.optout===void 0}));if(H.size>0)W.required=Array.from(H);if(Z.catchall?._zod.def.type==="never")W.additionalProperties=!1;else if(!Z.catchall){if(J.io==="output")W.additionalProperties=!1}else if(Z.catchall)W.additionalProperties=X4(Z.catchall,J,{...X,path:[...X.path,"additionalProperties"]})},yF=($,J,Y,X)=>{let W=$._zod.def,Z=W.inclusive===!1,G=W.options.map((Q,H)=>X4(Q,J,{...X,path:[...X.path,Z?"oneOf":"anyOf",H]}));if(Z)Y.oneOf=G;else Y.anyOf=G},CS=($,J,Y,X)=>{let W=$._zod.def,Z=X4(W.left,J,{...X,path:[...X.path,"allOf",0]}),G=X4(W.right,J,{...X,path:[...X.path,"allOf",1]}),Q=(z)=>("allOf"in z)&&Object.keys(z).length===1,H=[...Q(Z)?Z.allOf:[Z],...Q(G)?G.allOf:[G]];Y.allOf=H},TS=($,J,Y,X)=>{let W=Y,Z=$._zod.def;W.type="array";let G=J.target==="draft-2020-12"?"prefixItems":"items",Q=J.target==="draft-2020-12"?"items":J.target==="openapi-3.0"?"items":"additionalItems",H=Z.items.map((F,U)=>X4(F,J,{...X,path:[...X.path,G,U]})),z=Z.rest?X4(Z.rest,J,{...X,path:[...X.path,Q,...J.target==="openapi-3.0"?[Z.items.length]:[]]}):null;if(J.target==="draft-2020-12"){if(W.prefixItems=H,z)W.items=z}else if(J.target==="openapi-3.0"){if(W.items={anyOf:H},z)W.items.anyOf.push(z);if(W.minItems=H.length,!z)W.maxItems=H.length}else if(W.items=H,z)W.additionalItems=z;let{minimum:K,maximum:w}=$._zod.bag;if(typeof K==="number")W.minItems=K;if(typeof w==="number")W.maxItems=w},RS=($,J,Y,X)=>{let W=Y,Z=$._zod.def;W.type="object";let G=Z.keyType,H=G._zod.bag?.patterns;if(Z.mode==="loose"&&H&&H.size>0){let K=X4(Z.valueType,J,{...X,path:[...X.path,"patternProperties","*"]});W.patternProperties={};for(let w of H)W.patternProperties[w.source]=K}else{if(J.target==="draft-07"||J.target==="draft-2020-12")W.propertyNames=X4(Z.keyType,J,{...X,path:[...X.path,"propertyNames"]});W.additionalProperties=X4(Z.valueType,J,{...X,path:[...X.path,"additionalProperties"]})}let z=G._zod.values;if(z){let K=[...z].filter((w)=>typeof w==="string"||typeof w==="number");if(K.length>0)W.required=K}},IS=($,J,Y,X)=>{let W=$._zod.def,Z=X4(W.innerType,J,X),G=J.seen.get($);if(J.target==="openapi-3.0")G.ref=W.innerType,Y.nullable=!0;else Y.anyOf=[Z,{type:"null"}]},kS=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);Z.ref=W.innerType},bS=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);Z.ref=W.innerType,Y.default=JSON.parse(JSON.stringify(W.defaultValue))},vS=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);if(Z.ref=W.innerType,J.io==="input")Y._prefault=JSON.parse(JSON.stringify(W.defaultValue))},fS=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);Z.ref=W.innerType;let G;try{G=W.catchValue(void 0)}catch{throw Error("Dynamic catch values are not supported in JSON Schema")}Y.default=G},gS=($,J,Y,X)=>{let W=$._zod.def,Z=J.io==="input"?W.in._zod.def.type==="transform"?W.out:W.in:W.out;X4(Z,J,X);let G=J.seen.get($);G.ref=Z},xS=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);Z.ref=W.innerType,Y.readOnly=!0},yS=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);Z.ref=W.innerType},hF=($,J,Y,X)=>{let W=$._zod.def;X4(W.innerType,J,X);let Z=J.seen.get($);Z.ref=W.innerType},hS=($,J,Y,X)=>{let W=$._zod.innerType;X4(W,J,X);let Z=J.seen.get($);Z.ref=W},xF;var Wz=C(()=>{Yz();f$();a7$={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},xF={string:XS,number:WS,boolean:ZS,bigint:GS,symbol:QS,null:HS,undefined:zS,void:KS,never:wS,any:US,unknown:FS,date:DS,enum:MS,literal:VS,nan:NS,template_literal:_S,file:LS,success:qS,custom:BS,function:OS,transform:PS,map:SS,set:AS,array:jS,object:ES,union:yF,intersection:CS,tuple:TS,record:RS,nullable:IS,nonoptional:kS,default:bS,prefault:vS,catch:fS,pipe:gS,readonly:xS,promise:yS,optional:hF,lazy:hS}});class mS{get metadataRegistry(){return this.ctx.metadataRegistry}get target(){return this.ctx.target}get unrepresentable(){return this.ctx.unrepresentable}get override(){return this.ctx.override}get io(){return this.ctx.io}get counter(){return this.ctx.counter}set counter($){this.ctx.counter=$}get seen(){return this.ctx.seen}constructor($){let J=$?.target??"draft-2020-12";if(J==="draft-4")J="draft-04";if(J==="draft-7")J="draft-07";this.ctx=v9({processors:xF,target:J,...$?.metadata&&{metadata:$.metadata},...$?.unrepresentable&&{unrepresentable:$.unrepresentable},...$?.override&&{override:$.override},...$?.io&&{io:$.io}})}process($,J={path:[],schemaPath:[]}){return X4($,this.ctx,J)}emit($,J){if(J){if(J.cycles)this.ctx.cycles=J.cycles;if(J.reused)this.ctx.reused=J.reused;if(J.external)this.ctx.external=J.external}f9(this.ctx,$);let Y=g9(this.ctx,$),{"~standard":X,...W}=Y;return W}}var qm=C(()=>{Wz();Yz()});var Bm={};var Om=()=>{};var OX={};k4(OX,{version:()=>HB,util:()=>w$,treeifyError:()=>uU,toJSONSchema:()=>Xz,toDotPath:()=>sy,safeParseAsync:()=>Dq,safeParse:()=>Fq,safeEncodeAsync:()=>WZ$,safeEncode:()=>YZ$,safeDecodeAsync:()=>ZZ$,safeDecode:()=>XZ$,registry:()=>iH,regexes:()=>JJ,process:()=>X4,prettifyError:()=>dU,parseAsync:()=>pU,parse:()=>cU,meta:()=>$S,locales:()=>fG,isValidJWT:()=>Nh,isValidBase64URL:()=>Vh,isValidBase64:()=>IB,initializeContext:()=>v9,globalRegistry:()=>Q8,globalConfig:()=>TH,formatError:()=>CG,flattenError:()=>EG,finalize:()=>g9,extractDefs:()=>f9,encodeAsync:()=>$Z$,encode:()=>s5$,describe:()=>eP,decodeAsync:()=>JZ$,decode:()=>e5$,createToJSONSchemaMethod:()=>YS,createStandardJSONSchemaMethod:()=>xG,config:()=>B6,clone:()=>h8,_xor:()=>T7$,_xid:()=>jF,_void:()=>pP,_uuidv7:()=>qF,_uuidv6:()=>LF,_uuidv4:()=>_F,_uuid:()=>NF,_url:()=>tH,_uppercase:()=>MZ,_unknown:()=>dP,_union:()=>C7$,_undefined:()=>hP,_ulid:()=>AF,_uint64:()=>xP,_uint32:()=>IP,_tuple:()=>k7$,_trim:()=>BZ,_transform:()=>h7$,_toUpperCase:()=>PZ,_toLowerCase:()=>OZ,_templateLiteral:()=>r7$,_symbol:()=>yP,_superRefine:()=>sP,_success:()=>p7$,_stringbool:()=>JS,_stringFormat:()=>gG,_string:()=>_P,_startsWith:()=>NZ,_slugify:()=>SZ,_size:()=>I9,_set:()=>f7$,_safeParseAsync:()=>kG,_safeParse:()=>IG,_safeEncodeAsync:()=>aU,_safeEncode:()=>oU,_safeDecodeAsync:()=>sU,_safeDecode:()=>tU,_regex:()=>FZ,_refine:()=>aP,_record:()=>b7$,_readonly:()=>i7$,_property:()=>Jz,_promise:()=>t7$,_positive:()=>aH,_pipe:()=>n7$,_parseAsync:()=>RG,_parse:()=>TG,_overwrite:()=>vJ,_optional:()=>m7$,_number:()=>AP,_nullable:()=>u7$,_null:()=>mP,_normalize:()=>qZ,_nonpositive:()=>eH,_nonoptional:()=>c7$,_nonnegative:()=>$z,_never:()=>cP,_negative:()=>sH,_nativeEnum:()=>x7$,_nanoid:()=>OF,_nan:()=>iP,_multipleOf:()=>NW,_minSize:()=>RY,_minLength:()=>BX,_min:()=>m8,_mime:()=>LZ,_maxSize:()=>_W,_maxLength:()=>k9,_max:()=>P1,_map:()=>v7$,_mac:()=>qP,_lte:()=>P1,_lt:()=>CY,_lowercase:()=>DZ,_literal:()=>y7$,_length:()=>b9,_lazy:()=>o7$,_ksuid:()=>EF,_jwt:()=>fF,_isoTime:()=>PP,_isoDuration:()=>SP,_isoDateTime:()=>BP,_isoDate:()=>OP,_ipv6:()=>TF,_ipv4:()=>CF,_intersection:()=>I7$,_int64:()=>gP,_int32:()=>RP,_int:()=>EP,_includes:()=>VZ,_guid:()=>oH,_gte:()=>m8,_gt:()=>TY,_float64:()=>TP,_float32:()=>CP,_file:()=>oP,_enum:()=>g7$,_endsWith:()=>_Z,_encodeAsync:()=>iU,_encode:()=>lU,_emoji:()=>BF,_email:()=>VF,_e164:()=>vF,_discriminatedUnion:()=>R7$,_default:()=>d7$,_decodeAsync:()=>rU,_decode:()=>nU,_date:()=>lP,_custom:()=>tP,_cuid2:()=>SF,_cuid:()=>PF,_coercedString:()=>LP,_coercedNumber:()=>jP,_coercedDate:()=>nP,_coercedBoolean:()=>bP,_coercedBigint:()=>fP,_cidrv6:()=>IF,_cidrv4:()=>RF,_check:()=>_m,_catch:()=>l7$,_boolean:()=>kP,_bigint:()=>vP,_base64url:()=>bF,_base64:()=>kF,_array:()=>rP,_any:()=>uP,TimePrecision:()=>gF,NEVER:()=>xU,JSONSchemaGenerator:()=>mS,JSONSchema:()=>Bm,Doc:()=>WF,$output:()=>DF,$input:()=>MF,$constructor:()=>i,$brand:()=>yU,$ZodXor:()=>oB,$ZodXID:()=>qB,$ZodVoid:()=>lB,$ZodUnknown:()=>cB,$ZodUnion:()=>uH,$ZodUndefined:()=>mB,$ZodUUID:()=>UB,$ZodURL:()=>DB,$ZodULID:()=>LB,$ZodType:()=>e$,$ZodTuple:()=>UF,$ZodTransform:()=>WO,$ZodTemplateLiteral:()=>MO,$ZodSymbol:()=>hB,$ZodSuccess:()=>KO,$ZodStringFormat:()=>M4,$ZodString:()=>UZ,$ZodSet:()=>$O,$ZodRegistry:()=>NP,$ZodRecord:()=>sB,$ZodRealError:()=>O1,$ZodReadonly:()=>DO,$ZodPromise:()=>NO,$ZodPrefault:()=>HO,$ZodPipe:()=>FO,$ZodOptional:()=>FF,$ZodObjectJIT:()=>rB,$ZodObject:()=>qh,$ZodNumberFormat:()=>xB,$ZodNumber:()=>KF,$ZodNullable:()=>GO,$ZodNull:()=>uB,$ZodNonOptional:()=>zO,$ZodNever:()=>pB,$ZodNanoID:()=>VB,$ZodNaN:()=>UO,$ZodMap:()=>eB,$ZodMAC:()=>CB,$ZodLiteral:()=>YO,$ZodLazy:()=>_O,$ZodKSUID:()=>BB,$ZodJWT:()=>fB,$ZodIntersection:()=>aB,$ZodISOTime:()=>SB,$ZodISODuration:()=>AB,$ZodISODateTime:()=>OB,$ZodISODate:()=>PB,$ZodIPv6:()=>EB,$ZodIPv4:()=>jB,$ZodGUID:()=>wB,$ZodFunction:()=>VO,$ZodFile:()=>XO,$ZodExactOptional:()=>ZO,$ZodError:()=>gH,$ZodEnum:()=>JO,$ZodEncodeError:()=>zZ,$ZodEmoji:()=>MB,$ZodEmail:()=>FB,$ZodE164:()=>vB,$ZodDiscriminatedUnion:()=>tB,$ZodDefault:()=>QO,$ZodDate:()=>nB,$ZodCustomStringFormat:()=>gB,$ZodCustom:()=>LO,$ZodCodec:()=>dH,$ZodCheckUpperCase:()=>JB,$ZodCheckStringFormat:()=>bG,$ZodCheckStartsWith:()=>XB,$ZodCheckSizeEquals:()=>oq,$ZodCheckRegex:()=>eq,$ZodCheckProperty:()=>ZB,$ZodCheckOverwrite:()=>QB,$ZodCheckNumberFormat:()=>lq,$ZodCheckMultipleOf:()=>pq,$ZodCheckMinSize:()=>rq,$ZodCheckMinLength:()=>aq,$ZodCheckMimeType:()=>GB,$ZodCheckMaxSize:()=>iq,$ZodCheckMaxLength:()=>tq,$ZodCheckLowerCase:()=>$B,$ZodCheckLessThan:()=>JF,$ZodCheckLengthEquals:()=>sq,$ZodCheckIncludes:()=>YB,$ZodCheckGreaterThan:()=>YF,$ZodCheckEndsWith:()=>WB,$ZodCheckBigIntFormat:()=>nq,$ZodCheck:()=>A4,$ZodCatch:()=>wO,$ZodCUID2:()=>_B,$ZodCUID:()=>NB,$ZodCIDRv6:()=>RB,$ZodCIDRv4:()=>TB,$ZodBoolean:()=>mH,$ZodBigIntFormat:()=>yB,$ZodBigInt:()=>wF,$ZodBase64URL:()=>bB,$ZodBase64:()=>kB,$ZodAsyncError:()=>qX,$ZodArray:()=>iB,$ZodAny:()=>dB});var YJ=C(()=>{f$();$F();VP();Wz();qm();Om();PG();Mq();Uq();qO();XF();zB();rH();Lm();Yz()});var mF={};k4(mF,{uppercase:()=>MZ,trim:()=>BZ,toUpperCase:()=>PZ,toLowerCase:()=>OZ,startsWith:()=>NZ,slugify:()=>SZ,size:()=>I9,regex:()=>FZ,property:()=>Jz,positive:()=>aH,overwrite:()=>vJ,normalize:()=>qZ,nonpositive:()=>eH,nonnegative:()=>$z,negative:()=>sH,multipleOf:()=>NW,minSize:()=>RY,minLength:()=>BX,mime:()=>LZ,maxSize:()=>_W,maxLength:()=>k9,lte:()=>P1,lt:()=>CY,lowercase:()=>DZ,length:()=>b9,includes:()=>VZ,gte:()=>m8,gt:()=>TY,endsWith:()=>_Z});var uF=C(()=>{YJ()});var AZ={};k4(AZ,{time:()=>cS,duration:()=>pS,datetime:()=>uS,date:()=>dS,ZodISOTime:()=>Qz,ZodISODuration:()=>Hz,ZodISODateTime:()=>Zz,ZodISODate:()=>Gz});function uS($){return BP(Zz,$)}function dS($){return OP(Gz,$)}function cS($){return PP(Qz,$)}function pS($){return SP(Hz,$)}var Zz,Gz,Qz,Hz;var zz=C(()=>{YJ();wz();Zz=i("ZodISODateTime",($,J)=>{OB.init($,J),w4.init($,J)});Gz=i("ZodISODate",($,J)=>{PB.init($,J),w4.init($,J)});Qz=i("ZodISOTime",($,J)=>{SB.init($,J),w4.init($,J)});Hz=i("ZodISODuration",($,J)=>{AB.init($,J),w4.init($,J)})});var Pm=($,J)=>{gH.init($,J),$.name="ZodError",Object.defineProperties($,{format:{value:(Y)=>CG($,Y)},flatten:{value:(Y)=>EG($,Y)},addIssue:{value:(Y)=>{$.issues.push(Y),$.message=JSON.stringify($.issues,SG,2)}},addIssues:{value:(Y)=>{$.issues.push(...Y),$.message=JSON.stringify($.issues,SG,2)}},isEmpty:{get(){return $.issues.length===0}}})},lS,X1;var nS=C(()=>{YJ();YJ();f$();lS=i("ZodError",Pm),X1=i("ZodError",Pm,{Parent:Error})});var dF,cF,pF,lF,nF,iF,rF,oF,tF,aF,sF,eF;var iS=C(()=>{YJ();nS();dF=TG(X1),cF=RG(X1),pF=IG(X1),lF=kG(X1),nF=lU(X1),iF=nU(X1),rF=iU(X1),oF=rU(X1),tF=oU(X1),aF=tU(X1),sF=aU(X1),eF=sU(X1)});var Kz={};k4(Kz,{xor:()=>RA,xid:()=>GA,void:()=>EA,uuidv7:()=>sS,uuidv6:()=>aS,uuidv4:()=>tS,uuid:()=>oS,url:()=>eS,unknown:()=>PX,union:()=>w6,undefined:()=>LW,ulid:()=>ZA,uint64:()=>AA,uint32:()=>OA,tuple:()=>MD,transform:()=>vz,templateLiteral:()=>dA,symbol:()=>jA,superRefine:()=>uD,success:()=>hA,stringbool:()=>oA,stringFormat:()=>MA,string:()=>A,strictObject:()=>TA,set:()=>fA,refine:()=>mD,record:()=>a$,readonly:()=>vD,promise:()=>cA,preprocess:()=>tA,prefault:()=>ED,pipe:()=>mG,partialRecord:()=>kA,optional:()=>l6,object:()=>c,number:()=>H0,nullish:()=>yA,nullable:()=>hG,null:()=>WD,nonoptional:()=>CD,never:()=>Iz,nativeEnum:()=>gA,nanoid:()=>YA,nan:()=>mA,meta:()=>iA,map:()=>vA,mac:()=>HA,looseRecord:()=>bA,looseObject:()=>kz,literal:()=>bz,lazy:()=>xD,ksuid:()=>QA,keyof:()=>CA,jwt:()=>DA,json:()=>iG,ipv6:()=>dG,ipv4:()=>x9,intersection:()=>FD,int64:()=>SA,int32:()=>BA,int:()=>Uz,instanceof:()=>rA,httpUrl:()=>$A,hostname:()=>VA,hex:()=>NA,hash:()=>_A,guid:()=>rS,function:()=>pA,float64:()=>qA,float32:()=>LA,file:()=>xA,exactOptional:()=>OD,enum:()=>N0,emoji:()=>JA,email:()=>O6,e164:()=>FA,discriminatedUnion:()=>IA,describe:()=>nA,date:()=>U4,custom:()=>SX,cuid2:()=>WA,cuid:()=>XA,codec:()=>uA,cidrv6:()=>KA,cidrv4:()=>zA,check:()=>lA,catch:()=>ID,boolean:()=>m$,bigint:()=>PA,base64url:()=>UA,base64:()=>wA,array:()=>l$,any:()=>W0,_function:()=>pA,_default:()=>AD,_ZodString:()=>Fz,ZodXor:()=>KD,ZodXID:()=>qz,ZodVoid:()=>HD,ZodUnknown:()=>GD,ZodUnion:()=>pG,ZodUndefined:()=>YD,ZodUUID:()=>IY,ZodURL:()=>uG,ZodULID:()=>Lz,ZodType:()=>X0,ZodTuple:()=>DD,ZodTransform:()=>qD,ZodTemplateLiteral:()=>fD,ZodSymbol:()=>JD,ZodSuccess:()=>TD,ZodStringFormat:()=>w4,ZodString:()=>EZ,ZodSet:()=>ND,ZodRecord:()=>lG,ZodReadonly:()=>bD,ZodPromise:()=>yD,ZodPrefault:()=>jD,ZodPipe:()=>gz,ZodOptional:()=>qW,ZodObject:()=>kY,ZodNumberFormat:()=>y9,ZodNumber:()=>TZ,ZodNullable:()=>PD,ZodNull:()=>XD,ZodNonOptional:()=>fz,ZodNever:()=>QD,ZodNanoID:()=>Vz,ZodNaN:()=>kD,ZodMap:()=>VD,ZodMAC:()=>$D,ZodLiteral:()=>_D,ZodLazy:()=>gD,ZodKSUID:()=>Bz,ZodJWT:()=>Tz,ZodIntersection:()=>UD,ZodIPv6:()=>Pz,ZodIPv4:()=>Oz,ZodGUID:()=>yG,ZodFunction:()=>hD,ZodFile:()=>LD,ZodExactOptional:()=>BD,ZodEnum:()=>jZ,ZodEmoji:()=>Mz,ZodEmail:()=>Dz,ZodE164:()=>Cz,ZodDiscriminatedUnion:()=>wD,ZodDefault:()=>SD,ZodDate:()=>cG,ZodCustomStringFormat:()=>CZ,ZodCustom:()=>nG,ZodCodec:()=>xz,ZodCatch:()=>RD,ZodCUID2:()=>_z,ZodCUID:()=>Nz,ZodCIDRv6:()=>Az,ZodCIDRv4:()=>Sz,ZodBoolean:()=>RZ,ZodBigIntFormat:()=>Rz,ZodBigInt:()=>IZ,ZodBase64URL:()=>Ez,ZodBase64:()=>jz,ZodArray:()=>zD,ZodAny:()=>ZD});function A($){return _P(EZ,$)}function O6($){return VF(Dz,$)}function rS($){return oH(yG,$)}function oS($){return NF(IY,$)}function tS($){return _F(IY,$)}function aS($){return LF(IY,$)}function sS($){return qF(IY,$)}function eS($){return tH(uG,$)}function $A($){return tH(uG,{protocol:/^https?$/,hostname:JJ.domain,...w$.normalizeParams($)})}function JA($){return BF(Mz,$)}function YA($){return OF(Vz,$)}function XA($){return PF(Nz,$)}function WA($){return SF(_z,$)}function ZA($){return AF(Lz,$)}function GA($){return jF(qz,$)}function QA($){return EF(Bz,$)}function x9($){return CF(Oz,$)}function HA($){return qP($D,$)}function dG($){return TF(Pz,$)}function zA($){return RF(Sz,$)}function KA($){return IF(Az,$)}function wA($){return kF(jz,$)}function UA($){return bF(Ez,$)}function FA($){return vF(Cz,$)}function DA($){return fF(Tz,$)}function MA($,J,Y={}){return gG(CZ,$,J,Y)}function VA($){return gG(CZ,"hostname",JJ.hostname,$)}function NA($){return gG(CZ,"hex",JJ.hex,$)}function _A($,J){let Y=J?.enc??"hex",X=`${$}_${Y}`,W=JJ[X];if(!W)throw Error(`Unrecognized hash format: ${X}`);return gG(CZ,X,W,J)}function H0($){return AP(TZ,$)}function Uz($){return EP(y9,$)}function LA($){return CP(y9,$)}function qA($){return TP(y9,$)}function BA($){return RP(y9,$)}function OA($){return IP(y9,$)}function m$($){return kP(RZ,$)}function PA($){return vP(IZ,$)}function SA($){return gP(Rz,$)}function AA($){return xP(Rz,$)}function jA($){return yP(JD,$)}function LW($){return hP(YD,$)}function WD($){return mP(XD,$)}function W0(){return uP(ZD)}function PX(){return dP(GD)}function Iz($){return cP(QD,$)}function EA($){return pP(HD,$)}function U4($){return lP(cG,$)}function l$($,J){return rP(zD,$,J)}function CA($){let J=$._zod.def.shape;return N0(Object.keys(J))}function c($,J){let Y={type:"object",shape:$??{},...w$.normalizeParams(J)};return new kY(Y)}function TA($,J){return new kY({type:"object",shape:$,catchall:Iz(),...w$.normalizeParams(J)})}function kz($,J){return new kY({type:"object",shape:$,catchall:PX(),...w$.normalizeParams(J)})}function w6($,J){return new pG({type:"union",options:$,...w$.normalizeParams(J)})}function RA($,J){return new KD({type:"union",options:$,inclusive:!1,...w$.normalizeParams(J)})}function IA($,J,Y){return new wD({type:"union",options:J,discriminator:$,...w$.normalizeParams(Y)})}function FD($,J){return new UD({type:"intersection",left:$,right:J})}function MD($,J,Y){let X=J instanceof e$,W=X?Y:J;return new DD({type:"tuple",items:$,rest:X?J:null,...w$.normalizeParams(W)})}function a$($,J,Y){return new lG({type:"record",keyType:$,valueType:J,...w$.normalizeParams(Y)})}function kA($,J,Y){let X=h8($);return X._zod.values=void 0,new lG({type:"record",keyType:X,valueType:J,...w$.normalizeParams(Y)})}function bA($,J,Y){return new lG({type:"record",keyType:$,valueType:J,mode:"loose",...w$.normalizeParams(Y)})}function vA($,J,Y){return new VD({type:"map",keyType:$,valueType:J,...w$.normalizeParams(Y)})}function fA($,J){return new ND({type:"set",valueType:$,...w$.normalizeParams(J)})}function N0($,J){let Y=Array.isArray($)?Object.fromEntries($.map((X)=>[X,X])):$;return new jZ({type:"enum",entries:Y,...w$.normalizeParams(J)})}function gA($,J){return new jZ({type:"enum",entries:$,...w$.normalizeParams(J)})}function bz($,J){return new _D({type:"literal",values:Array.isArray($)?$:[$],...w$.normalizeParams(J)})}function xA($){return oP(LD,$)}function vz($){return new qD({type:"transform",transform:$})}function l6($){return new qW({type:"optional",innerType:$})}function OD($){return new BD({type:"optional",innerType:$})}function hG($){return new PD({type:"nullable",innerType:$})}function yA($){return l6(hG($))}function AD($,J){return new SD({type:"default",innerType:$,get defaultValue(){return typeof J==="function"?J():w$.shallowClone(J)}})}function ED($,J){return new jD({type:"prefault",innerType:$,get defaultValue(){return typeof J==="function"?J():w$.shallowClone(J)}})}function CD($,J){return new fz({type:"nonoptional",innerType:$,...w$.normalizeParams(J)})}function hA($){return new TD({type:"success",innerType:$})}function ID($,J){return new RD({type:"catch",innerType:$,catchValue:typeof J==="function"?J:()=>J})}function mA($){return iP(kD,$)}function mG($,J){return new gz({type:"pipe",in:$,out:J})}function uA($,J,Y){return new xz({type:"pipe",in:$,out:J,transform:Y.decode,reverseTransform:Y.encode})}function vD($){return new bD({type:"readonly",innerType:$})}function dA($,J){return new fD({type:"template_literal",parts:$,...w$.normalizeParams(J)})}function xD($){return new gD({type:"lazy",getter:$})}function cA($){return new yD({type:"promise",innerType:$})}function pA($){return new hD({type:"function",input:Array.isArray($?.input)?MD($?.input):$?.input??l$(PX()),output:$?.output??PX()})}function lA($){let J=new A4({check:"custom"});return J._zod.check=$,J}function SX($,J){return tP(nG,$??(()=>!0),J)}function mD($,J={}){return aP(nG,$,J)}function uD($){return sP($)}function rA($,J={}){let Y=new nG({type:"custom",check:"custom",fn:(X)=>X instanceof $,abort:!0,...w$.normalizeParams(J)});return Y._zod.bag.Class=$,Y._zod.check=(X)=>{if(!(X.value instanceof $))X.issues.push({code:"invalid_type",expected:$.name,input:X.value,inst:Y,path:[...Y._zod.def.path??[]]})},Y}function iG($){let J=xD(()=>{return w6([A($),H0(),m$(),WD(),l$(J),a$(A(),J)])});return J}function tA($,J){return mG(vz($),J)}var X0,Fz,EZ,w4,Dz,yG,IY,uG,Mz,Vz,Nz,_z,Lz,qz,Bz,Oz,$D,Pz,Sz,Az,jz,Ez,Cz,Tz,CZ,TZ,y9,RZ,IZ,Rz,JD,YD,XD,ZD,GD,QD,HD,cG,zD,kY,pG,KD,wD,UD,DD,lG,VD,ND,jZ,_D,LD,qD,qW,BD,PD,SD,jD,fz,TD,RD,kD,gz,xz,bD,fD,gD,yD,hD,nG,nA,iA,oA=(...$)=>JS({Codec:xz,Boolean:RZ,String:EZ},...$);var wz=C(()=>{YJ();YJ();Wz();Yz();uF();zz();iS();X0=i("ZodType",($,J)=>{return e$.init($,J),Object.assign($["~standard"],{jsonSchema:{input:xG($,"input"),output:xG($,"output")}}),$.toJSONSchema=YS($,{}),$.def=J,$.type=J.type,Object.defineProperty($,"_def",{value:J}),$.check=(...Y)=>{return $.clone(w$.mergeDefs(J,{checks:[...J.checks??[],...Y.map((X)=>typeof X==="function"?{_zod:{check:X,def:{check:"custom"},onattach:[]}}:X)]}),{parent:!0})},$.with=$.check,$.clone=(Y,X)=>h8($,Y,X),$.brand=()=>$,$.register=(Y,X)=>{return Y.add($,X),$},$.parse=(Y,X)=>dF($,Y,X,{callee:$.parse}),$.safeParse=(Y,X)=>pF($,Y,X),$.parseAsync=async(Y,X)=>cF($,Y,X,{callee:$.parseAsync}),$.safeParseAsync=async(Y,X)=>lF($,Y,X),$.spa=$.safeParseAsync,$.encode=(Y,X)=>nF($,Y,X),$.decode=(Y,X)=>iF($,Y,X),$.encodeAsync=async(Y,X)=>rF($,Y,X),$.decodeAsync=async(Y,X)=>oF($,Y,X),$.safeEncode=(Y,X)=>tF($,Y,X),$.safeDecode=(Y,X)=>aF($,Y,X),$.safeEncodeAsync=async(Y,X)=>sF($,Y,X),$.safeDecodeAsync=async(Y,X)=>eF($,Y,X),$.refine=(Y,X)=>$.check(mD(Y,X)),$.superRefine=(Y)=>$.check(uD(Y)),$.overwrite=(Y)=>$.check(vJ(Y)),$.optional=()=>l6($),$.exactOptional=()=>OD($),$.nullable=()=>hG($),$.nullish=()=>l6(hG($)),$.nonoptional=(Y)=>CD($,Y),$.array=()=>l$($),$.or=(Y)=>w6([$,Y]),$.and=(Y)=>FD($,Y),$.transform=(Y)=>mG($,vz(Y)),$.default=(Y)=>AD($,Y),$.prefault=(Y)=>ED($,Y),$.catch=(Y)=>ID($,Y),$.pipe=(Y)=>mG($,Y),$.readonly=()=>vD($),$.describe=(Y)=>{let X=$.clone();return Q8.add(X,{description:Y}),X},Object.defineProperty($,"description",{get(){return Q8.get($)?.description},configurable:!0}),$.meta=(...Y)=>{if(Y.length===0)return Q8.get($);let X=$.clone();return Q8.add(X,Y[0]),X},$.isOptional=()=>$.safeParse(void 0).success,$.isNullable=()=>$.safeParse(null).success,$.apply=(Y)=>Y($),$}),Fz=i("_ZodString",($,J)=>{UZ.init($,J),X0.init($,J),$._zod.processJSONSchema=(X,W,Z)=>XS($,X,W,Z);let Y=$._zod.bag;$.format=Y.format??null,$.minLength=Y.minimum??null,$.maxLength=Y.maximum??null,$.regex=(...X)=>$.check(FZ(...X)),$.includes=(...X)=>$.check(VZ(...X)),$.startsWith=(...X)=>$.check(NZ(...X)),$.endsWith=(...X)=>$.check(_Z(...X)),$.min=(...X)=>$.check(BX(...X)),$.max=(...X)=>$.check(k9(...X)),$.length=(...X)=>$.check(b9(...X)),$.nonempty=(...X)=>$.check(BX(1,...X)),$.lowercase=(X)=>$.check(DZ(X)),$.uppercase=(X)=>$.check(MZ(X)),$.trim=()=>$.check(BZ()),$.normalize=(...X)=>$.check(qZ(...X)),$.toLowerCase=()=>$.check(OZ()),$.toUpperCase=()=>$.check(PZ()),$.slugify=()=>$.check(SZ())}),EZ=i("ZodString",($,J)=>{UZ.init($,J),Fz.init($,J),$.email=(Y)=>$.check(VF(Dz,Y)),$.url=(Y)=>$.check(tH(uG,Y)),$.jwt=(Y)=>$.check(fF(Tz,Y)),$.emoji=(Y)=>$.check(BF(Mz,Y)),$.guid=(Y)=>$.check(oH(yG,Y)),$.uuid=(Y)=>$.check(NF(IY,Y)),$.uuidv4=(Y)=>$.check(_F(IY,Y)),$.uuidv6=(Y)=>$.check(LF(IY,Y)),$.uuidv7=(Y)=>$.check(qF(IY,Y)),$.nanoid=(Y)=>$.check(OF(Vz,Y)),$.guid=(Y)=>$.check(oH(yG,Y)),$.cuid=(Y)=>$.check(PF(Nz,Y)),$.cuid2=(Y)=>$.check(SF(_z,Y)),$.ulid=(Y)=>$.check(AF(Lz,Y)),$.base64=(Y)=>$.check(kF(jz,Y)),$.base64url=(Y)=>$.check(bF(Ez,Y)),$.xid=(Y)=>$.check(jF(qz,Y)),$.ksuid=(Y)=>$.check(EF(Bz,Y)),$.ipv4=(Y)=>$.check(CF(Oz,Y)),$.ipv6=(Y)=>$.check(TF(Pz,Y)),$.cidrv4=(Y)=>$.check(RF(Sz,Y)),$.cidrv6=(Y)=>$.check(IF(Az,Y)),$.e164=(Y)=>$.check(vF(Cz,Y)),$.datetime=(Y)=>$.check(uS(Y)),$.date=(Y)=>$.check(dS(Y)),$.time=(Y)=>$.check(cS(Y)),$.duration=(Y)=>$.check(pS(Y))});w4=i("ZodStringFormat",($,J)=>{M4.init($,J),Fz.init($,J)}),Dz=i("ZodEmail",($,J)=>{FB.init($,J),w4.init($,J)});yG=i("ZodGUID",($,J)=>{wB.init($,J),w4.init($,J)});IY=i("ZodUUID",($,J)=>{UB.init($,J),w4.init($,J)});uG=i("ZodURL",($,J)=>{DB.init($,J),w4.init($,J)});Mz=i("ZodEmoji",($,J)=>{MB.init($,J),w4.init($,J)});Vz=i("ZodNanoID",($,J)=>{VB.init($,J),w4.init($,J)});Nz=i("ZodCUID",($,J)=>{NB.init($,J),w4.init($,J)});_z=i("ZodCUID2",($,J)=>{_B.init($,J),w4.init($,J)});Lz=i("ZodULID",($,J)=>{LB.init($,J),w4.init($,J)});qz=i("ZodXID",($,J)=>{qB.init($,J),w4.init($,J)});Bz=i("ZodKSUID",($,J)=>{BB.init($,J),w4.init($,J)});Oz=i("ZodIPv4",($,J)=>{jB.init($,J),w4.init($,J)});$D=i("ZodMAC",($,J)=>{CB.init($,J),w4.init($,J)});Pz=i("ZodIPv6",($,J)=>{EB.init($,J),w4.init($,J)});Sz=i("ZodCIDRv4",($,J)=>{TB.init($,J),w4.init($,J)});Az=i("ZodCIDRv6",($,J)=>{RB.init($,J),w4.init($,J)});jz=i("ZodBase64",($,J)=>{kB.init($,J),w4.init($,J)});Ez=i("ZodBase64URL",($,J)=>{bB.init($,J),w4.init($,J)});Cz=i("ZodE164",($,J)=>{vB.init($,J),w4.init($,J)});Tz=i("ZodJWT",($,J)=>{fB.init($,J),w4.init($,J)});CZ=i("ZodCustomStringFormat",($,J)=>{gB.init($,J),w4.init($,J)});TZ=i("ZodNumber",($,J)=>{KF.init($,J),X0.init($,J),$._zod.processJSONSchema=(X,W,Z)=>WS($,X,W,Z),$.gt=(X,W)=>$.check(TY(X,W)),$.gte=(X,W)=>$.check(m8(X,W)),$.min=(X,W)=>$.check(m8(X,W)),$.lt=(X,W)=>$.check(CY(X,W)),$.lte=(X,W)=>$.check(P1(X,W)),$.max=(X,W)=>$.check(P1(X,W)),$.int=(X)=>$.check(Uz(X)),$.safe=(X)=>$.check(Uz(X)),$.positive=(X)=>$.check(TY(0,X)),$.nonnegative=(X)=>$.check(m8(0,X)),$.negative=(X)=>$.check(CY(0,X)),$.nonpositive=(X)=>$.check(P1(0,X)),$.multipleOf=(X,W)=>$.check(NW(X,W)),$.step=(X,W)=>$.check(NW(X,W)),$.finite=()=>$;let Y=$._zod.bag;$.minValue=Math.max(Y.minimum??Number.NEGATIVE_INFINITY,Y.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,$.maxValue=Math.min(Y.maximum??Number.POSITIVE_INFINITY,Y.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,$.isInt=(Y.format??"").includes("int")||Number.isSafeInteger(Y.multipleOf??0.5),$.isFinite=!0,$.format=Y.format??null});y9=i("ZodNumberFormat",($,J)=>{xB.init($,J),TZ.init($,J)});RZ=i("ZodBoolean",($,J)=>{mH.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>ZS($,Y,X,W)});IZ=i("ZodBigInt",($,J)=>{wF.init($,J),X0.init($,J),$._zod.processJSONSchema=(X,W,Z)=>GS($,X,W,Z),$.gte=(X,W)=>$.check(m8(X,W)),$.min=(X,W)=>$.check(m8(X,W)),$.gt=(X,W)=>$.check(TY(X,W)),$.gte=(X,W)=>$.check(m8(X,W)),$.min=(X,W)=>$.check(m8(X,W)),$.lt=(X,W)=>$.check(CY(X,W)),$.lte=(X,W)=>$.check(P1(X,W)),$.max=(X,W)=>$.check(P1(X,W)),$.positive=(X)=>$.check(TY(BigInt(0),X)),$.negative=(X)=>$.check(CY(BigInt(0),X)),$.nonpositive=(X)=>$.check(P1(BigInt(0),X)),$.nonnegative=(X)=>$.check(m8(BigInt(0),X)),$.multipleOf=(X,W)=>$.check(NW(X,W));let Y=$._zod.bag;$.minValue=Y.minimum??null,$.maxValue=Y.maximum??null,$.format=Y.format??null});Rz=i("ZodBigIntFormat",($,J)=>{yB.init($,J),IZ.init($,J)});JD=i("ZodSymbol",($,J)=>{hB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>QS($,Y,X,W)});YD=i("ZodUndefined",($,J)=>{mB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>zS($,Y,X,W)});XD=i("ZodNull",($,J)=>{uB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>HS($,Y,X,W)});ZD=i("ZodAny",($,J)=>{dB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>US($,Y,X,W)});GD=i("ZodUnknown",($,J)=>{cB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>FS($,Y,X,W)});QD=i("ZodNever",($,J)=>{pB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>wS($,Y,X,W)});HD=i("ZodVoid",($,J)=>{lB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>KS($,Y,X,W)});cG=i("ZodDate",($,J)=>{nB.init($,J),X0.init($,J),$._zod.processJSONSchema=(X,W,Z)=>DS($,X,W,Z),$.min=(X,W)=>$.check(m8(X,W)),$.max=(X,W)=>$.check(P1(X,W));let Y=$._zod.bag;$.minDate=Y.minimum?new Date(Y.minimum):null,$.maxDate=Y.maximum?new Date(Y.maximum):null});zD=i("ZodArray",($,J)=>{iB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>jS($,Y,X,W),$.element=J.element,$.min=(Y,X)=>$.check(BX(Y,X)),$.nonempty=(Y)=>$.check(BX(1,Y)),$.max=(Y,X)=>$.check(k9(Y,X)),$.length=(Y,X)=>$.check(b9(Y,X)),$.unwrap=()=>$.element});kY=i("ZodObject",($,J)=>{rB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>ES($,Y,X,W),w$.defineLazy($,"shape",()=>{return J.shape}),$.keyof=()=>N0(Object.keys($._zod.def.shape)),$.catchall=(Y)=>$.clone({...$._zod.def,catchall:Y}),$.passthrough=()=>$.clone({...$._zod.def,catchall:PX()}),$.loose=()=>$.clone({...$._zod.def,catchall:PX()}),$.strict=()=>$.clone({...$._zod.def,catchall:Iz()}),$.strip=()=>$.clone({...$._zod.def,catchall:void 0}),$.extend=(Y)=>{return w$.extend($,Y)},$.safeExtend=(Y)=>{return w$.safeExtend($,Y)},$.merge=(Y)=>w$.merge($,Y),$.pick=(Y)=>w$.pick($,Y),$.omit=(Y)=>w$.omit($,Y),$.partial=(...Y)=>w$.partial(qW,$,Y[0]),$.required=(...Y)=>w$.required(fz,$,Y[0])});pG=i("ZodUnion",($,J)=>{uH.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>yF($,Y,X,W),$.options=J.options});KD=i("ZodXor",($,J)=>{pG.init($,J),oB.init($,J),$._zod.processJSONSchema=(Y,X,W)=>yF($,Y,X,W),$.options=J.options});wD=i("ZodDiscriminatedUnion",($,J)=>{pG.init($,J),tB.init($,J)});UD=i("ZodIntersection",($,J)=>{aB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>CS($,Y,X,W)});DD=i("ZodTuple",($,J)=>{UF.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>TS($,Y,X,W),$.rest=(Y)=>$.clone({...$._zod.def,rest:Y})});lG=i("ZodRecord",($,J)=>{sB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>RS($,Y,X,W),$.keyType=J.keyType,$.valueType=J.valueType});VD=i("ZodMap",($,J)=>{eB.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>SS($,Y,X,W),$.keyType=J.keyType,$.valueType=J.valueType,$.min=(...Y)=>$.check(RY(...Y)),$.nonempty=(Y)=>$.check(RY(1,Y)),$.max=(...Y)=>$.check(_W(...Y)),$.size=(...Y)=>$.check(I9(...Y))});ND=i("ZodSet",($,J)=>{$O.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>AS($,Y,X,W),$.min=(...Y)=>$.check(RY(...Y)),$.nonempty=(Y)=>$.check(RY(1,Y)),$.max=(...Y)=>$.check(_W(...Y)),$.size=(...Y)=>$.check(I9(...Y))});jZ=i("ZodEnum",($,J)=>{JO.init($,J),X0.init($,J),$._zod.processJSONSchema=(X,W,Z)=>MS($,X,W,Z),$.enum=J.entries,$.options=Object.values(J.entries);let Y=new Set(Object.keys(J.entries));$.extract=(X,W)=>{let Z={};for(let G of X)if(Y.has(G))Z[G]=J.entries[G];else throw Error(`Key ${G} not found in enum`);return new jZ({...J,checks:[],...w$.normalizeParams(W),entries:Z})},$.exclude=(X,W)=>{let Z={...J.entries};for(let G of X)if(Y.has(G))delete Z[G];else throw Error(`Key ${G} not found in enum`);return new jZ({...J,checks:[],...w$.normalizeParams(W),entries:Z})}});_D=i("ZodLiteral",($,J)=>{YO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>VS($,Y,X,W),$.values=new Set(J.values),Object.defineProperty($,"value",{get(){if(J.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return J.values[0]}})});LD=i("ZodFile",($,J)=>{XO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>LS($,Y,X,W),$.min=(Y,X)=>$.check(RY(Y,X)),$.max=(Y,X)=>$.check(_W(Y,X)),$.mime=(Y,X)=>$.check(LZ(Array.isArray(Y)?Y:[Y],X))});qD=i("ZodTransform",($,J)=>{WO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>PS($,Y,X,W),$._zod.parse=(Y,X)=>{if(X.direction==="backward")throw new zZ($.constructor.name);Y.addIssue=(Z)=>{if(typeof Z==="string")Y.issues.push(w$.issue(Z,Y.value,J));else{let G=Z;if(G.fatal)G.continue=!1;G.code??(G.code="custom"),G.input??(G.input=Y.value),G.inst??(G.inst=$),Y.issues.push(w$.issue(G))}};let W=J.transform(Y.value,Y);if(W instanceof Promise)return W.then((Z)=>{return Y.value=Z,Y});return Y.value=W,Y}});qW=i("ZodOptional",($,J)=>{FF.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>hF($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});BD=i("ZodExactOptional",($,J)=>{ZO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>hF($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});PD=i("ZodNullable",($,J)=>{GO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>IS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});SD=i("ZodDefault",($,J)=>{QO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>bS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType,$.removeDefault=$.unwrap});jD=i("ZodPrefault",($,J)=>{HO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>vS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});fz=i("ZodNonOptional",($,J)=>{zO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>kS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});TD=i("ZodSuccess",($,J)=>{KO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>qS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});RD=i("ZodCatch",($,J)=>{wO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>fS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType,$.removeCatch=$.unwrap});kD=i("ZodNaN",($,J)=>{UO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>NS($,Y,X,W)});gz=i("ZodPipe",($,J)=>{FO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>gS($,Y,X,W),$.in=J.in,$.out=J.out});xz=i("ZodCodec",($,J)=>{gz.init($,J),dH.init($,J)});bD=i("ZodReadonly",($,J)=>{DO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>xS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});fD=i("ZodTemplateLiteral",($,J)=>{MO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>_S($,Y,X,W)});gD=i("ZodLazy",($,J)=>{_O.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>hS($,Y,X,W),$.unwrap=()=>$._zod.def.getter()});yD=i("ZodPromise",($,J)=>{NO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>yS($,Y,X,W),$.unwrap=()=>$._zod.def.innerType});hD=i("ZodFunction",($,J)=>{VO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>OS($,Y,X,W)});nG=i("ZodCustom",($,J)=>{LO.init($,J),X0.init($,J),$._zod.processJSONSchema=(Y,X,W)=>BS($,Y,X,W)});nA=eP,iA=$S});function Am($){B6({customError:$})}function jm(){return B6().customError}var Sm,dD;var Em=C(()=>{YJ();Sm={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};(function($){})(dD||(dD={}))});function JG$($,J){let Y=$.$schema;if(Y==="https://json-schema.org/draft/2020-12/schema")return"draft-2020-12";if(Y==="http://json-schema.org/draft-07/schema#")return"draft-7";if(Y==="http://json-schema.org/draft-04/schema#")return"draft-4";return J??"draft-2020-12"}function YG$($,J){if(!$.startsWith("#"))throw Error("External $ref is not supported, only local refs (#/...) are allowed");let Y=$.slice(1).split("/").filter(Boolean);if(Y.length===0)return J.rootSchema;let X=J.version==="draft-2020-12"?"$defs":"definitions";if(Y[0]===X){let W=Y[1];if(!W||!J.defs[W])throw Error(`Reference not found: ${$}`);return J.defs[W]}throw Error(`Reference not found: ${$}`)}function Cm($,J){if($.not!==void 0){if(typeof $.not==="object"&&Object.keys($.not).length===0)return S$.never();throw Error("not is not supported in Zod (except { not: {} } for never)")}if($.unevaluatedItems!==void 0)throw Error("unevaluatedItems is not supported");if($.unevaluatedProperties!==void 0)throw Error("unevaluatedProperties is not supported");if($.if!==void 0||$.then!==void 0||$.else!==void 0)throw Error("Conditional schemas (if/then/else) are not supported");if($.dependentSchemas!==void 0||$.dependentRequired!==void 0)throw Error("dependentSchemas and dependentRequired are not supported");if($.$ref){let W=$.$ref;if(J.refs.has(W))return J.refs.get(W);if(J.processing.has(W))return S$.lazy(()=>{if(!J.refs.has(W))throw Error(`Circular reference not resolved: ${W}`);return J.refs.get(W)});J.processing.add(W);let Z=YG$(W,J),G=u8(Z,J);return J.refs.set(W,G),J.processing.delete(W),G}if($.enum!==void 0){let W=$.enum;if(J.version==="openapi-3.0"&&$.nullable===!0&&W.length===1&&W[0]===null)return S$.null();if(W.length===0)return S$.never();if(W.length===1)return S$.literal(W[0]);if(W.every((G)=>typeof G==="string"))return S$.enum(W);let Z=W.map((G)=>S$.literal(G));if(Z.length<2)return Z[0];return S$.union([Z[0],Z[1],...Z.slice(2)])}if($.const!==void 0)return S$.literal($.const);let Y=$.type;if(Array.isArray(Y)){let W=Y.map((Z)=>{let G={...$,type:Z};return Cm(G,J)});if(W.length===0)return S$.never();if(W.length===1)return W[0];return S$.union(W)}if(!Y)return S$.any();let X;switch(Y){case"string":{let W=S$.string();if($.format){let Z=$.format;if(Z==="email")W=W.check(S$.email());else if(Z==="uri"||Z==="uri-reference")W=W.check(S$.url());else if(Z==="uuid"||Z==="guid")W=W.check(S$.uuid());else if(Z==="date-time")W=W.check(S$.iso.datetime());else if(Z==="date")W=W.check(S$.iso.date());else if(Z==="time")W=W.check(S$.iso.time());else if(Z==="duration")W=W.check(S$.iso.duration());else if(Z==="ipv4")W=W.check(S$.ipv4());else if(Z==="ipv6")W=W.check(S$.ipv6());else if(Z==="mac")W=W.check(S$.mac());else if(Z==="cidr")W=W.check(S$.cidrv4());else if(Z==="cidr-v6")W=W.check(S$.cidrv6());else if(Z==="base64")W=W.check(S$.base64());else if(Z==="base64url")W=W.check(S$.base64url());else if(Z==="e164")W=W.check(S$.e164());else if(Z==="jwt")W=W.check(S$.jwt());else if(Z==="emoji")W=W.check(S$.emoji());else if(Z==="nanoid")W=W.check(S$.nanoid());else if(Z==="cuid")W=W.check(S$.cuid());else if(Z==="cuid2")W=W.check(S$.cuid2());else if(Z==="ulid")W=W.check(S$.ulid());else if(Z==="xid")W=W.check(S$.xid());else if(Z==="ksuid")W=W.check(S$.ksuid())}if(typeof $.minLength==="number")W=W.min($.minLength);if(typeof $.maxLength==="number")W=W.max($.maxLength);if($.pattern)W=W.regex(new RegExp($.pattern));X=W;break}case"number":case"integer":{let W=Y==="integer"?S$.number().int():S$.number();if(typeof $.minimum==="number")W=W.min($.minimum);if(typeof $.maximum==="number")W=W.max($.maximum);if(typeof $.exclusiveMinimum==="number")W=W.gt($.exclusiveMinimum);else if($.exclusiveMinimum===!0&&typeof $.minimum==="number")W=W.gt($.minimum);if(typeof $.exclusiveMaximum==="number")W=W.lt($.exclusiveMaximum);else if($.exclusiveMaximum===!0&&typeof $.maximum==="number")W=W.lt($.maximum);if(typeof $.multipleOf==="number")W=W.multipleOf($.multipleOf);X=W;break}case"boolean":{X=S$.boolean();break}case"null":{X=S$.null();break}case"object":{let W={},Z=$.properties||{},G=new Set($.required||[]);for(let[H,z]of Object.entries(Z)){let K=u8(z,J);W[H]=G.has(H)?K:K.optional()}if($.propertyNames){let H=u8($.propertyNames,J),z=$.additionalProperties&&typeof $.additionalProperties==="object"?u8($.additionalProperties,J):S$.any();if(Object.keys(W).length===0){X=S$.record(H,z);break}let K=S$.object(W).passthrough(),w=S$.looseRecord(H,z);X=S$.intersection(K,w);break}if($.patternProperties){let H=$.patternProperties,z=Object.keys(H),K=[];for(let F of z){let U=u8(H[F],J),V=S$.string().regex(new RegExp(F));K.push(S$.looseRecord(V,U))}let w=[];if(Object.keys(W).length>0)w.push(S$.object(W).passthrough());if(w.push(...K),w.length===0)X=S$.object({}).passthrough();else if(w.length===1)X=w[0];else{let F=S$.intersection(w[0],w[1]);for(let U=2;U<w.length;U++)F=S$.intersection(F,w[U]);X=F}break}let Q=S$.object(W);if($.additionalProperties===!1)X=Q.strict();else if(typeof $.additionalProperties==="object")X=Q.catchall(u8($.additionalProperties,J));else X=Q.passthrough();break}case"array":{let{prefixItems:W,items:Z}=$;if(W&&Array.isArray(W)){let G=W.map((H)=>u8(H,J)),Q=Z&&typeof Z==="object"&&!Array.isArray(Z)?u8(Z,J):void 0;if(Q)X=S$.tuple(G).rest(Q);else X=S$.tuple(G);if(typeof $.minItems==="number")X=X.check(S$.minLength($.minItems));if(typeof $.maxItems==="number")X=X.check(S$.maxLength($.maxItems))}else if(Array.isArray(Z)){let G=Z.map((H)=>u8(H,J)),Q=$.additionalItems&&typeof $.additionalItems==="object"?u8($.additionalItems,J):void 0;if(Q)X=S$.tuple(G).rest(Q);else X=S$.tuple(G);if(typeof $.minItems==="number")X=X.check(S$.minLength($.minItems));if(typeof $.maxItems==="number")X=X.check(S$.maxLength($.maxItems))}else if(Z!==void 0){let G=u8(Z,J),Q=S$.array(G);if(typeof $.minItems==="number")Q=Q.min($.minItems);if(typeof $.maxItems==="number")Q=Q.max($.maxItems);X=Q}else X=S$.array(S$.any());break}default:throw Error(`Unsupported type: ${Y}`)}if($.description)X=X.describe($.description);if($.default!==void 0)X=X.default($.default);return X}function u8($,J){if(typeof $==="boolean")return $?S$.any():S$.never();let Y=Cm($,J),X=$.type||$.enum!==void 0||$.const!==void 0;if($.anyOf&&Array.isArray($.anyOf)){let Q=$.anyOf.map((z)=>u8(z,J)),H=S$.union(Q);Y=X?S$.intersection(Y,H):H}if($.oneOf&&Array.isArray($.oneOf)){let Q=$.oneOf.map((z)=>u8(z,J)),H=S$.xor(Q);Y=X?S$.intersection(Y,H):H}if($.allOf&&Array.isArray($.allOf))if($.allOf.length===0)Y=X?Y:S$.any();else{let Q=X?Y:u8($.allOf[0],J),H=X?0:1;for(let z=H;z<$.allOf.length;z++)Q=S$.intersection(Q,u8($.allOf[z],J));Y=Q}if($.nullable===!0&&J.version==="openapi-3.0")Y=S$.nullable(Y);if($.readOnly===!0)Y=S$.readonly(Y);let W={},Z=["$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor"];for(let Q of Z)if(Q in $)W[Q]=$[Q];let G=["contentEncoding","contentMediaType","contentSchema"];for(let Q of G)if(Q in $)W[Q]=$[Q];for(let Q of Object.keys($))if(!$G$.has(Q))W[Q]=$[Q];if(Object.keys(W).length>0)J.registry.add(Y,W);return Y}function aA($,J){if(typeof $==="boolean")return $?S$.any():S$.never();let Y=JG$($,J?.defaultTarget),X=$.$defs||$.definitions||{},W={version:Y,defs:X,refs:new Map,processing:new Set,rootSchema:$,registry:J?.registry??Q8};return u8($,W)}var S$,$G$;var Tm=C(()=>{rH();uF();zz();wz();S$={...Kz,...mF,iso:AZ},$G$=new Set(["$schema","$ref","$defs","definitions","$id","id","$comment","$anchor","$vocabulary","$dynamicRef","$dynamicAnchor","type","enum","const","anyOf","oneOf","allOf","not","properties","required","additionalProperties","patternProperties","propertyNames","minProperties","maxProperties","items","prefixItems","additionalItems","minItems","maxItems","uniqueItems","contains","minContains","maxContains","minLength","maxLength","pattern","format","minimum","maximum","exclusiveMinimum","exclusiveMaximum","multipleOf","description","default","contentEncoding","contentMediaType","contentSchema","unevaluatedItems","unevaluatedProperties","if","then","else","dependentSchemas","dependentRequired","nullable","readOnly"])});var D0={};k4(D0,{string:()=>XG$,number:()=>WG$,date:()=>QG$,boolean:()=>ZG$,bigint:()=>GG$});function XG$($){return LP(EZ,$)}function WG$($){return jP(TZ,$)}function ZG$($){return bP(RZ,$)}function GG$($){return fP(IZ,$)}function QG$($){return nP(cG,$)}var Rm=C(()=>{YJ();wz()});var rG={};k4(rG,{xor:()=>RA,xid:()=>GA,void:()=>EA,uuidv7:()=>sS,uuidv6:()=>aS,uuidv4:()=>tS,uuid:()=>oS,util:()=>w$,url:()=>eS,uppercase:()=>MZ,unknown:()=>PX,union:()=>w6,undefined:()=>LW,ulid:()=>ZA,uint64:()=>AA,uint32:()=>OA,tuple:()=>MD,trim:()=>BZ,treeifyError:()=>uU,transform:()=>vz,toUpperCase:()=>PZ,toLowerCase:()=>OZ,toJSONSchema:()=>Xz,templateLiteral:()=>dA,symbol:()=>jA,superRefine:()=>uD,success:()=>hA,stringbool:()=>oA,stringFormat:()=>MA,string:()=>A,strictObject:()=>TA,startsWith:()=>NZ,slugify:()=>SZ,size:()=>I9,setErrorMap:()=>Am,set:()=>fA,safeParseAsync:()=>lF,safeParse:()=>pF,safeEncodeAsync:()=>sF,safeEncode:()=>tF,safeDecodeAsync:()=>eF,safeDecode:()=>aF,registry:()=>iH,regexes:()=>JJ,regex:()=>FZ,refine:()=>mD,record:()=>a$,readonly:()=>vD,property:()=>Jz,promise:()=>cA,prettifyError:()=>dU,preprocess:()=>tA,prefault:()=>ED,positive:()=>aH,pipe:()=>mG,partialRecord:()=>kA,parseAsync:()=>cF,parse:()=>dF,overwrite:()=>vJ,optional:()=>l6,object:()=>c,number:()=>H0,nullish:()=>yA,nullable:()=>hG,null:()=>WD,normalize:()=>qZ,nonpositive:()=>eH,nonoptional:()=>CD,nonnegative:()=>$z,never:()=>Iz,negative:()=>sH,nativeEnum:()=>gA,nanoid:()=>YA,nan:()=>mA,multipleOf:()=>NW,minSize:()=>RY,minLength:()=>BX,mime:()=>LZ,meta:()=>iA,maxSize:()=>_W,maxLength:()=>k9,map:()=>vA,mac:()=>HA,lte:()=>P1,lt:()=>CY,lowercase:()=>DZ,looseRecord:()=>bA,looseObject:()=>kz,locales:()=>fG,literal:()=>bz,length:()=>b9,lazy:()=>xD,ksuid:()=>QA,keyof:()=>CA,jwt:()=>DA,json:()=>iG,iso:()=>AZ,ipv6:()=>dG,ipv4:()=>x9,intersection:()=>FD,int64:()=>SA,int32:()=>BA,int:()=>Uz,instanceof:()=>rA,includes:()=>VZ,httpUrl:()=>$A,hostname:()=>VA,hex:()=>NA,hash:()=>_A,guid:()=>rS,gte:()=>m8,gt:()=>TY,globalRegistry:()=>Q8,getErrorMap:()=>jm,function:()=>pA,fromJSONSchema:()=>aA,formatError:()=>CG,float64:()=>qA,float32:()=>LA,flattenError:()=>EG,file:()=>xA,exactOptional:()=>OD,enum:()=>N0,endsWith:()=>_Z,encodeAsync:()=>rF,encode:()=>nF,emoji:()=>JA,email:()=>O6,e164:()=>FA,discriminatedUnion:()=>IA,describe:()=>nA,decodeAsync:()=>oF,decode:()=>iF,date:()=>U4,custom:()=>SX,cuid2:()=>WA,cuid:()=>XA,core:()=>OX,config:()=>B6,coerce:()=>D0,codec:()=>uA,clone:()=>h8,cidrv6:()=>KA,cidrv4:()=>zA,check:()=>lA,catch:()=>ID,boolean:()=>m$,bigint:()=>PA,base64url:()=>UA,base64:()=>wA,array:()=>l$,any:()=>W0,_function:()=>pA,_default:()=>AD,_ZodString:()=>Fz,ZodXor:()=>KD,ZodXID:()=>qz,ZodVoid:()=>HD,ZodUnknown:()=>GD,ZodUnion:()=>pG,ZodUndefined:()=>YD,ZodUUID:()=>IY,ZodURL:()=>uG,ZodULID:()=>Lz,ZodType:()=>X0,ZodTuple:()=>DD,ZodTransform:()=>qD,ZodTemplateLiteral:()=>fD,ZodSymbol:()=>JD,ZodSuccess:()=>TD,ZodStringFormat:()=>w4,ZodString:()=>EZ,ZodSet:()=>ND,ZodRecord:()=>lG,ZodRealError:()=>X1,ZodReadonly:()=>bD,ZodPromise:()=>yD,ZodPrefault:()=>jD,ZodPipe:()=>gz,ZodOptional:()=>qW,ZodObject:()=>kY,ZodNumberFormat:()=>y9,ZodNumber:()=>TZ,ZodNullable:()=>PD,ZodNull:()=>XD,ZodNonOptional:()=>fz,ZodNever:()=>QD,ZodNanoID:()=>Vz,ZodNaN:()=>kD,ZodMap:()=>VD,ZodMAC:()=>$D,ZodLiteral:()=>_D,ZodLazy:()=>gD,ZodKSUID:()=>Bz,ZodJWT:()=>Tz,ZodIssueCode:()=>Sm,ZodIntersection:()=>UD,ZodISOTime:()=>Qz,ZodISODuration:()=>Hz,ZodISODateTime:()=>Zz,ZodISODate:()=>Gz,ZodIPv6:()=>Pz,ZodIPv4:()=>Oz,ZodGUID:()=>yG,ZodFunction:()=>hD,ZodFirstPartyTypeKind:()=>dD,ZodFile:()=>LD,ZodExactOptional:()=>BD,ZodError:()=>lS,ZodEnum:()=>jZ,ZodEmoji:()=>Mz,ZodEmail:()=>Dz,ZodE164:()=>Cz,ZodDiscriminatedUnion:()=>wD,ZodDefault:()=>SD,ZodDate:()=>cG,ZodCustomStringFormat:()=>CZ,ZodCustom:()=>nG,ZodCodec:()=>xz,ZodCatch:()=>RD,ZodCUID2:()=>_z,ZodCUID:()=>Nz,ZodCIDRv6:()=>Az,ZodCIDRv4:()=>Sz,ZodBoolean:()=>RZ,ZodBigIntFormat:()=>Rz,ZodBigInt:()=>IZ,ZodBase64URL:()=>Ez,ZodBase64:()=>jz,ZodArray:()=>zD,ZodAny:()=>ZD,TimePrecision:()=>gF,NEVER:()=>xU,$output:()=>DF,$input:()=>MF,$brand:()=>yU});var sA=C(()=>{YJ();YJ();TO();YJ();Wz();Tm();VP();zz();zz();Rm();wz();uF();nS();iS();Em();B6(cH())});var h$={};k4(h$,{z:()=>rG,xor:()=>RA,xid:()=>GA,void:()=>EA,uuidv7:()=>sS,uuidv6:()=>aS,uuidv4:()=>tS,uuid:()=>oS,util:()=>w$,url:()=>eS,uppercase:()=>MZ,unknown:()=>PX,union:()=>w6,undefined:()=>LW,ulid:()=>ZA,uint64:()=>AA,uint32:()=>OA,tuple:()=>MD,trim:()=>BZ,treeifyError:()=>uU,transform:()=>vz,toUpperCase:()=>PZ,toLowerCase:()=>OZ,toJSONSchema:()=>Xz,templateLiteral:()=>dA,symbol:()=>jA,superRefine:()=>uD,success:()=>hA,stringbool:()=>oA,stringFormat:()=>MA,string:()=>A,strictObject:()=>TA,startsWith:()=>NZ,slugify:()=>SZ,size:()=>I9,setErrorMap:()=>Am,set:()=>fA,safeParseAsync:()=>lF,safeParse:()=>pF,safeEncodeAsync:()=>sF,safeEncode:()=>tF,safeDecodeAsync:()=>eF,safeDecode:()=>aF,registry:()=>iH,regexes:()=>JJ,regex:()=>FZ,refine:()=>mD,record:()=>a$,readonly:()=>vD,property:()=>Jz,promise:()=>cA,prettifyError:()=>dU,preprocess:()=>tA,prefault:()=>ED,positive:()=>aH,pipe:()=>mG,partialRecord:()=>kA,parseAsync:()=>cF,parse:()=>dF,overwrite:()=>vJ,optional:()=>l6,object:()=>c,number:()=>H0,nullish:()=>yA,nullable:()=>hG,null:()=>WD,normalize:()=>qZ,nonpositive:()=>eH,nonoptional:()=>CD,nonnegative:()=>$z,never:()=>Iz,negative:()=>sH,nativeEnum:()=>gA,nanoid:()=>YA,nan:()=>mA,multipleOf:()=>NW,minSize:()=>RY,minLength:()=>BX,mime:()=>LZ,meta:()=>iA,maxSize:()=>_W,maxLength:()=>k9,map:()=>vA,mac:()=>HA,lte:()=>P1,lt:()=>CY,lowercase:()=>DZ,looseRecord:()=>bA,looseObject:()=>kz,locales:()=>fG,literal:()=>bz,length:()=>b9,lazy:()=>xD,ksuid:()=>QA,keyof:()=>CA,jwt:()=>DA,json:()=>iG,iso:()=>AZ,ipv6:()=>dG,ipv4:()=>x9,intersection:()=>FD,int64:()=>SA,int32:()=>BA,int:()=>Uz,instanceof:()=>rA,includes:()=>VZ,httpUrl:()=>$A,hostname:()=>VA,hex:()=>NA,hash:()=>_A,guid:()=>rS,gte:()=>m8,gt:()=>TY,globalRegistry:()=>Q8,getErrorMap:()=>jm,function:()=>pA,fromJSONSchema:()=>aA,formatError:()=>CG,float64:()=>qA,float32:()=>LA,flattenError:()=>EG,file:()=>xA,exactOptional:()=>OD,enum:()=>N0,endsWith:()=>_Z,encodeAsync:()=>rF,encode:()=>nF,emoji:()=>JA,email:()=>O6,e164:()=>FA,discriminatedUnion:()=>IA,describe:()=>nA,default:()=>HG$,decodeAsync:()=>oF,decode:()=>iF,date:()=>U4,custom:()=>SX,cuid2:()=>WA,cuid:()=>XA,core:()=>OX,config:()=>B6,coerce:()=>D0,codec:()=>uA,clone:()=>h8,cidrv6:()=>KA,cidrv4:()=>zA,check:()=>lA,catch:()=>ID,boolean:()=>m$,bigint:()=>PA,base64url:()=>UA,base64:()=>wA,array:()=>l$,any:()=>W0,_function:()=>pA,_default:()=>AD,_ZodString:()=>Fz,ZodXor:()=>KD,ZodXID:()=>qz,ZodVoid:()=>HD,ZodUnknown:()=>GD,ZodUnion:()=>pG,ZodUndefined:()=>YD,ZodUUID:()=>IY,ZodURL:()=>uG,ZodULID:()=>Lz,ZodType:()=>X0,ZodTuple:()=>DD,ZodTransform:()=>qD,ZodTemplateLiteral:()=>fD,ZodSymbol:()=>JD,ZodSuccess:()=>TD,ZodStringFormat:()=>w4,ZodString:()=>EZ,ZodSet:()=>ND,ZodRecord:()=>lG,ZodRealError:()=>X1,ZodReadonly:()=>bD,ZodPromise:()=>yD,ZodPrefault:()=>jD,ZodPipe:()=>gz,ZodOptional:()=>qW,ZodObject:()=>kY,ZodNumberFormat:()=>y9,ZodNumber:()=>TZ,ZodNullable:()=>PD,ZodNull:()=>XD,ZodNonOptional:()=>fz,ZodNever:()=>QD,ZodNanoID:()=>Vz,ZodNaN:()=>kD,ZodMap:()=>VD,ZodMAC:()=>$D,ZodLiteral:()=>_D,ZodLazy:()=>gD,ZodKSUID:()=>Bz,ZodJWT:()=>Tz,ZodIssueCode:()=>Sm,ZodIntersection:()=>UD,ZodISOTime:()=>Qz,ZodISODuration:()=>Hz,ZodISODateTime:()=>Zz,ZodISODate:()=>Gz,ZodIPv6:()=>Pz,ZodIPv4:()=>Oz,ZodGUID:()=>yG,ZodFunction:()=>hD,ZodFirstPartyTypeKind:()=>dD,ZodFile:()=>LD,ZodExactOptional:()=>BD,ZodError:()=>lS,ZodEnum:()=>jZ,ZodEmoji:()=>Mz,ZodEmail:()=>Dz,ZodE164:()=>Cz,ZodDiscriminatedUnion:()=>wD,ZodDefault:()=>SD,ZodDate:()=>cG,ZodCustomStringFormat:()=>CZ,ZodCustom:()=>nG,ZodCodec:()=>xz,ZodCatch:()=>RD,ZodCUID2:()=>_z,ZodCUID:()=>Nz,ZodCIDRv6:()=>Az,ZodCIDRv4:()=>Sz,ZodBoolean:()=>RZ,ZodBigIntFormat:()=>Rz,ZodBigInt:()=>IZ,ZodBase64URL:()=>Ez,ZodBase64:()=>jz,ZodArray:()=>zD,ZodAny:()=>ZD,TimePrecision:()=>gF,NEVER:()=>xU,$output:()=>DF,$input:()=>MF,$brand:()=>yU});var HG$;var y$=C(()=>{sA();sA();HG$=rG});function eA($){return x9().safeParse($).success||dG().safeParse($).success}function zG$($){return dG().safeParse($).success}function KG$($){let J=$.toLowerCase();if(J.startsWith("::ffff:")){let X=J.substring(7);if(x9().safeParse(X).success)return X}let Y=$.split(":");if(Y.length===7&&Y[5]?.toLowerCase()==="ffff"){let X=Y[6];if(X&&x9().safeParse(X).success)return X}if(J.includes("::ffff:")||J.includes(":ffff:")){let X=Im($);if(X.length===8&&X[0]==="0000"&&X[1]==="0000"&&X[2]==="0000"&&X[3]==="0000"&&X[4]==="0000"&&X[5]==="ffff"&&X[6]&&X[7])return`${Number.parseInt(X[6].substring(0,2),16)}.${Number.parseInt(X[6].substring(2,4),16)}.${Number.parseInt(X[7].substring(0,2),16)}.${Number.parseInt(X[7].substring(2,4),16)}`}return null}function Im($){if($.includes("::")){let J=$.split("::"),Y=J[0]?J[0].split(":"):[],X=J[1]?J[1].split(":"):[],W=8-Y.length-X.length,Z=Array(W).fill("0000"),G=Y.map((H)=>H.padStart(4,"0")),Q=X.map((H)=>H.padStart(4,"0"));return[...G,...Z,...Q]}return $.split(":").map((J)=>J.padStart(4,"0"))}function wG$($,J){let Y=Im($);if(J&&J<128){let X=J;return Y.map((W)=>{if(X<=0)return"0000";if(X>=16)return X-=16,W;let Z=Number.parseInt(W,16)&(65535<<16-X&65535);return X=0,Z.toString(16).padStart(4,"0")}).join(":").toLowerCase()}return Y.join(":").toLowerCase()}function $j($,J={}){if(x9().safeParse($).success)return $.toLowerCase();if(!zG$($))return $.toLowerCase();let Y=KG$($);if(Y)return Y.toLowerCase();return wG$($,J.ipv6Subnet||64)}function Jj($,J){return`${$}|${J}`}var km=C(()=>{y$()});function UG$($){return $?$!=="false":!1}function r0($,J){if(typeof process<"u"&&process.env)return process.env[$]??J;if(typeof Deno<"u")return Deno.env.get($)??J;if(typeof Bun<"u")return Bun.env[$]??J;return J}function pD($,J=!0){let Y=r0($);if(!Y)return J;return Y!=="0"&&Y.toLowerCase()!=="false"&&Y!==""}var cD,yz=($)=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||($?cD:globalThis),A0,hz,BW,kZ=()=>hz==="dev"||hz==="development",OW=()=>hz==="test"||UG$(A0.TEST),Yj;var Xj=C(()=>{cD=Object.create(null),A0=new Proxy(cD,{get($,J){return yz()[J]??cD[J]},has($,J){return J in yz()||J in cD},set($,J,Y){let X=yz(!0);return X[J]=Y,!0},deleteProperty($,J){if(!J)return!1;let Y=yz(!0);return delete Y[J],!0},ownKeys(){let $=yz(!0);return Object.keys($)}});hz=typeof process<"u"&&process.env&&"development"||"",BW=hz==="production";Yj=Object.freeze({get BETTER_AUTH_SECRET(){return r0("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return r0("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return r0("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return r0("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return r0("NODE_ENV","development")},get PACKAGE_VERSION(){return r0("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return r0("BETTER_AUTH_TELEMETRY_ENDPOINT","")}})});function uz(){if(r0("FORCE_COLOR")!==void 0)switch(r0("FORCE_COLOR")){case"":case"1":case"true":return H8;case"2":return AX;case"3":return XJ;default:return mz}if(r0("NODE_DISABLE_COLORS")!==void 0&&r0("NODE_DISABLE_COLORS")!==""||r0("NO_COLOR")!==void 0&&r0("NO_COLOR")!==""||r0("TERM")==="dumb")return mz;if(r0("TMUX"))return XJ;if("TF_BUILD"in A0&&"AGENT_NAME"in A0)return H8;if("CI"in A0){for(let{0:$,1:J}of FG$)if($ in A0)return J;if(r0("CI_NAME")==="codeship")return AX;return mz}if("TEAMCITY_VERSION"in A0)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(r0("TEAMCITY_VERSION"))!==null?H8:mz;switch(r0("TERM_PROGRAM")){case"iTerm.app":if(!r0("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(r0("TERM_PROGRAM_VERSION"))!==null)return AX;return XJ;case"HyperTerm":case"MacTerm":return XJ;case"Apple_Terminal":return AX}if(r0("COLORTERM")==="truecolor"||r0("COLORTERM")==="24bit")return XJ;if(r0("TERM")){if(/truecolor/.exec(r0("TERM"))!==null)return XJ;if(/^xterm-256/.exec(r0("TERM"))!==null)return AX;let $=r0("TERM").toLowerCase();if(bm[$])return bm[$];if(DG$.some((J)=>J.exec($)!==null))return H8}if(r0("COLORTERM"))return H8;return mz}var mz=1,H8=4,AX=8,XJ=24,bm,FG$,DG$;var lD=C(()=>{Xj();bm={eterm:H8,cons25:H8,console:H8,cygwin:H8,dtterm:H8,gnome:H8,hurd:H8,jfbterm:H8,konsole:H8,kterm:H8,mlterm:H8,mosh:XJ,putty:H8,st:H8,"rxvt-unicode-24bit":XJ,terminator:XJ,"xterm-kitty":XJ},FG$=new Map(Object.entries({APPVEYOR:AX,BUILDKITE:AX,CIRCLECI:XJ,DRONE:AX,GITEA_ACTIONS:XJ,GITHUB_ACTIONS:XJ,GITLAB_CI:AX,TRAVIS:AX})),DG$=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/]});function oG($,J){return nD.indexOf(J)>=nD.indexOf($)}var R6,nD,MG$,VG$=($,J,Y)=>{let X=new Date().toISOString();if(Y)return`${R6.dim}${X}${R6.reset} ${MG$[$]}${$.toUpperCase()}${R6.reset} ${R6.bright}[Better Auth]:${R6.reset} ${J}`;return`${X} ${$.toUpperCase()} [Better Auth]: ${J}`},PW=($)=>{let J=$?.disabled!==!0,Y=$?.level??"warn",X=$?.disableColors!==void 0?!$.disableColors:uz()!==1,W=(Z,G,Q=[])=>{if(!J||!oG(Y,Z))return;let H=VG$(Z,G,X);if(!$||typeof $.log!=="function"){if(Z==="error")console.error(H,...Q);else if(Z==="warn")console.warn(H,...Q);else console.log(H,...Q);return}$.log(Z==="success"?"info":Z,G,...Q)};return{...Object.fromEntries(nD.map((Z)=>[Z,(...[G,...Q])=>W(Z,G,Q)])),get level(){return Y}}},C$;var d8=C(()=>{lD();R6={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",undim:"\x1B[22m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},nD=["debug","info","success","warn","error"];MG$={info:R6.fg.blue,success:R6.fg.green,warn:R6.fg.yellow,error:R6.fg.red,debug:R6.fg.magenta},C$=PW()});var n0=C(()=>{Xj();lD();d8()});function o0($){function J(Y,X){if(typeof X==="string"){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(X)){let W=new Date(X);if(!isNaN(W.getTime()))return W}}return X}try{if(typeof $!=="string")return $;return JSON.parse($,J)}catch(Y){return C$.error("Error parsing JSON",{error:Y}),null}}var Wj=C(()=>{d8();n0()});var vm=()=>{};function bZ($,J){let Y;try{Y=new URL($).pathname.replace(/\/+$/,"")||"/"}catch{return"/"}if(J==="/"||J==="")return Y;if(Y===J)return"/";if(Y.startsWith(J+"/"))return Y.slice(J.length).replace(/\/+$/,"")||"/";return Y}var fm=()=>{};var _0=C(()=>{ly();ny();Jq();Yq();km();Wj();vm();fm()});var V$;var gm=C(()=>{Jq();_0();V$=Y4({USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account.",CROSS_SITE_NAVIGATION_LOGIN_BLOCKED:"Cross-site navigation login blocked. This request appears to be a CSRF attack.",VERIFICATION_EMAIL_NOT_ENABLED:"Verification email isn't enabled",EMAIL_ALREADY_VERIFIED:"Email is already verified",EMAIL_MISMATCH:"Email mismatch",SESSION_NOT_FRESH:"Session is not fresh",LINKED_ACCOUNT_ALREADY_EXISTS:"Linked account already exists",INVALID_ORIGIN:"Invalid origin",INVALID_CALLBACK_URL:"Invalid callbackURL",INVALID_REDIRECT_URL:"Invalid redirectURL",INVALID_ERROR_CALLBACK_URL:"Invalid errorCallbackURL",INVALID_NEW_USER_CALLBACK_URL:"Invalid newUserCallbackURL",MISSING_OR_NULL_ORIGIN:"Missing or null Origin",CALLBACK_URL_REQUIRED:"callbackURL is required",FAILED_TO_CREATE_VERIFICATION:"Unable to create verification",FIELD_NOT_ALLOWED:"Field not allowed to be set",ASYNC_VALIDATION_NOT_SUPPORTED:"Async validation is not supported",VALIDATION_ERROR:"Validation Error",MISSING_FIELD:"Field is required"})});var q$;var $0=C(()=>{gm();q$=class extends Error{constructor($,J){super($,J);this.name="BetterAuthError",this.message=$,this.stack=""}}});var A1=($)=>{let J=($.plugins??[]).reduce((K,w)=>{let F=w.schema;if(!F)return K;for(let[U,V]of Object.entries(F))K[U]={fields:{...K[U]?.fields,...V.fields},modelName:V.modelName||U};return K},{}),Y=$.rateLimit?.storage==="database",X={rateLimit:{modelName:$.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:$.rateLimit?.fields?.key||"key"},count:{type:"number",required:!0,fieldName:$.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,required:!0,fieldName:$.rateLimit?.fields?.lastRequest||"lastRequest",defaultValue:()=>Date.now()}}}},{user:W,session:Z,account:G,verification:Q,...H}=J,z={session:{modelName:$.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:$.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:$.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:$.session?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:$.session?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},ipAddress:{type:"string",required:!1,fieldName:$.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:$.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:$.session?.fields?.userId||"userId",references:{model:$.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,index:!0},...Z?.fields,...$.session?.additionalFields},order:2}};return{user:{modelName:$.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:$.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:$.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:!1,required:!0,fieldName:$.user?.fields?.emailVerified||"emailVerified",input:!1},image:{type:"string",required:!1,fieldName:$.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:$.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,onUpdate:()=>new Date,required:!0,fieldName:$.user?.fields?.updatedAt||"updatedAt"},...W?.fields,...$.user?.additionalFields},order:1},...!$.secondaryStorage||$.session?.storeSessionInDatabase?z:{},account:{modelName:$.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:$.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:$.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:$.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:$.account?.fields?.userId||"userId",index:!0},accessToken:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:$.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,returned:!1,fieldName:$.account?.fields?.refreshTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:$.account?.fields?.scope||"scope"},password:{type:"string",required:!1,returned:!1,fieldName:$.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:$.account?.fields?.createdAt||"createdAt",defaultValue:()=>new Date},updatedAt:{type:"date",required:!0,fieldName:$.account?.fields?.updatedAt||"updatedAt",onUpdate:()=>new Date},...G?.fields,...$.account?.additionalFields},order:3},verification:{modelName:$.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:$.verification?.fields?.identifier||"identifier",index:!0},value:{type:"string",required:!0,fieldName:$.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:$.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!0,defaultValue:()=>new Date,fieldName:$.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,defaultValue:()=>new Date,onUpdate:()=>new Date,fieldName:$.verification?.fields?.updatedAt||"updatedAt"},...Q?.fields,...$.verification?.additionalFields},order:4},...H,...Y?X:{}}};var Nj=()=>{};var GJ=({usePlural:$,schema:J})=>{return(X)=>{if($&&X.charAt(X.length-1)==="s"){let Z=X.slice(0,-1),G=J[Z]?Z:void 0;if(!G)G=Object.entries(J).find(([Q,H])=>H.modelName===Z)?.[0];if(G)return G}let W=J[X]?X:void 0;if(!W)W=Object.entries(J).find(([Z,G])=>G.modelName===X)?.[0];if(!W)throw new q$(`Model "${X}" not found in schema`);return W}};var p9=C(()=>{$0()});var uZ=({schema:$,usePlural:J})=>{let Y=GJ({schema:$,usePlural:J});return({field:W,model:Z})=>{if(W==="id"||W==="_id")return"id";let G=Y(Z),Q=$[G]?.fields[W];if(!Q){let H=Object.entries($[G].fields).find(([z,K])=>K.fieldName===W);if(H)Q=H[1],W=H[0]}if(!Q)throw new q$(`Field ${W} not found in model ${G}`);return W}};var $K=C(()=>{$0();p9()});var JK=({usePlural:$,schema:J,disableIdGeneration:Y,options:X,customIdGenerator:W,supportsUUIDs:Z})=>{let G=GJ({usePlural:$,schema:J});return({customModelName:H,forceAllowId:z})=>{let K=X.advanced?.database?.useNumberId||X.advanced?.database?.generateId==="serial",w=X.advanced?.database?.generateId==="uuid",F=(()=>{if(Y)return!1;else if(K&&!z)return!1;else if(w)return!Z;else return!0})(),U=G(H??"id");return{type:K?"number":"string",required:F?!0:!1,...F?{defaultValue(){if(Y)return;let V=X.advanced?.database?.generateId;if(V===!1||K)return;if(typeof V==="function")return V({model:U});if(W)return W({model:U});if(V==="uuid")return crypto.randomUUID();return T6()}}:{},transform:{input:(V)=>{if(!V)return;if(K){let N=Number(V);if(isNaN(N))return;return N}if(w){if(F&&!z)return V;if(Y)return;if(Z)return;if(z&&typeof V==="string")if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(V))return V;else{let N=Error().stack?.split(`
`).filter((P,B)=>B!==1).join(`
`).replace("Error:","");C$.warn("[Adapter Factory] - Invalid UUID value for field `id` provided when `forceAllowId` is true. Generating a new UUID.",N)}if(typeof V!=="string"&&!Z)return crypto.randomUUID();return}return V},output:(V)=>{if(!V)return;return String(V)}}}}};var zM=C(()=>{d8();n0();Yq();_0();p9()});var XE=({usePlural:$,schema:J,options:Y,customIdGenerator:X,disableIdGeneration:W})=>{let Z=GJ({usePlural:$,schema:J}),G=uZ({usePlural:$,schema:J}),Q=JK({usePlural:$,schema:J,options:Y,customIdGenerator:X,disableIdGeneration:W});return({model:z,field:K})=>{let w=Z(z),F=G({field:K,model:w}),U=J[w].fields;U.id=Q({customModelName:w});let V=U[F];if(!V)throw new q$(`Field ${K} not found in model ${z}`);return V}};var WE=C(()=>{$0();p9();$K();zM()});var YK=({schema:$,usePlural:J})=>{let Y=GJ({schema:$,usePlural:J}),X=uZ({schema:$,usePlural:J});function W({model:Z,field:G}){let Q=Y(Z),H=X({model:Q,field:G});return $[Q]?.fields[H]?.fieldName||H}return W};var ZE=C(()=>{p9();$K()});var XK=({usePlural:$,schema:J})=>{let Y=GJ({schema:J,usePlural:$});return(W)=>{let Z=Y(W);if(J&&J[Z]&&J[Z].modelName!==W)return $?`${J[Z].modelName}s`:J[Z].modelName;return $?`${W}s`:W}};var GE=C(()=>{p9()});function QE($,J,Y){if(Y==="update"){if($===void 0&&J.onUpdate!==void 0){if(typeof J.onUpdate==="function")return J.onUpdate();return J.onUpdate}return $}if(Y==="create"){if($===void 0||J.required===!0&&$===null){if(J.defaultValue!==void 0){if(typeof J.defaultValue==="function")return J.defaultValue();return J.defaultValue}}}return $}var HE=()=>{};function a4($){if(uz()<8)return`#${$}`;return`${R6.fg.magenta}#${$}${R6.reset}`}function s4($,J){return`${R6.bg.black}${R6.fg.yellow}[${$}/${J}]${R6.reset}`}function e4($){return`${R6.bright}${$}${R6.reset}`}function i6($){return`${R6.dim}(${$})${R6.reset}`}var KM,c8=-1,N2$=($)=>(J)=>J($),TW=({adapter:$,config:J})=>(Y)=>{let X=Math.random().toString(36).substring(2,15),W={...J,supportsBooleans:J.supportsBooleans??!0,supportsDates:J.supportsDates??!0,supportsJSON:J.supportsJSON??!1,adapterName:J.adapterName??J.adapterId,supportsNumericIds:J.supportsNumericIds??!0,supportsUUIDs:J.supportsUUIDs??!1,supportsArrays:J.supportsArrays??!1,transaction:J.transaction??!1,disableTransformInput:J.disableTransformInput??!1,disableTransformOutput:J.disableTransformOutput??!1,disableTransformJoin:J.disableTransformJoin??!1};if((Y.advanced?.database?.useNumberId===!0||Y.advanced?.database?.generateId==="serial")&&W.supportsNumericIds===!1)throw new q$(`[${W.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);let Z=A1(Y),G=(...O)=>{if(W.debugLogs===!0||typeof W.debugLogs==="object"){let b=PW({level:"info"});if(typeof W.debugLogs==="object"&&"isRunningAdapterTests"in W.debugLogs){if(W.debugLogs.isRunningAdapterTests)O.shift(),KM.push({instance:X,args:O});return}if(typeof W.debugLogs==="object"&&W.debugLogs.logCondition&&!W.debugLogs.logCondition?.())return;if(typeof O[0]==="object"&&"method"in O[0]){let D=O.shift().method;if(typeof W.debugLogs==="object"){if(D==="create"&&!W.debugLogs.create)return;else if(D==="update"&&!W.debugLogs.update)return;else if(D==="updateMany"&&!W.debugLogs.updateMany)return;else if(D==="findOne"&&!W.debugLogs.findOne)return;else if(D==="findMany"&&!W.debugLogs.findMany)return;else if(D==="delete"&&!W.debugLogs.delete)return;else if(D==="deleteMany"&&!W.debugLogs.deleteMany)return;else if(D==="count"&&!W.debugLogs.count)return}b.info(`[${W.adapterName}]`,...O)}else b.info(`[${W.adapterName}]`,...O)}},Q=PW(Y.logger),H=GJ({usePlural:W.usePlural,schema:Z}),z=uZ({usePlural:W.usePlural,schema:Z}),K=XK({usePlural:W.usePlural,schema:Z}),w=YK({schema:Z,usePlural:W.usePlural}),F=JK({schema:Z,options:Y,usePlural:W.usePlural,disableIdGeneration:W.disableIdGeneration,customIdGenerator:W.customIdGenerator,supportsUUIDs:W.supportsUUIDs}),U=XE({schema:Z,options:Y,usePlural:W.usePlural,disableIdGeneration:W.disableIdGeneration,customIdGenerator:W.customIdGenerator}),V=async(O,b,D,_)=>{let q={},S=Z[b].fields,j=W.mapKeysTransformInput??{},E=Y.advanced?.database?.useNumberId||Y.advanced?.database?.generateId==="serial";S.id=F({customModelName:b,forceAllowId:_&&"id"in O});for(let T in S){let R=O[T],v=S[T],h=j[T]||S[T].fieldName||T;if(R===void 0&&(v.defaultValue===void 0&&!v.transform?.input&&!(D==="update"&&v.onUpdate)||D==="update"&&!v.onUpdate))continue;if(v&&v.type==="date"&&!(R instanceof Date)&&typeof R==="string")try{R=new Date(R)}catch{Q.error("[Adapter Factory] Failed to convert string to date",{value:R,field:T})}let y=QE(R,v,D);if(v.transform?.input)y=await v.transform.input(y);if(v.references?.field==="id"&&E)if(Array.isArray(y))y=y.map((o)=>o!==null?Number(o):null);else y=y!==null?Number(y):null;else if(W.supportsJSON===!1&&typeof y==="object"&&v.type==="json")y=JSON.stringify(y);else if(W.supportsArrays===!1&&Array.isArray(y)&&(v.type==="string[]"||v.type==="number[]"))y=JSON.stringify(y);else if(W.supportsDates===!1&&y instanceof Date&&v.type==="date")y=y.toISOString();else if(W.supportsBooleans===!1&&typeof y==="boolean")y=y?1:0;if(W.customTransformInput)y=W.customTransformInput({data:y,action:D,field:h,fieldAttributes:v,model:K(b),schema:Z,options:Y});if(y!==void 0)q[h]=y}return q},N=async(O,b,D=[],_)=>{let q=async(E,T,R=[])=>{if(!E)return null;let v=W.mapKeysTransformOutput??{},h={},y=Z[H(T)].fields,o=Object.entries(v).find(([G$,Z$])=>Z$==="id")?.[0];y[o??"id"]={type:Y.advanced?.database?.useNumberId||Y.advanced?.database?.generateId==="serial"?"number":"string"};for(let G$ in y){if(R.length&&!R.includes(G$))continue;let Z$=y[G$];if(Z$){let _$=Z$.fieldName||G$,E$=E[Object.entries(v).find(([n$,J0])=>J0===_$)?.[0]||_$];if(Z$.transform?.output)E$=await Z$.transform.output(E$);let d$=v[G$]||G$;if(_$==="id"||Z$.references?.field==="id"){if(typeof E$<"u"&&E$!==null)E$=String(E$)}else if(W.supportsJSON===!1&&typeof E$==="string"&&Z$.type==="json")E$=o0(E$);else if(W.supportsArrays===!1&&typeof E$==="string"&&(Z$.type==="string[]"||Z$.type==="number[]"))E$=o0(E$);else if(W.supportsDates===!1&&typeof E$==="string"&&Z$.type==="date")E$=new Date(E$);else if(W.supportsBooleans===!1&&typeof E$==="number"&&Z$.type==="boolean")E$=E$===1;if(W.customTransformOutput)E$=W.customTransformOutput({data:E$,field:d$,fieldAttributes:Z$,select:R,model:K(T),schema:Z,options:Y});h[d$]=E$}}return h};if(!_||Object.keys(_).length===0)return await q(O,b,D);b=H(b);let S=await q(O,b,D),j=Object.entries(_).map(([E,T])=>({modelName:K(E),defaultModelName:H(E),joinConfig:T}));if(!O)return null;for(let{modelName:E,defaultModelName:T,joinConfig:R}of j){let v=await(async()=>{if(Y.experimental?.joins)return O[E];else return await L({baseModel:b,baseData:S,joinModel:E,specificJoinConfig:R})})();if(v===void 0||v===null)v=R.relation==="one-to-one"?null:[];if(R.relation==="one-to-many"&&!Array.isArray(v))v=[v];let h=[];if(Array.isArray(v))for(let y of v){let o=await q(y,E,[]);h.push(o)}else{let y=await q(v,E,[]);h.push(y)}S[T]=(R.relation==="one-to-one"?h[0]:h)??null}return S},P=({model:O,where:b,action:D})=>{if(!b)return;let _=W.mapKeysTransformInput??{};return b.map((q)=>{let{field:S,value:j,operator:E="eq",connector:T="AND"}=q;if(E==="in"){if(!Array.isArray(j))throw new q$("Value must be an array")}let R=j,v=H(O),h=z({field:S,model:O}),y=_[h]||w({field:h,model:v}),o=U({field:h,model:v}),G$=Y.advanced?.database?.useNumberId||Y.advanced?.database?.generateId==="serial";if(h==="id"||o.references?.field==="id"){if(G$)if(Array.isArray(j))R=j.map(Number);else R=Number(j)}if(o.type==="date"&&j instanceof Date&&!W.supportsDates)R=j.toISOString();if(o.type==="boolean"&&typeof j==="boolean"&&!W.supportsBooleans)R=j?1:0;if(o.type==="json"&&typeof j==="object"&&!W.supportsJSON)try{R=JSON.stringify(j)}catch(Z$){throw Error(`Failed to stringify JSON value for field ${y}`,{cause:Z$})}if(W.customTransformInput)R=W.customTransformInput({data:R,fieldAttributes:o,field:y,model:K(O),schema:Z,options:Y,action:D});return{operator:E,connector:T,field:y,value:R}})},B=(O,b,D)=>{if(!b)return;if(Object.keys(b).length===0)return;let _={};for(let[q,S]of Object.entries(b)){if(!S)continue;let j=H(q),E=H(O),T=Object.entries(Z[j].fields).filter(([E$,d$])=>d$.references&&H(d$.references.model)===E),R=!0;if(!T.length)T=Object.entries(Z[E].fields).filter(([E$,d$])=>d$.references&&H(d$.references.model)===j),R=!1;if(!T.length)throw new q$(`No foreign key found for model ${q} and base model ${O} while performing join operation.`);else if(T.length>1)throw new q$(`Multiple foreign keys found for model ${q} and base model ${O} while performing join operation. Only one foreign key is supported.`);let[v,h]=T[0];if(!h.references)throw new q$(`No references found for foreign key ${v} on model ${q} while performing join operation.`);let y,o,G$;if(R)G$=h.references.field,y=w({model:O,field:G$}),o=w({model:q,field:v});else G$=v,y=w({model:O,field:G$}),o=w({model:q,field:h.references.field});if(D&&!D.includes(G$))D.push(G$);let Z$=o==="id"?!0:h.unique??!1,_$=Y.advanced?.database?.defaultFindManyLimit??100;if(Z$)_$=1;else if(typeof S==="object"&&typeof S.limit==="number")_$=S.limit;_[K(q)]={on:{from:y,to:o},limit:_$,relation:Z$?"one-to-one":"one-to-many"}}return{join:_,select:D}},L=async({baseModel:O,baseData:b,joinModel:D,specificJoinConfig:_})=>{if(!b)return b;let q=K(D),S=_.on.to,j=b[z({field:_.on.from,model:O})];if(j===null||j===void 0)return _.relation==="one-to-one"?null:[];let E,T=P({model:q,where:[{field:S,value:j,operator:"eq",connector:"AND"}],action:"findOne"});try{if(_.relation==="one-to-one")E=await g.findOne({model:q,where:T});else{let R=_.limit??Y.advanced?.database?.defaultFindManyLimit??100;E=await g.findMany({model:q,where:T,limit:R})}}catch(R){throw Q.error(`Failed to query fallback join for model ${q}:`,{where:T,limit:_.limit}),console.error(R),R}return E},g=$({options:Y,schema:Z,debugLog:G,getFieldName:w,getModelName:K,getDefaultModelName:H,getDefaultFieldName:z,getFieldAttributes:U,transformInput:V,transformOutput:N,transformWhereClause:P}),k=null,I={transaction:async(O)=>{if(!k)if(!W.transaction)k=N2$(I);else Q.debug(`[${W.adapterName}] - Using provided transaction implementation.`),k=W.transaction;return k(O)},create:async({data:O,model:b,select:D,forceAllowId:_=!1})=>{c8++;let q=c8,S=K(b);if(b=H(b),"id"in O&&typeof O.id<"u"&&!_){Q.warn(`[${W.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you, unless you pass in the \`forceAllowId\` parameter. The id will be ignored.`);let R=Error().stack?.split(`
`).filter((v,h)=>h!==1).join(`
`).replace("Error:","Create method with `id` being called at:");console.log(R),O.id=void 0}G({method:"create"},`${a4(q)} ${s4(1,4)}`,`${e4("create")} ${i6("Unsafe Input")}:`,{model:S,data:O});let j=O;if(!W.disableTransformInput)j=await V(O,b,"create",_);G({method:"create"},`${a4(q)} ${s4(2,4)}`,`${e4("create")} ${i6("Parsed Input")}:`,{model:S,data:j});let E=await g.create({data:j,model:S});G({method:"create"},`${a4(q)} ${s4(3,4)}`,`${e4("create")} ${i6("DB Result")}:`,{model:S,res:E});let T=E;if(!W.disableTransformOutput)T=await N(E,b,D,void 0);return G({method:"create"},`${a4(q)} ${s4(4,4)}`,`${e4("create")} ${i6("Parsed Result")}:`,{model:S,data:T}),T},update:async({model:O,where:b,update:D})=>{c8++;let _=c8;O=H(O);let q=K(O),S=P({model:O,where:b,action:"update"});G({method:"update"},`${a4(_)} ${s4(1,4)}`,`${e4("update")} ${i6("Unsafe Input")}:`,{model:q,data:D});let j=D;if(!W.disableTransformInput)j=await V(D,O,"update");G({method:"update"},`${a4(_)} ${s4(2,4)}`,`${e4("update")} ${i6("Parsed Input")}:`,{model:q,data:j});let E=await g.update({model:q,where:S,update:j});G({method:"update"},`${a4(_)} ${s4(3,4)}`,`${e4("update")} ${i6("DB Result")}:`,{model:q,data:E});let T=E;if(!W.disableTransformOutput)T=await N(E,O,void 0,void 0);return G({method:"update"},`${a4(_)} ${s4(4,4)}`,`${e4("update")} ${i6("Parsed Result")}:`,{model:q,data:T}),T},updateMany:async({model:O,where:b,update:D})=>{c8++;let _=c8,q=K(O),S=P({model:O,where:b,action:"updateMany"});O=H(O),G({method:"updateMany"},`${a4(_)} ${s4(1,4)}`,`${e4("updateMany")} ${i6("Unsafe Input")}:`,{model:q,data:D});let j=D;if(!W.disableTransformInput)j=await V(D,O,"update");G({method:"updateMany"},`${a4(_)} ${s4(2,4)}`,`${e4("updateMany")} ${i6("Parsed Input")}:`,{model:q,data:j});let E=await g.updateMany({model:q,where:S,update:j});return G({method:"updateMany"},`${a4(_)} ${s4(3,4)}`,`${e4("updateMany")} ${i6("DB Result")}:`,{model:q,data:E}),G({method:"updateMany"},`${a4(_)} ${s4(4,4)}`,`${e4("updateMany")} ${i6("Parsed Result")}:`,{model:q,data:E}),E},findOne:async({model:O,where:b,select:D,join:_})=>{c8++;let q=c8,S=K(O),j=P({model:O,where:b,action:"findOne"});O=H(O);let E,T=!0;if(!W.disableTransformJoin){let h=B(O,_,D);if(h)E=h.join,D=h.select;if(!Y.experimental?.joins&&E&&Object.keys(E).length>0)T=!1}else E=_;G({method:"findOne"},`${a4(q)} ${s4(1,3)}`,`${e4("findOne")}:`,{model:S,where:j,select:D,join:E});let R=await g.findOne({model:S,where:j,select:D,join:T?E:void 0});G({method:"findOne"},`${a4(q)} ${s4(2,3)}`,`${e4("findOne")} ${i6("DB Result")}:`,{model:S,data:R});let v=R;if(!W.disableTransformOutput)v=await N(R,O,D,E);return G({method:"findOne"},`${a4(q)} ${s4(3,3)}`,`${e4("findOne")} ${i6("Parsed Result")}:`,{model:S,data:v}),v},findMany:async({model:O,where:b,limit:D,sortBy:_,offset:q,join:S})=>{c8++;let j=c8,E=D??Y.advanced?.database?.defaultFindManyLimit??100,T=K(O),R=P({model:O,where:b,action:"findMany"});O=H(O);let v,h=!0;if(!W.disableTransformJoin){let G$=B(O,S,void 0);if(G$)v=G$.join;if(!Y.experimental?.joins&&v&&Object.keys(v).length>0)h=!1}else v=S;G({method:"findMany"},`${a4(j)} ${s4(1,3)}`,`${e4("findMany")}:`,{model:T,where:R,limit:E,sortBy:_,offset:q,join:v});let y=await g.findMany({model:T,where:R,limit:E,sortBy:_,offset:q,join:h?v:void 0});G({method:"findMany"},`${a4(j)} ${s4(2,3)}`,`${e4("findMany")} ${i6("DB Result")}:`,{model:T,data:y});let o=y;if(!W.disableTransformOutput)o=await Promise.all(y.map(async(G$)=>{return await N(G$,O,void 0,v)}));return G({method:"findMany"},`${a4(j)} ${s4(3,3)}`,`${e4("findMany")} ${i6("Parsed Result")}:`,{model:T,data:o}),o},delete:async({model:O,where:b})=>{c8++;let D=c8,_=K(O),q=P({model:O,where:b,action:"delete"});O=H(O),G({method:"delete"},`${a4(D)} ${s4(1,2)}`,`${e4("delete")}:`,{model:_,where:q}),await g.delete({model:_,where:q}),G({method:"delete"},`${a4(D)} ${s4(2,2)}`,`${e4("delete")} ${i6("DB Result")}:`,{model:_})},deleteMany:async({model:O,where:b})=>{c8++;let D=c8,_=K(O),q=P({model:O,where:b,action:"deleteMany"});O=H(O),G({method:"deleteMany"},`${a4(D)} ${s4(1,2)}`,`${e4("deleteMany")} ${i6("DeleteMany")}:`,{model:_,where:q});let S=await g.deleteMany({model:_,where:q});return G({method:"deleteMany"},`${a4(D)} ${s4(2,2)}`,`${e4("deleteMany")} ${i6("DB Result")}:`,{model:_,data:S}),S},count:async({model:O,where:b})=>{c8++;let D=c8,_=K(O),q=P({model:O,where:b,action:"count"});O=H(O),G({method:"count"},`${a4(D)} ${s4(1,2)}`,`${e4("count")}:`,{model:_,where:q});let S=await g.count({model:_,where:q});return G({method:"count"},`${a4(D)} ${s4(2,2)}`,`${e4("count")}:`,{model:_,data:S}),S},createSchema:g.createSchema?async(O,b)=>{let D=A1(Y);if(Y.secondaryStorage&&!Y.session?.storeSessionInDatabase)delete D.session;return g.createSchema({file:b,tables:D})}:void 0,options:{adapterConfig:W,...g.options??{}},id:W.adapterId,...W.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){KM=KM.filter((O)=>O.instance!==X)},printDebugLogs(){let O="─".repeat(80),b=KM.filter((_)=>_.instance===X);if(b.length===0)return;let D=b.reverse().map((_)=>{return _.args[0]=`
${_.args[0]}`,[..._.args,`
`]}).reduce((_,q)=>{return[...q,..._]},[`
${O}`]);console.log(...D)}}}:{}};return I};var su=C(()=>{Nj();lD();d8();n0();Wj();$0();p9();$K();zM();WE();ZE();GE();HE();KM=[]});var WK=C(()=>{p9();$K();zM();WE();ZE();GE();HE();su()});var eu=($,J)=>{let Y=null,X=TW({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:J?.debugLogs||!1,supportsArrays:!0,customTransformInput(W){if((W.options.advanced?.database?.useNumberId||W.options.advanced?.database?.generateId==="serial")&&W.field==="id"&&W.action==="create")return $[W.model].length+1;return W.data},transaction:async(W)=>{let Z=structuredClone($);try{return await W(X(Y))}catch(G){throw Object.keys($).forEach((Q)=>{$[Q]=Z[Q]}),G}}},adapter:({getFieldName:W,options:Z,getModelName:G})=>{let Q=(z,K,w)=>{if(!K)return z;return z.sort((F,U)=>{let V=W({model:w,field:K.field}),N=F[V],P=U[V],B=0;if(N==null&&P==null)B=0;else if(N==null)B=-1;else if(P==null)B=1;else if(typeof N==="string"&&typeof P==="string")B=N.localeCompare(P);else if(N instanceof Date&&P instanceof Date)B=N.getTime()-P.getTime();else if(typeof N==="number"&&typeof P==="number")B=N-P;else if(typeof N==="boolean"&&typeof P==="boolean")B=N===P?0:N?1:-1;else B=String(N).localeCompare(String(P));return K.direction==="asc"?B:-B})};function H(z,K,w){let F=(P,B)=>{let L=$[B];if(!L)throw C$.error(`[MemoryAdapter] Model ${B} not found in the DB`,Object.keys($)),Error(`Model ${B} not found`);let g=(k,I)=>{let{field:O,value:b,operator:D}=I;switch(D){case"in":if(!Array.isArray(b))throw Error("Value must be an array");return b.includes(k[O]);case"not_in":if(!Array.isArray(b))throw Error("Value must be an array");return!b.includes(k[O]);case"contains":return k[O].includes(b);case"starts_with":return k[O].startsWith(b);case"ends_with":return k[O].endsWith(b);case"ne":return k[O]!==b;case"gt":return b!=null&&Boolean(k[O]>b);case"gte":return b!=null&&Boolean(k[O]>=b);case"lt":return b!=null&&Boolean(k[O]<b);case"lte":return b!=null&&Boolean(k[O]<=b);default:return k[O]===b}};return L.filter((k)=>{if(!P.length||P.length===0)return!0;let I=g(k,P[0]);for(let O of P){let b=g(k,O);if(O.connector==="OR")I=I||b;else I=I&&b}return I})};if(!w)return F(z,K);let U=F(z,K),V=new Map,N=new Map;for(let P of U){let B=String(P.id);if(!V.has(B)){let g={...P};for(let[k,I]of Object.entries(w)){let O=G(k);if(I.relation==="one-to-one")g[O]=null;else g[O]=[],N.set(`${B}-${k}`,new Set)}V.set(B,g)}let L=V.get(B);for(let[g,k]of Object.entries(w)){let I=G(g),O=$[I];if(!O)throw C$.error(`[MemoryAdapter] JoinOption model ${I} not found in the DB`,Object.keys($)),Error(`JoinOption model ${I} not found`);let b=O.filter((D)=>D[k.on.to]===P[k.on.from]);if(k.relation==="one-to-one")L[I]=b[0]||null;else{let D=N.get(`${B}-${g}`),_=k.limit??100,q=0;for(let S of b){if(q>=_)break;if(!D.has(S.id))L[I].push(S),D.add(S.id),q++}}}}return Array.from(V.values())}return{create:async({model:z,data:K})=>{if(Z.advanced?.database?.useNumberId||Z.advanced?.database?.generateId==="serial")K.id=$[G(z)].length+1;if(!$[z])$[z]=[];return $[z].push(K),K},findOne:async({model:z,where:K,join:w})=>{let F=H(K,z,w);if(w){let U=F;if(!U.length)return null;return U[0]}return F[0]||null},findMany:async({model:z,where:K,sortBy:w,limit:F,offset:U,join:V})=>{let N=H(K||[],z,V);if(V){let B=N;if(!B.length)return[];Q(B,w,z);let L=B;if(U!==void 0)L=L.slice(U);if(F!==void 0)L=L.slice(0,F);return L}let P=Q(N,w,z);if(U!==void 0)P=P.slice(U);if(F!==void 0)P=P.slice(0,F);return P||[]},count:async({model:z,where:K})=>{if(K)return H(K,z).length;return $[z].length},update:async({model:z,where:K,update:w})=>{let F=H(K,z);return F.forEach((U)=>{Object.assign(U,w)}),F[0]||null},delete:async({model:z,where:K})=>{let w=$[z],F=H(K,z);$[z]=w.filter((U)=>!F.includes(U))},deleteMany:async({model:z,where:K})=>{let w=$[z],F=H(K,z),U=0;return $[z]=w.filter((V)=>{if(F.includes(V))return U++,!1;return!F.includes(V)}),U},updateMany({model:z,where:K,update:w}){let F=H(K,z);return F.forEach((U)=>{Object.assign(U,w)}),F[0]||null}}}});return(W)=>{return Y=W,X(W)}};var $d=C(()=>{n0();WK()});var Jd={};k4(Jd,{memoryAdapter:()=>eu});var Yd=C(()=>{$d()});function W1($){return typeof $>"u"||$===void 0}function t0($){return typeof $==="string"}function fY($){return typeof $==="number"}function RW($){return typeof $==="boolean"}function l9($){return $===null}function Z2($){return $ instanceof Date}function n9($){return typeof $==="bigint"}function UM($){return typeof Buffer<"u"&&Buffer.isBuffer($)}function a0($){return typeof $==="function"}function N4($){return typeof $==="object"&&$!==null}function FM($){if(!N4($)||S2$($)!=="[object Object]")return!1;if(Object.getPrototypeOf($)===null)return!0;let J=$;while(Object.getPrototypeOf(J)!==null)J=Object.getPrototypeOf(J);return Object.getPrototypeOf($)===J}function Xd($){return $[$.length-1]}function M($){return Object.freeze($)}function ZK($){if(z8($))return $;else return[$]}function z8($){return Array.isArray($)}function Z1($){return $}function DM($,J){if(z8($)&&z8(J))return _2$($,J);else if(N4($)&&N4(J))return L2$($,J);return $===J}function _2$($,J){if($.length!==J.length)return!1;for(let Y=0;Y<$.length;++Y)if(!DM($[Y],J[Y]))return!1;return!0}function L2$($,J){if(UM($)&&UM(J))return q2$($,J);else if(Z2($)&&Z2(J))return B2$($,J);return O2$($,J)}function q2$($,J){return Buffer.compare($,J)===0}function B2$($,J){return $.getTime()===J.getTime()}function O2$($,J){let Y=Object.keys($),X=Object.keys(J);if(Y.length!==X.length)return!1;for(let W of Y)if(!DM($[W],J[W]))return!1;return!0}function S2$($){if($==null)return $===void 0?"[object Undefined]":"[object Null]";return P2$.call($)}var P2$;var r=C(()=>{P2$=Object.prototype.toString});var g0;var dZ=C(()=>{r();g0=M({is($){return $.kind==="AlterTableNode"},create($){return M({kind:"AlterTableNode",table:$})},cloneWithTableProps($,J){return M({...$,...J})},cloneWithColumnAlteration($,J){return M({...$,columnAlterations:$.columnAlterations?[...$.columnAlterations,J]:[J]})}})});var u$;var _4=C(()=>{r();u$=M({is($){return $.kind==="IdentifierNode"},create($){return M({kind:"IdentifierNode",name:$})}})});var gY;var MM=C(()=>{r();_4();gY=M({is($){return $.kind==="CreateIndexNode"},create($){return M({kind:"CreateIndexNode",name:u$.create($)})},cloneWith($,J){return M({...$,...J})},cloneWithColumns($,J){return M({...$,columns:[...$.columns||[],...J]})}})});var VM;var NM=C(()=>{r();_4();VM=M({is($){return $.kind==="CreateSchemaNode"},create($,J){return M({kind:"CreateSchemaNode",schema:u$.create($),...J})},cloneWith($,J){return M({...$,...J})}})});var Wd,p8;var G2=C(()=>{r();Wd=["preserve rows","delete rows","drop"],p8=M({is($){return $.kind==="CreateTableNode"},create($){return M({kind:"CreateTableNode",table:$,columns:M([])})},cloneWithColumn($,J){return M({...$,columns:M([...$.columns,J])})},cloneWithConstraint($,J){return M({...$,constraints:$.constraints?M([...$.constraints,J]):M([J])})},cloneWithFrontModifier($,J){return M({...$,frontModifiers:$.frontModifiers?M([...$.frontModifiers,J]):M([J])})},cloneWithEndModifier($,J){return M({...$,endModifiers:$.endModifiers?M([...$.endModifiers,J]):M([J])})},cloneWith($,J){return M({...$,...J})}})});var l8;var IW=C(()=>{r();_4();l8=M({is($){return $.kind==="SchemableIdentifierNode"},create($){return M({kind:"SchemableIdentifierNode",identifier:u$.create($)})},createWithSchema($,J){return M({kind:"SchemableIdentifierNode",schema:u$.create($),identifier:u$.create(J)})}})});var i9;var GK=C(()=>{r();IW();i9=M({is($){return $.kind==="DropIndexNode"},create($,J){return M({kind:"DropIndexNode",name:l8.create($),...J})},cloneWith($,J){return M({...$,...J})}})});var QK;var _M=C(()=>{r();_4();QK=M({is($){return $.kind==="DropSchemaNode"},create($,J){return M({kind:"DropSchemaNode",schema:u$.create($),...J})},cloneWith($,J){return M({...$,...J})}})});var HK;var LM=C(()=>{r();HK=M({is($){return $.kind==="DropTableNode"},create($,J){return M({kind:"DropTableNode",table:$,...J})},cloneWith($,J){return M({...$,...J})}})});var K8;var xY=C(()=>{r();K8=M({is($){return $.kind==="AliasNode"},create($,J){return M({kind:"AliasNode",node:$,alias:J})}})});var E1;var Q2=C(()=>{r();IW();E1=M({is($){return $.kind==="TableNode"},create($){return M({kind:"TableNode",table:l8.create($)})},createWithSchema($,J){return M({kind:"TableNode",table:l8.createWithSchema($,J)})}})});function j4($){return N4($)&&a0($.toOperationNode)}var C1=C(()=>{r()});function qM($){return N4($)&&"expressionType"in $&&j4($)}function Zd($){return N4($)&&"expression"in $&&t0($.alias)&&j4($)}var BM=C(()=>{C1();r()});var CX;var zE=C(()=>{r();CX=M({is($){return $.kind==="SelectModifierNode"},create($,J){return M({kind:"SelectModifierNode",modifier:$,of:J})},createWithExpression($){return M({kind:"SelectModifierNode",rawModifier:$})}})});var T1;var r9=C(()=>{r();T1=M({is($){return $.kind==="AndNode"},create($,J){return M({kind:"AndNode",left:$,right:J})}})});var yY;var cZ=C(()=>{r();yY=M({is($){return $.kind==="OrNode"},create($,J){return M({kind:"OrNode",left:$,right:J})}})});var OM;var KE=C(()=>{r();r9();cZ();OM=M({is($){return $.kind==="OnNode"},create($){return M({kind:"OnNode",on:$})},cloneWithOperation($,J,Y){return M({...$,on:J==="And"?T1.create($.on,Y):yY.create($.on,Y)})}})});var hY;var H2=C(()=>{r();KE();hY=M({is($){return $.kind==="JoinNode"},create($,J){return M({kind:"JoinNode",joinType:$,table:J,on:void 0})},createWithOn($,J,Y){return M({kind:"JoinNode",joinType:$,table:J,on:OM.create(Y)})},cloneWithOn($,J){return M({...$,on:$.on?OM.cloneWithOperation($.on,"And",J):OM.create(J)})}})});var kW;var zK=C(()=>{r();kW=M({is($){return $.kind==="BinaryOperationNode"},create($,J,Y){return M({kind:"BinaryOperationNode",leftOperand:$,operator:J,rightOperand:Y})}})});function wE($){return t0($)&&Gd.includes($)}var A2$,j2$,Gd,E2$,C2$,T2$,Qd,n8;var bW=C(()=>{r();A2$=["=","==","!=","<>",">",">=","<","<=","in","not in","is","is not","like","not like","match","ilike","not ilike","@>","<@","^@","&&","?","?&","?|","!<","!>","<=>","!~","~","~*","!~*","@@","@@@","!!","<->","regexp","is distinct from","is not distinct from"],j2$=["+","-","*","/","%","^","&","|","#","<<",">>"],Gd=["->","->>"],E2$=[...A2$,...j2$,"&&","||"],C2$=["exists","not exists"],T2$=["not","-",...C2$],Qd=[...E2$,...Gd,...T2$,"between","between symmetric"],n8=M({is($){return $.kind==="OperatorNode"},create($){return M({kind:"OperatorNode",operator:$})}})});var I0;var i8=C(()=>{r();_4();I0=M({is($){return $.kind==="ColumnNode"},create($){return M({kind:"ColumnNode",column:u$.create($)})}})});var z2;var KK=C(()=>{r();z2=M({is($){return $.kind==="SelectAllNode"},create(){return M({kind:"SelectAllNode"})}})});var K2;var PM=C(()=>{KK();r();K2=M({is($){return $.kind==="ReferenceNode"},create($,J){return M({kind:"ReferenceNode",table:J,column:$})},createSelectAll($){return M({kind:"ReferenceNode",table:$,column:z2.create()})}})});class UE{#$;get dynamicReference(){return this.#$}get refType(){return}constructor($){this.#$=$}toOperationNode(){return FE(this.#$)}}function SM($){return N4($)&&j4($)&&t0($.dynamicReference)}var wK=C(()=>{C1();S8();r()});var mY;var AM=C(()=>{r();mY=M({is($){return $.kind==="OrderByItemNode"},create($,J){return M({kind:"OrderByItemNode",orderBy:$,direction:J})},cloneWith($,J){return M({...$,...J})}})});var x0;var yJ=C(()=>{r();x0=M({is($){return $.kind==="RawNode"},create($,J){return M({kind:"RawNode",sqlFragments:M($),parameters:M(J)})},createWithSql($){return x0.create([$],[])},createWithChild($){return x0.create(["",""],[$])},createWithChildren($){return x0.create(Array($.length+1).fill(""),$)}})});var Hd;var DE=C(()=>{r();_4();Hd=M({is($){return $.kind==="CollateNode"},create($){return M({kind:"CollateNode",collation:u$.create($)})}})});class o9{#$;constructor($){this.#$=M($)}desc(){return new o9({node:mY.cloneWith(this.#$.node,{direction:x0.createWithSql("desc")})})}asc(){return new o9({node:mY.cloneWith(this.#$.node,{direction:x0.createWithSql("asc")})})}nullsLast(){return new o9({node:mY.cloneWith(this.#$.node,{nulls:"last"})})}nullsFirst(){return new o9({node:mY.cloneWith(this.#$.node,{nulls:"first"})})}collate($){return new o9({node:mY.cloneWith(this.#$.node,{collation:Hd.create($)})})}toOperationNode(){return this.#$.node}}var ME=C(()=>{DE();AM();yJ();r()});function uY($){if(zd.has($))return;zd.add($),console.log($)}var zd;var w2=C(()=>{zd=new Set});function NE($){return $==="asc"||$==="desc"}function HJ($){if($.length===2)return[VE($[0],$[1])];if($.length===1){let[J]=$;if(Array.isArray(J))return uY("orderBy(array) is deprecated, use multiple orderBy calls instead."),J.map((Y)=>VE(Y));return[VE(J)]}throw Error(`Invalid number of arguments at order by! expected 1-2, received ${$.length}`)}function VE($,J){let Y=R2$($);if(mY.is(Y)){if(J)throw Error("Cannot specify direction twice!");return Y}return Kd(Y,J)}function R2$($){if(vW($))return R1($);if(SM($))return $.toOperationNode();let[J,Y]=$.split(" ");if(Y)return uY("`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead."),Kd(QJ(J),Y);return QJ($)}function Kd($,J){if(typeof J==="string"){if(!NE(J))throw Error(`Invalid order by direction: ${J}`);return mY.create($,x0.createWithSql(J))}if(qM(J))return uY("`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead."),mY.create($,J.toOperationNode());let Y=mY.create($);if(!J)return Y;return J(new o9({node:Y})).toOperationNode()}var pZ=C(()=>{wK();BM();AM();yJ();ME();w2();dY();S8()});var U2;var jM=C(()=>{r();U2=M({is($){return $.kind==="JSONReferenceNode"},create($,J){return M({kind:"JSONReferenceNode",reference:$,traversal:J})},cloneWithTraversal($,J){return M({...$,traversal:J})}})});var EM;var CM=C(()=>{r();EM=M({is($){return $.kind==="JSONOperatorChainNode"},create($){return M({kind:"JSONOperatorChainNode",operator:$,values:M([])})},cloneWithValue($,J){return M({...$,values:M([...$.values,J])})}})});var t9;var UK=C(()=>{r();t9=M({is($){return $.kind==="JSONPathNode"},create($){return M({kind:"JSONPathNode",inOperator:$,pathLegs:M([])})},cloneWithLeg($,J){return M({...$,pathLegs:M([...$.pathLegs,J])})}})});function FE($){if(t0($))return QJ($);return $.toOperationNode()}function fW($){if(z8($))return $.map((J)=>A8(J));else return[A8($)]}function A8($){if(vW($))return R1($);return FE($)}function wd($,J){let Y=QJ($);if(wE(J))return U2.create(Y,EM.create(n8.create(J)));let X=J.slice(0,-1);if(wE(X))return U2.create(Y,t9.create(n8.create(X)));throw Error(`Invalid JSON operator: ${J}`)}function QJ($){if(!$.includes("."))return K2.create(I0.create($));let Y=$.split(".").map(LE);if(Y.length===3)return I2$(Y);if(Y.length===2)return k2$(Y);throw Error(`invalid column reference ${$}`)}function Ud($){if($.includes(" as ")){let[Y,X]=$.split(" as ").map(LE);return K8.create(QJ(Y),u$.create(X))}else return QJ($)}function _E($){return I0.create($)}function F2($){if($.includes(" ")){let[Y,X]=$.split(" ").map(LE);if(!NE(X))throw Error(`invalid order direction "${X}" next to "${Y}"`);return HJ([Y,X])[0]}else return _E($)}function I2$($){let[J,Y,X]=$;return K2.create(I0.create(X),E1.createWithSchema(J,Y))}function k2$($){let[J,Y]=$;return K2.create(I0.create(Y),E1.create(J))}function LE($){return $.trim()}var S8=C(()=>{xY();i8();PM();Q2();r();dY();_4();pZ();bW();jM();CM();UK()});var D2;var FK=C(()=>{r();D2=M({is($){return $.kind==="PrimitiveValueListNode"},create($){return M({kind:"PrimitiveValueListNode",values:M([...$])})}})});var cY;var a9=C(()=>{r();cY=M({is($){return $.kind==="ValueListNode"},create($){return M({kind:"ValueListNode",values:M($)})}})});var b6;var pY=C(()=>{r();b6=M({is($){return $.kind==="ValueNode"},create($){return M({kind:"ValueNode",value:$})},createImmediate($){return M({kind:"ValueNode",value:$,immediate:!0})}})});function Fd($){if(z8($))return b2$($);return F4($)}function F4($){if(vW($))return R1($);return b6.create($)}function TM($){return fY($)||RW($)||l9($)}function DK($){if(!TM($))throw Error(`unsafe immediate value ${JSON.stringify($)}`);return b6.createImmediate($)}function b2$($){if($.some(vW))return cY.create($.map((J)=>F4(J)));return D2.create($)}var TX=C(()=>{FK();a9();pY();r();dY()});var zJ;var M2=C(()=>{r();zJ=M({is($){return $.kind==="ParensNode"},create($){return M({kind:"ParensNode",node:$})}})});function L4($){if($.length===3)return RM($[0],$[1],$[2]);else if($.length===1)return F4($[0]);throw Error(`invalid arguments: ${JSON.stringify($)}`)}function RM($,J,Y){if(v2$(J)&&Md(Y))return kW.create(A8($),qE(J),b6.createImmediate(Y));return kW.create(A8($),qE(J),Fd(Y))}function w8($,J,Y){return kW.create(A8($),qE(J),A8(Y))}function BE($,J){return V2(Object.entries($).filter(([,Y])=>!W1(Y)).map(([Y,X])=>RM(Y,Md(X)?"is":"=",X)),J)}function V2($,J,Y=!0){let X=J==="and"?T1.create:yY.create;if($.length===0)return kW.create(b6.createImmediate(1),n8.create("="),b6.createImmediate(J==="and"?1:0));let W=Dd($[0]);for(let Z=1;Z<$.length;++Z)W=X(W,Dd($[Z]));if($.length>1&&Y)return zJ.create(W);return W}function v2$($){return $==="is"||$==="is not"}function Md($){return l9($)||RW($)}function qE($){if(t0($)&&Qd.includes($))return n8.create($);if(j4($))return $.toOperationNode();throw Error(`invalid operator ${JSON.stringify($)}`)}function Dd($){return j4($)?$.toOperationNode():$}var KJ=C(()=>{zK();r();C1();bW();S8();TX();pY();r9();M2();cZ()});var gW;var MK=C(()=>{r();gW=M({is($){return $.kind==="OrderByNode"},create($){return M({kind:"OrderByNode",items:M([...$])})},cloneWithItems($,J){return M({...$,items:M([...$.items,...J])})}})});var OE;var PE=C(()=>{r();OE=M({is($){return $.kind==="PartitionByNode"},create($){return M({kind:"PartitionByNode",items:M($)})},cloneWithItems($,J){return M({...$,items:M([...$.items,...J])})}})});var VK;var IM=C(()=>{r();MK();PE();VK=M({is($){return $.kind==="OverNode"},create(){return M({kind:"OverNode"})},cloneWithOrderByItems($,J){return M({...$,orderBy:$.orderBy?gW.cloneWithItems($.orderBy,J):gW.create(J)})},cloneWithPartitionByItems($,J){return M({...$,partitionBy:$.partitionBy?OE.cloneWithItems($.partitionBy,J):OE.create(J)})}})});var lZ;var NK=C(()=>{r();lZ=M({is($){return $.kind==="FromNode"},create($){return M({kind:"FromNode",froms:M($)})},cloneWithFroms($,J){return M({...$,froms:M([...$.froms,...J])})}})});var SE;var AE=C(()=>{r();SE=M({is($){return $.kind==="GroupByNode"},create($){return M({kind:"GroupByNode",items:M($)})},cloneWithItems($,J){return M({...$,items:M([...$.items,...J])})}})});var jE;var EE=C(()=>{r();r9();cZ();jE=M({is($){return $.kind==="HavingNode"},create($){return M({kind:"HavingNode",having:$})},cloneWithOperation($,J,Y){return M({...$,having:J==="And"?T1.create($.having,Y):yY.create($.having,Y)})}})});var U6;var nZ=C(()=>{r();U6=M({is($){return $.kind==="InsertQueryNode"},create($,J,Y){return M({kind:"InsertQueryNode",into:$,...J&&{with:J},replace:Y})},createWithoutInto(){return M({kind:"InsertQueryNode"})},cloneWith($,J){return M({...$,...J})}})});var kM;var bM=C(()=>{r();kM=M({is($){return $.kind==="ListNode"},create($){return M({kind:"ListNode",items:M($)})}})});var RX;var N2=C(()=>{r();NK();bM();RX=M({is($){return $.kind==="UpdateQueryNode"},create($,J){return M({kind:"UpdateQueryNode",table:$.length===1?$[0]:kM.create($),...J&&{with:J}})},createWithoutTable(){return M({kind:"UpdateQueryNode"})},cloneWithFromItems($,J){return M({...$,from:$.from?lZ.cloneWithFroms($.from,J):lZ.create(J)})},cloneWithUpdates($,J){return M({...$,updates:$.updates?M([...$.updates,...J]):J})},cloneWithLimit($,J){return M({...$,limit:J})}})});var _K;var vM=C(()=>{r();_K=M({is($){return $.kind==="UsingNode"},create($){return M({kind:"UsingNode",tables:M($)})},cloneWithTables($,J){return M({...$,tables:M([...$.tables,...J])})}})});var s9;var LK=C(()=>{r();NK();vM();hJ();s9=M({is($){return $.kind==="DeleteQueryNode"},create($,J){return M({kind:"DeleteQueryNode",from:lZ.create($),...J&&{with:J}})},cloneWithOrderByItems:($,J)=>B$.cloneWithOrderByItems($,J),cloneWithoutOrderBy:($)=>B$.cloneWithoutOrderBy($),cloneWithLimit($,J){return M({...$,limit:J})},cloneWithoutLimit($){return M({...$,limit:void 0})},cloneWithUsing($,J){return M({...$,using:$.using!==void 0?_K.cloneWithTables($.using,J):_K.create(J)})}})});var j8;var qK=C(()=>{r();r9();cZ();j8=M({is($){return $.kind==="WhereNode"},create($){return M({kind:"WhereNode",where:$})},cloneWithOperation($,J,Y){return M({...$,where:J==="And"?T1.create($.where,Y):yY.create($.where,Y)})}})});var CE;var TE=C(()=>{r();CE=M({is($){return $.kind==="ReturningNode"},create($){return M({kind:"ReturningNode",selections:M($)})},cloneWithSelections($,J){return M({...$,selections:$.selections?M([...$.selections,...J]):M(J)})}})});var Vd;var RE=C(()=>{r();Vd=M({is($){return $.kind==="ExplainNode"},create($,J){return M({kind:"ExplainNode",format:$,options:J})}})});var mJ;var iZ=C(()=>{r();mJ=M({is($){return $.kind==="WhenNode"},create($){return M({kind:"WhenNode",condition:$})},cloneWithResult($,J){return M({...$,result:J})}})});var wJ;var BK=C(()=>{r();iZ();wJ=M({is($){return $.kind==="MergeQueryNode"},create($,J){return M({kind:"MergeQueryNode",into:$,...J&&{with:J}})},cloneWithUsing($,J){return M({...$,using:J})},cloneWithWhen($,J){return M({...$,whens:$.whens?M([...$.whens,J]):M([J])})},cloneWithThen($,J){return M({...$,whens:$.whens?M([...$.whens.slice(0,-1),mJ.cloneWithResult($.whens[$.whens.length-1],J)]):void 0})}})});var IE;var kE=C(()=>{r();IE=M({is($){return $.kind==="OutputNode"},create($){return M({kind:"OutputNode",selections:M($)})},cloneWithSelections($,J){return M({...$,selections:$.selections?M([...$.selections,...J]):M(J)})}})});var B$;var hJ=C(()=>{nZ();e9();N2();LK();qK();r();TE();RE();BK();kE();MK();B$=M({is($){return i0.is($)||U6.is($)||RX.is($)||s9.is($)||wJ.is($)},cloneWithEndModifier($,J){return M({...$,endModifiers:$.endModifiers?M([...$.endModifiers,J]):M([J])})},cloneWithWhere($,J){return M({...$,where:$.where?j8.cloneWithOperation($.where,"And",J):j8.create(J)})},cloneWithJoin($,J){return M({...$,joins:$.joins?M([...$.joins,J]):M([J])})},cloneWithReturning($,J){return M({...$,returning:$.returning?CE.cloneWithSelections($.returning,J):CE.create(J)})},cloneWithoutReturning($){return M({...$,returning:void 0})},cloneWithoutWhere($){return M({...$,where:void 0})},cloneWithExplain($,J,Y){return M({...$,explain:Vd.create(J,Y?.toOperationNode())})},cloneWithTop($,J){return M({...$,top:J})},cloneWithOutput($,J){return M({...$,output:$.output?IE.cloneWithSelections($.output,J):IE.create(J)})},cloneWithOrderByItems($,J){return M({...$,orderBy:$.orderBy?gW.cloneWithItems($.orderBy,J):gW.create(J)})},cloneWithoutOrderBy($){return M({...$,orderBy:void 0})}})});var i0;var e9=C(()=>{r();NK();AE();EE();hJ();i0=M({is($){return $.kind==="SelectQueryNode"},create($){return M({kind:"SelectQueryNode",...$&&{with:$}})},createFrom($,J){return M({kind:"SelectQueryNode",from:lZ.create($),...J&&{with:J}})},cloneWithSelections($,J){return M({...$,selections:$.selections?M([...$.selections,...J]):M(J)})},cloneWithDistinctOn($,J){return M({...$,distinctOn:$.distinctOn?M([...$.distinctOn,...J]):M(J)})},cloneWithFrontModifier($,J){return M({...$,frontModifiers:$.frontModifiers?M([...$.frontModifiers,J]):M([J])})},cloneWithOrderByItems:($,J)=>B$.cloneWithOrderByItems($,J),cloneWithGroupByItems($,J){return M({...$,groupBy:$.groupBy?SE.cloneWithItems($.groupBy,J):SE.create(J)})},cloneWithLimit($,J){return M({...$,limit:J})},cloneWithOffset($,J){return M({...$,offset:J})},cloneWithFetch($,J){return M({...$,fetch:J})},cloneWithHaving($,J){return M({...$,having:$.having?jE.cloneWithOperation($.having,"And",J):jE.create(J)})},cloneWithSetOperations($,J){return M({...$,setOperations:$.setOperations?M([...$.setOperations,...J]):M([...J])})},cloneWithoutSelections($){return M({...$,selections:[]})},cloneWithoutLimit($){return M({...$,limit:void 0})},cloneWithoutOffset($){return M({...$,offset:void 0})},cloneWithoutOrderBy:($)=>B$.cloneWithoutOrderBy($),cloneWithoutGroupBy($){return M({...$,groupBy:void 0})}})});class _2{#$;constructor($){this.#$=M($)}on(...$){return new _2({...this.#$,joinNode:hY.cloneWithOn(this.#$.joinNode,L4($))})}onRef($,J,Y){return new _2({...this.#$,joinNode:hY.cloneWithOn(this.#$.joinNode,w8($,J,Y))})}onTrue(){return new _2({...this.#$,joinNode:hY.cloneWithOn(this.#$.joinNode,x0.createWithSql("true"))})}$call($){return $(this)}toOperationNode(){return this.#$.joinNode}}var bE=C(()=>{H2();yJ();KJ();r()});var Nd;var vE=C(()=>{r();Nd=M({is($){return $.kind==="PartitionByItemNode"},create($){return M({kind:"PartitionByItemNode",partitionBy:$})}})});function _d($){return fW($).map(Nd.create)}var Ld=C(()=>{vE();S8()});class L2{#$;constructor($){this.#$=M($)}orderBy(...$){return new L2({overNode:VK.cloneWithOrderByItems(this.#$.overNode,HJ($))})}clearOrderBy(){return new L2({overNode:B$.cloneWithoutOrderBy(this.#$.overNode)})}partitionBy($){return new L2({overNode:VK.cloneWithPartitionByItems(this.#$.overNode,_d($))})}$call($){return $(this)}toOperationNode(){return this.#$.overNode}}var qd=C(()=>{IM();hJ();pZ();Ld();r()});var q2;var fE=C(()=>{r();PM();KK();q2=M({is($){return $.kind==="SelectionNode"},create($){return M({kind:"SelectionNode",selection:$})},createSelectAll(){return M({kind:"SelectionNode",selection:z2.create()})},createSelectAllFromTable($){return M({kind:"SelectionNode",selection:K2.createSelectAll($)})}})});function r6($){if(a0($))return r6($(uJ()));else if(z8($))return $.map((J)=>Bd(J));else return[Bd($)]}function Bd($){if(t0($))return q2.create(Ud($));else if(SM($))return q2.create($.toOperationNode());else return q2.create(fM($))}function U8($){if(!$)return[q2.createSelectAll()];else if(Array.isArray($))return $.map(Od);else return[Od($)]}function Od($){if(t0($))return q2.createSelectAllFromTable(y0($));throw Error(`invalid value selectAll expression: ${JSON.stringify($)}`)}var $5=C(()=>{r();fE();S8();wK();dY();E8();J5()});var Pd;var gE=C(()=>{r();Pd=M({is($){return $.kind==="ValuesNode"},create($){return M({kind:"ValuesNode",values:M($)})}})});var Sd;var xE=C(()=>{r();Sd=M({is($){return $.kind==="DefaultInsertValueNode"},create(){return M({kind:"DefaultInsertValueNode"})}})});function gM($){let J=a0($)?$(uJ()):$,Y=z8(J)?J:M([J]);return f2$(Y)}function f2$($){let J=g2$($);return[M([...J.keys()].map(I0.create)),Pd.create($.map((Y)=>x2$(Y,J)))]}function g2$($){let J=new Map;for(let Y of $){let X=Object.keys(Y);for(let W of X)if(!J.has(W)&&Y[W]!==void 0)J.set(W,J.size)}return J}function x2$($,J){let Y=Object.keys($),X=Array.from({length:J.size}),W=!1,Z=Y.length;for(let Q of Y){let H=J.get(Q);if(W1(H)){Z--;continue}let z=$[Q];if(W1(z)||vW(z))W=!0;X[H]=z}if(Z<J.size||W){let Q=Sd.create();return cY.create(X.map((H)=>W1(H)?Q:F4(H)))}return D2.create(X)}var yE=C(()=>{i8();FK();a9();r();TX();gE();dY();xE();J5()});var hE;var mE=C(()=>{r();hE=M({is($){return $.kind==="ColumnUpdateNode"},create($,J){return M({kind:"ColumnUpdateNode",column:$,value:J})}})});function Ad(...$){if($.length===2)return[hE.create(A8($[0]),F4($[1]))];return OK($[0])}function OK($){let J=a0($)?$(uJ()):$;return Object.entries(J).filter(([Y,X])=>X!==void 0).map(([Y,X])=>{return hE.create(I0.create(Y),F4(X))})}var xM=C(()=>{i8();mE();J5();r();TX();S8()});var jd;var uE=C(()=>{r();jd=M({is($){return $.kind==="OnDuplicateKeyNode"},create($){return M({kind:"OnDuplicateKeyNode",updates:$})}})});class dE{insertId;numInsertedOrUpdatedRows;constructor($,J){this.insertId=$,this.numInsertedOrUpdatedRows=J}}function IX($){return Object.prototype.hasOwnProperty.call($,"prototype")}var lY;var rZ=C(()=>{lY=class lY extends Error{node;constructor($){super("no result");this.node=$}}});var G1;var yM=C(()=>{r();qK();G1=M({is($){return $.kind==="OnConflictNode"},create(){return M({kind:"OnConflictNode"})},cloneWith($,J){return M({...$,...J})},cloneWithIndexWhere($,J){return M({...$,indexWhere:$.indexWhere?j8.cloneWithOperation($.indexWhere,"And",J):j8.create(J)})},cloneWithIndexOrWhere($,J){return M({...$,indexWhere:$.indexWhere?j8.cloneWithOperation($.indexWhere,"Or",J):j8.create(J)})},cloneWithUpdateWhere($,J){return M({...$,updateWhere:$.updateWhere?j8.cloneWithOperation($.updateWhere,"And",J):j8.create(J)})},cloneWithUpdateOrWhere($,J){return M({...$,updateWhere:$.updateWhere?j8.cloneWithOperation($.updateWhere,"Or",J):j8.create(J)})},cloneWithoutIndexWhere($){return M({...$,indexWhere:void 0})},cloneWithoutUpdateWhere($){return M({...$,updateWhere:void 0})}})});class kX{#$;constructor($){this.#$=M($)}column($){let J=I0.create($);return new kX({...this.#$,onConflictNode:G1.cloneWith(this.#$.onConflictNode,{columns:this.#$.onConflictNode.columns?M([...this.#$.onConflictNode.columns,J]):M([J])})})}columns($){let J=$.map(I0.create);return new kX({...this.#$,onConflictNode:G1.cloneWith(this.#$.onConflictNode,{columns:this.#$.onConflictNode.columns?M([...this.#$.onConflictNode.columns,...J]):M(J)})})}constraint($){return new kX({...this.#$,onConflictNode:G1.cloneWith(this.#$.onConflictNode,{constraint:u$.create($)})})}expression($){return new kX({...this.#$,onConflictNode:G1.cloneWith(this.#$.onConflictNode,{indexExpression:$.toOperationNode()})})}where(...$){return new kX({...this.#$,onConflictNode:G1.cloneWithIndexWhere(this.#$.onConflictNode,L4($))})}whereRef($,J,Y){return new kX({...this.#$,onConflictNode:G1.cloneWithIndexWhere(this.#$.onConflictNode,w8($,J,Y))})}clearWhere(){return new kX({...this.#$,onConflictNode:G1.cloneWithoutIndexWhere(this.#$.onConflictNode)})}doNothing(){return new Ed({...this.#$,onConflictNode:G1.cloneWith(this.#$.onConflictNode,{doNothing:!0})})}doUpdateSet($){return new PK({...this.#$,onConflictNode:G1.cloneWith(this.#$.onConflictNode,{updates:OK($)})})}$call($){return $(this)}}class Ed{#$;constructor($){this.#$=M($)}toOperationNode(){return this.#$.onConflictNode}}class PK{#$;constructor($){this.#$=M($)}where(...$){return new PK({...this.#$,onConflictNode:G1.cloneWithUpdateWhere(this.#$.onConflictNode,L4($))})}whereRef($,J,Y){return new PK({...this.#$,onConflictNode:G1.cloneWithUpdateWhere(this.#$.onConflictNode,w8($,J,Y))})}clearWhere(){return new PK({...this.#$,onConflictNode:G1.cloneWithoutUpdateWhere(this.#$.onConflictNode)})}$call($){return $(this)}toOperationNode(){return this.#$.onConflictNode}}var cE=C(()=>{i8();_4();yM();KJ();xM();r()});var Cd;var pE=C(()=>{r();Cd=M({is($){return $.kind==="TopNode"},create($,J){return M({kind:"TopNode",expression:$,modifiers:J})}})});function nY($,J){if(!fY($)&&!n9($))throw Error(`Invalid top expression: ${$}`);if(!W1(J)&&!y2$(J))throw Error(`Invalid top modifiers: ${J}`);return Cd.create($,J)}function y2$($){return $==="percent"||$==="with ties"||$==="percent with ties"}var B2=C(()=>{pE();r()});var oZ;var lE=C(()=>{r();oZ=M({is($){return $.kind==="OrActionNode"},create($){return M({kind:"OrActionNode",action:$})}})});class D4{#$;constructor($){this.#$=M($)}values($){let[J,Y]=gM($);return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{columns:J,values:Y})})}columns($){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{columns:M($.map(I0.create))})})}expression($){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{values:R1($)})})}defaultValues(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{defaultValues:!0})})}modifyEnd($){return new D4({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}ignore(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{orAction:oZ.create("ignore")})})}orIgnore(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{orAction:oZ.create("ignore")})})}orAbort(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{orAction:oZ.create("abort")})})}orFail(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{orAction:oZ.create("fail")})})}orReplace(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{orAction:oZ.create("replace")})})}orRollback(){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{orAction:oZ.create("rollback")})})}top($,J){return new D4({...this.#$,queryNode:B$.cloneWithTop(this.#$.queryNode,nY($,J))})}onConflict($){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{onConflict:$(new kX({onConflictNode:G1.create()})).toOperationNode()})})}onDuplicateKeyUpdate($){return new D4({...this.#$,queryNode:U6.cloneWith(this.#$.queryNode,{onDuplicateKey:jd.create(OK($))})})}returning($){return new D4({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,r6($))})}returningAll(){return new D4({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,U8())})}output($){return new D4({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,r6($))})}outputAll($){return new D4({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,U8($))})}clearReturning(){return new D4({...this.#$,queryNode:B$.cloneWithoutReturning(this.#$.queryNode)})}$call($){return $(this)}$if($,J){if($)return J(this);return new D4({...this.#$})}$castTo(){return new D4(this.#$)}$narrowType(){return new D4(this.#$)}$assertType(){return new D4(this.#$)}withPlugin($){return new D4({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:Y}=this.#$.executor,X=$.query;if(X.returning&&Y.supportsReturning||X.output&&Y.supportsOutput)return J.rows;return[new dE(J.insertId,J.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=lY){let J=await this.executeTakeFirst();if(J===void 0)throw IX($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),Y=this.#$.executor.stream(J,$);for await(let X of Y)yield*X.rows}async explain($,J){return await new D4({...this.#$,queryNode:B$.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}var nE=C(()=>{$5();yE();nZ();hJ();xM();r();uE();rZ();dY();i8();cE();yM();B2();lE()});class iE{numDeletedRows;constructor($){this.numDeletedRows=$}}var O2;var SK=C(()=>{r();O2=M({is($){return $.kind==="LimitNode"},create($){return M({kind:"LimitNode",limit:$})}})});class n4{#$;constructor($){this.#$=M($)}where(...$){return new n4({...this.#$,queryNode:B$.cloneWithWhere(this.#$.queryNode,L4($))})}whereRef($,J,Y){return new n4({...this.#$,queryNode:B$.cloneWithWhere(this.#$.queryNode,w8($,J,Y))})}clearWhere(){return new n4({...this.#$,queryNode:B$.cloneWithoutWhere(this.#$.queryNode)})}top($,J){return new n4({...this.#$,queryNode:B$.cloneWithTop(this.#$.queryNode,nY($,J))})}using($){return new n4({...this.#$,queryNode:s9.cloneWithUsing(this.#$.queryNode,iY($))})}innerJoin(...$){return this.#J("InnerJoin",$)}leftJoin(...$){return this.#J("LeftJoin",$)}rightJoin(...$){return this.#J("RightJoin",$)}fullJoin(...$){return this.#J("FullJoin",$)}#J($,J){return new n4({...this.#$,queryNode:B$.cloneWithJoin(this.#$.queryNode,Y5($,J))})}returning($){return new n4({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,r6($))})}returningAll($){return new n4({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,U8($))})}output($){return new n4({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,r6($))})}outputAll($){return new n4({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,U8($))})}clearReturning(){return new n4({...this.#$,queryNode:B$.cloneWithoutReturning(this.#$.queryNode)})}clearLimit(){return new n4({...this.#$,queryNode:s9.cloneWithoutLimit(this.#$.queryNode)})}orderBy(...$){return new n4({...this.#$,queryNode:B$.cloneWithOrderByItems(this.#$.queryNode,HJ($))})}clearOrderBy(){return new n4({...this.#$,queryNode:B$.cloneWithoutOrderBy(this.#$.queryNode)})}limit($){return new n4({...this.#$,queryNode:s9.cloneWithLimit(this.#$.queryNode,O2.create(F4($)))})}modifyEnd($){return new n4({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}$call($){return $(this)}$if($,J){if($)return J(this);return new n4({...this.#$})}$castTo(){return new n4(this.#$)}$narrowType(){return new n4(this.#$)}$assertType(){return new n4(this.#$)}withPlugin($){return new n4({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:Y}=this.#$.executor,X=$.query;if(X.returning&&Y.supportsReturning||X.output&&Y.supportsOutput)return J.rows;return[new iE(J.numAffectedRows??BigInt(0))]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=lY){let J=await this.executeTakeFirst();if(J===void 0)throw IX($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),Y=this.#$.executor.stream(J,$);for await(let X of Y)yield*X.rows}async explain($,J){return await new n4({...this.#$,queryNode:B$.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}var rE=C(()=>{AK();E8();$5();hJ();r();rZ();LK();SK();pZ();KJ();TX();B2()});class oE{numUpdatedRows;numChangedRows;constructor($,J){this.numUpdatedRows=$,this.numChangedRows=J}}class E4{#$;constructor($){this.#$=M($)}where(...$){return new E4({...this.#$,queryNode:B$.cloneWithWhere(this.#$.queryNode,L4($))})}whereRef($,J,Y){return new E4({...this.#$,queryNode:B$.cloneWithWhere(this.#$.queryNode,w8($,J,Y))})}clearWhere(){return new E4({...this.#$,queryNode:B$.cloneWithoutWhere(this.#$.queryNode)})}top($,J){return new E4({...this.#$,queryNode:B$.cloneWithTop(this.#$.queryNode,nY($,J))})}from($){return new E4({...this.#$,queryNode:RX.cloneWithFromItems(this.#$.queryNode,iY($))})}innerJoin(...$){return this.#J("InnerJoin",$)}leftJoin(...$){return this.#J("LeftJoin",$)}rightJoin(...$){return this.#J("RightJoin",$)}fullJoin(...$){return this.#J("FullJoin",$)}#J($,J){return new E4({...this.#$,queryNode:B$.cloneWithJoin(this.#$.queryNode,Y5($,J))})}orderBy(...$){return new E4({...this.#$,queryNode:B$.cloneWithOrderByItems(this.#$.queryNode,HJ($))})}clearOrderBy(){return new E4({...this.#$,queryNode:B$.cloneWithoutOrderBy(this.#$.queryNode)})}limit($){return new E4({...this.#$,queryNode:RX.cloneWithLimit(this.#$.queryNode,O2.create(F4($)))})}set(...$){return new E4({...this.#$,queryNode:RX.cloneWithUpdates(this.#$.queryNode,Ad(...$))})}returning($){return new E4({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,r6($))})}returningAll($){return new E4({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,U8($))})}output($){return new E4({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,r6($))})}outputAll($){return new E4({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,U8($))})}modifyEnd($){return new E4({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}clearReturning(){return new E4({...this.#$,queryNode:B$.cloneWithoutReturning(this.#$.queryNode)})}$call($){return $(this)}$if($,J){if($)return J(this);return new E4({...this.#$})}$castTo(){return new E4(this.#$)}$narrowType(){return new E4(this.#$)}$assertType(){return new E4(this.#$)}withPlugin($){return new E4({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:Y}=this.#$.executor,X=$.query;if(X.returning&&Y.supportsReturning||X.output&&Y.supportsOutput)return J.rows;return[new oE(J.numAffectedRows??BigInt(0),J.numChangedRows)]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=lY){let J=await this.executeTakeFirst();if(J===void 0)throw IX($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),Y=this.#$.executor.stream(J,$);for await(let X of Y)yield*X.rows}async explain($,J){return await new E4({...this.#$,queryNode:B$.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}var hM=C(()=>{AK();E8();$5();hJ();N2();xM();r();rZ();KJ();TX();SK();B2();pZ()});var tE;var aE=C(()=>{r();i8();Q2();tE=M({is($){return $.kind==="CommonTableExpressionNameNode"},create($,J){return M({kind:"CommonTableExpressionNameNode",table:E1.create($),columns:J?M(J.map(I0.create)):void 0})}})});var P2;var mM=C(()=>{r();P2=M({is($){return $.kind==="CommonTableExpressionNode"},create($,J){return M({kind:"CommonTableExpressionNode",name:$,expression:J})},cloneWith($,J){return M({...$,...J})}})});class jK{#$;constructor($){this.#$=M($)}materialized(){return new jK({...this.#$,node:P2.cloneWith(this.#$.node,{materialized:!0})})}notMaterialized(){return new jK({...this.#$,node:P2.cloneWith(this.#$.node,{materialized:!1})})}toOperationNode(){return this.#$.node}}var Td=C(()=>{mM();r()});function sE($,J){let Y=J(kd()).toOperationNode();if(a0($))return $(h2$(Y)).toOperationNode();return P2.create(Rd($),Y)}function h2$($){return(J)=>{return new jK({node:P2.create(Rd(J),$)})}}function Rd($){if($.includes("(")){let J=$.split(/[\(\)]/),Y=J[0],X=J[1].split(",").map((W)=>W.trim());return tE.create(Y,X)}else return tE.create($)}var Id=C(()=>{aE();uM();r();Td();mM()});var EK;var eE=C(()=>{r();EK=M({is($){return $.kind==="WithNode"},create($,J){return M({kind:"WithNode",expressions:M([$]),...J})},cloneWithExpression($,J){return M({...$,expressions:M([...$.expressions,J])})}})});function dM($){let J="";for(let Y=0;Y<$;++Y)J+=m2$();return J}function m2$(){return bd[~~(Math.random()*bd.length)]}var bd;var $C=C(()=>{bd=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"]});function r$(){return new vd}class vd{#$;get queryId(){if(this.#$===void 0)this.#$=dM(8);return this.#$}}var dJ=C(()=>{$C()});function N$($){return $}class rY{nodeStack=[];#$=M({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),RenameConstraintNode:this.transformRenameConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),RefreshMaterializedViewNode:this.transformRefreshMaterializedView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this),OrActionNode:this.transformOrAction.bind(this),CollateNode:this.transformCollate.bind(this)});transformNode($,J){if(!$)return $;this.nodeStack.push($);let Y=this.transformNodeImpl($,J);return this.nodeStack.pop(),M(Y)}transformNodeImpl($,J){return this.#$[$.kind]($,J)}transformNodeList($,J){if(!$)return $;return M($.map((Y)=>this.transformNode(Y,J)))}transformSelectQuery($,J){return N$({kind:"SelectQueryNode",from:this.transformNode($.from,J),selections:this.transformNodeList($.selections,J),distinctOn:this.transformNodeList($.distinctOn,J),joins:this.transformNodeList($.joins,J),groupBy:this.transformNode($.groupBy,J),orderBy:this.transformNode($.orderBy,J),where:this.transformNode($.where,J),frontModifiers:this.transformNodeList($.frontModifiers,J),endModifiers:this.transformNodeList($.endModifiers,J),limit:this.transformNode($.limit,J),offset:this.transformNode($.offset,J),with:this.transformNode($.with,J),having:this.transformNode($.having,J),explain:this.transformNode($.explain,J),setOperations:this.transformNodeList($.setOperations,J),fetch:this.transformNode($.fetch,J),top:this.transformNode($.top,J)})}transformSelection($,J){return N$({kind:"SelectionNode",selection:this.transformNode($.selection,J)})}transformColumn($,J){return N$({kind:"ColumnNode",column:this.transformNode($.column,J)})}transformAlias($,J){return N$({kind:"AliasNode",node:this.transformNode($.node,J),alias:this.transformNode($.alias,J)})}transformTable($,J){return N$({kind:"TableNode",table:this.transformNode($.table,J)})}transformFrom($,J){return N$({kind:"FromNode",froms:this.transformNodeList($.froms,J)})}transformReference($,J){return N$({kind:"ReferenceNode",column:this.transformNode($.column,J),table:this.transformNode($.table,J)})}transformAnd($,J){return N$({kind:"AndNode",left:this.transformNode($.left,J),right:this.transformNode($.right,J)})}transformOr($,J){return N$({kind:"OrNode",left:this.transformNode($.left,J),right:this.transformNode($.right,J)})}transformValueList($,J){return N$({kind:"ValueListNode",values:this.transformNodeList($.values,J)})}transformParens($,J){return N$({kind:"ParensNode",node:this.transformNode($.node,J)})}transformJoin($,J){return N$({kind:"JoinNode",joinType:$.joinType,table:this.transformNode($.table,J),on:this.transformNode($.on,J)})}transformRaw($,J){return N$({kind:"RawNode",sqlFragments:M([...$.sqlFragments]),parameters:this.transformNodeList($.parameters,J)})}transformWhere($,J){return N$({kind:"WhereNode",where:this.transformNode($.where,J)})}transformInsertQuery($,J){return N$({kind:"InsertQueryNode",into:this.transformNode($.into,J),columns:this.transformNodeList($.columns,J),values:this.transformNode($.values,J),returning:this.transformNode($.returning,J),onConflict:this.transformNode($.onConflict,J),onDuplicateKey:this.transformNode($.onDuplicateKey,J),endModifiers:this.transformNodeList($.endModifiers,J),with:this.transformNode($.with,J),ignore:$.ignore,orAction:this.transformNode($.orAction,J),replace:$.replace,explain:this.transformNode($.explain,J),defaultValues:$.defaultValues,top:this.transformNode($.top,J),output:this.transformNode($.output,J)})}transformValues($,J){return N$({kind:"ValuesNode",values:this.transformNodeList($.values,J)})}transformDeleteQuery($,J){return N$({kind:"DeleteQueryNode",from:this.transformNode($.from,J),using:this.transformNode($.using,J),joins:this.transformNodeList($.joins,J),where:this.transformNode($.where,J),returning:this.transformNode($.returning,J),endModifiers:this.transformNodeList($.endModifiers,J),with:this.transformNode($.with,J),orderBy:this.transformNode($.orderBy,J),limit:this.transformNode($.limit,J),explain:this.transformNode($.explain,J),top:this.transformNode($.top,J),output:this.transformNode($.output,J)})}transformReturning($,J){return N$({kind:"ReturningNode",selections:this.transformNodeList($.selections,J)})}transformCreateTable($,J){return N$({kind:"CreateTableNode",table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J),constraints:this.transformNodeList($.constraints,J),temporary:$.temporary,ifNotExists:$.ifNotExists,onCommit:$.onCommit,frontModifiers:this.transformNodeList($.frontModifiers,J),endModifiers:this.transformNodeList($.endModifiers,J),selectQuery:this.transformNode($.selectQuery,J)})}transformColumnDefinition($,J){return N$({kind:"ColumnDefinitionNode",column:this.transformNode($.column,J),dataType:this.transformNode($.dataType,J),references:this.transformNode($.references,J),primaryKey:$.primaryKey,autoIncrement:$.autoIncrement,unique:$.unique,notNull:$.notNull,unsigned:$.unsigned,defaultTo:this.transformNode($.defaultTo,J),check:this.transformNode($.check,J),generated:this.transformNode($.generated,J),frontModifiers:this.transformNodeList($.frontModifiers,J),endModifiers:this.transformNodeList($.endModifiers,J),nullsNotDistinct:$.nullsNotDistinct,identity:$.identity,ifNotExists:$.ifNotExists})}transformAddColumn($,J){return N$({kind:"AddColumnNode",column:this.transformNode($.column,J)})}transformDropTable($,J){return N$({kind:"DropTableNode",table:this.transformNode($.table,J),ifExists:$.ifExists,cascade:$.cascade})}transformOrderBy($,J){return N$({kind:"OrderByNode",items:this.transformNodeList($.items,J)})}transformOrderByItem($,J){return N$({kind:"OrderByItemNode",orderBy:this.transformNode($.orderBy,J),direction:this.transformNode($.direction,J),collation:this.transformNode($.collation,J),nulls:$.nulls})}transformGroupBy($,J){return N$({kind:"GroupByNode",items:this.transformNodeList($.items,J)})}transformGroupByItem($,J){return N$({kind:"GroupByItemNode",groupBy:this.transformNode($.groupBy,J)})}transformUpdateQuery($,J){return N$({kind:"UpdateQueryNode",table:this.transformNode($.table,J),from:this.transformNode($.from,J),joins:this.transformNodeList($.joins,J),where:this.transformNode($.where,J),updates:this.transformNodeList($.updates,J),returning:this.transformNode($.returning,J),endModifiers:this.transformNodeList($.endModifiers,J),with:this.transformNode($.with,J),explain:this.transformNode($.explain,J),limit:this.transformNode($.limit,J),top:this.transformNode($.top,J),output:this.transformNode($.output,J),orderBy:this.transformNode($.orderBy,J)})}transformColumnUpdate($,J){return N$({kind:"ColumnUpdateNode",column:this.transformNode($.column,J),value:this.transformNode($.value,J)})}transformLimit($,J){return N$({kind:"LimitNode",limit:this.transformNode($.limit,J)})}transformOffset($,J){return N$({kind:"OffsetNode",offset:this.transformNode($.offset,J)})}transformOnConflict($,J){return N$({kind:"OnConflictNode",columns:this.transformNodeList($.columns,J),constraint:this.transformNode($.constraint,J),indexExpression:this.transformNode($.indexExpression,J),indexWhere:this.transformNode($.indexWhere,J),updates:this.transformNodeList($.updates,J),updateWhere:this.transformNode($.updateWhere,J),doNothing:$.doNothing})}transformOnDuplicateKey($,J){return N$({kind:"OnDuplicateKeyNode",updates:this.transformNodeList($.updates,J)})}transformCreateIndex($,J){return N$({kind:"CreateIndexNode",name:this.transformNode($.name,J),table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J),unique:$.unique,using:this.transformNode($.using,J),ifNotExists:$.ifNotExists,where:this.transformNode($.where,J),nullsNotDistinct:$.nullsNotDistinct})}transformList($,J){return N$({kind:"ListNode",items:this.transformNodeList($.items,J)})}transformDropIndex($,J){return N$({kind:"DropIndexNode",name:this.transformNode($.name,J),table:this.transformNode($.table,J),ifExists:$.ifExists,cascade:$.cascade})}transformPrimaryKeyConstraint($,J){return N$({kind:"PrimaryKeyConstraintNode",columns:this.transformNodeList($.columns,J),name:this.transformNode($.name,J),deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformUniqueConstraint($,J){return N$({kind:"UniqueConstraintNode",columns:this.transformNodeList($.columns,J),name:this.transformNode($.name,J),nullsNotDistinct:$.nullsNotDistinct,deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformForeignKeyConstraint($,J){return N$({kind:"ForeignKeyConstraintNode",columns:this.transformNodeList($.columns,J),references:this.transformNode($.references,J),name:this.transformNode($.name,J),onDelete:$.onDelete,onUpdate:$.onUpdate,deferrable:$.deferrable,initiallyDeferred:$.initiallyDeferred})}transformSetOperation($,J){return N$({kind:"SetOperationNode",operator:$.operator,expression:this.transformNode($.expression,J),all:$.all})}transformReferences($,J){return N$({kind:"ReferencesNode",table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J),onDelete:$.onDelete,onUpdate:$.onUpdate})}transformCheckConstraint($,J){return N$({kind:"CheckConstraintNode",expression:this.transformNode($.expression,J),name:this.transformNode($.name,J)})}transformWith($,J){return N$({kind:"WithNode",expressions:this.transformNodeList($.expressions,J),recursive:$.recursive})}transformCommonTableExpression($,J){return N$({kind:"CommonTableExpressionNode",name:this.transformNode($.name,J),materialized:$.materialized,expression:this.transformNode($.expression,J)})}transformCommonTableExpressionName($,J){return N$({kind:"CommonTableExpressionNameNode",table:this.transformNode($.table,J),columns:this.transformNodeList($.columns,J)})}transformHaving($,J){return N$({kind:"HavingNode",having:this.transformNode($.having,J)})}transformCreateSchema($,J){return N$({kind:"CreateSchemaNode",schema:this.transformNode($.schema,J),ifNotExists:$.ifNotExists})}transformDropSchema($,J){return N$({kind:"DropSchemaNode",schema:this.transformNode($.schema,J),ifExists:$.ifExists,cascade:$.cascade})}transformAlterTable($,J){return N$({kind:"AlterTableNode",table:this.transformNode($.table,J),renameTo:this.transformNode($.renameTo,J),setSchema:this.transformNode($.setSchema,J),columnAlterations:this.transformNodeList($.columnAlterations,J),addConstraint:this.transformNode($.addConstraint,J),dropConstraint:this.transformNode($.dropConstraint,J),renameConstraint:this.transformNode($.renameConstraint,J),addIndex:this.transformNode($.addIndex,J),dropIndex:this.transformNode($.dropIndex,J)})}transformDropColumn($,J){return N$({kind:"DropColumnNode",column:this.transformNode($.column,J)})}transformRenameColumn($,J){return N$({kind:"RenameColumnNode",column:this.transformNode($.column,J),renameTo:this.transformNode($.renameTo,J)})}transformAlterColumn($,J){return N$({kind:"AlterColumnNode",column:this.transformNode($.column,J),dataType:this.transformNode($.dataType,J),dataTypeExpression:this.transformNode($.dataTypeExpression,J),setDefault:this.transformNode($.setDefault,J),dropDefault:$.dropDefault,setNotNull:$.setNotNull,dropNotNull:$.dropNotNull})}transformModifyColumn($,J){return N$({kind:"ModifyColumnNode",column:this.transformNode($.column,J)})}transformAddConstraint($,J){return N$({kind:"AddConstraintNode",constraint:this.transformNode($.constraint,J)})}transformDropConstraint($,J){return N$({kind:"DropConstraintNode",constraintName:this.transformNode($.constraintName,J),ifExists:$.ifExists,modifier:$.modifier})}transformRenameConstraint($,J){return N$({kind:"RenameConstraintNode",oldName:this.transformNode($.oldName,J),newName:this.transformNode($.newName,J)})}transformCreateView($,J){return N$({kind:"CreateViewNode",name:this.transformNode($.name,J),temporary:$.temporary,orReplace:$.orReplace,ifNotExists:$.ifNotExists,materialized:$.materialized,columns:this.transformNodeList($.columns,J),as:this.transformNode($.as,J)})}transformRefreshMaterializedView($,J){return N$({kind:"RefreshMaterializedViewNode",name:this.transformNode($.name,J),concurrently:$.concurrently,withNoData:$.withNoData})}transformDropView($,J){return N$({kind:"DropViewNode",name:this.transformNode($.name,J),ifExists:$.ifExists,materialized:$.materialized,cascade:$.cascade})}transformGenerated($,J){return N$({kind:"GeneratedNode",byDefault:$.byDefault,always:$.always,identity:$.identity,stored:$.stored,expression:this.transformNode($.expression,J)})}transformDefaultValue($,J){return N$({kind:"DefaultValueNode",defaultValue:this.transformNode($.defaultValue,J)})}transformOn($,J){return N$({kind:"OnNode",on:this.transformNode($.on,J)})}transformSelectModifier($,J){return N$({kind:"SelectModifierNode",modifier:$.modifier,rawModifier:this.transformNode($.rawModifier,J),of:this.transformNodeList($.of,J)})}transformCreateType($,J){return N$({kind:"CreateTypeNode",name:this.transformNode($.name,J),enum:this.transformNode($.enum,J)})}transformDropType($,J){return N$({kind:"DropTypeNode",name:this.transformNode($.name,J),ifExists:$.ifExists})}transformExplain($,J){return N$({kind:"ExplainNode",format:$.format,options:this.transformNode($.options,J)})}transformSchemableIdentifier($,J){return N$({kind:"SchemableIdentifierNode",schema:this.transformNode($.schema,J),identifier:this.transformNode($.identifier,J)})}transformAggregateFunction($,J){return N$({kind:"AggregateFunctionNode",func:$.func,aggregated:this.transformNodeList($.aggregated,J),distinct:$.distinct,orderBy:this.transformNode($.orderBy,J),withinGroup:this.transformNode($.withinGroup,J),filter:this.transformNode($.filter,J),over:this.transformNode($.over,J)})}transformOver($,J){return N$({kind:"OverNode",orderBy:this.transformNode($.orderBy,J),partitionBy:this.transformNode($.partitionBy,J)})}transformPartitionBy($,J){return N$({kind:"PartitionByNode",items:this.transformNodeList($.items,J)})}transformPartitionByItem($,J){return N$({kind:"PartitionByItemNode",partitionBy:this.transformNode($.partitionBy,J)})}transformBinaryOperation($,J){return N$({kind:"BinaryOperationNode",leftOperand:this.transformNode($.leftOperand,J),operator:this.transformNode($.operator,J),rightOperand:this.transformNode($.rightOperand,J)})}transformUnaryOperation($,J){return N$({kind:"UnaryOperationNode",operator:this.transformNode($.operator,J),operand:this.transformNode($.operand,J)})}transformUsing($,J){return N$({kind:"UsingNode",tables:this.transformNodeList($.tables,J)})}transformFunction($,J){return N$({kind:"FunctionNode",func:$.func,arguments:this.transformNodeList($.arguments,J)})}transformCase($,J){return N$({kind:"CaseNode",value:this.transformNode($.value,J),when:this.transformNodeList($.when,J),else:this.transformNode($.else,J),isStatement:$.isStatement})}transformWhen($,J){return N$({kind:"WhenNode",condition:this.transformNode($.condition,J),result:this.transformNode($.result,J)})}transformJSONReference($,J){return N$({kind:"JSONReferenceNode",reference:this.transformNode($.reference,J),traversal:this.transformNode($.traversal,J)})}transformJSONPath($,J){return N$({kind:"JSONPathNode",inOperator:this.transformNode($.inOperator,J),pathLegs:this.transformNodeList($.pathLegs,J)})}transformJSONPathLeg($,J){return N$({kind:"JSONPathLegNode",type:$.type,value:$.value})}transformJSONOperatorChain($,J){return N$({kind:"JSONOperatorChainNode",operator:this.transformNode($.operator,J),values:this.transformNodeList($.values,J)})}transformTuple($,J){return N$({kind:"TupleNode",values:this.transformNodeList($.values,J)})}transformMergeQuery($,J){return N$({kind:"MergeQueryNode",into:this.transformNode($.into,J),using:this.transformNode($.using,J),whens:this.transformNodeList($.whens,J),with:this.transformNode($.with,J),top:this.transformNode($.top,J),endModifiers:this.transformNodeList($.endModifiers,J),output:this.transformNode($.output,J),returning:this.transformNode($.returning,J)})}transformMatched($,J){return N$({kind:"MatchedNode",not:$.not,bySource:$.bySource})}transformAddIndex($,J){return N$({kind:"AddIndexNode",name:this.transformNode($.name,J),columns:this.transformNodeList($.columns,J),unique:$.unique,using:this.transformNode($.using,J),ifNotExists:$.ifNotExists})}transformCast($,J){return N$({kind:"CastNode",expression:this.transformNode($.expression,J),dataType:this.transformNode($.dataType,J)})}transformFetch($,J){return N$({kind:"FetchNode",rowCount:this.transformNode($.rowCount,J),modifier:$.modifier})}transformTop($,J){return N$({kind:"TopNode",expression:$.expression,modifiers:$.modifiers})}transformOutput($,J){return N$({kind:"OutputNode",selections:this.transformNodeList($.selections,J)})}transformDataType($,J){return $}transformSelectAll($,J){return $}transformIdentifier($,J){return $}transformValue($,J){return $}transformPrimitiveValueList($,J){return $}transformOperator($,J){return $}transformDefaultInsertValue($,J){return $}transformOrAction($,J){return $}transformCollate($,J){return $}}var tZ=C(()=>{r()});var u2$,d2$,JC;var fd=C(()=>{xY();_4();H2();bM();tZ();IW();Q2();vM();r();u2$=M({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,RefreshMaterializedViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),d2$={json_agg:!0,to_json:!0};JC=class JC extends rY{#$;#J=new Set;#Y=new Set;constructor($){super();this.#$=$}transformNodeImpl($,J){if(!this.#W($))return super.transformNodeImpl($,J);let Y=this.#G($);for(let Z of Y)this.#Y.add(Z);let X=this.#Q($);for(let Z of X)this.#J.add(Z);let W=super.transformNodeImpl($,J);for(let Z of X)this.#J.delete(Z);for(let Z of Y)this.#Y.delete(Z);return W}transformSchemableIdentifier($,J){let Y=super.transformSchemableIdentifier($,J);if(Y.schema||!this.#J.has($.identifier.name))return Y;return{...Y,schema:u$.create(this.#$)}}transformReferences($,J){let Y=super.transformReferences($,J);if(Y.table.table.schema)return Y;return{...Y,table:E1.createWithSchema(this.#$,Y.table.table.identifier.name)}}transformAggregateFunction($,J){return{...super.transformAggregateFunction({...$,aggregated:[]},J),aggregated:this.#X($,J,"aggregated")}}transformFunction($,J){return{...super.transformFunction({...$,arguments:[]},J),arguments:this.#X($,J,"arguments")}}transformSelectModifier($,J){return{...super.transformSelectModifier({...$,of:void 0},J),of:$.of?.map((Y)=>E1.is(Y)&&!Y.table.schema?{...Y,table:this.transformIdentifier(Y.table.identifier,J)}:this.transformNode(Y,J))}}#X($,J,Y){return d2$[$.func]?$[Y].map((X)=>!E1.is(X)||X.table.schema?this.transformNode(X,J):{...X,table:this.transformIdentifier(X.table.identifier,J)}):this.transformNodeList($[Y],J)}#W($){return $.kind in u2$}#Q($){let J=new Set;if("name"in $&&$.name&&l8.is($.name))this.#H($.name,J);if("from"in $&&$.from)for(let Y of $.from.froms)this.#Z(Y,J);if("into"in $&&$.into)this.#Z($.into,J);if("table"in $&&$.table)this.#Z($.table,J);if("joins"in $&&$.joins)for(let Y of $.joins)this.#Z(Y.table,J);if("using"in $&&$.using)if(hY.is($.using))this.#Z($.using.table,J);else this.#Z($.using,J);return J}#G($){let J=new Set;if("with"in $&&$.with)this.#z($.with,J);return J}#Z($,J){if(E1.is($))return this.#H($.table,J);if(K8.is($)&&E1.is($.node))return this.#H($.node.table,J);if(kM.is($)){for(let Y of $.items)this.#Z(Y,J);return}if(_K.is($)){for(let Y of $.tables)this.#Z(Y,J);return}}#H($,J){let Y=$.identifier.name;if(!this.#J.has(Y)&&!this.#Y.has(Y))J.add(Y)}#z($,J){for(let Y of $.expressions){let X=Y.name.table.table.identifier.name;if(!this.#Y.has(X))J.add(X)}}}});class UJ{#$;constructor($){this.#$=new JC($)}transformQuery($){return this.#$.transformNode($.node,$.queryId)}async transformResult($){return $.result}}var aZ=C(()=>{fd()});var gd;var YC=C(()=>{r();gd=M({is($){return $.kind==="MatchedNode"},create($,J=!1){return M({kind:"MatchedNode",not:$,bySource:J})}})});function XC($,J,Y){return mJ.create(V2([gd.create(!$.isMatched,$.bySource),...J&&J.length>0?[J.length===3&&Y?w8(J[0],J[1],J[2]):L4(J)]:[]],"and",!1))}function S2($){if(t0($))return x0.create([$],[]);if(j4($))return $.toOperationNode();return $}var xd=C(()=>{YC();C1();yJ();iZ();r();KJ()});class X5{#$;#J;#Y;constructor(){this.#$=new Promise(($,J)=>{this.#Y=J,this.#J=$})}get promise(){return this.#$}resolve=($)=>{if(this.#J)this.#J($)};reject=($)=>{if(this.#Y)this.#Y($)}}async function cM($){let J=new X5,Y=new X5;return $.provideConnection(async(X)=>{return J.resolve(X),await Y.promise}).catch((X)=>J.reject(X)),M({connection:await J.promise,release:Y.resolve})}var WC=C(()=>{r()});class CK{#$;constructor($=c2$){this.#$=$}get plugins(){return this.#$}transformQuery($,J){for(let Y of this.#$){let X=Y.transformQuery({node:$,queryId:J});if(X.kind===$.kind)$=X;else throw Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${$.kind}`,`but it returned a ${X.kind}`].join(" "))}return $}async executeQuery($){return await this.provideConnection(async(J)=>{let Y=await J.executeQuery($);if("numUpdatedOrDeletedRows"in Y)uY("kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`.");return await this.#J(Y,$.queryId)})}async*stream($,J){let{connection:Y,release:X}=await cM(this);try{for await(let W of Y.streamQuery($,J))yield await this.#J(W,$.queryId)}finally{X()}}async#J($,J){for(let Y of this.#$)$=await Y.transformResult({result:$,queryId:J});return $}}var c2$;var ZC=C(()=>{r();WC();w2();c2$=M([])});var A2,W5;var j2=C(()=>{ZC();A2=class A2 extends CK{get adapter(){throw Error("this query cannot be compiled to SQL")}compileQuery(){throw Error("this query cannot be compiled to SQL")}provideConnection(){throw Error("this query cannot be executed")}withConnectionProvider(){throw Error("this query cannot have a connection provider")}withPlugin($){return new A2([...this.plugins,$])}withPlugins($){return new A2([...this.plugins,...$])}withPluginAtFront($){return new A2([$,...this.plugins])}withoutPlugins(){return new A2([])}};W5=new A2});class GC{numChangedRows;constructor($){this.numChangedRows=$}}class xW{#$;constructor($){this.#$=M($)}modifyEnd($){return new xW({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}top($,J){return new xW({...this.#$,queryNode:B$.cloneWithTop(this.#$.queryNode,nY($,J))})}using(...$){return new I1({...this.#$,queryNode:wJ.cloneWithUsing(this.#$.queryNode,Y5("Using",$))})}returning($){return new xW({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,r6($))})}returningAll($){return new xW({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,U8($))})}output($){return new xW({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,r6($))})}outputAll($){return new xW({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,U8($))})}}class I1{#$;constructor($){this.#$=M($)}modifyEnd($){return new I1({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,$.toOperationNode())})}top($,J){return new I1({...this.#$,queryNode:B$.cloneWithTop(this.#$.queryNode,nY($,J))})}whenMatched(){return this.#J([])}whenMatchedAnd(...$){return this.#J($)}whenMatchedAndRef($,J,Y){return this.#J([$,J,Y],!0)}#J($,J){return new QC({...this.#$,queryNode:wJ.cloneWithWhen(this.#$.queryNode,XC({isMatched:!0},$,J))})}whenNotMatched(){return this.#Y([])}whenNotMatchedAnd(...$){return this.#Y($)}whenNotMatchedAndRef($,J,Y){return this.#Y([$,J,Y],!0)}whenNotMatchedBySource(){return this.#Y([],!1,!0)}whenNotMatchedBySourceAnd(...$){return this.#Y($,!1,!0)}whenNotMatchedBySourceAndRef($,J,Y){return this.#Y([$,J,Y],!0,!0)}returning($){return new I1({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,r6($))})}returningAll($){return new I1({...this.#$,queryNode:B$.cloneWithReturning(this.#$.queryNode,U8($))})}output($){return new I1({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,r6($))})}outputAll($){return new I1({...this.#$,queryNode:B$.cloneWithOutput(this.#$.queryNode,U8($))})}#Y($,J=!1,Y=!1){let X={...this.#$,queryNode:wJ.cloneWithWhen(this.#$.queryNode,XC({isMatched:!1,bySource:Y},$,J))};return new(Y?QC:yd)(X)}$call($){return $(this)}$if($,J){if($)return J(this);return new I1({...this.#$})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile(),J=await this.#$.executor.executeQuery($),{adapter:Y}=this.#$.executor,X=$.query;if(X.returning&&Y.supportsReturning||X.output&&Y.supportsOutput)return J.rows;return[new GC(J.numAffectedRows)]}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=lY){let J=await this.executeTakeFirst();if(J===void 0)throw IX($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}}class QC{#$;constructor($){this.#$=M($)}thenDelete(){return new I1({...this.#$,queryNode:wJ.cloneWithThen(this.#$.queryNode,S2("delete"))})}thenDoNothing(){return new I1({...this.#$,queryNode:wJ.cloneWithThen(this.#$.queryNode,S2("do nothing"))})}thenUpdate($){return new I1({...this.#$,queryNode:wJ.cloneWithThen(this.#$.queryNode,S2($(new E4({queryId:this.#$.queryId,executor:W5,queryNode:RX.createWithoutTable()}))))})}thenUpdateSet(...$){return this.thenUpdate((J)=>J.set(...$))}}class yd{#$;constructor($){this.#$=M($)}thenDoNothing(){return new I1({...this.#$,queryNode:wJ.cloneWithThen(this.#$.queryNode,S2("do nothing"))})}thenInsertValues($){let[J,Y]=gM($);return new I1({...this.#$,queryNode:wJ.cloneWithThen(this.#$.queryNode,S2(U6.cloneWith(U6.createWithoutInto(),{columns:J,values:Y})))})}}var HC=C(()=>{nZ();BK();hJ();N2();yE();AK();xd();$5();B2();j2();r();rZ();hM()});class bX{#$;constructor($){this.#$=M($)}selectFrom($){return E2({queryId:r$(),executor:this.#$.executor,queryNode:i0.createFrom(iY($),this.#$.withNode)})}selectNoFrom($){return E2({queryId:r$(),executor:this.#$.executor,queryNode:i0.cloneWithSelections(i0.create(this.#$.withNode),r6($))})}insertInto($){return new D4({queryId:r$(),executor:this.#$.executor,queryNode:U6.create(y0($),this.#$.withNode)})}replaceInto($){return new D4({queryId:r$(),executor:this.#$.executor,queryNode:U6.create(y0($),this.#$.withNode,!0)})}deleteFrom($){return new n4({queryId:r$(),executor:this.#$.executor,queryNode:s9.create(iY($),this.#$.withNode)})}updateTable($){return new E4({queryId:r$(),executor:this.#$.executor,queryNode:RX.create(iY($),this.#$.withNode)})}mergeInto($){return new xW({queryId:r$(),executor:this.#$.executor,queryNode:wJ.create(zC($),this.#$.withNode)})}with($,J){let Y=sE($,J);return new bX({...this.#$,withNode:this.#$.withNode?EK.cloneWithExpression(this.#$.withNode,Y):EK.create(Y)})}withRecursive($,J){let Y=sE($,J);return new bX({...this.#$,withNode:this.#$.withNode?EK.cloneWithExpression(this.#$.withNode,Y):EK.create(Y,{recursive:!0})})}withPlugin($){return new bX({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new bX({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new bX({...this.#$,executor:this.#$.executor.withPluginAtFront(new UJ($))})}}var pM=C(()=>{TK();nE();rE();hM();LK();nZ();e9();N2();E8();Id();eE();dJ();aZ();r();$5();HC();BK()});function kd(){return new bX({executor:W5})}function hd($,J){return new _2({joinNode:hY.create($,sZ(J))})}function md(){return new L2({overNode:VK.create()})}var uM=C(()=>{H2();IM();e9();bE();qd();TK();pM();j2();dJ();E8()});function Y5($,J){if(J.length===3)return l2$($,J[0],J[1],J[2]);else if(J.length===2)return p2$($,J[0],J[1]);else if(J.length===1)return n2$($,J[0]);else throw Error("not implemented")}function p2$($,J,Y){return Y(hd($,J)).toOperationNode()}function l2$($,J,Y,X){return hY.createWithOn($,sZ(J),w8(Y,"=",X))}function n2$($,J){return hY.create($,sZ(J))}var AK=C(()=>{H2();KJ();uM();E8()});var ud;var KC=C(()=>{r();ud=M({is($){return $.kind==="OffsetNode"},create($){return M({kind:"OffsetNode",offset:$})}})});var dd;var wC=C(()=>{r();dd=M({is($){return $.kind==="GroupByItemNode"},create($){return M({kind:"GroupByItemNode",groupBy:$})}})});function cd($){return $=a0($)?$(uJ()):$,fW($).map(dd.create)}var pd=C(()=>{wC();J5();r();S8()});var lM;var nM=C(()=>{r();lM=M({is($){return $.kind==="SetOperationNode"},create($,J,Y){return M({kind:"SetOperationNode",operator:$,expression:J,all:Y})}})});function eZ($,J,Y){if(a0(J))J=J(iM());if(!z8(J))J=[J];return J.map((X)=>lM.create($,R1(X),Y))}var ld=C(()=>{J5();nM();r();dY()});class s0{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new tM(this,$)}or(...$){return new rM(yY.create(this.#$,L4($)))}and(...$){return new oM(T1.create(this.#$,L4($)))}$castTo(){return new s0(this.#$)}$notNull(){return new s0(this.#$)}toOperationNode(){return this.#$}}class tM{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}toOperationNode(){return K8.create(this.#$.toOperationNode(),j4(this.#J)?this.#J.toOperationNode():u$.create(this.#J))}}class rM{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new tM(this,$)}or(...$){return new rM(yY.create(this.#$,L4($)))}$castTo(){return new rM(this.#$)}toOperationNode(){return zJ.create(this.#$)}}class oM{#$;constructor($){this.#$=$}get expressionType(){return}as($){return new tM(this,$)}and(...$){return new oM(T1.create(this.#$,L4($)))}$castTo(){return new oM(this.#$)}toOperationNode(){return zJ.create(this.#$)}}var C2=C(()=>{xY();r9();_4();C1();cZ();M2();KJ()});var nd;var UC=C(()=>{r();pY();nd=M({is($){return $.kind==="FetchNode"},create($,J){return{kind:"FetchNode",rowCount:b6.create($),modifier:J}}})});function id($,J){if(!fY($)&&!n9($))throw Error(`Invalid fetch row count: ${$}`);if(!i2$(J))throw Error(`Invalid fetch modifier: ${J}`);return nd.create($,J)}function i2$($){return $==="only"||$==="with ties"}var rd=C(()=>{UC();r()});class Z0{#$;constructor($){this.#$=M($)}get expressionType(){return}get isSelectQueryBuilder(){return!0}where(...$){return new Z0({...this.#$,queryNode:B$.cloneWithWhere(this.#$.queryNode,L4($))})}whereRef($,J,Y){return new Z0({...this.#$,queryNode:B$.cloneWithWhere(this.#$.queryNode,w8($,J,Y))})}having(...$){return new Z0({...this.#$,queryNode:i0.cloneWithHaving(this.#$.queryNode,L4($))})}havingRef($,J,Y){return new Z0({...this.#$,queryNode:i0.cloneWithHaving(this.#$.queryNode,w8($,J,Y))})}select($){return new Z0({...this.#$,queryNode:i0.cloneWithSelections(this.#$.queryNode,r6($))})}distinctOn($){return new Z0({...this.#$,queryNode:i0.cloneWithDistinctOn(this.#$.queryNode,fW($))})}modifyFront($){return new Z0({...this.#$,queryNode:i0.cloneWithFrontModifier(this.#$.queryNode,CX.createWithExpression($.toOperationNode()))})}modifyEnd($){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.createWithExpression($.toOperationNode()))})}distinct(){return new Z0({...this.#$,queryNode:i0.cloneWithFrontModifier(this.#$.queryNode,CX.create("Distinct"))})}forUpdate($){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.create("ForUpdate",$?ZK($).map(y0):void 0))})}forShare($){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.create("ForShare",$?ZK($).map(y0):void 0))})}forKeyShare($){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.create("ForKeyShare",$?ZK($).map(y0):void 0))})}forNoKeyUpdate($){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.create("ForNoKeyUpdate",$?ZK($).map(y0):void 0))})}skipLocked(){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.create("SkipLocked"))})}noWait(){return new Z0({...this.#$,queryNode:B$.cloneWithEndModifier(this.#$.queryNode,CX.create("NoWait"))})}selectAll($){return new Z0({...this.#$,queryNode:i0.cloneWithSelections(this.#$.queryNode,U8($))})}innerJoin(...$){return this.#J("InnerJoin",$)}leftJoin(...$){return this.#J("LeftJoin",$)}rightJoin(...$){return this.#J("RightJoin",$)}fullJoin(...$){return this.#J("FullJoin",$)}crossJoin(...$){return this.#J("CrossJoin",$)}innerJoinLateral(...$){return this.#J("LateralInnerJoin",$)}leftJoinLateral(...$){return this.#J("LateralLeftJoin",$)}crossJoinLateral(...$){return this.#J("LateralCrossJoin",$)}crossApply(...$){return this.#J("CrossApply",$)}outerApply(...$){return this.#J("OuterApply",$)}#J($,J){return new Z0({...this.#$,queryNode:B$.cloneWithJoin(this.#$.queryNode,Y5($,J))})}orderBy(...$){return new Z0({...this.#$,queryNode:B$.cloneWithOrderByItems(this.#$.queryNode,HJ($))})}groupBy($){return new Z0({...this.#$,queryNode:i0.cloneWithGroupByItems(this.#$.queryNode,cd($))})}limit($){return new Z0({...this.#$,queryNode:i0.cloneWithLimit(this.#$.queryNode,O2.create(F4($)))})}offset($){return new Z0({...this.#$,queryNode:i0.cloneWithOffset(this.#$.queryNode,ud.create(F4($)))})}fetch($,J="only"){return new Z0({...this.#$,queryNode:i0.cloneWithFetch(this.#$.queryNode,id($,J))})}top($,J){return new Z0({...this.#$,queryNode:B$.cloneWithTop(this.#$.queryNode,nY($,J))})}union($){return new Z0({...this.#$,queryNode:i0.cloneWithSetOperations(this.#$.queryNode,eZ("union",$,!1))})}unionAll($){return new Z0({...this.#$,queryNode:i0.cloneWithSetOperations(this.#$.queryNode,eZ("union",$,!0))})}intersect($){return new Z0({...this.#$,queryNode:i0.cloneWithSetOperations(this.#$.queryNode,eZ("intersect",$,!1))})}intersectAll($){return new Z0({...this.#$,queryNode:i0.cloneWithSetOperations(this.#$.queryNode,eZ("intersect",$,!0))})}except($){return new Z0({...this.#$,queryNode:i0.cloneWithSetOperations(this.#$.queryNode,eZ("except",$,!1))})}exceptAll($){return new Z0({...this.#$,queryNode:i0.cloneWithSetOperations(this.#$.queryNode,eZ("except",$,!0))})}as($){return new od(this,$)}clearSelect(){return new Z0({...this.#$,queryNode:i0.cloneWithoutSelections(this.#$.queryNode)})}clearWhere(){return new Z0({...this.#$,queryNode:B$.cloneWithoutWhere(this.#$.queryNode)})}clearLimit(){return new Z0({...this.#$,queryNode:i0.cloneWithoutLimit(this.#$.queryNode)})}clearOffset(){return new Z0({...this.#$,queryNode:i0.cloneWithoutOffset(this.#$.queryNode)})}clearOrderBy(){return new Z0({...this.#$,queryNode:B$.cloneWithoutOrderBy(this.#$.queryNode)})}clearGroupBy(){return new Z0({...this.#$,queryNode:i0.cloneWithoutGroupBy(this.#$.queryNode)})}$call($){return $(this)}$if($,J){if($)return J(this);return new Z0({...this.#$})}$castTo(){return new Z0(this.#$)}$narrowType(){return new Z0(this.#$)}$assertType(){return new Z0(this.#$)}$asTuple(){return new s0(this.toOperationNode())}$asScalar(){return new s0(this.toOperationNode())}withPlugin($){return new Z0({...this.#$,executor:this.#$.executor.withPlugin($)})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.queryNode,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){let $=this.compile();return(await this.#$.executor.executeQuery($)).rows}async executeTakeFirst(){let[$]=await this.execute();return $}async executeTakeFirstOrThrow($=lY){let J=await this.executeTakeFirst();if(J===void 0)throw IX($)?new $(this.toOperationNode()):$(this.toOperationNode());return J}async*stream($=100){let J=this.compile(),Y=this.#$.executor.stream(J,$);for await(let X of Y)yield*X.rows}async explain($,J){return await new Z0({...this.#$,queryNode:B$.cloneWithExplain(this.#$.queryNode,$,J)}).execute()}}function E2($){return new Z0($)}class od{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return K8.create(this.#$.toOperationNode(),u$.create(this.#J))}}var TK=C(()=>{xY();zE();AK();E8();$5();S8();e9();hJ();pZ();SK();KC();r();pd();rZ();_4();ld();KJ();C2();TX();rd();B2()});var vX;var aM=C(()=>{r();qK();MK();vX=M({is($){return $.kind==="AggregateFunctionNode"},create($,J=[]){return M({kind:"AggregateFunctionNode",func:$,aggregated:J})},cloneWithDistinct($){return M({...$,distinct:!0})},cloneWithOrderBy($,J,Y=!1){let X=Y?"withinGroup":"orderBy";return M({...$,[X]:$[X]?gW.cloneWithItems($[X],J):gW.create(J)})},cloneWithFilter($,J){return M({...$,filter:$.filter?j8.cloneWithOperation($.filter,"And",J):j8.create(J)})},cloneWithOrFilter($,J){return M({...$,filter:$.filter?j8.cloneWithOperation($.filter,"Or",J):j8.create(J)})},cloneWithOver($,J){return M({...$,over:J})}})});var FC;var DC=C(()=>{r();FC=M({is($){return $.kind==="FunctionNode"},create($,J){return M({kind:"FunctionNode",func:$,arguments:J})}})});class k1{#$;constructor($){this.#$=M($)}get expressionType(){return}as($){return new td(this,$)}distinct(){return new k1({...this.#$,aggregateFunctionNode:vX.cloneWithDistinct(this.#$.aggregateFunctionNode)})}orderBy(...$){return new k1({...this.#$,aggregateFunctionNode:B$.cloneWithOrderByItems(this.#$.aggregateFunctionNode,HJ($))})}clearOrderBy(){return new k1({...this.#$,aggregateFunctionNode:B$.cloneWithoutOrderBy(this.#$.aggregateFunctionNode)})}withinGroupOrderBy(...$){return new k1({...this.#$,aggregateFunctionNode:vX.cloneWithOrderBy(this.#$.aggregateFunctionNode,HJ($),!0)})}filterWhere(...$){return new k1({...this.#$,aggregateFunctionNode:vX.cloneWithFilter(this.#$.aggregateFunctionNode,L4($))})}filterWhereRef($,J,Y){return new k1({...this.#$,aggregateFunctionNode:vX.cloneWithFilter(this.#$.aggregateFunctionNode,w8($,J,Y))})}over($){let J=md();return new k1({...this.#$,aggregateFunctionNode:vX.cloneWithOver(this.#$.aggregateFunctionNode,($?$(J):J).toOperationNode())})}$call($){return $(this)}$castTo(){return new k1(this.#$)}$notNull(){return new k1(this.#$)}toOperationNode(){return this.#$.aggregateFunctionNode}}class td{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}toOperationNode(){return K8.create(this.#$.toOperationNode(),u$.create(this.#J))}}var MC=C(()=>{r();aM();xY();_4();uM();KJ();pZ();hJ()});function sM(){let $=(Y,X)=>{return new s0(FC.create(Y,fW(X??[])))},J=(Y,X)=>{return new k1({aggregateFunctionNode:vX.create(Y,X?fW(X):void 0)})};return Object.assign($,{agg:J,avg(Y){return J("avg",[Y])},coalesce(...Y){return $("coalesce",Y)},count(Y){return J("count",[Y])},countAll(Y){return new k1({aggregateFunctionNode:vX.create("count",U8(Y))})},max(Y){return J("max",[Y])},min(Y){return J("min",[Y])},sum(Y){return J("sum",[Y])},any(Y){return $("any",[Y])},jsonAgg(Y){return new k1({aggregateFunctionNode:vX.create("json_agg",[t0(Y)?y0(Y):Y.toOperationNode()])})},toJson(Y){return new s0(FC.create("to_json",[t0(Y)?y0(Y):Y.toOperationNode()]))}})}var eM=C(()=>{C2();aM();DC();S8();$5();MC();r();E8()});var ad;var VC=C(()=>{r();ad=M({is($){return $.kind==="UnaryOperationNode"},create($,J){return M({kind:"UnaryOperationNode",operator:$,operand:J})}})});function sd($,J){return ad.create(n8.create($),A8(J))}var ed=C(()=>{bW();VC();S8()});var FJ;var RK=C(()=>{r();iZ();FJ=M({is($){return $.kind==="CaseNode"},create($){return M({kind:"CaseNode",value:$})},cloneWithWhen($,J){return M({...$,when:M($.when?[...$.when,J]:[J])})},cloneWithThen($,J){return M({...$,when:$.when?M([...$.when.slice(0,-1),mJ.cloneWithResult($.when[$.when.length-1],J)]):void 0})},cloneWith($,J){return M({...$,...J})}})});class IK{#$;constructor($){this.#$=M($)}when(...$){return new NC({...this.#$,node:FJ.cloneWithWhen(this.#$.node,mJ.create(L4($)))})}}class NC{#$;constructor($){this.#$=M($)}then($){return new $c({...this.#$,node:FJ.cloneWithThen(this.#$.node,TM($)?DK($):F4($))})}}class $c{#$;constructor($){this.#$=M($)}when(...$){return new NC({...this.#$,node:FJ.cloneWithWhen(this.#$.node,mJ.create(L4($)))})}else($){return new Jc({...this.#$,node:FJ.cloneWith(this.#$.node,{else:TM($)?DK($):F4($)})})}end(){return new s0(FJ.cloneWith(this.#$.node,{isStatement:!1}))}endCase(){return new s0(FJ.cloneWith(this.#$.node,{isStatement:!0}))}}class Jc{#$;constructor($){this.#$=M($)}end(){return new s0(FJ.cloneWith(this.#$.node,{isStatement:!1}))}endCase(){return new s0(FJ.cloneWith(this.#$.node,{isStatement:!0}))}}var $V=C(()=>{C2();r();RK();iZ();KJ();TX()});var _C;var LC=C(()=>{r();_C=M({is($){return $.kind==="JSONPathLegNode"},create($,J){return M({kind:"JSONPathLegNode",type:$,value:J})}})});class bK{#$;constructor($){this.#$=$}at($){return this.#J("ArrayLocation",$)}key($){return this.#J("Member",$)}#J($,J){if(U2.is(this.#$))return new kK(U2.cloneWithTraversal(this.#$,t9.is(this.#$.traversal)?t9.cloneWithLeg(this.#$.traversal,_C.create($,J)):EM.cloneWithValue(this.#$.traversal,b6.createImmediate(J))));return new kK(t9.cloneWithLeg(this.#$,_C.create($,J)))}}class Yc{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}toOperationNode(){return K8.create(this.#$.toOperationNode(),j4(this.#J)?this.#J.toOperationNode():u$.create(this.#J))}}var kK;var qC=C(()=>{xY();_4();CM();LC();UK();jM();C1();pY();kK=class kK extends bK{#$;constructor($){super($);this.#$=$}get expressionType(){return}as($){return new Yc(this,$)}$castTo(){return new kK(this.#$)}$notNull(){return new kK(this.#$)}toOperationNode(){return this.#$}}});var BC;var OC=C(()=>{r();BC=M({is($){return $.kind==="TupleNode"},create($){return M({kind:"TupleNode",values:M($)})}})});function Xc($){if(r2$.includes($))return!0;if(o2$.some((J)=>J.test($)))return!0;return!1}var r2$,o2$,PC;var JV=C(()=>{r();r2$=["varchar","char","text","integer","int2","int4","int8","smallint","bigint","boolean","real","double precision","float4","float8","decimal","numeric","binary","bytea","date","datetime","time","timetz","timestamp","timestamptz","serial","bigserial","uuid","json","jsonb","blob","varbinary","int4range","int4multirange","int8range","int8multirange","numrange","nummultirange","tsrange","tsmultirange","tstzrange","tstzmultirange","daterange","datemultirange"],o2$=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/],PC=M({is($){return $.kind==="DataTypeNode"},create($){return M({kind:"DataTypeNode",dataType:$})}})});function oY($){if(j4($))return $.toOperationNode();if(Xc($))return PC.create($);throw Error(`invalid column data type ${JSON.stringify($)}`)}var vK=C(()=>{JV();C1()});var SC;var YV=C(()=>{r();SC=M({is($){return $.kind==="CastNode"},create($,J){return M({kind:"CastNode",expression:$,dataType:J})}})});function iM($=W5){function J(W,Z,G){return new s0(RM(W,Z,G))}function Y(W,Z){return new s0(sd(W,Z))}let X=Object.assign(J,{fn:void 0,eb:void 0,selectFrom(W){return E2({queryId:r$(),executor:$,queryNode:i0.createFrom(iY(W))})},case(W){return new IK({node:FJ.create(W1(W)?void 0:A8(W))})},ref(W,Z){if(W1(Z))return new s0(QJ(W));return new bK(wd(W,Z))},jsonPath(){return new bK(t9.create())},table(W){return new s0(y0(W))},val(W){return new s0(F4(W))},refTuple(...W){return new s0(BC.create(W.map(A8)))},tuple(...W){return new s0(BC.create(W.map(F4)))},lit(W){return new s0(DK(W))},unary:Y,not(W){return Y("not",W)},exists(W){return Y("exists",W)},neg(W){return Y("-",W)},between(W,Z,G){return new s0(kW.create(A8(W),n8.create("between"),T1.create(F4(Z),F4(G))))},betweenSymmetric(W,Z,G){return new s0(kW.create(A8(W),n8.create("between symmetric"),T1.create(F4(Z),F4(G))))},and(W){if(z8(W))return new s0(V2(W,"and"));return new s0(BE(W,"and"))},or(W){if(z8(W))return new s0(V2(W,"or"));return new s0(BE(W,"or"))},parens(...W){let Z=L4(W);if(zJ.is(Z))return new s0(Z);else return new s0(zJ.create(Z))},cast(W,Z){return new s0(SC.create(A8(W),oY(Z)))},withSchema(W){return iM($.withPluginAtFront(new UJ(W)))}});return X.fn=sM(),X.eb=X,X}function uJ($){return iM()}var J5=C(()=>{TK();e9();E8();aZ();dJ();eM();S8();KJ();M2();C2();bW();ed();TX();j2();$V();RK();r();qC();zK();r9();OC();UK();vK();YV()});function R1($){if(j4($))return $.toOperationNode();else if(a0($))return $(uJ()).toOperationNode();throw Error(`invalid expression: ${JSON.stringify($)}`)}function fM($){if(j4($))return $.toOperationNode();else if(a0($))return $(uJ()).toOperationNode();throw Error(`invalid aliased expression: ${JSON.stringify($)}`)}function vW($){return qM($)||Zd($)||a0($)}var dY=C(()=>{BM();C1();J5();r()});class AC{#$;get table(){return this.#$}constructor($){this.#$=$}as($){return new Wc(this.#$,$)}}class Wc{#$;#J;get table(){return this.#$}get alias(){return this.#J}constructor($,J){this.#$=$,this.#J=J}toOperationNode(){return K8.create(y0(this.#$),u$.create(this.#J))}}function Zc($){return N4($)&&j4($)&&t0($.table)&&t0($.alias)}var XV=C(()=>{xY();_4();C1();E8();r()});function iY($){if(z8($))return $.map((J)=>sZ(J));else return[sZ($)]}function sZ($){if(t0($))return zC($);else if(Zc($))return $.toOperationNode();else return fM($)}function zC($){if($.includes(" as ")){let[Y,X]=$.split(" as ").map(Gc);return K8.create(y0(Y),u$.create(X))}else return y0($)}function y0($){if($.includes(".")){let[Y,X]=$.split(".").map(Gc);return E1.createWithSchema(Y,X)}else return E1.create($)}function Gc($){return $.trim()}var E8=C(()=>{r();xY();Q2();dY();_4();XV()});var jC;var EC=C(()=>{r();jC=M({is($){return $.kind==="AddColumnNode"},create($){return M({kind:"AddColumnNode",column:$})}})});var C4;var fK=C(()=>{r();i8();C4=M({is($){return $.kind==="ColumnDefinitionNode"},create($,J){return M({kind:"ColumnDefinitionNode",column:I0.create($),dataType:J})},cloneWithFrontModifier($,J){return M({...$,frontModifiers:$.frontModifiers?M([...$.frontModifiers,J]):[J]})},cloneWithEndModifier($,J){return M({...$,endModifiers:$.endModifiers?M([...$.endModifiers,J]):[J]})},cloneWith($,J){return M({...$,...J})}})});var CC;var TC=C(()=>{r();i8();CC=M({is($){return $.kind==="DropColumnNode"},create($){return M({kind:"DropColumnNode",column:I0.create($)})}})});var RC;var IC=C(()=>{r();i8();RC=M({is($){return $.kind==="RenameColumnNode"},create($,J){return M({kind:"RenameColumnNode",column:I0.create($),renameTo:I0.create(J)})}})});var T2;var gK=C(()=>{r();_4();T2=M({is($){return $.kind==="CheckConstraintNode"},create($,J){return M({kind:"CheckConstraintNode",expression:$,name:J?u$.create(J):void 0})}})});var Qc,R2;var xK=C(()=>{r();Qc=["no action","restrict","cascade","set null","set default"],R2=M({is($){return $.kind==="ReferencesNode"},create($,J){return M({kind:"ReferencesNode",table:$,columns:M([...J])})},cloneWithOnDelete($,J){return M({...$,onDelete:J})},cloneWithOnUpdate($,J){return M({...$,onUpdate:J})}})});function WV($){return j4($)?$.toOperationNode():b6.createImmediate($)}var kC=C(()=>{C1();pY()});var yK;var bC=C(()=>{r();yK=M({is($){return $.kind==="GeneratedNode"},create($){return M({kind:"GeneratedNode",...$})},createWithExpression($){return M({kind:"GeneratedNode",always:!0,expression:$})},cloneWith($,J){return M({...$,...J})}})});var Hc;var vC=C(()=>{r();Hc=M({is($){return $.kind==="DefaultValueNode"},create($){return M({kind:"DefaultValueNode",defaultValue:$})}})});function I2($){if(Qc.includes($))return $;throw Error(`invalid OnModifyForeignAction ${$}`)}var fC=C(()=>{xK()});class T4{#$;constructor($){this.#$=$}autoIncrement(){return new T4(C4.cloneWith(this.#$,{autoIncrement:!0}))}identity(){return new T4(C4.cloneWith(this.#$,{identity:!0}))}primaryKey(){return new T4(C4.cloneWith(this.#$,{primaryKey:!0}))}references($){let J=QJ($);if(!J.table||z2.is(J.column))throw Error(`invalid call references('${$}'). The reference must have format table.column or schema.table.column`);return new T4(C4.cloneWith(this.#$,{references:R2.create(J.table,[J.column])}))}onDelete($){if(!this.#$.references)throw Error("on delete constraint can only be added for foreign keys");return new T4(C4.cloneWith(this.#$,{references:R2.cloneWithOnDelete(this.#$.references,I2($))}))}onUpdate($){if(!this.#$.references)throw Error("on update constraint can only be added for foreign keys");return new T4(C4.cloneWith(this.#$,{references:R2.cloneWithOnUpdate(this.#$.references,I2($))}))}unique(){return new T4(C4.cloneWith(this.#$,{unique:!0}))}notNull(){return new T4(C4.cloneWith(this.#$,{notNull:!0}))}unsigned(){return new T4(C4.cloneWith(this.#$,{unsigned:!0}))}defaultTo($){return new T4(C4.cloneWith(this.#$,{defaultTo:Hc.create(WV($))}))}check($){return new T4(C4.cloneWith(this.#$,{check:T2.create($.toOperationNode())}))}generatedAlwaysAs($){return new T4(C4.cloneWith(this.#$,{generated:yK.createWithExpression($.toOperationNode())}))}generatedAlwaysAsIdentity(){return new T4(C4.cloneWith(this.#$,{generated:yK.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new T4(C4.cloneWith(this.#$,{generated:yK.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#$.generated)throw Error("stored() can only be called after generatedAlwaysAs");return new T4(C4.cloneWith(this.#$,{generated:yK.cloneWith(this.#$.generated,{stored:!0})}))}modifyFront($){return new T4(C4.cloneWithFrontModifier(this.#$,$.toOperationNode()))}nullsNotDistinct(){return new T4(C4.cloneWith(this.#$,{nullsNotDistinct:!0}))}ifNotExists(){return new T4(C4.cloneWith(this.#$,{ifNotExists:!0}))}modifyEnd($){return new T4(C4.cloneWithEndModifier(this.#$,$.toOperationNode()))}$call($){return $(this)}toOperationNode(){return this.#$}}var ZV=C(()=>{gK();xK();KK();S8();fK();kC();bC();vC();fC()});var gC;var xC=C(()=>{r();gC=M({is($){return $.kind==="ModifyColumnNode"},create($){return M({kind:"ModifyColumnNode",column:$})}})});var tY;var hK=C(()=>{r();_4();xK();tY=M({is($){return $.kind==="ForeignKeyConstraintNode"},create($,J,Y,X){return M({kind:"ForeignKeyConstraintNode",columns:$,references:R2.create(J,Y),name:X?u$.create(X):void 0})},cloneWith($,J){return M({...$,...J})}})});class aY{#$;constructor($){this.#$=$}onDelete($){return new aY(tY.cloneWith(this.#$,{onDelete:I2($)}))}onUpdate($){return new aY(tY.cloneWith(this.#$,{onUpdate:I2($)}))}deferrable(){return new aY(tY.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new aY(tY.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new aY(tY.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new aY(tY.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var GV=C(()=>{hK();fC()});var k2;var QV=C(()=>{r();k2=M({is($){return $.kind==="AddConstraintNode"},create($){return M({kind:"AddConstraintNode",constraint:$})}})});var fX;var mK=C(()=>{r();i8();_4();fX=M({is($){return $.kind==="UniqueConstraintNode"},create($,J,Y){return M({kind:"UniqueConstraintNode",columns:M($.map(I0.create)),name:J?u$.create(J):void 0,nullsNotDistinct:Y})},cloneWith($,J){return M({...$,...J})}})});var b2;var HV=C(()=>{r();_4();b2=M({is($){return $.kind==="DropConstraintNode"},create($){return M({kind:"DropConstraintNode",constraintName:u$.create($)})},cloneWith($,J){return M({...$,...J})}})});var v2;var yC=C(()=>{r();i8();v2=M({is($){return $.kind==="AlterColumnNode"},create($,J,Y){return M({kind:"AlterColumnNode",column:I0.create($),[J]:Y})}})});class zV{#$;constructor($){this.#$=$}setDataType($){return new f2(v2.create(this.#$,"dataType",oY($)))}setDefault($){return new f2(v2.create(this.#$,"setDefault",WV($)))}dropDefault(){return new f2(v2.create(this.#$,"dropDefault",!0))}setNotNull(){return new f2(v2.create(this.#$,"setNotNull",!0))}dropNotNull(){return new f2(v2.create(this.#$,"dropNotNull",!0))}$call($){return $(this)}}class f2{#$;constructor($){this.#$=$}toOperationNode(){return this.#$}}var hC=C(()=>{yC();vK();kC()});class Z5{#$;constructor($){this.#$=M($)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var zc=C(()=>{r()});class yW{#$;constructor($){this.#$=M($)}onDelete($){return new yW({...this.#$,constraintBuilder:this.#$.constraintBuilder.onDelete($)})}onUpdate($){return new yW({...this.#$,constraintBuilder:this.#$.constraintBuilder.onUpdate($)})}deferrable(){return new yW({...this.#$,constraintBuilder:this.#$.constraintBuilder.deferrable()})}notDeferrable(){return new yW({...this.#$,constraintBuilder:this.#$.constraintBuilder.notDeferrable()})}initiallyDeferred(){return new yW({...this.#$,constraintBuilder:this.#$.constraintBuilder.initiallyDeferred()})}initiallyImmediate(){return new yW({...this.#$,constraintBuilder:this.#$.constraintBuilder.initiallyImmediate()})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(g0.cloneWithTableProps(this.#$.node,{addConstraint:k2.create(this.#$.constraintBuilder.toOperationNode())}),this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var Kc=C(()=>{QV();dZ();r()});class $7{#$;constructor($){this.#$=M($)}ifExists(){return new $7({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{dropConstraint:b2.cloneWith(this.#$.node.dropConstraint,{ifExists:!0})})})}cascade(){return new $7({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{dropConstraint:b2.cloneWith(this.#$.node.dropConstraint,{modifier:"cascade"})})})}restrict(){return new $7({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{dropConstraint:b2.cloneWith(this.#$.node.dropConstraint,{modifier:"restrict"})})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var wc=C(()=>{dZ();HV();r()});var hW;var uK=C(()=>{r();i8();_4();hW=M({is($){return $.kind==="PrimaryKeyConstraintNode"},create($,J){return M({kind:"PrimaryKeyConstraintNode",columns:M($.map(I0.create)),name:J?u$.create(J):void 0})},cloneWith($,J){return M({...$,...J})}})});var G5;var KV=C(()=>{r();_4();G5=M({is($){return $.kind==="AddIndexNode"},create($){return M({kind:"AddIndexNode",name:u$.create($)})},cloneWith($,J){return M({...$,...J})},cloneWithColumns($,J){return M({...$,columns:[...$.columns||[],...J]})}})});class Q5{#$;constructor($){this.#$=M($)}unique(){return new Q5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addIndex:G5.cloneWith(this.#$.node.addIndex,{unique:!0})})})}column($){return new Q5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addIndex:G5.cloneWithColumns(this.#$.node.addIndex,[F2($)])})})}columns($){return new Q5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addIndex:G5.cloneWithColumns(this.#$.node.addIndex,$.map(F2))})})}expression($){return new Q5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addIndex:G5.cloneWithColumns(this.#$.node.addIndex,[$.toOperationNode()])})})}using($){return new Q5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addIndex:G5.cloneWith(this.#$.node.addIndex,{using:x0.createWithSql($)})})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var Uc=C(()=>{KV();dZ();yJ();S8();r()});class gX{#$;constructor($){this.#$=$}nullsNotDistinct(){return new gX(fX.cloneWith(this.#$,{nullsNotDistinct:!0}))}deferrable(){return new gX(fX.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new gX(fX.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new gX(fX.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new gX(fX.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var mC=C(()=>{mK()});class mW{#$;constructor($){this.#$=$}deferrable(){return new mW(hW.cloneWith(this.#$,{deferrable:!0}))}notDeferrable(){return new mW(hW.cloneWith(this.#$,{deferrable:!1}))}initiallyDeferred(){return new mW(hW.cloneWith(this.#$,{initiallyDeferred:!0}))}initiallyImmediate(){return new mW(hW.cloneWith(this.#$,{initiallyDeferred:!1}))}$call($){return $(this)}toOperationNode(){return this.#$}}var uC=C(()=>{uK()});class dK{#$;constructor($){this.#$=$}$call($){return $(this)}toOperationNode(){return this.#$}}var Fc;var dC=C(()=>{r();_4();Fc=M({is($){return $.kind==="RenameConstraintNode"},create($,J){return M({kind:"RenameConstraintNode",oldName:u$.create($),newName:u$.create(J)})}})});class cC{#$;constructor($){this.#$=M($)}renameTo($){return new Z5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{renameTo:y0($)})})}setSchema($){return new Z5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{setSchema:u$.create($)})})}alterColumn($,J){let Y=J(new zV($));return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,Y.toOperationNode())})}dropColumn($){return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,CC.create($))})}renameColumn($,J){return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,RC.create($,J))})}addColumn($,J,Y=Z1){let X=Y(new T4(C4.create($,oY(J))));return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,jC.create(X.toOperationNode()))})}modifyColumn($,J,Y=Z1){let X=Y(new T4(C4.create($,oY(J))));return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,gC.create(X.toOperationNode()))})}addUniqueConstraint($,J,Y=Z1){let X=Y(new gX(fX.create(J,$)));return new Z5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addConstraint:k2.create(X.toOperationNode())})})}addCheckConstraint($,J,Y=Z1){let X=Y(new dK(T2.create(J.toOperationNode(),$)));return new Z5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addConstraint:k2.create(X.toOperationNode())})})}addForeignKeyConstraint($,J,Y,X,W=Z1){let Z=W(new aY(tY.create(J.map(I0.create),y0(Y),X.map(I0.create),$)));return new yW({...this.#$,constraintBuilder:Z})}addPrimaryKeyConstraint($,J,Y=Z1){let X=Y(new mW(hW.create(J,$)));return new Z5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addConstraint:k2.create(X.toOperationNode())})})}dropConstraint($){return new $7({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{dropConstraint:b2.create($)})})}renameConstraint($,J){return new $7({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{renameConstraint:Fc.create($,J)})})}addIndex($){return new Q5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{addIndex:G5.create($)})})}dropIndex($){return new Z5({...this.#$,node:g0.cloneWithTableProps(this.#$.node,{dropIndex:i9.create($)})})}$call($){return $(this)}}class sY{#$;constructor($){this.#$=M($)}alterColumn($,J){let Y=J(new zV($));return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,Y.toOperationNode())})}dropColumn($){return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,CC.create($))})}renameColumn($,J){return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,RC.create($,J))})}addColumn($,J,Y=Z1){let X=Y(new T4(C4.create($,oY(J))));return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,jC.create(X.toOperationNode()))})}modifyColumn($,J,Y=Z1){let X=Y(new T4(C4.create($,oY(J))));return new sY({...this.#$,node:g0.cloneWithColumnAlteration(this.#$.node,gC.create(X.toOperationNode()))})}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var pC=C(()=>{EC();dZ();fK();TC();_4();IC();r();ZV();xC();vK();GV();QV();mK();gK();hK();i8();E8();HV();hC();zc();Kc();wc();uK();GK();KV();Uc();mC();uC();dC()});var cK;var lC=C(()=>{tZ();a9();pY();cK=class cK extends rY{transformPrimitiveValueList($){return cY.create($.values.map(b6.createImmediate))}transformValue($){return b6.createImmediate($.value)}}});class cJ{#$;constructor($){this.#$=M($)}ifNotExists(){return new cJ({...this.#$,node:gY.cloneWith(this.#$.node,{ifNotExists:!0})})}unique(){return new cJ({...this.#$,node:gY.cloneWith(this.#$.node,{unique:!0})})}nullsNotDistinct(){return new cJ({...this.#$,node:gY.cloneWith(this.#$.node,{nullsNotDistinct:!0})})}on($){return new cJ({...this.#$,node:gY.cloneWith(this.#$.node,{table:y0($)})})}column($){return new cJ({...this.#$,node:gY.cloneWithColumns(this.#$.node,[F2($)])})}columns($){return new cJ({...this.#$,node:gY.cloneWithColumns(this.#$.node,$.map(F2))})}expression($){return new cJ({...this.#$,node:gY.cloneWithColumns(this.#$.node,[$.toOperationNode()])})}using($){return new cJ({...this.#$,node:gY.cloneWith(this.#$.node,{using:x0.createWithSql($)})})}where(...$){let J=new cK;return new cJ({...this.#$,node:B$.cloneWithWhere(this.#$.node,J.transformNode(L4($),this.#$.queryId))})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var nC=C(()=>{MM();yJ();S8();E8();r();KJ();hJ();lC()});class wV{#$;constructor($){this.#$=M($)}ifNotExists(){return new wV({...this.#$,node:VM.cloneWith(this.#$.node,{ifNotExists:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var iC=C(()=>{NM();r()});function Dc($){if(Wd.includes($))return $;throw Error(`invalid OnCommitAction ${$}`)}var Mc=C(()=>{G2()});class b1{#$;constructor($){this.#$=M($)}temporary(){return new b1({...this.#$,node:p8.cloneWith(this.#$.node,{temporary:!0})})}onCommit($){return new b1({...this.#$,node:p8.cloneWith(this.#$.node,{onCommit:Dc($)})})}ifNotExists(){return new b1({...this.#$,node:p8.cloneWith(this.#$.node,{ifNotExists:!0})})}addColumn($,J,Y=Z1){let X=Y(new T4(C4.create($,oY(J))));return new b1({...this.#$,node:p8.cloneWithColumn(this.#$.node,X.toOperationNode())})}addPrimaryKeyConstraint($,J,Y=Z1){let X=Y(new mW(hW.create(J,$)));return new b1({...this.#$,node:p8.cloneWithConstraint(this.#$.node,X.toOperationNode())})}addUniqueConstraint($,J,Y=Z1){let X=Y(new gX(fX.create(J,$)));return new b1({...this.#$,node:p8.cloneWithConstraint(this.#$.node,X.toOperationNode())})}addCheckConstraint($,J,Y=Z1){let X=Y(new dK(T2.create(J.toOperationNode(),$)));return new b1({...this.#$,node:p8.cloneWithConstraint(this.#$.node,X.toOperationNode())})}addForeignKeyConstraint($,J,Y,X,W=Z1){let Z=W(new aY(tY.create(J.map(I0.create),y0(Y),X.map(I0.create),$)));return new b1({...this.#$,node:p8.cloneWithConstraint(this.#$.node,Z.toOperationNode())})}modifyFront($){return new b1({...this.#$,node:p8.cloneWithFrontModifier(this.#$.node,$.toOperationNode())})}modifyEnd($){return new b1({...this.#$,node:p8.cloneWithEndModifier(this.#$.node,$.toOperationNode())})}as($){return new b1({...this.#$,node:p8.cloneWith(this.#$.node,{selectQuery:R1($)})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var rC=C(()=>{fK();G2();ZV();r();hK();i8();GV();vK();uK();mK();gK();E8();Mc();mC();dY();uC()});class g2{#$;constructor($){this.#$=M($)}on($){return new g2({...this.#$,node:i9.cloneWith(this.#$.node,{table:y0($)})})}ifExists(){return new g2({...this.#$,node:i9.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new g2({...this.#$,node:i9.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var oC=C(()=>{GK();E8();r()});class pK{#$;constructor($){this.#$=M($)}ifExists(){return new pK({...this.#$,node:QK.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new pK({...this.#$,node:QK.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var tC=C(()=>{_M();r()});class lK{#$;constructor($){this.#$=M($)}ifExists(){return new lK({...this.#$,node:HK.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new lK({...this.#$,node:HK.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var aC=C(()=>{LM();r()});var eY;var nK=C(()=>{r();IW();eY=M({is($){return $.kind==="CreateViewNode"},create($){return M({kind:"CreateViewNode",name:l8.create($)})},cloneWith($,J){return M({...$,...J})}})});class sC{#$=new cK;transformQuery($){return this.#$.transformNode($.node,$.queryId)}transformResult($){return Promise.resolve($.result)}}var Vc=C(()=>{lC()});class uW{#$;constructor($){this.#$=M($)}temporary(){return new uW({...this.#$,node:eY.cloneWith(this.#$.node,{temporary:!0})})}materialized(){return new uW({...this.#$,node:eY.cloneWith(this.#$.node,{materialized:!0})})}ifNotExists(){return new uW({...this.#$,node:eY.cloneWith(this.#$.node,{ifNotExists:!0})})}orReplace(){return new uW({...this.#$,node:eY.cloneWith(this.#$.node,{orReplace:!0})})}columns($){return new uW({...this.#$,node:eY.cloneWith(this.#$.node,{columns:$.map(_E)})})}as($){let J=$.withPlugin(new sC).toOperationNode();return new uW({...this.#$,node:eY.cloneWith(this.#$.node,{as:J})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var eC=C(()=>{r();nK();S8();Vc()});var x2;var UV=C(()=>{r();IW();x2=M({is($){return $.kind==="DropViewNode"},create($){return M({kind:"DropViewNode",name:l8.create($)})},cloneWith($,J){return M({...$,...J})}})});class y2{#$;constructor($){this.#$=M($)}materialized(){return new y2({...this.#$,node:x2.cloneWith(this.#$.node,{materialized:!0})})}ifExists(){return new y2({...this.#$,node:x2.cloneWith(this.#$.node,{ifExists:!0})})}cascade(){return new y2({...this.#$,node:x2.cloneWith(this.#$.node,{cascade:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var $T=C(()=>{r();UV()});var FV;var DV=C(()=>{r();a9();pY();FV=M({is($){return $.kind==="CreateTypeNode"},create($){return M({kind:"CreateTypeNode",name:$})},cloneWithEnum($,J){return M({...$,enum:cY.create(J.map(b6.createImmediate))})}})});class MV{#$;constructor($){this.#$=M($)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}asEnum($){return new MV({...this.#$,node:FV.cloneWithEnum(this.#$.node,$)})}$call($){return $(this)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var JT=C(()=>{r();DV()});var VV;var NV=C(()=>{r();VV=M({is($){return $.kind==="DropTypeNode"},create($){return M({kind:"DropTypeNode",name:$})},cloneWith($,J){return M({...$,...J})}})});class _V{#$;constructor($){this.#$=M($)}ifExists(){return new _V({...this.#$,node:VV.cloneWith(this.#$.node,{ifExists:!0})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var YT=C(()=>{NV();r()});function XT($){if($.includes(".")){let Y=$.split(".").map(t2$);if(Y.length===2)return l8.createWithSchema(Y[0],Y[1]);else throw Error(`invalid schemable identifier ${$}`)}else return l8.create($)}function t2$($){return $.trim()}var Nc=C(()=>{IW()});var h2;var LV=C(()=>{r();IW();h2=M({is($){return $.kind==="RefreshMaterializedViewNode"},create($){return M({kind:"RefreshMaterializedViewNode",name:l8.create($)})},cloneWith($,J){return M({...$,...J})}})});class m2{#$;constructor($){this.#$=M($)}concurrently(){return new m2({...this.#$,node:h2.cloneWith(this.#$.node,{concurrently:!0,withNoData:!1})})}withData(){return new m2({...this.#$,node:h2.cloneWith(this.#$.node,{withNoData:!1})})}withNoData(){return new m2({...this.#$,node:h2.cloneWith(this.#$.node,{withNoData:!0,concurrently:!1})})}$call($){return $(this)}toOperationNode(){return this.#$.executor.transformQuery(this.#$.node,this.#$.queryId)}compile(){return this.#$.executor.compileQuery(this.toOperationNode(),this.#$.queryId)}async execute(){await this.#$.executor.executeQuery(this.compile())}}var WT=C(()=>{r();LV()});class u2{#$;constructor($){this.#$=$}createTable($){return new b1({queryId:r$(),executor:this.#$,node:p8.create(y0($))})}dropTable($){return new lK({queryId:r$(),executor:this.#$,node:HK.create(y0($))})}createIndex($){return new cJ({queryId:r$(),executor:this.#$,node:gY.create($)})}dropIndex($){return new g2({queryId:r$(),executor:this.#$,node:i9.create($)})}createSchema($){return new wV({queryId:r$(),executor:this.#$,node:VM.create($)})}dropSchema($){return new pK({queryId:r$(),executor:this.#$,node:QK.create($)})}alterTable($){return new cC({queryId:r$(),executor:this.#$,node:g0.create(y0($))})}createView($){return new uW({queryId:r$(),executor:this.#$,node:eY.create($)})}refreshMaterializedView($){return new m2({queryId:r$(),executor:this.#$,node:h2.create($)})}dropView($){return new y2({queryId:r$(),executor:this.#$,node:x2.create($)})}createType($){return new MV({queryId:r$(),executor:this.#$,node:FV.create(XT($))})}dropType($){return new _V({queryId:r$(),executor:this.#$,node:VV.create(XT($))})}withPlugin($){return new u2(this.#$.withPlugin($))}withoutPlugins(){return new u2(this.#$.withoutPlugins())}withSchema($){return new u2(this.#$.withPluginAtFront(new UJ($)))}}var ZT=C(()=>{dZ();MM();NM();G2();GK();_M();LM();E8();pC();nC();iC();rC();oC();tC();aC();dJ();aZ();eC();nK();$T();UV();JT();YT();DV();NV();Nc();WT();LV()});class GT{ref($){return new UE($)}table($){return new AC($)}}var QT=C(()=>{wK();XV()});class HT{#$;constructor($){this.#$=$}async provideConnection($){let J=await this.#$.acquireConnection();try{return await $(J)}finally{await this.#$.releaseConnection(J)}}}var H5;var zT=C(()=>{ZC();H5=class H5 extends CK{#$;#J;#Y;constructor($,J,Y,X=[]){super(X);this.#$=$,this.#J=J,this.#Y=Y}get adapter(){return this.#J}compileQuery($,J){return this.#$.compileQuery($,J)}provideConnection($){return this.#Y.provideConnection($)}withPlugins($){return new H5(this.#$,this.#J,this.#Y,[...this.plugins,...$])}withPlugin($){return new H5(this.#$,this.#J,this.#Y,[...this.plugins,$])}withPluginAtFront($){return new H5(this.#$,this.#J,this.#Y,[$,...this.plugins])}withConnectionProvider($){return new H5(this.#$,this.#J,$,[...this.plugins])}withoutPlugins(){return new H5(this.#$,this.#J,this.#Y,[])}}});function qV(){if(typeof performance<"u"&&a0(performance.now))return performance.now();else return Date.now()}var _c=C(()=>{r()});class KT{#$;#J;#Y;#X;#W;#Q=new WeakSet;constructor($,J){this.#X=!1,this.#$=$,this.#J=J}async init(){if(this.#W)throw Error("driver has already been destroyed");if(!this.#Y)this.#Y=this.#$.init().then(()=>{this.#X=!0}).catch(($)=>{return this.#Y=void 0,Promise.reject($)});await this.#Y}async acquireConnection(){if(this.#W)throw Error("driver has already been destroyed");if(!this.#X)await this.init();let $=await this.#$.acquireConnection();if(!this.#Q.has($)){if(this.#G())this.#Z($);this.#Q.add($)}return $}async releaseConnection($){await this.#$.releaseConnection($)}beginTransaction($,J){return this.#$.beginTransaction($,J)}commitTransaction($){return this.#$.commitTransaction($)}rollbackTransaction($){return this.#$.rollbackTransaction($)}savepoint($,J,Y){if(this.#$.savepoint)return this.#$.savepoint($,J,Y);throw Error("The `savepoint` method is not supported by this driver")}rollbackToSavepoint($,J,Y){if(this.#$.rollbackToSavepoint)return this.#$.rollbackToSavepoint($,J,Y);throw Error("The `rollbackToSavepoint` method is not supported by this driver")}releaseSavepoint($,J,Y){if(this.#$.releaseSavepoint)return this.#$.releaseSavepoint($,J,Y);throw Error("The `releaseSavepoint` method is not supported by this driver")}async destroy(){if(!this.#Y)return;if(await this.#Y,!this.#W)this.#W=this.#$.destroy().catch(($)=>{return this.#W=void 0,Promise.reject($)});await this.#W}#G(){return this.#J.isLevelEnabled("query")||this.#J.isLevelEnabled("error")}#Z($){let{executeQuery:J,streamQuery:Y}=$,X=this;$.executeQuery=async(W)=>{let Z,G=qV();try{return await J.call($,W)}catch(Q){throw Z=Q,await X.#H(Q,W,G),Q}finally{if(!Z)await X.#z(W,G)}},$.streamQuery=async function*(W,Z){let G,Q=qV();try{for await(let H of Y.call($,W,Z))yield H}catch(H){throw G=H,await X.#H(H,W,Q),H}finally{if(!G)await X.#z(W,Q,!0)}}}async#H($,J,Y){await this.#J.error(()=>({level:"error",error:$,query:J,queryDurationMillis:this.#w(Y)}))}async#z($,J,Y=!1){await this.#J.query(()=>({level:"query",isStream:Y,query:$,queryDurationMillis:this.#w(J)}))}#w($){return qV()-$}}var Lc=C(()=>{_c()});class iK{#$;#J;constructor($){this.#$=$}async provideConnection($){while(this.#J)await this.#J.catch(a2$);return this.#J=this.#Y($).finally(()=>{this.#J=void 0}),this.#J}async#Y($){return await $(this.#$)}}var a2$=()=>{};function wT($){if($.accessMode&&!s2$.includes($.accessMode))throw Error(`invalid transaction access mode ${$.accessMode}`);if($.isolationLevel&&!e2$.includes($.isolationLevel))throw Error(`invalid transaction isolation level ${$.isolationLevel}`)}var s2$,e2$;var UT=C(()=>{s2$=["read only","read write"],e2$=["read uncommitted","read committed","repeatable read","serializable","snapshot"]});class FT{#$;#J;constructor($){if(a0($))this.#J=$,this.#$=M({query:!0,error:!0});else this.#J=JQ$,this.#$=M({query:$.includes("query"),error:$.includes("error")})}isLevelEnabled($){return this.#$[$]}async query($){if(this.#$.query)await this.#J($())}async error($){if(this.#$.error)await this.#J($())}}function JQ$($){if($.level==="query"){let J=`kysely:query:${$.isStream?"stream:":""}`;console.log(`${J} ${$.query.sql}`),console.log(`${J} duration: ${$.queryDurationMillis.toFixed(1)}ms`)}else if($.level==="error")if($.error instanceof Error)console.error(`kysely:error: ${$.error.stack??$.error.message}`);else console.error(`kysely:error: ${JSON.stringify({error:$.error,query:$.query.sql,queryDurationMillis:$.queryDurationMillis})}`)}var $Q$,UJ0;var DT=C(()=>{r();$Q$=["query","error"],UJ0=M($Q$)});function qc($){return N4($)&&a0($.compile)}var MT=C(()=>{r()});function YQ$($){return N4($)&&N4($.config)&&N4($.driver)&&N4($.executor)&&N4($.dialect)}class Bc{#$;constructor($){this.#$=M($)}async execute($){return this.#$.executor.provideConnection(async(J)=>{let Y=this.#$.executor.withConnectionProvider(new iK(J)),X=new xX({...this.#$,executor:Y});return await $(X)})}}class BV{#$;constructor($){this.#$=M($)}setAccessMode($){return new BV({...this.#$,accessMode:$})}setIsolationLevel($){return new BV({...this.#$,isolationLevel:$})}async execute($){let{isolationLevel:J,accessMode:Y,...X}=this.#$,W={isolationLevel:J,accessMode:Y};return wT(W),this.#$.executor.provideConnection(async(Z)=>{let G={isCommitted:!1,isRolledBack:!1},Q=new cW(this.#$.executor.withConnectionProvider(new iK(Z)),G),H=new Y7({...X,executor:Q}),z=!1;try{await this.#$.driver.beginTransaction(Z,W),z=!0;let K=await $(H);return await this.#$.driver.commitTransaction(Z),G.isCommitted=!0,K}catch(K){if(z)await this.#$.driver.rollbackTransaction(Z),G.isRolledBack=!0;throw K}})}}class OV{#$;constructor($){this.#$=M($)}setAccessMode($){return new OV({...this.#$,accessMode:$})}setIsolationLevel($){return new OV({...this.#$,isolationLevel:$})}async execute(){let{isolationLevel:$,accessMode:J,...Y}=this.#$,X={isolationLevel:$,accessMode:J};wT(X);let W=await cM(this.#$.executor);return await this.#$.driver.beginTransaction(W.connection,X),new dW({...Y,connection:W,executor:this.#$.executor.withConnectionProvider(new iK(W.connection))})}}class d2{#$;constructor($){this.#$=$}async execute(){return await this.#$()}}function J7($){if($.isCommitted)throw Error("Transaction is already committed");if($.isRolledBack)throw Error("Transaction is already rolled back")}class cW{#$;#J;constructor($,J){if($ instanceof cW)this.#$=$.#$;else this.#$=$;this.#J=J}get adapter(){return this.#$.adapter}get plugins(){return this.#$.plugins}transformQuery($,J){return this.#$.transformQuery($,J)}compileQuery($,J){return this.#$.compileQuery($,J)}provideConnection($){return this.#$.provideConnection($)}executeQuery($){return J7(this.#J),this.#$.executeQuery($)}stream($,J){return J7(this.#J),this.#$.stream($,J)}withConnectionProvider($){return new cW(this.#$.withConnectionProvider($),this.#J)}withPlugin($){return new cW(this.#$.withPlugin($),this.#J)}withPlugins($){return new cW(this.#$.withPlugins($),this.#J)}withPluginAtFront($){return new cW(this.#$.withPluginAtFront($),this.#J)}withoutPlugins(){return new cW(this.#$.withoutPlugins(),this.#J)}}var xX,Y7,dW;var Oc=C(()=>{ZT();QT();pM();zT();r();Lc();UT();eM();DT();dJ();MT();$V();RK();dY();aZ();WC();w2();Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");xX=class xX extends bX{#$;constructor($){let J,Y;if(YQ$($))J={executor:$.executor},Y={...$};else{let X=$.dialect,W=X.createDriver(),Z=X.createQueryCompiler(),G=X.createAdapter(),Q=new FT($.log??[]),H=new KT(W,Q),z=new HT(H),K=new H5(Z,G,z,$.plugins??[]);J={executor:K},Y={config:$,executor:K,dialect:X,driver:H}}super(J);this.#$=M(Y)}get schema(){return new u2(this.#$.executor)}get dynamic(){return new GT}get introspection(){return this.#$.dialect.createIntrospector(this.withoutPlugins())}case($){return new IK({node:FJ.create(W1($)?void 0:R1($))})}get fn(){return sM()}transaction(){return new BV({...this.#$})}startTransaction(){return new OV({...this.#$})}connection(){return new Bc({...this.#$})}withPlugin($){return new xX({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new xX({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new xX({...this.#$,executor:this.#$.executor.withPluginAtFront(new UJ($))})}withTables(){return new xX({...this.#$})}async destroy(){await this.#$.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#$.executor}executeQuery($,J){if(J!==void 0)uY("Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.");let Y=qc($)?$.compile():$;return this.getExecutor().executeQuery(Y)}async[Symbol.asyncDispose](){await this.destroy()}};Y7=class Y7 extends xX{#$;constructor($){super($);this.#$=$}get isTransaction(){return!0}transaction(){throw Error("calling the transaction method for a Transaction is not supported")}connection(){throw Error("calling the connection method for a Transaction is not supported")}async destroy(){throw Error("calling the destroy method for a Transaction is not supported")}withPlugin($){return new Y7({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new Y7({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new Y7({...this.#$,executor:this.#$.executor.withPluginAtFront(new UJ($))})}withTables(){return new Y7({...this.#$})}};dW=class dW extends Y7{#$;#J;#Y;constructor($){let J={isCommitted:!1,isRolledBack:!1};$={...$,executor:new cW($.executor,J)};let{connection:Y,...X}=$;super(X);this.#$=M($),this.#Y=J;let W=r$();this.#J=(Z)=>$.executor.compileQuery(Z,W)}get isCommitted(){return this.#Y.isCommitted}get isRolledBack(){return this.#Y.isRolledBack}commit(){return J7(this.#Y),new d2(async()=>{await this.#$.driver.commitTransaction(this.#$.connection.connection),this.#Y.isCommitted=!0,this.#$.connection.release()})}rollback(){return J7(this.#Y),new d2(async()=>{await this.#$.driver.rollbackTransaction(this.#$.connection.connection),this.#Y.isRolledBack=!0,this.#$.connection.release()})}savepoint($){return J7(this.#Y),new d2(async()=>{return await this.#$.driver.savepoint?.(this.#$.connection.connection,$,this.#J),new dW({...this.#$})})}rollbackToSavepoint($){return J7(this.#Y),new d2(async()=>{return await this.#$.driver.rollbackToSavepoint?.(this.#$.connection.connection,$,this.#J),new dW({...this.#$})})}releaseSavepoint($){return J7(this.#Y),new d2(async()=>{return await this.#$.driver.releaseSavepoint?.(this.#$.connection.connection,$,this.#J),new dW({...this.#$})})}withPlugin($){return new dW({...this.#$,executor:this.#$.executor.withPlugin($)})}withoutPlugins(){return new dW({...this.#$,executor:this.#$.executor.withoutPlugins()})}withSchema($){return new dW({...this.#$,executor:this.#$.executor.withPluginAtFront(new UJ($))})}withTables(){return new dW({...this.#$})}}});var Pc=()=>{};var Sc=()=>{};var Ac=()=>{};var jc=()=>{};var Ec=()=>{};class rK{#$;constructor($){this.#$=M($)}get expressionType(){return}get isRawBuilder(){return!0}as($){return new Cc(this,$)}$castTo(){return new rK({...this.#$})}$notNull(){return new rK(this.#$)}withPlugin($){return new rK({...this.#$,plugins:this.#$.plugins!==void 0?M([...this.#$.plugins,$]):M([$])})}toOperationNode(){return this.#Y(this.#J())}compile($){return this.#X(this.#J($))}async execute($){let J=this.#J($);return J.executeQuery(this.#X(J))}#J($){let J=$!==void 0?$.getExecutor():W5;return this.#$.plugins!==void 0?J.withPlugins(this.#$.plugins):J}#Y($){return $.transformQuery(this.#$.rawNode,this.#$.queryId)}#X($){return $.compileQuery(this.#Y($),this.#$.queryId)}}function pW($){return new rK($)}class Cc{#$;#J;constructor($,J){this.#$=$,this.#J=J}get expression(){return this.#$}get alias(){return this.#J}get rawBuilder(){return this.#$}toOperationNode(){return K8.create(this.#$.toOperationNode(),j4(this.#J)?this.#J.toOperationNode():u$.create(this.#J))}}var VT=C(()=>{xY();r();j2();_4();C1()});function Tc($){if(j4($))return $.toOperationNode();return F4($)}var G0;var z5=C(()=>{_4();C1();yJ();pY();S8();E8();TX();dJ();VT();G0=Object.assign(($,...J)=>{return pW({queryId:r$(),rawNode:x0.create($,J?.map(Tc)??[])})},{ref($){return pW({queryId:r$(),rawNode:x0.createWithChild(QJ($))})},val($){return pW({queryId:r$(),rawNode:x0.createWithChild(F4($))})},value($){return this.val($)},table($){return pW({queryId:r$(),rawNode:x0.createWithChild(y0($))})},id(...$){let J=Array($.length+1).fill(".");return J[0]="",J[J.length-1]="",pW({queryId:r$(),rawNode:x0.create(J,$.map(u$.create))})},lit($){return pW({queryId:r$(),rawNode:x0.createWithChild(b6.createImmediate($))})},literal($){return this.lit($)},raw($){return pW({queryId:r$(),rawNode:x0.createWithSql($)})},join($,J=G0`, `){let Y=Array(Math.max(2*$.length-1,0)),X=J.toOperationNode();for(let W=0;W<$.length;++W)if(Y[2*W]=Tc($[W]),W!==$.length-1)Y[2*W+1]=X;return pW({queryId:r$(),rawNode:x0.createWithChildren(Y)})}})});var Rc=()=>{};var Ic=()=>{};class NT{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#$=M({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),RenameConstraintNode:this.visitRenameConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),RefreshMaterializedViewNode:this.visitRefreshMaterializedView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this),OrActionNode:this.visitOrAction.bind(this),CollateNode:this.visitCollate.bind(this)});visitNode=($)=>{this.nodeStack.push($),this.#$[$.kind]($),this.nodeStack.pop()}}var _T=C(()=>{r()});var XQ$,DJ,WQ$,kc,ZQ$;var X7=C(()=>{G2();nZ();_T();bW();M2();yJ();r();nK();nM();iZ();w2();XQ$=/'/g;DJ=class DJ extends NT{#$="";#J=[];get numParameters(){return this.#J.length}compileQuery($,J){return this.#$="",this.#J=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode($),M({query:$,queryId:J,sql:this.getSql(),parameters:[...this.#J]})}getSql(){return this.#$}visitSelectQuery($){let J=this.parentNode!==void 0&&!zJ.is(this.parentNode)&&!U6.is(this.parentNode)&&!p8.is(this.parentNode)&&!eY.is(this.parentNode)&&!lM.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("select"),$.distinctOn)this.append(" "),this.compileDistinctOn($.distinctOn);if($.frontModifiers?.length)this.append(" "),this.compileList($.frontModifiers," ");if($.top)this.append(" "),this.visitNode($.top);if($.selections)this.append(" "),this.compileList($.selections);if($.from)this.append(" "),this.visitNode($.from);if($.joins)this.append(" "),this.compileList($.joins," ");if($.where)this.append(" "),this.visitNode($.where);if($.groupBy)this.append(" "),this.visitNode($.groupBy);if($.having)this.append(" "),this.visitNode($.having);if($.setOperations)this.append(" "),this.compileList($.setOperations," ");if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.offset)this.append(" "),this.visitNode($.offset);if($.fetch)this.append(" "),this.visitNode($.fetch);if($.endModifiers?.length)this.append(" "),this.compileList(this.sortSelectModifiers([...$.endModifiers])," ");if(J)this.append(")")}visitFrom($){this.append("from "),this.compileList($.froms)}visitSelection($){this.visitNode($.selection)}visitColumn($){this.visitNode($.column)}compileDistinctOn($){this.append("distinct on ("),this.compileList($),this.append(")")}compileList($,J=", "){let Y=$.length-1;for(let X=0;X<=Y;X++)if(this.visitNode($[X]),X<Y)this.append(J)}visitWhere($){this.append("where "),this.visitNode($.where)}visitHaving($){this.append("having "),this.visitNode($.having)}visitInsertQuery($){let J=this.parentNode!==void 0&&!zJ.is(this.parentNode)&&!x0.is(this.parentNode)&&!mJ.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append($.replace?"replace":"insert"),$.ignore)uY("`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead."),this.append(" ignore");if($.orAction)this.append(" "),this.visitNode($.orAction);if($.top)this.append(" "),this.visitNode($.top);if($.into)this.append(" into "),this.visitNode($.into);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.output)this.append(" "),this.visitNode($.output);if($.values)this.append(" "),this.visitNode($.values);if($.defaultValues)this.append(" "),this.append("default values");if($.onConflict)this.append(" "),this.visitNode($.onConflict);if($.onDuplicateKey)this.append(" "),this.visitNode($.onDuplicateKey);if($.returning)this.append(" "),this.visitNode($.returning);if(J)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitValues($){this.append("values "),this.compileList($.values)}visitDeleteQuery($){let J=this.parentNode!==void 0&&!zJ.is(this.parentNode)&&!x0.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("delete "),$.top)this.visitNode($.top),this.append(" ");if(this.visitNode($.from),$.output)this.append(" "),this.visitNode($.output);if($.using)this.append(" "),this.visitNode($.using);if($.joins)this.append(" "),this.compileList($.joins," ");if($.where)this.append(" "),this.visitNode($.where);if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if($.returning)this.append(" "),this.visitNode($.returning);if(J)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitReturning($){this.append("returning "),this.compileList($.selections)}visitAlias($){this.visitNode($.node),this.append(" as "),this.visitNode($.alias)}visitReference($){if($.table)this.visitNode($.table),this.append(".");this.visitNode($.column)}visitSelectAll($){this.append("*")}visitIdentifier($){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier($),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier($){if(!t0($.name))throw Error("a non-string identifier was passed to compileUnwrappedIdentifier.");this.append(this.sanitizeIdentifier($.name))}visitAnd($){this.visitNode($.left),this.append(" and "),this.visitNode($.right)}visitOr($){this.visitNode($.left),this.append(" or "),this.visitNode($.right)}visitValue($){if($.immediate)this.appendImmediateValue($.value);else this.appendValue($.value)}visitValueList($){this.append("("),this.compileList($.values),this.append(")")}visitTuple($){this.append("("),this.compileList($.values),this.append(")")}visitPrimitiveValueList($){this.append("(");let{values:J}=$;for(let Y=0;Y<J.length;++Y)if(this.appendValue(J[Y]),Y!==J.length-1)this.append(", ");this.append(")")}visitParens($){this.append("("),this.visitNode($.node),this.append(")")}visitJoin($){if(this.append(ZQ$[$.joinType]),this.append(" "),this.visitNode($.table),$.on)this.append(" "),this.visitNode($.on)}visitOn($){this.append("on "),this.visitNode($.on)}visitRaw($){let{sqlFragments:J,parameters:Y}=$;for(let X=0;X<J.length;++X)if(this.append(J[X]),Y.length>X)this.visitNode(Y[X])}visitOperator($){this.append($.operator)}visitTable($){this.visitNode($.table)}visitSchemableIdentifier($){if($.schema)this.visitNode($.schema),this.append(".");this.visitNode($.identifier)}visitCreateTable($){if(this.append("create "),$.frontModifiers&&$.frontModifiers.length>0)this.compileList($.frontModifiers," "),this.append(" ");if($.temporary)this.append("temporary ");if(this.append("table "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.table),$.selectQuery)this.append(" as "),this.visitNode($.selectQuery);else{if(this.append(" ("),this.compileList([...$.columns,...$.constraints??[]]),this.append(")"),$.onCommit)this.append(" on commit "),this.append($.onCommit);if($.endModifiers&&$.endModifiers.length>0)this.append(" "),this.compileList($.endModifiers," ")}}visitColumnDefinition($){if($.ifNotExists)this.append("if not exists ");if(this.visitNode($.column),this.append(" "),this.visitNode($.dataType),$.unsigned)this.append(" unsigned");if($.frontModifiers&&$.frontModifiers.length>0)this.append(" "),this.compileList($.frontModifiers," ");if($.generated)this.append(" "),this.visitNode($.generated);if($.identity)this.append(" identity");if($.defaultTo)this.append(" "),this.visitNode($.defaultTo);if($.notNull)this.append(" not null");if($.unique)this.append(" unique");if($.nullsNotDistinct)this.append(" nulls not distinct");if($.primaryKey)this.append(" primary key");if($.autoIncrement)this.append(" "),this.append(this.getAutoIncrement());if($.references)this.append(" "),this.visitNode($.references);if($.check)this.append(" "),this.visitNode($.check);if($.endModifiers&&$.endModifiers.length>0)this.append(" "),this.compileList($.endModifiers," ")}getAutoIncrement(){return"auto_increment"}visitReferences($){if(this.append("references "),this.visitNode($.table),this.append(" ("),this.compileList($.columns),this.append(")"),$.onDelete)this.append(" on delete "),this.append($.onDelete);if($.onUpdate)this.append(" on update "),this.append($.onUpdate)}visitDropTable($){if(this.append("drop table "),$.ifExists)this.append("if exists ");if(this.visitNode($.table),$.cascade)this.append(" cascade")}visitDataType($){this.append($.dataType)}visitOrderBy($){this.append("order by "),this.compileList($.items)}visitOrderByItem($){if(this.visitNode($.orderBy),$.collation)this.append(" "),this.visitNode($.collation);if($.direction)this.append(" "),this.visitNode($.direction);if($.nulls)this.append(" nulls "),this.append($.nulls)}visitGroupBy($){this.append("group by "),this.compileList($.items)}visitGroupByItem($){this.visitNode($.groupBy)}visitUpdateQuery($){let J=this.parentNode!==void 0&&!zJ.is(this.parentNode)&&!x0.is(this.parentNode)&&!mJ.is(this.parentNode);if(this.parentNode===void 0&&$.explain)this.visitNode($.explain),this.append(" ");if(J)this.append("(");if($.with)this.visitNode($.with),this.append(" ");if(this.append("update "),$.top)this.visitNode($.top),this.append(" ");if($.table)this.visitNode($.table),this.append(" ");if(this.append("set "),$.updates)this.compileList($.updates);if($.output)this.append(" "),this.visitNode($.output);if($.from)this.append(" "),this.visitNode($.from);if($.joins){if(!$.from)throw Error("Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins");this.append(" "),this.compileList($.joins," ")}if($.where)this.append(" "),this.visitNode($.where);if($.returning)this.append(" "),this.visitNode($.returning);if($.orderBy)this.append(" "),this.visitNode($.orderBy);if($.limit)this.append(" "),this.visitNode($.limit);if(J)this.append(")");if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitColumnUpdate($){this.visitNode($.column),this.append(" = "),this.visitNode($.value)}visitLimit($){this.append("limit "),this.visitNode($.limit)}visitOffset($){this.append("offset "),this.visitNode($.offset)}visitOnConflict($){if(this.append("on conflict"),$.columns)this.append(" ("),this.compileList($.columns),this.append(")");else if($.constraint)this.append(" on constraint "),this.visitNode($.constraint);else if($.indexExpression)this.append(" ("),this.visitNode($.indexExpression),this.append(")");if($.indexWhere)this.append(" "),this.visitNode($.indexWhere);if($.doNothing===!0)this.append(" do nothing");else if($.updates){if(this.append(" do update set "),this.compileList($.updates),$.updateWhere)this.append(" "),this.visitNode($.updateWhere)}}visitOnDuplicateKey($){this.append("on duplicate key update "),this.compileList($.updates)}visitCreateIndex($){if(this.append("create "),$.unique)this.append("unique ");if(this.append("index "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),$.table)this.append(" on "),this.visitNode($.table);if($.using)this.append(" using "),this.visitNode($.using);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.nullsNotDistinct)this.append(" nulls not distinct");if($.where)this.append(" "),this.visitNode($.where)}visitDropIndex($){if(this.append("drop index "),$.ifExists)this.append("if exists ");if(this.visitNode($.name),$.table)this.append(" on "),this.visitNode($.table);if($.cascade)this.append(" cascade")}visitCreateSchema($){if(this.append("create schema "),$.ifNotExists)this.append("if not exists ");this.visitNode($.schema)}visitDropSchema($){if(this.append("drop schema "),$.ifExists)this.append("if exists ");if(this.visitNode($.schema),$.cascade)this.append(" cascade")}visitPrimaryKeyConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");this.append("primary key ("),this.compileList($.columns),this.append(")"),this.buildDeferrable($)}buildDeferrable($){if($.deferrable!==void 0)if($.deferrable)this.append(" deferrable");else this.append(" not deferrable");if($.initiallyDeferred!==void 0)if($.initiallyDeferred)this.append(" initially deferred");else this.append(" initially immediate")}visitUniqueConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");if(this.append("unique"),$.nullsNotDistinct)this.append(" nulls not distinct");this.append(" ("),this.compileList($.columns),this.append(")"),this.buildDeferrable($)}visitCheckConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");this.append("check ("),this.visitNode($.expression),this.append(")")}visitForeignKeyConstraint($){if($.name)this.append("constraint "),this.visitNode($.name),this.append(" ");if(this.append("foreign key ("),this.compileList($.columns),this.append(") "),this.visitNode($.references),$.onDelete)this.append(" on delete "),this.append($.onDelete);if($.onUpdate)this.append(" on update "),this.append($.onUpdate);this.buildDeferrable($)}visitList($){this.compileList($.items)}visitWith($){if(this.append("with "),$.recursive)this.append("recursive ");this.compileList($.expressions)}visitCommonTableExpression($){if(this.visitNode($.name),this.append(" as "),RW($.materialized)){if(!$.materialized)this.append("not ");this.append("materialized ")}this.visitNode($.expression)}visitCommonTableExpressionName($){if(this.visitNode($.table),$.columns)this.append("("),this.compileList($.columns),this.append(")")}visitAlterTable($){if(this.append("alter table "),this.visitNode($.table),this.append(" "),$.renameTo)this.append("rename to "),this.visitNode($.renameTo);if($.setSchema)this.append("set schema "),this.visitNode($.setSchema);if($.addConstraint)this.visitNode($.addConstraint);if($.dropConstraint)this.visitNode($.dropConstraint);if($.renameConstraint)this.visitNode($.renameConstraint);if($.columnAlterations)this.compileColumnAlterations($.columnAlterations);if($.addIndex)this.visitNode($.addIndex);if($.dropIndex)this.visitNode($.dropIndex)}visitAddColumn($){this.append("add column "),this.visitNode($.column)}visitRenameColumn($){this.append("rename column "),this.visitNode($.column),this.append(" to "),this.visitNode($.renameTo)}visitDropColumn($){this.append("drop column "),this.visitNode($.column)}visitAlterColumn($){if(this.append("alter column "),this.visitNode($.column),this.append(" "),$.dataType){if(this.announcesNewColumnDataType())this.append("type ");if(this.visitNode($.dataType),$.dataTypeExpression)this.append("using "),this.visitNode($.dataTypeExpression)}if($.setDefault)this.append("set default "),this.visitNode($.setDefault);if($.dropDefault)this.append("drop default");if($.setNotNull)this.append("set not null");if($.dropNotNull)this.append("drop not null")}visitModifyColumn($){this.append("modify column "),this.visitNode($.column)}visitAddConstraint($){this.append("add "),this.visitNode($.constraint)}visitDropConstraint($){if(this.append("drop constraint "),$.ifExists)this.append("if exists ");if(this.visitNode($.constraintName),$.modifier==="cascade")this.append(" cascade");else if($.modifier==="restrict")this.append(" restrict")}visitRenameConstraint($){this.append("rename constraint "),this.visitNode($.oldName),this.append(" to "),this.visitNode($.newName)}visitSetOperation($){if(this.append($.operator),this.append(" "),$.all)this.append("all ");this.visitNode($.expression)}visitCreateView($){if(this.append("create "),$.orReplace)this.append("or replace ");if($.materialized)this.append("materialized ");if($.temporary)this.append("temporary ");if(this.append("view "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),this.append(" "),$.columns)this.append("("),this.compileList($.columns),this.append(") ");if($.as)this.append("as "),this.visitNode($.as)}visitRefreshMaterializedView($){if(this.append("refresh materialized view "),$.concurrently)this.append("concurrently ");if(this.visitNode($.name),$.withNoData)this.append(" with no data");else this.append(" with data")}visitDropView($){if(this.append("drop "),$.materialized)this.append("materialized ");if(this.append("view "),$.ifExists)this.append("if exists ");if(this.visitNode($.name),$.cascade)this.append(" cascade")}visitGenerated($){if(this.append("generated "),$.always)this.append("always ");if($.byDefault)this.append("by default ");if(this.append("as "),$.identity)this.append("identity");if($.expression)this.append("("),this.visitNode($.expression),this.append(")");if($.stored)this.append(" stored")}visitDefaultValue($){this.append("default "),this.visitNode($.defaultValue)}visitSelectModifier($){if($.rawModifier)this.visitNode($.rawModifier);else this.append(WQ$[$.modifier]);if($.of)this.append(" of "),this.compileList($.of,", ")}visitCreateType($){if(this.append("create type "),this.visitNode($.name),$.enum)this.append(" as enum "),this.visitNode($.enum)}visitDropType($){if(this.append("drop type "),$.ifExists)this.append("if exists ");this.visitNode($.name)}visitExplain($){if(this.append("explain"),$.options||$.format){if(this.append(" "),this.append(this.getLeftExplainOptionsWrapper()),$.options){if(this.visitNode($.options),$.format)this.append(this.getExplainOptionsDelimiter())}if($.format)this.append("format"),this.append(this.getExplainOptionAssignment()),this.append($.format);this.append(this.getRightExplainOptionsWrapper())}}visitDefaultInsertValue($){this.append("default")}visitAggregateFunction($){if(this.append($.func),this.append("("),$.distinct)this.append("distinct ");if(this.compileList($.aggregated),$.orderBy)this.append(" "),this.visitNode($.orderBy);if(this.append(")"),$.withinGroup)this.append(" within group ("),this.visitNode($.withinGroup),this.append(")");if($.filter)this.append(" filter("),this.visitNode($.filter),this.append(")");if($.over)this.append(" "),this.visitNode($.over)}visitOver($){if(this.append("over("),$.partitionBy){if(this.visitNode($.partitionBy),$.orderBy)this.append(" ")}if($.orderBy)this.visitNode($.orderBy);this.append(")")}visitPartitionBy($){this.append("partition by "),this.compileList($.items)}visitPartitionByItem($){this.visitNode($.partitionBy)}visitBinaryOperation($){this.visitNode($.leftOperand),this.append(" "),this.visitNode($.operator),this.append(" "),this.visitNode($.rightOperand)}visitUnaryOperation($){if(this.visitNode($.operator),!this.isMinusOperator($.operator))this.append(" ");this.visitNode($.operand)}isMinusOperator($){return n8.is($)&&$.operator==="-"}visitUsing($){this.append("using "),this.compileList($.tables)}visitFunction($){this.append($.func),this.append("("),this.compileList($.arguments),this.append(")")}visitCase($){if(this.append("case"),$.value)this.append(" "),this.visitNode($.value);if($.when)this.append(" "),this.compileList($.when," ");if($.else)this.append(" else "),this.visitNode($.else);if(this.append(" end"),$.isStatement)this.append(" case")}visitWhen($){if(this.append("when "),this.visitNode($.condition),$.result)this.append(" then "),this.visitNode($.result)}visitJSONReference($){this.visitNode($.reference),this.visitNode($.traversal)}visitJSONPath($){if($.inOperator)this.visitNode($.inOperator);this.append("'$");for(let J of $.pathLegs)this.visitNode(J);this.append("'")}visitJSONPathLeg($){let J=$.type==="ArrayLocation";if(this.append(J?"[":"."),this.append(String($.value)),J)this.append("]")}visitJSONOperatorChain($){for(let J=0,Y=$.values.length;J<Y;J++){if(J===Y-1)this.visitNode($.operator);else this.append("->");this.visitNode($.values[J])}}visitMergeQuery($){if($.with)this.visitNode($.with),this.append(" ");if(this.append("merge "),$.top)this.visitNode($.top),this.append(" ");if(this.append("into "),this.visitNode($.into),$.using)this.append(" "),this.visitNode($.using);if($.whens)this.append(" "),this.compileList($.whens," ");if($.returning)this.append(" "),this.visitNode($.returning);if($.output)this.append(" "),this.visitNode($.output);if($.endModifiers?.length)this.append(" "),this.compileList($.endModifiers," ")}visitMatched($){if($.not)this.append("not ");if(this.append("matched"),$.bySource)this.append(" by source")}visitAddIndex($){if(this.append("add "),$.unique)this.append("unique ");if(this.append("index "),this.visitNode($.name),$.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.using)this.append(" using "),this.visitNode($.using)}visitCast($){this.append("cast("),this.visitNode($.expression),this.append(" as "),this.visitNode($.dataType),this.append(")")}visitFetch($){this.append("fetch next "),this.visitNode($.rowCount),this.append(` rows ${$.modifier}`)}visitOutput($){this.append("output "),this.compileList($.selections)}visitTop($){if(this.append(`top(${$.expression})`),$.modifiers)this.append(` ${$.modifiers}`)}visitOrAction($){this.append($.action)}visitCollate($){this.append("collate "),this.visitNode($.collation)}append($){this.#$+=$}appendValue($){this.addParameter($),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return"$"+this.numParameters}getLeftExplainOptionsWrapper(){return"("}getExplainOptionAssignment(){return" "}getExplainOptionsDelimiter(){return", "}getRightExplainOptionsWrapper(){return")"}sanitizeIdentifier($){let J=this.getLeftIdentifierWrapper(),Y=this.getRightIdentifierWrapper(),X="";for(let W of $)if(X+=W,W===J)X+=J;else if(W===Y)X+=Y;return X}sanitizeStringLiteral($){return $.replace(XQ$,"''")}addParameter($){this.#J.push($)}appendImmediateValue($){if(t0($))this.appendStringLiteral($);else if(fY($)||RW($)||n9($))this.append($.toString());else if(l9($))this.append("null");else if(Z2($))this.appendImmediateValue($.toISOString());else throw Error(`invalid immediate value ${$}`)}appendStringLiteral($){this.append("'"),this.append(this.sanitizeStringLiteral($)),this.append("'")}sortSelectModifiers($){return $.sort((J,Y)=>J.modifier&&Y.modifier?kc[J.modifier]-kc[Y.modifier]:1),M($)}compileColumnAlterations($){this.compileList($)}announcesNewColumnDataType(){return!0}};WQ$=M({ForKeyShare:"for key share",ForNoKeyUpdate:"for no key update",ForUpdate:"for update",ForShare:"for share",NoWait:"nowait",SkipLocked:"skip locked",Distinct:"distinct"}),kc=M({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),ZQ$=M({InnerJoin:"inner join",LeftJoin:"left join",RightJoin:"right join",FullJoin:"full join",CrossJoin:"cross join",LateralInnerJoin:"inner join lateral",LateralLeftJoin:"left join lateral",LateralCrossJoin:"cross join lateral",OuterApply:"outer apply",CrossApply:"cross apply",Using:"using"})});var $6;var c2=C(()=>{yJ();r();dJ();$6=M({raw($,J=[]){return M({sql:$,query:x0.createWithSql($),parameters:M(J),queryId:r$()})}})});var bc=()=>{};var vc=()=>{};var fc=()=>{};var gc=()=>{};class lW{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}var xc=()=>{};function pJ($,J){return x0.createWithChildren([x0.createWithSql(`${$} `),u$.create(J)])}var PV=C(()=>{_4();yJ()});class LT{#$;#J=new hc;#Y;#X;constructor($){this.#$=M({...$})}async init(){if(this.#Y=a0(this.#$.database)?await this.#$.database():this.#$.database,this.#X=new yc(this.#Y),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#X)}async acquireConnection(){return await this.#J.lock(),this.#X}async beginTransaction($){await $.executeQuery($6.raw("begin"))}async commitTransaction($){await $.executeQuery($6.raw("commit"))}async rollbackTransaction($){await $.executeQuery($6.raw("rollback"))}async savepoint($,J,Y){await $.executeQuery(Y(pJ("savepoint",J),r$()))}async rollbackToSavepoint($,J,Y){await $.executeQuery(Y(pJ("rollback to",J),r$()))}async releaseSavepoint($,J,Y){await $.executeQuery(Y(pJ("release",J),r$()))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#Y?.close()}}class yc{#$;constructor($){this.#$=$}executeQuery($){let{sql:J,parameters:Y}=$,X=this.#$.prepare(J);if(X.reader)return Promise.resolve({rows:X.all(Y)});let{changes:W,lastInsertRowid:Z}=X.run(Y);return Promise.resolve({numAffectedRows:W!==void 0&&W!==null?BigInt(W):void 0,insertId:Z!==void 0&&Z!==null?BigInt(Z):void 0,rows:[]})}async*streamQuery($,J){let{sql:Y,parameters:X,query:W}=$,Z=this.#$.prepare(Y);if(i0.is(W)){let G=Z.iterate(X);for(let Q of G)yield{rows:[Q]}}else throw Error("Sqlite driver only supports streaming of select queries")}}class hc{#$;#J;async lock(){while(this.#$)await this.#$;this.#$=new Promise(($)=>{this.#J=$})}unlock(){let $=this.#J;this.#$=void 0,this.#J=void 0,$?.()}}var qT=C(()=>{e9();PV();c2();r();dJ()});var GQ$,BT;var OT=C(()=>{X7();GQ$=/"/g;BT=class BT extends DJ{visitOrAction($){this.append("or "),this.append($.action)}getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}sanitizeIdentifier($){return $.replace(GQ$,'""')}visitDefaultInsertValue($){this.append("null")}}});class PT{transformQuery($){return $.node}async transformResult($){return $.result}}class HQ${#$;constructor($){this.#$=M($)}async getMigrations(){let J=await this.#K(this.#X)?await this.#$.db.withPlugin(this.#G).selectFrom(this.#X).select(["name","timestamp"]).$narrowType().execute():[];return(await this.#M()).map(({name:X,...W})=>{let Z=J.find((G)=>G.name===X);return{name:X,migration:W,executedAt:Z?new Date(Z.timestamp):void 0}})}async migrateToLatest(){return this.#J(()=>({direction:"Up",step:1/0}))}async migrateTo($){return this.#J(({migrations:J,executedMigrations:Y,pendingMigrations:X})=>{if(N4($)&&$.__noMigrations__===!0)return{direction:"Down",step:1/0};if(!J.find((G)=>G.name===$))throw Error(`migration "${$}" doesn't exist`);let W=Y.indexOf($),Z=X.findIndex((G)=>G.name===$);if(W!==-1)return{direction:"Down",step:Y.length-W-1};else if(Z!==-1)return{direction:"Up",step:Z+1};else throw Error(`migration "${$}" isn't executed or pending`)})}async migrateUp(){return this.#J(()=>({direction:"Up",step:1}))}async migrateDown(){return this.#J(()=>({direction:"Down",step:1}))}async#J($){try{return await this.#Z(),await this.#H(),await this.#z(),await this.#w(),await this.#V($)}catch(J){if(J instanceof SV)return J.resultSet;return{error:J}}}get#Y(){return this.#$.migrationTableSchema}get#X(){return this.#$.migrationTableName??Q1}get#W(){return this.#$.migrationLockTableName??v1}get#Q(){return this.#$.allowUnorderedMigrations??QQ$}get#G(){if(this.#Y)return new UJ(this.#Y);return new PT}async#Z(){if(!this.#Y)return;if(await this.#F())return;try{await this.#U(this.#$.db.schema.createSchema(this.#Y))}catch(J){if(!await this.#F())throw J}}async#H(){if(await this.#K(this.#X))return;try{await this.#U(this.#$.db.schema.withPlugin(this.#G).createTable(this.#X).addColumn("name","varchar(255)",(J)=>J.notNull().primaryKey()).addColumn("timestamp","varchar(255)",(J)=>J.notNull()))}catch(J){if(!await this.#K(this.#X))throw J}}async#z(){if(await this.#K(this.#W))return;try{await this.#U(this.#$.db.schema.withPlugin(this.#G).createTable(this.#W).addColumn("id","varchar(255)",(J)=>J.notNull().primaryKey()).addColumn("is_locked","integer",(J)=>J.notNull().defaultTo(0)))}catch(J){if(!await this.#K(this.#W))throw J}}async#w(){if(await this.#D())return;try{await this.#$.db.withPlugin(this.#G).insertInto(this.#W).values({id:ST,is_locked:0}).execute()}catch(J){if(!await this.#D())throw J}}async#F(){return(await this.#$.db.introspection.getSchemas()).some((J)=>J.name===this.#Y)}async#K($){let J=this.#Y;return(await this.#$.db.introspection.getTables({withInternalKyselyTables:!0})).some((X)=>X.name===$&&(!J||X.schema===J))}async#D(){return!!await this.#$.db.withPlugin(this.#G).selectFrom(this.#W).where("id","=",ST).select("id").executeTakeFirst()}async#V($){let J=this.#$.db.getExecutor().adapter,Y=M({lockTable:this.#$.migrationLockTableName??v1,lockRowId:ST,lockTableSchema:this.#$.migrationTableSchema}),X=async(W)=>{try{await J.acquireMigrationLock(W,Y);let Z=await this.#N(W);if(Z.migrations.length===0)return{results:[]};let{direction:G,step:Q}=$(Z);if(Q<=0)return{results:[]};if(G==="Down")return await this.#O(W,Z,Q);else if(G==="Up")return await this.#P(W,Z,Q);return{results:[]}}finally{await J.releaseMigrationLock(W,Y)}};if(J.supportsTransactionalDdl&&!this.#$.disableTransactions)return this.#$.db.transaction().execute(X);else return this.#$.db.connection().execute(X)}async#N($){let J=await this.#M(),Y=await this.#L($);if(this.#q(J,Y),!this.#Q)this.#B(J,Y);let X=this.#_(J,Y);return M({migrations:J,executedMigrations:Y,lastMigration:Xd(Y),pendingMigrations:X})}#_($,J){return $.filter((Y)=>{return!J.includes(Y.name)})}async#M(){let $=await this.#$.provider.getMigrations();return Object.keys($).sort().map((J)=>({...$[J],name:J}))}async#L($){let J=await $.withPlugin(this.#G).selectFrom(this.#X).select(["name","timestamp"]).$narrowType().execute(),Y=this.#$.nameComparator||((X,W)=>X.localeCompare(W));return J.sort((X,W)=>{if(X.timestamp===W.timestamp)return Y(X.name,W.name);return new Date(X.timestamp).getTime()-new Date(W.timestamp).getTime()}).map((X)=>X.name)}#q($,J){for(let Y of J)if(!$.some((X)=>X.name===Y))throw Error(`corrupted migrations: previously executed migration ${Y} is missing`)}#B($,J){for(let Y=0;Y<J.length;++Y)if($[Y].name!==J[Y])throw Error(`corrupted migrations: expected previously executed migration ${J[Y]} to be at index ${Y} but ${$[Y].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async#O($,J,Y){let X=J.executedMigrations.slice().reverse().slice(0,Y).map((Z)=>{return J.migrations.find((G)=>G.name===Z)}),W=X.map((Z)=>{return{migrationName:Z.name,direction:"Down",status:"NotExecuted"}});for(let Z=0;Z<W.length;++Z){let G=X[Z];try{if(G.down)await G.down($),await $.withPlugin(this.#G).deleteFrom(this.#X).where("name","=",G.name).execute(),W[Z]={migrationName:G.name,direction:"Down",status:"Success"}}catch(Q){throw W[Z]={migrationName:G.name,direction:"Down",status:"Error"},new SV({error:Q,results:W})}}return{results:W}}async#P($,J,Y){let W=J.pendingMigrations.slice(0,Y).map((Z)=>{return{migrationName:Z.name,direction:"Up",status:"NotExecuted"}});for(let Z=0;Z<W.length;Z++){let G=J.pendingMigrations[Z];try{await G.up($),await $.withPlugin(this.#G).insertInto(this.#X).values({name:G.name,timestamp:new Date().toISOString()}).execute(),W[Z]={migrationName:G.name,direction:"Up",status:"Success"}}catch(Q){throw W[Z]={migrationName:G.name,direction:"Up",status:"Error"},new SV({error:Q,results:W})}}return{results:W}}async#U($){if(this.#$.db.getExecutor().adapter.supportsCreateIfNotExists)$=$.ifNotExists();await $.execute()}}var Q1="kysely_migration",v1="kysely_migration_lock",QQ$=!1,ST="migration_lock",bY0,SV;var W7=C(()=>{aZ();r();bY0=M({__noMigrations__:!0});SV=class SV extends Error{#$;constructor($){super();this.#$=$}get resultSet(){return this.#$}}});class AT{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){return await this.#Y($)}async getMetadata($){return{tables:await this.getTables($)}}#J($,J){let Y=$.selectFrom("sqlite_master").where("type","in",["table","view"]).where("name","not like","sqlite_%").select(["name","sql","type"]).orderBy("name");if(!J.withInternalKyselyTables)Y=Y.where("name","!=",Q1).where("name","!=",v1);return Y}async#Y($){let J=await this.#J(this.#$,$).execute(),Y=await this.#$.with("table_list",(W)=>this.#J(W,$)).selectFrom(["table_list as tl",G0`pragma_table_info(tl.name)`.as("p")]).select(["tl.name as table","p.cid","p.name","p.type","p.notnull","p.dflt_value","p.pk"]).orderBy("tl.name").orderBy("p.cid").execute(),X={};for(let W of Y)X[W.table]??=[],X[W.table].push(W);return J.map(({name:W,sql:Z,type:G})=>{let Q=Z?.split(/[\(\),]/)?.find((z)=>z.toLowerCase().includes("autoincrement"))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,""),H=X[W]??[];if(!Q){let z=H.filter((K)=>K.pk>0);if(z.length===1&&z[0].type.toLowerCase()==="integer")Q=z[0].name}return{name:W,isView:G==="view",columns:H.map((z)=>({name:z.name,dataType:z.type,isNullable:!z.notnull,isAutoIncrementing:z.name===Q,hasDefaultValue:z.dflt_value!=null,comment:void 0}))}})}}var jT=C(()=>{W7();z5()});var ET;var CT=C(()=>{ET=class ET extends lW{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock($,J){}async releaseMigrationLock($,J){}}});class AV{#$;constructor($){this.#$=M({...$})}createDriver(){return new LT(this.#$)}createQueryCompiler(){return new BT}createAdapter(){return new ET}createIntrospector($){return new AT($)}}var mc=C(()=>{qT();OT();jT();CT();r()});var uc=()=>{};var zQ$,TT;var RT=C(()=>{X7();zQ$=/"/g;TT=class TT extends DJ{sanitizeIdentifier($){return $.replace(zQ$,'""')}}});class IT{#$;constructor($){this.#$=$}async getSchemas(){return(await this.#$.selectFrom("pg_catalog.pg_namespace").select("nspname").$castTo().execute()).map((J)=>({name:J.nspname}))}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("pg_catalog.pg_attribute as a").innerJoin("pg_catalog.pg_class as c","a.attrelid","c.oid").innerJoin("pg_catalog.pg_namespace as ns","c.relnamespace","ns.oid").innerJoin("pg_catalog.pg_type as typ","a.atttypid","typ.oid").innerJoin("pg_catalog.pg_namespace as dtns","typ.typnamespace","dtns.oid").select(["a.attname as column","a.attnotnull as not_null","a.atthasdef as has_default","c.relname as table","c.relkind as table_type","ns.nspname as schema","typ.typname as type","dtns.nspname as type_schema",G0`col_description(a.attrelid, a.attnum)`.as("column_description"),G0`pg_get_serial_sequence(quote_ident(ns.nspname) || '.' || quote_ident(c.relname), a.attname)`.as("auto_incrementing")]).where("c.relkind","in",["r","v","p"]).where("ns.nspname","!~","^pg_").where("ns.nspname","!=","information_schema").where("ns.nspname","!=","crdb_internal").where(G0`has_schema_privilege(ns.nspname, 'USAGE')`).where("a.attnum",">=",0).where("a.attisdropped","!=",!0).orderBy("ns.nspname").orderBy("c.relname").orderBy("a.attnum").$castTo();if(!$.withInternalKyselyTables)J=J.where("c.relname","!=",Q1).where("c.relname","!=",v1);let Y=await J.execute();return this.#J(Y)}async getMetadata($){return{tables:await this.getTables($)}}#J($){return $.reduce((J,Y)=>{let X=J.find((W)=>W.name===Y.table&&W.schema===Y.schema);if(!X)X=M({name:Y.table,isView:Y.table_type==="v",schema:Y.schema,columns:[]}),J.push(X);return X.columns.push(M({name:Y.column,dataType:Y.type,dataTypeSchema:Y.type_schema,isNullable:!Y.not_null,isAutoIncrementing:Y.auto_incrementing!==null,hasDefaultValue:Y.has_default,comment:Y.column_description??void 0})),J},[])}}var kT=C(()=>{W7();r();z5()});var KQ$,bT;var vT=C(()=>{z5();KQ$=BigInt("3853314791062309107");bT=class bT extends lW{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock($,J){await G0`select pg_advisory_xact_lock(${G0.lit(KQ$)})`.execute($)}async releaseMigrationLock($,J){}}});function p2($,J){if(wQ$($)&&J.stack){let Y=J.stack.split(`
`).slice(1).join(`
`);return $.stack+=`
${Y}`,$}return $}function wQ$($){return N4($)&&t0($.stack)}var jV=C(()=>{r()});class fT{#$;#J=new WeakMap;#Y;constructor($){this.#$=M({...$})}async init(){this.#Y=a0(this.#$.pool)?await this.#$.pool():this.#$.pool}async acquireConnection(){let $=await this.#X(),J=this.#J.get($);if(!J){if(J=new cc($),this.#J.set($,J),this.#$?.onCreateConnection)await this.#$.onCreateConnection(J)}if(this.#$?.onReserveConnection)await this.#$.onReserveConnection(J);return J}async#X(){return new Promise(($,J)=>{this.#Y.getConnection(async(Y,X)=>{if(Y)J(Y);else $(X)})})}async beginTransaction($,J){if(J.isolationLevel||J.accessMode){let Y=[];if(J.isolationLevel)Y.push(`isolation level ${J.isolationLevel}`);if(J.accessMode)Y.push(J.accessMode);let X=`set transaction ${Y.join(", ")}`;await $.executeQuery($6.raw(X))}await $.executeQuery($6.raw("begin"))}async commitTransaction($){await $.executeQuery($6.raw("commit"))}async rollbackTransaction($){await $.executeQuery($6.raw("rollback"))}async savepoint($,J,Y){await $.executeQuery(Y(pJ("savepoint",J),r$()))}async rollbackToSavepoint($,J,Y){await $.executeQuery(Y(pJ("rollback to",J),r$()))}async releaseSavepoint($,J,Y){await $.executeQuery(Y(pJ("release savepoint",J),r$()))}async releaseConnection($){$[dc]()}async destroy(){return new Promise(($,J)=>{this.#Y.end((Y)=>{if(Y)J(Y);else $()})})}}function UQ$($){return N4($)&&"insertId"in $&&"affectedRows"in $}var dc,cc;var gT=C(()=>{PV();c2();r();dJ();jV();dc=Symbol();cc=class cc{#$;constructor($){this.#$=$}async executeQuery($){try{let J=await this.#J($);if(UQ$(J)){let{insertId:Y,affectedRows:X,changedRows:W}=J;return{insertId:Y!==void 0&&Y!==null&&Y.toString()!=="0"?BigInt(Y):void 0,numAffectedRows:X!==void 0&&X!==null?BigInt(X):void 0,numChangedRows:W!==void 0&&W!==null?BigInt(W):void 0,rows:[]}}else if(Array.isArray(J))return{rows:J};return{rows:[]}}catch(J){throw p2(J,Error())}}#J($){return new Promise((J,Y)=>{this.#$.query($.sql,$.parameters,(X,W)=>{if(X)Y(X);else J(W)})})}async*streamQuery($,J){let Y=this.#$.query($.sql,$.parameters).stream({objectMode:!0});try{for await(let X of Y)yield{rows:[X]}}catch(X){if(X&&typeof X==="object"&&"code"in X&&X.code==="ERR_STREAM_PREMATURE_CLOSE")return;throw X}}[dc](){this.#$.release()}}});var FQ$,xT;var yT=C(()=>{X7();FQ$=/`/g;xT=class xT extends DJ{getCurrentParameterPlaceholder(){return"?"}getLeftExplainOptionsWrapper(){return""}getExplainOptionAssignment(){return"="}getExplainOptionsDelimiter(){return" "}getRightExplainOptionsWrapper(){return""}getLeftIdentifierWrapper(){return"`"}getRightIdentifierWrapper(){return"`"}sanitizeIdentifier($){return $.replace(FQ$,"``")}visitCreateIndex($){if(this.append("create "),$.unique)this.append("unique ");if(this.append("index "),$.ifNotExists)this.append("if not exists ");if(this.visitNode($.name),$.using)this.append(" using "),this.visitNode($.using);if($.table)this.append(" on "),this.visitNode($.table);if($.columns)this.append(" ("),this.compileList($.columns),this.append(")");if($.where)this.append(" "),this.visitNode($.where)}}});class hT{#$;constructor($){this.#$=$}async getSchemas(){return(await this.#$.selectFrom("information_schema.schemata").select("schema_name").$castTo().execute()).map((J)=>({name:J.SCHEMA_NAME}))}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("information_schema.columns as columns").innerJoin("information_schema.tables as tables",(X)=>X.onRef("columns.TABLE_CATALOG","=","tables.TABLE_CATALOG").onRef("columns.TABLE_SCHEMA","=","tables.TABLE_SCHEMA").onRef("columns.TABLE_NAME","=","tables.TABLE_NAME")).select(["columns.COLUMN_NAME","columns.COLUMN_DEFAULT","columns.TABLE_NAME","columns.TABLE_SCHEMA","tables.TABLE_TYPE","columns.IS_NULLABLE","columns.DATA_TYPE","columns.EXTRA","columns.COLUMN_COMMENT"]).where("columns.TABLE_SCHEMA","=",G0`database()`).orderBy("columns.TABLE_NAME").orderBy("columns.ORDINAL_POSITION").$castTo();if(!$.withInternalKyselyTables)J=J.where("columns.TABLE_NAME","!=",Q1).where("columns.TABLE_NAME","!=",v1);let Y=await J.execute();return this.#J(Y)}async getMetadata($){return{tables:await this.getTables($)}}#J($){return $.reduce((J,Y)=>{let X=J.find((W)=>W.name===Y.TABLE_NAME);if(!X)X=M({name:Y.TABLE_NAME,isView:Y.TABLE_TYPE==="VIEW",schema:Y.TABLE_SCHEMA,columns:[]}),J.push(X);return X.columns.push(M({name:Y.COLUMN_NAME,dataType:Y.DATA_TYPE,isNullable:Y.IS_NULLABLE==="YES",isAutoIncrementing:Y.EXTRA.toLowerCase().includes("auto_increment"),hasDefaultValue:Y.COLUMN_DEFAULT!==null,comment:Y.COLUMN_COMMENT===""?void 0:Y.COLUMN_COMMENT})),J},[])}}var mT=C(()=>{W7();r();z5()});var pc="ea586330-2c93-47c8-908d-981d9d270f9d",DQ$=3600,uT;var dT=C(()=>{z5();uT=class uT extends lW{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock($,J){await G0`select get_lock(${G0.lit(pc)}, ${G0.lit(DQ$)})`.execute($)}async releaseMigrationLock($,J){await G0`select release_lock(${G0.lit(pc)})`.execute($)}}});class EV{#$;constructor($){this.#$=$}createDriver(){return new fT(this.#$)}createQueryCompiler(){return new xT}createAdapter(){return new uT}createIntrospector($){return new hT($)}}var lc=C(()=>{gT();yT();mT();dT()});var nc=()=>{};class cT{#$;#J=new WeakMap;#Y;constructor($){this.#$=M({...$})}async init(){this.#Y=a0(this.#$.pool)?await this.#$.pool():this.#$.pool}async acquireConnection(){let $=await this.#Y.connect(),J=this.#J.get($);if(!J){if(J=new rc($,{cursor:this.#$.cursor??null}),this.#J.set($,J),this.#$.onCreateConnection)await this.#$.onCreateConnection(J)}if(this.#$.onReserveConnection)await this.#$.onReserveConnection(J);return J}async beginTransaction($,J){if(J.isolationLevel||J.accessMode){let Y="start transaction";if(J.isolationLevel)Y+=` isolation level ${J.isolationLevel}`;if(J.accessMode)Y+=` ${J.accessMode}`;await $.executeQuery($6.raw(Y))}else await $.executeQuery($6.raw("begin"))}async commitTransaction($){await $.executeQuery($6.raw("commit"))}async rollbackTransaction($){await $.executeQuery($6.raw("rollback"))}async savepoint($,J,Y){await $.executeQuery(Y(pJ("savepoint",J),r$()))}async rollbackToSavepoint($,J,Y){await $.executeQuery(Y(pJ("rollback to",J),r$()))}async releaseSavepoint($,J,Y){await $.executeQuery(Y(pJ("release",J),r$()))}async releaseConnection($){$[ic]()}async destroy(){if(this.#Y){let $=this.#Y;this.#Y=void 0,await $.end()}}}var ic,rc;var pT=C(()=>{PV();c2();r();dJ();jV();ic=Symbol();rc=class rc{#$;#J;constructor($,J){this.#$=$,this.#J=J}async executeQuery($){try{let{command:J,rowCount:Y,rows:X}=await this.#$.query($.sql,[...$.parameters]);return{numAffectedRows:J==="INSERT"||J==="UPDATE"||J==="DELETE"||J==="MERGE"?BigInt(Y):void 0,rows:X??[]}}catch(J){throw p2(J,Error())}}async*streamQuery($,J){if(!this.#J.cursor)throw Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(J)||J<=0)throw Error("chunkSize must be a positive integer");let Y=this.#$.query(new this.#J.cursor($.sql,$.parameters.slice()));try{while(!0){let X=await Y.read(J);if(X.length===0)break;yield{rows:X}}}finally{await Y.close()}}[ic](){this.#$.release()}}});var oc=()=>{};class CV{#$;constructor($){this.#$=$}createDriver(){return new cT(this.#$)}createQueryCompiler(){return new TT}createAdapter(){return new bT}createIntrospector($){return new IT($)}}var tc=C(()=>{pT();kT();RT();vT()});var lT;var nT=C(()=>{W7();z5();lT=class lT extends lW{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock($){await G0`exec sp_getapplock @DbPrincipal = ${G0.lit("dbo")}, @Resource = ${G0.lit(Q1)}, @LockMode = ${G0.lit("Exclusive")}`.execute($)}async releaseMigrationLock(){}}});var ac=()=>{};class iT{#$;#J;constructor($){this.#$=M({...$});let{tarn:J,tedious:Y,validateConnections:X}=this.#$,{validateConnections:W,...Z}=J.options;this.#J=new J.Pool({...Z,create:async()=>{let G=await Y.connectionFactory();return await new Jp(G,Y).connect()},destroy:async(G)=>{await G[ec]()},validate:X===!1||W===!1?void 0:(G)=>G[$p]()})}async init(){}async acquireConnection(){return await this.#J.acquire().promise}async beginTransaction($,J){await $.beginTransaction(J)}async commitTransaction($){await $.commitTransaction()}async rollbackTransaction($){await $.rollbackTransaction()}async savepoint($,J){await $.savepoint(J)}async rollbackToSavepoint($,J){await $.rollbackTransaction(J)}async releaseConnection($){if(this.#$.resetConnectionsOnRelease||this.#$.tedious.resetConnectionOnRelease)await $[sc]();this.#J.release($)}async destroy(){await this.#J.destroy()}}class TV{#$;#J;#Y;#X;#W;#Q;constructor($){let{compiledQuery:J,onDone:Y,streamChunkSize:X,tedious:W}=$;if(this.#J=[],this.#Y=X,this.#X={},this.#W=W,Y)this.#X.onDone=(G,Q)=>{if(G==="chunkReady")return;if(delete this.#X.onDone,G==="error")return Y.reject(Q);Y.resolve({rowCount:this.#Q,rows:this.#J})};this.#$=new this.#W.Request(J.sql,(Z,G)=>{if(Z)return Object.values(this.#X).forEach((Q)=>Q("error",Z instanceof AggregateError?Z.errors:Z));this.#Q=G}),this.#G(J.parameters),this.#Z()}get request(){return this.#$}readChunk(){let $=this.readChunk.name;return new Promise((J,Y)=>{this.#X[$]=(X,W)=>{if(delete this.#X[$],X==="error")return Y(W);J(this.#J.splice(0,this.#Y))},this.#$.resume()})}#G($){for(let J=0;J<$.length;J++){let Y=$[J];this.#$.addParameter(String(J+1),this.#H(Y),Y)}}#Z(){let $=this.#Y?()=>{if(this.#Y<=this.#J.length)this.#$.pause(),Object.values(this.#X).forEach((Y)=>Y("chunkReady"))}:()=>{},J=(Y)=>{let X={};for(let W of Y)X[W.metadata.colName]=W.value;this.#J.push(X),$()};this.#$.on("row",J),this.#$.once("requestCompleted",()=>{Object.values(this.#X).forEach((Y)=>Y("completed")),this.#$.off("row",J)})}#H($){if(l9($)||W1($)||t0($))return this.#W.TYPES.NVarChar;if(n9($)||fY($)&&$%1===0)if($<-2147483648||$>2147483647)return this.#W.TYPES.BigInt;else return this.#W.TYPES.Int;if(fY($))return this.#W.TYPES.Float;if(RW($))return this.#W.TYPES.Bit;if(Z2($))return this.#W.TYPES.DateTime;if(UM($))return this.#W.TYPES.VarBinary;return this.#W.TYPES.NVarChar}}var sc,ec,$p,Jp;var rT=C(()=>{r();c2();jV();$C();sc=Symbol(),ec=Symbol(),$p=Symbol();Jp=class Jp{#$;#J;#Y;constructor($,J){this.#$=$,this.#J=!1,this.#Y=J}async beginTransaction($){let{isolationLevel:J}=$;await new Promise((Y,X)=>this.#$.beginTransaction((W)=>{if(W)X(W);else Y(void 0)},J?dM(8):void 0,J?this.#X(J):void 0))}async commitTransaction(){await new Promise(($,J)=>this.#$.commitTransaction((Y)=>{if(Y)J(Y);else $(void 0)}))}async connect(){let{promise:$,reject:J,resolve:Y}=new X5;this.#$.connect((W)=>{if(W)return J(W);Y()}),this.#$.on("error",(W)=>{if(W instanceof Error&&"code"in W&&W.code==="ESOCKET")this.#J=!0;console.error(W),J(W)});function X(){J(Error("The connection ended without ever completing the connection"))}return this.#$.once("end",X),await $,this.#$.off("end",X),this}async executeQuery($){try{let J=new X5,Y=new TV({compiledQuery:$,tedious:this.#Y,onDone:J});this.#$.execSql(Y.request);let{rowCount:X,rows:W}=await J.promise;return{numAffectedRows:X!==void 0?BigInt(X):void 0,rows:W}}catch(J){throw p2(J,Error())}}async rollbackTransaction($){await new Promise((J,Y)=>this.#$.rollbackTransaction((X)=>{if(X)Y(X);else J(void 0)},$))}async savepoint($){await new Promise((J,Y)=>this.#$.saveTransaction((X)=>{if(X)Y(X);else J(void 0)},$))}async*streamQuery($,J){if(!Number.isInteger(J)||J<=0)throw Error("chunkSize must be a positive integer");let Y=new TV({compiledQuery:$,streamChunkSize:J,tedious:this.#Y});this.#$.execSql(Y.request);try{while(!0){let X=await Y.readChunk();if(X.length===0)break;if(yield{rows:X},X.length<J)break}}finally{await this.#W(Y)}}#X($){let{ISOLATION_LEVEL:J}=this.#Y,X={"read committed":J.READ_COMMITTED,"read uncommitted":J.READ_UNCOMMITTED,"repeatable read":J.REPEATABLE_READ,serializable:J.SERIALIZABLE,snapshot:J.SNAPSHOT}[$];if(X===void 0)throw Error(`Unknown isolation level: ${$}`);return X}#W($){return new Promise((J)=>{if($.request.once("requestCompleted",J),!this.#$.cancel())$.request.off("requestCompleted",J),J()})}[ec](){if("closed"in this.#$&&this.#$.closed)return Promise.resolve();return new Promise(($)=>{this.#$.once("end",$),this.#$.close()})}async[sc](){await new Promise(($,J)=>{this.#$.reset((Y)=>{if(Y)return J(Y);$()})})}async[$p](){if(this.#J||this.#Q())return!1;try{let $=new X5,J=new TV({compiledQuery:$6.raw("select 1"),onDone:$,tedious:this.#Y});return this.#$.execSql(J.request),await $.promise,!0}catch{return!1}}#Q(){return"closed"in this.#$&&Boolean(this.#$.closed)}}});class oT{#$;constructor($){this.#$=$}async getSchemas(){return await this.#$.selectFrom("sys.schemas").select("name").execute()}async getTables($={withInternalKyselyTables:!1}){let J=await this.#$.selectFrom("sys.tables as tables").leftJoin("sys.schemas as table_schemas","table_schemas.schema_id","tables.schema_id").innerJoin("sys.columns as columns","columns.object_id","tables.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(X)=>X.onRef("comments.major_id","=","tables.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).$if(!$.withInternalKyselyTables,(X)=>X.where("tables.name","!=",Q1).where("tables.name","!=",v1)).select(["tables.name as table_name",(X)=>X.ref("tables.type").$castTo().as("table_type"),"table_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"]).unionAll(this.#$.selectFrom("sys.views as views").leftJoin("sys.schemas as view_schemas","view_schemas.schema_id","views.schema_id").innerJoin("sys.columns as columns","columns.object_id","views.object_id").innerJoin("sys.types as types","types.user_type_id","columns.user_type_id").leftJoin("sys.schemas as type_schemas","type_schemas.schema_id","types.schema_id").leftJoin("sys.extended_properties as comments",(X)=>X.onRef("comments.major_id","=","views.object_id").onRef("comments.minor_id","=","columns.column_id").on("comments.name","=","MS_Description")).select(["views.name as table_name","views.type as table_type","view_schemas.name as table_schema_name","columns.default_object_id as column_default_object_id","columns.generated_always_type_desc as column_generated_always_type","columns.is_computed as column_is_computed","columns.is_identity as column_is_identity","columns.is_nullable as column_is_nullable","columns.is_rowguidcol as column_is_rowguidcol","columns.name as column_name","types.is_nullable as type_is_nullable","types.name as type_name","type_schemas.name as type_schema_name","comments.value as column_comment"])).orderBy("table_schema_name").orderBy("table_name").orderBy("column_name").execute(),Y={};for(let X of J){let W=`${X.table_schema_name}.${X.table_name}`;(Y[W]=Y[W]||M({columns:[],isView:X.table_type==="V ",name:X.table_name,schema:X.table_schema_name??void 0})).columns.push(M({dataType:X.type_name,dataTypeSchema:X.type_schema_name??void 0,hasDefaultValue:X.column_default_object_id>0||X.column_generated_always_type!=="NOT_APPLICABLE"||X.column_is_identity||X.column_is_computed||X.column_is_rowguidcol,isAutoIncrementing:X.column_is_identity,isNullable:X.column_is_nullable&&X.type_is_nullable,name:X.column_name,comment:X.column_comment??void 0}))}return Object.values(Y)}async getMetadata($){return{tables:await this.getTables($)}}}var tT=C(()=>{W7();r()});var MQ$,aT;var sT=C(()=>{X7();MQ$=/^[a-z0-9_]$/i;aT=class aT extends DJ{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset($){super.visitOffset($),this.append(" rows")}compileColumnAlterations($){let J={};for(let X of $){if(!J[X.kind])J[X.kind]=[];J[X.kind].push(X)}let Y=!0;if(J.AddColumnNode)this.append("add "),this.compileList(J.AddColumnNode),Y=!1;if(J.AlterColumnNode){if(!Y)this.append(", ");this.compileList(J.AlterColumnNode)}if(J.DropColumnNode){if(!Y)this.append(", ");this.append("drop column "),this.compileList(J.DropColumnNode)}if(J.ModifyColumnNode){if(!Y)this.append(", ");this.compileList(J.ModifyColumnNode)}if(J.RenameColumnNode){if(!Y)this.append(", ");this.compileList(J.RenameColumnNode)}}visitAddColumn($){this.visitNode($.column)}visitDropColumn($){this.visitNode($.column)}visitMergeQuery($){super.visitMergeQuery($),this.append(";")}visitCollate($){this.append("collate ");let{name:J}=$.collation;for(let Y of J)if(!MQ$.test(Y))throw Error(`Invalid collation: ${J}`);this.append(J)}announcesNewColumnDataType(){return!1}}});class eT{#$;constructor($){this.#$=$}createDriver(){return new iT(this.#$)}createQueryCompiler(){return new aT}createAdapter(){return new lT}createIntrospector($){return new oT($)}}var Yp=C(()=>{nT();rT();tT();sT()});var Xp=()=>{};class VQ${#$;constructor($){this.#$=$}async getMigrations(){let $={},J=await this.#$.fs.readdir(this.#$.migrationFolder);for(let Y of J)if(Y.endsWith(".js")||Y.endsWith(".ts")&&!Y.endsWith(".d.ts")||Y.endsWith(".mjs")||Y.endsWith(".mts")&&!Y.endsWith(".d.mts")){let X=await import(this.#$.path.join(this.#$.migrationFolder,Y)),W=Y.substring(0,Y.lastIndexOf("."));if(Wp(X?.default))$[W]=X.default;else if(Wp(X))$[W]=X}return $}}function Wp($){return N4($)&&a0($.up)}var Zp=C(()=>{r()});var Gp=()=>{};var $R;var Qp=C(()=>{tZ();$R=class $R extends rY{#$;constructor($){super();this.#$=$}transformIdentifier($,J){return $=super.transformIdentifier($,J),{...$,name:this.#$($.name)}}}});function zp({upperCase:$=!1,underscoreBeforeDigits:J=!1,underscoreBetweenUppercaseLetters:Y=!1}={}){return wp((X)=>{if(X.length===0)return X;let W=X.toUpperCase(),Z=X.toLowerCase(),G=Z[0];for(let Q=1,H=X.length;Q<H;++Q){let z=X[Q],K=X[Q-1],w=W[Q],F=W[Q-1],U=Z[Q],V=Z[Q-1];if(J&&Hp(z)&&!Hp(K)&&!G.endsWith("_")){G+="_"+z;continue}if(z===w&&w!==U)if(Y||!(K===F&&F!==V))G+="_"+U;else G+=U;else G+=z}if($)return G.toUpperCase();else return G})}function Kp({upperCase:$=!1}={}){return wp((J)=>{if(J.length===0)return J;if($&&NQ$(J))J=J.toLowerCase();let Y=J[0];for(let X=1,W=J.length;X<W;++X){let Z=J[X],G=J[X-1];if(Z!=="_")if(G==="_")Y+=Z.toUpperCase();else Y+=Z}return Y})}function NQ$($){for(let J=1,Y=$.length;J<Y;++J){let X=$[J];if(X!=="_"&&X!==X.toUpperCase())return!1}return!0}function Hp($){return $>="0"&&$<="9"}function wp($){let J=new Map;return(Y)=>{let X=J.get(Y);if(!X)X=$(Y),J.set(Y,X);return X}}class _Q${opt;#$;#J;#Y;constructor($={}){this.opt=$,this.#$=Kp($),this.#J=zp($),this.#Y=new $R(this.snakeCase.bind(this))}transformQuery($){return this.#Y.transformNode($.node,$.queryId)}async transformResult($){if($.result.rows&&Array.isArray($.result.rows))return{...$.result,rows:$.result.rows.map((J)=>this.mapRow(J))};return $.result}mapRow($){return Object.keys($).reduce((J,Y)=>{let X=$[Y];if(Array.isArray(X))X=X.map((W)=>Up(W,this.opt)?this.mapRow(W):W);else if(Up(X,this.opt))X=this.mapRow(X);return J[this.camelCase(Y)]=X,J},{})}snakeCase($){return this.#J($)}camelCase($){return this.#$($)}}function Up($,J){return FM($)&&!J?.maintainNestedObjectKeys}var Fp=C(()=>{r();Qp()});var JR;var Dp=C(()=>{tZ();r();JR=class JR extends rY{transformSelectQuery($,J){return this.#$(super.transformSelectQuery($,J))}transformUpdateQuery($,J){return this.#$(super.transformUpdateQuery($,J))}transformDeleteQuery($,J){return this.#$(super.transformDeleteQuery($,J))}#$($){if(!$.joins||$.joins.length===0)return $;return M({...$,joins:this.#J($.joins)})}#J($){let J=[];for(let Y=0;Y<$.length;++Y){let X=!1;for(let W=0;W<J.length;++W)if(DM($[Y],J[W])){X=!0;break}if(!X)J.push($[Y])}return M(J)}}});class LQ${#$=new JR;transformQuery($){return this.#$.transformNode($.node,$.queryId)}transformResult($){return Promise.resolve($.result)}}var Mp=C(()=>{Dp()});class qQ${opt;#$;constructor($={}){this.opt=$,this.#$=$.objectStrategy||"in-place"}transformQuery($){return $.node}async transformResult($){return{...$.result,rows:Vp($.result.rows,this.#$)}}}function Vp($,J){let Y=J==="create"?Array($.length):$;for(let X=0;X<$.length;++X)Y[X]=YR($[X],J);return Y}function YR($,J){if(t0($))return BQ$($);if(Array.isArray($))return Vp($,J);if(FM($))return PQ$($,J);return $}function BQ$($){if(OQ$($))try{return YR(JSON.parse($),"in-place")}catch(J){}return $}function OQ$($){return $.match(/^[\[\{]/)!=null}function PQ$($,J){let Y=J==="create"?{}:$;for(let X in $)Y[X]=YR($[X],J);return Y}var Np=C(()=>{r()});var XR;var _p=C(()=>{tZ();FK();bW();a9();XR=class XR extends rY{#$;constructor($){super();this.#$=$}transformBinaryOperation($){if(this.#J($))return this.#$($);return $}#J($){let{operator:J,rightOperand:Y}=$;return(D2.is(Y)||cY.is(Y))&&Y.values.length===0&&n8.is(J)&&(J.operator==="in"||J.operator==="not in")}}});class SQ${opt;#$;constructor($){this.opt=$,this.#$=new XR($.strategy)}transformQuery($){return this.#$.transformNode($.node,$.queryId)}async transformResult($){return $.result}}var Lp=C(()=>{_p()});var qp=C(()=>{zK();YV();JV();bW();a9();pY();r()});var Bp=()=>{};var Op=()=>{};var Pp=()=>{};var Sp=()=>{};var Ap=()=>{};var jp=()=>{};var Ep=()=>{};var l2=C(()=>{J5();w2();dJ();Oc();pM();BM();C2();Pc();Sc();Ac();jc();Ec();TK();nE();hM();rE();rZ();bE();eM();cE();MC();$V();qC();HC();ME();VT();z5();Rc();zT();j2();Ic();X7();c2();ZT();rC();JT();aC();YT();nC();oC();iC();tC();ZV();GV();pC();eC();WT();$T();hC();QT();wK();XV();UT();bc();vc();fc();gc();xc();mc();uc();qT();RT();kT();vT();lc();nc();gT();yT();mT();dT();pT();oc();tc();OT();jT();CT();nT();ac();Yp();rT();tT();sT();X7();Xp();W7();Zp();Gp();Fp();Mp();aZ();Np();Lp();qp();EC();QV();KV();aM();xY();yC();dZ();r9();zK();RK();YV();gK();DE();fK();i8();mE();aE();mM();Bp();MM();NM();G2();DV();nK();LV();JV();xE();vC();LK();TC();HV();GK();_M();LM();NV();UV();RE();UC();hK();NK();DC();bC();wC();AE();EE();_4();nZ();H2();CM();LC();UK();jM();SK();bM();YC();BK();xC();KC();yM();uE();KE();C1();tZ();_T();Op();bW();lE();cZ();AM();MK();kE();IM();M2();vE();PE();uK();FK();hJ();yJ();PM();xK();IC();dC();TE();IW();KK();zE();e9();fE();nM();Pp();Q2();pE();OC();VC();mK();N2();vM();a9();pY();gE();iZ();qK();eE();Sp();MT();Ap();jp();DT();Ep()});var Cp={};k4(Cp,{BunSqliteDialect:()=>IQ$});var AQ$=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},jQ$=class{#$;#J=new CQ$;#Y;#X;constructor($){this.#$={...$}}async init(){if(this.#Y=this.#$.database,this.#X=new EQ$(this.#Y),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#X)}async acquireConnection(){return await this.#J.lock(),this.#X}async beginTransaction($){await $.executeQuery($6.raw("begin"))}async commitTransaction($){await $.executeQuery($6.raw("commit"))}async rollbackTransaction($){await $.executeQuery($6.raw("rollback"))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#Y?.close()}},EQ$=class{#$;constructor($){this.#$=$}executeQuery($){let{sql:J,parameters:Y}=$,X=this.#$.prepare(J);return Promise.resolve({rows:X.all(Y)})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},CQ$=class{#$;#J;async lock(){while(await this.#$)await this.#$;this.#$=new Promise(($)=>{this.#J=$})}unlock(){let $=this.#J;this.#$=void 0,this.#J=void 0,$?.()}},TQ$=class{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!$.withInternalKyselyTables)J=J.where("name","!=",Q1).where("name","!=",v1);let Y=await J.execute();return Promise.all(Y.map(({name:X})=>this.#J(X)))}async getMetadata($){return{tables:await this.getTables($)}}async#J($){let J=this.#$,Y=(await J.selectFrom("sqlite_master").where("name","=",$).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((X)=>X.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:$,columns:(await J.selectFrom(G0`pragma_table_info(${$})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map((X)=>({name:X.name,dataType:X.type,isNullable:!X.notnull,isAutoIncrementing:X.name===Y,hasDefaultValue:X.dflt_value!=null})),isView:!0}}},RQ$,IQ$=class{#$;constructor($){this.#$={...$}}createDriver(){return new jQ$(this.#$)}createQueryCompiler(){return new RQ$}createAdapter(){return new AQ$}createIntrospector($){return new TQ$($)}};var Tp=C(()=>{l2();RQ$=class extends DJ{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});var Rp={};k4(Rp,{NodeSqliteDialect:()=>yQ$});var kQ$=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},bQ$=class{#$;#J=new fQ$;#Y;#X;constructor($){this.#$={...$}}async init(){if(this.#Y=this.#$.database,this.#X=new vQ$(this.#Y),this.#$.onCreateConnection)await this.#$.onCreateConnection(this.#X)}async acquireConnection(){return await this.#J.lock(),this.#X}async beginTransaction($){await $.executeQuery($6.raw("begin"))}async commitTransaction($){await $.executeQuery($6.raw("commit"))}async rollbackTransaction($){await $.executeQuery($6.raw("rollback"))}async releaseConnection(){this.#J.unlock()}async destroy(){this.#Y?.close()}},vQ$=class{#$;constructor($){this.#$=$}executeQuery($){let{sql:J,parameters:Y}=$,X=this.#$.prepare(J).all(...Y);return Promise.resolve({rows:X})}async*streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},fQ$=class{#$;#J;async lock(){while(await this.#$)await this.#$;this.#$=new Promise(($)=>{this.#J=$})}unlock(){let $=this.#J;this.#$=void 0,this.#J=void 0,$?.()}},gQ$=class{#$;constructor($){this.#$=$}async getSchemas(){return[]}async getTables($={withInternalKyselyTables:!1}){let J=this.#$.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();if(!$.withInternalKyselyTables)J=J.where("name","!=",Q1).where("name","!=",v1);let Y=await J.execute();return Promise.all(Y.map(({name:X})=>this.#J(X)))}async getMetadata($){return{tables:await this.getTables($)}}async#J($){let J=this.#$,Y=(await J.selectFrom("sqlite_master").where("name","=",$).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find((X)=>X.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:$,columns:(await J.selectFrom(G0`pragma_table_info(${$})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map((X)=>({name:X.name,dataType:X.type,isNullable:!X.notnull,isAutoIncrementing:X.name===Y,hasDefaultValue:X.dflt_value!=null})),isView:!0}}},xQ$,yQ$=class{#$;constructor($){this.#$={...$}}createDriver(){return new bQ$(this.#$)}createQueryCompiler(){return new xQ$}createAdapter(){return new kQ$}createIntrospector($){return new gQ$($)}};var Ip=C(()=>{l2();xQ$=class extends DJ{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}}});function n2($){if(!$)return null;if("dialect"in $)return n2($.dialect);if("createDriver"in $){if($ instanceof AV)return"sqlite";if($ instanceof EV)return"mysql";if($ instanceof CV)return"postgres";if($ instanceof eT)return"mssql"}if("aggregate"in $)return"sqlite";if("getConnection"in $)return"mysql";if("connect"in $)return"postgres";if("fileControl"in $)return"sqlite";if("open"in $&&"close"in $&&"prepare"in $)return"sqlite";return null}var RV=async($)=>{let J=$.database;if(!J)return{kysely:null,databaseType:null,transaction:void 0};if("db"in J)return{kysely:J.db,databaseType:J.type,transaction:J.transaction};if("dialect"in J)return{kysely:new xX({dialect:J.dialect}),databaseType:J.type,transaction:J.transaction};let Y=void 0,X=n2(J);if("createDriver"in J)Y=J;if("aggregate"in J&&!("createSession"in J))Y=new AV({database:J});if("getConnection"in J)Y=new EV(J);if("connect"in J)Y=new CV({pool:J});if("fileControl"in J){let{BunSqliteDialect:W}=await Promise.resolve().then(() => (Tp(),Cp));Y=new W({database:J})}if("createSession"in J){let W=void 0;try{({DatabaseSync:W}=await import("node:sqlite"))}catch(Z){if(Z!==null&&typeof Z==="object"&&"code"in Z&&Z.code!=="ERR_UNKNOWN_BUILTIN_MODULE")throw Z}if(W&&J instanceof W){let{NodeSqliteDialect:Z}=await Promise.resolve().then(() => (Ip(),Rp));Y=new Z({database:J})}}return{kysely:Y?new xX({dialect:Y}):null,databaseType:X,transaction:void 0}};var IV=C(()=>{l2()});var kp=($,J)=>{let Y=null,X=(G)=>{return({getFieldName:Q,schema:H,getDefaultFieldName:z,getDefaultModelName:K,getFieldAttributes:w,getModelName:F})=>{let U=(B)=>{let L=[],g=[];if(B)for(let[k,I]of Object.entries(B)){let O=H[K(k)]?.fields,[b,D]=k.includes(".")?k.split("."):[void 0,k];if(!O)continue;O.id={type:"string"};for(let[_,q]of Object.entries(O))L.push(G0`${G0.ref(`join_${D}`)}.${G0.ref(q.fieldName||_)} as ${G0.ref(`_joined_${D}_${q.fieldName||_}`)}`),g.push({joinModel:k,joinModelRef:D,fieldName:q.fieldName||_})}return{allSelectsStr:g,allSelects:L}},V=async(B,L,g,k)=>{let I;if(J?.type==="mysql"){await L.execute();let O=B.id?"id":k.length>0&&k[0]?.field?k[0].field:"id";if(!B.id&&k.length===0)return I=await G.selectFrom(g).selectAll().orderBy(Q({model:g,field:O}),"desc").limit(1).executeTakeFirst(),I;let b=B[O]||k[0]?.value;return I=await G.selectFrom(g).selectAll().orderBy(Q({model:g,field:O}),"desc").where(Q({model:g,field:O}),"=",b).limit(1).executeTakeFirst(),I}if(J?.type==="mssql")return I=await L.outputAll("inserted").executeTakeFirst(),I;return I=await L.returningAll().executeTakeFirst(),I};function N(B,L){if(!L)return{and:null,or:null};let g={and:[],or:[]};return L.forEach((k)=>{let{field:I,value:O,operator:b="=",connector:D="AND"}=k,_=O,q=Q({model:B,field:I}),S=(j)=>{let E=`${B}.${q}`;if(b.toLowerCase()==="in")return j(E,"in",Array.isArray(_)?_:[_]);if(b.toLowerCase()==="not_in")return j(E,"not in",Array.isArray(_)?_:[_]);if(b==="contains")return j(E,"like",`%${_}%`);if(b==="starts_with")return j(E,"like",`${_}%`);if(b==="ends_with")return j(E,"like",`%${_}`);if(b==="eq")return j(E,"=",_);if(b==="ne")return j(E,"<>",_);if(b==="gt")return j(E,">",_);if(b==="gte")return j(E,">=",_);if(b==="lt")return j(E,"<",_);if(b==="lte")return j(E,"<=",_);return j(E,b,_)};if(D==="OR")g.or.push(S);else g.and.push(S)}),{and:g.and.length?g.and:null,or:g.or.length?g.or:null}}function P(B,L,g){if(!L||!B.length)return B;let k=new Map;for(let O of B){let b={},D={};for(let[S]of Object.entries(L))D[F(S)]={};for(let[S,j]of Object.entries(O)){let E=String(S),T=!1;for(let{joinModel:R,fieldName:v,joinModelRef:h}of g)if(E===`_joined_${h}_${v}`){D[F(R)][Q({model:R,field:v})]=j,T=!0;break}if(!T)b[S]=j}let _=b.id;if(!_)continue;if(!k.has(_)){let S={...b};for(let[j,E]of Object.entries(L))S[F(j)]=E.relation==="one-to-one"?null:[];k.set(_,S)}let q=k.get(_);for(let[S,j]of Object.entries(L)){let E=j.relation==="one-to-one",T=j.limit??100,R=D[F(S)],v=R&&Object.keys(R).length>0&&Object.values(R).some((h)=>h!==null&&h!==void 0);if(E)q[F(S)]=v?R:null;else{let h=F(S);if(Array.isArray(q[h])&&v){if(q[h].length>=T)continue;let y=Q({model:S,field:"id"}),o=R[y];if(o){if(!q[h].some((G$)=>G$[y]===o)&&q[h].length<T)q[h].push(R)}else if(q[h].length<T)q[h].push(R)}}}}let I=Array.from(k.values());for(let O of I)for(let[b,D]of Object.entries(L))if(D.relation!=="one-to-one"){let _=F(b);if(Array.isArray(O[_])){let q=D.limit??100;if(O[_].length>q)O[_]=O[_].slice(0,q)}}return I}return{async create({data:B,model:L}){return await V(B,G.insertInto(L).values(B),L,[])},async findOne({model:B,where:L,select:g,join:k}){let{and:I,or:O}=N(B,L),b=G.selectFrom((j)=>{let E=j.selectFrom(B);if(I)E=E.where((T)=>T.and(I.map((R)=>R(T))));if(O)E=E.where((T)=>T.or(O.map((R)=>R(T))));return E.selectAll().as("primary")}).selectAll("primary");if(k)for(let[j,E]of Object.entries(k)){let[T,R]=j.includes(".")?j.split("."):[void 0,j];b=b.leftJoin(`${j} as join_${R}`,(v)=>v.onRef(`join_${R}.${E.on.to}`,"=",`primary.${E.on.from}`))}let{allSelectsStr:D,allSelects:_}=U(k);b=b.select(_);let q=await b.execute();if(!q||!Array.isArray(q)||q.length===0)return null;let S=q[0];if(k)return P(q,k,D)[0];return S},async findMany({model:B,where:L,limit:g,offset:k,sortBy:I,join:O}){let{and:b,or:D}=N(B,L),_=G.selectFrom((E)=>{let T=E.selectFrom(B);if(J?.type==="mssql"){if(k!==void 0){if(!I)T=T.orderBy(Q({model:B,field:"id"}));T=T.offset(k).fetch(g||100)}else if(g!==void 0)T=T.top(g)}else{if(g!==void 0)T=T.limit(g);if(k!==void 0)T=T.offset(k)}if(I?.field)T=T.orderBy(`${Q({model:B,field:I.field})}`,I.direction);if(b)T=T.where((R)=>R.and(b.map((v)=>v(R))));if(D)T=T.where((R)=>R.or(D.map((v)=>v(R))));return T.selectAll().as("primary")}).selectAll("primary");if(O)for(let[E,T]of Object.entries(O)){let[R,v]=E.includes(".")?E.split("."):[void 0,E];_=_.leftJoin(`${E} as join_${v}`,(h)=>h.onRef(`join_${v}.${T.on.to}`,"=",`primary.${T.on.from}`))}let{allSelectsStr:q,allSelects:S}=U(O);if(_=_.select(S),I?.field)_=_.orderBy(`${Q({model:B,field:I.field})}`,I.direction);let j=await _.execute();if(!j)return[];if(O)return P(j,O,q);return j},async update({model:B,where:L,update:g}){let{and:k,or:I}=N(B,L),O=G.updateTable(B).set(g);if(k)O=O.where((b)=>b.and(k.map((D)=>D(b))));if(I)O=O.where((b)=>b.or(I.map((D)=>D(b))));return await V(g,O,B,L)},async updateMany({model:B,where:L,update:g}){let{and:k,or:I}=N(B,L),O=G.updateTable(B).set(g);if(k)O=O.where((D)=>D.and(k.map((_)=>_(D))));if(I)O=O.where((D)=>D.or(I.map((_)=>_(D))));let b=(await O.executeTakeFirst()).numUpdatedRows;return b>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(b)},async count({model:B,where:L}){let{and:g,or:k}=N(B,L),I=G.selectFrom(B).select(G.fn.count("id").as("count"));if(g)I=I.where((b)=>b.and(g.map((D)=>D(b))));if(k)I=I.where((b)=>b.or(k.map((D)=>D(b))));let O=await I.execute();if(typeof O[0].count==="number")return O[0].count;if(typeof O[0].count==="bigint")return Number(O[0].count);return parseInt(O[0].count)},async delete({model:B,where:L}){let{and:g,or:k}=N(B,L),I=G.deleteFrom(B);if(g)I=I.where((O)=>O.and(g.map((b)=>b(O))));if(k)I=I.where((O)=>O.or(k.map((b)=>b(O))));await I.execute()},async deleteMany({model:B,where:L}){let{and:g,or:k}=N(B,L),I=G.deleteFrom(B);if(g)I=I.where((b)=>b.and(g.map((D)=>D(b))));if(k)I=I.where((b)=>b.or(k.map((D)=>D(b))));let O=(await I.executeTakeFirst()).numDeletedRows;return O>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number(O)},options:J}}},W=null;W={config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:J?.usePlural,debugLogs:J?.debugLogs,supportsBooleans:J?.type==="sqlite"||J?.type==="mssql"||J?.type==="mysql"||!J?.type?!1:!0,supportsDates:J?.type==="sqlite"||J?.type==="mssql"||!J?.type?!1:!0,supportsJSON:J?.type==="postgres"?!0:!1,supportsArrays:!1,supportsUUIDs:J?.type==="postgres"?!0:!1,transaction:J?.transaction?(G)=>$.transaction().execute((Q)=>{return G(TW({config:W.config,adapter:X(Q)})(Y))}):!1},adapter:X($)};let Z=TW(W);return(G)=>{return Y=G,Z(G)}};var bp=C(()=>{l2();WK()});var WR={};k4(WR,{kyselyAdapter:()=>kp,getKyselyDatabaseType:()=>n2,createKyselyAdapter:()=>RV});var ZR=C(()=>{IV();bp()});var rR=t$((mH$)=>{mH$.parse=function($,J){return new iR($,J).parse()};class iR{constructor($,J){this.source=$,this.transform=J||hH$,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var $=this.source[this.position++];if($==="\\")return{value:this.source[this.position++],escaped:!0};return{value:$,escaped:!1}}record($){this.recorded.push($)}newEntry($){var J;if(this.recorded.length>0||$){if(J=this.recorded.join(""),J==="NULL"&&!$)J=null;if(J!==null)J=this.transform(J);this.entries.push(J),this.recorded=[]}}consumeDimensions(){if(this.source[0]==="[")while(!this.isEof()){var $=this.nextCharacter();if($.value==="=")break}}parse($){var J,Y,X;this.consumeDimensions();while(!this.isEof())if(J=this.nextCharacter(),J.value==="{"&&!X){if(this.dimension++,this.dimension>1)Y=new iR(this.source.substr(this.position-1),this.transform),this.entries.push(Y.parse(!0)),this.position+=Y.position-2}else if(J.value==="}"&&!X){if(this.dimension--,!this.dimension){if(this.newEntry(),$)return this.entries}}else if(J.value==='"'&&!J.escaped){if(X)this.newEntry(!0);X=!X}else if(J.value===","&&!X)this.newEntry();else this.record(J.value);if(this.dimension!==0)throw Error("array dimension not balanced");return this.entries}}function hH$($){return $}});var oR=t$((VD0,nl)=>{var dH$=rR();nl.exports={create:function($,J){return{parse:function(){return dH$.parse($,J)}}}}});var ol=t$((ND0,rl)=>{var cH$=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,pH$=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,lH$=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,nH$=/^-?infinity$/;rl.exports=function(J){if(nH$.test(J))return Number(J.replace("i","I"));var Y=cH$.exec(J);if(!Y)return iH$(J)||null;var X=!!Y[8],W=parseInt(Y[1],10);if(X)W=il(W);var Z=parseInt(Y[2],10)-1,G=Y[3],Q=parseInt(Y[4],10),H=parseInt(Y[5],10),z=parseInt(Y[6],10),K=Y[7];K=K?1000*parseFloat(K):0;var w,F=rH$(J);if(F!=null){if(w=new Date(Date.UTC(W,Z,G,Q,H,z,K)),tR(W))w.setUTCFullYear(W);if(F!==0)w.setTime(w.getTime()-F)}else if(w=new Date(W,Z,G,Q,H,z,K),tR(W))w.setFullYear(W);return w};function iH$($){var J=pH$.exec($);if(!J)return;var Y=parseInt(J[1],10),X=!!J[4];if(X)Y=il(Y);var W=parseInt(J[2],10)-1,Z=J[3],G=new Date(Y,W,Z);if(tR(Y))G.setFullYear(Y);return G}function rH$($){if($.endsWith("+00"))return 0;var J=lH$.exec($.split(" ")[1]);if(!J)return;var Y=J[1];if(Y==="Z")return 0;var X=Y==="-"?-1:1,W=parseInt(J[2],10)*3600+parseInt(J[3]||0,10)*60+parseInt(J[4]||0,10);return W*X*1000}function il($){return-($-1)}function tR($){return $>=0&&$<100}});var al=t$((_D0,tl)=>{tl.exports=tH$;var oH$=Object.prototype.hasOwnProperty;function tH$($){for(var J=1;J<arguments.length;J++){var Y=arguments[J];for(var X in Y)if(oH$.call(Y,X))$[X]=Y[X]}return $}});var $n=t$((LD0,el)=>{var aH$=al();el.exports=o2;function o2($){if(!(this instanceof o2))return new o2($);aH$(this,zz$($))}var sH$=["seconds","minutes","hours","days","months","years"];o2.prototype.toPostgres=function(){var $=sH$.filter(this.hasOwnProperty,this);if(this.milliseconds&&$.indexOf("seconds")<0)$.push("seconds");if($.length===0)return"0";return $.map(function(J){var Y=this[J]||0;if(J==="seconds"&&this.milliseconds)Y=(Y+this.milliseconds/1000).toFixed(6).replace(/\.?0+$/,"");return Y+" "+J},this).join(" ")};var eH$={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},$z$=["years","months","days"],Jz$=["hours","minutes","seconds"];o2.prototype.toISOString=o2.prototype.toISO=function(){var $=$z$.map(Y,this).join(""),J=Jz$.map(Y,this).join("");return"P"+$+"T"+J;function Y(X){var W=this[X]||0;if(X==="seconds"&&this.milliseconds)W=(W+this.milliseconds/1000).toFixed(6).replace(/0+$/,"");return W+eH$[X]}};var aR="([+-]?\\d+)",Yz$=aR+"\\s+years?",Xz$=aR+"\\s+mons?",Wz$=aR+"\\s+days?",Zz$="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",Gz$=new RegExp([Yz$,Xz$,Wz$,Zz$].map(function($){return"("+$+")?"}).join("\\s*")),sl={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Qz$=["hours","minutes","seconds","milliseconds"];function Hz$($){var J=$+"000000".slice($.length);return parseInt(J,10)/1000}function zz$($){if(!$)return{};var J=Gz$.exec($),Y=J[8]==="-";return Object.keys(sl).reduce(function(X,W){var Z=sl[W],G=J[Z];if(!G)return X;if(G=W==="milliseconds"?Hz$(G):parseInt(G,10),!G)return X;if(Y&&~Qz$.indexOf(W))G*=-1;return X[W]=G,X},{})}});var Xn=t$((qD0,Yn)=>{var Jn=Buffer.from||Buffer;Yn.exports=function(J){if(/^\\x/.test(J))return Jn(J.substr(2),"hex");var Y="",X=0;while(X<J.length)if(J[X]!=="\\")Y+=J[X],++X;else if(/[0-7]{3}/.test(J.substr(X+1,3)))Y+=String.fromCharCode(parseInt(J.substr(X+1,3),8)),X+=4;else{var W=1;while(X+W<J.length&&J[X+W]==="\\")W++;for(var Z=0;Z<Math.floor(W/2);++Z)Y+="\\";X+=Math.floor(W/2)*2}return Jn(Y,"binary")}});var Kn=t$((BD0,zn)=>{var eK=rR(),$w=oR(),rV=ol(),Zn=$n(),Gn=Xn();function oV($){return function(Y){if(Y===null)return Y;return $(Y)}}function Qn($){if($===null)return $;return $==="TRUE"||$==="t"||$==="true"||$==="y"||$==="yes"||$==="on"||$==="1"}function Kz$($){if(!$)return null;return eK.parse($,Qn)}function wz$($){return parseInt($,10)}function sR($){if(!$)return null;return eK.parse($,oV(wz$))}function Uz$($){if(!$)return null;return eK.parse($,oV(function(J){return Hn(J).trim()}))}var Fz$=function($){if(!$)return null;var J=$w.create($,function(Y){if(Y!==null)Y=YI(Y);return Y});return J.parse()},eR=function($){if(!$)return null;var J=$w.create($,function(Y){if(Y!==null)Y=parseFloat(Y);return Y});return J.parse()},lJ=function($){if(!$)return null;var J=$w.create($);return J.parse()},$I=function($){if(!$)return null;var J=$w.create($,function(Y){if(Y!==null)Y=rV(Y);return Y});return J.parse()},Dz$=function($){if(!$)return null;var J=$w.create($,function(Y){if(Y!==null)Y=Zn(Y);return Y});return J.parse()},Mz$=function($){if(!$)return null;return eK.parse($,oV(Gn))},JI=function($){return parseInt($,10)},Hn=function($){var J=String($);if(/^\d+$/.test(J))return J;return $},Wn=function($){if(!$)return null;return eK.parse($,oV(JSON.parse))},YI=function($){if($[0]!=="(")return null;return $=$.substring(1,$.length-1).split(","),{x:parseFloat($[0]),y:parseFloat($[1])}},Vz$=function($){if($[0]!=="<"&&$[1]!=="(")return null;var J="(",Y="",X=!1;for(var W=2;W<$.length-1;W++){if(!X)J+=$[W];if($[W]===")"){X=!0;continue}else if(!X)continue;if($[W]===",")continue;Y+=$[W]}var Z=YI(J);return Z.radius=parseFloat(Y),Z},Nz$=function($){$(20,Hn),$(21,JI),$(23,JI),$(26,JI),$(700,parseFloat),$(701,parseFloat),$(16,Qn),$(1082,rV),$(1114,rV),$(1184,rV),$(600,YI),$(651,lJ),$(718,Vz$),$(1000,Kz$),$(1001,Mz$),$(1005,sR),$(1007,sR),$(1028,sR),$(1016,Uz$),$(1017,Fz$),$(1021,eR),$(1022,eR),$(1231,eR),$(1014,lJ),$(1015,lJ),$(1008,lJ),$(1009,lJ),$(1040,lJ),$(1041,lJ),$(1115,$I),$(1182,$I),$(1185,$I),$(1186,Zn),$(1187,Dz$),$(17,Gn),$(114,JSON.parse.bind(JSON)),$(3802,JSON.parse.bind(JSON)),$(199,Wn),$(3807,Wn),$(3907,lJ),$(2951,lJ),$(791,lJ),$(1183,lJ),$(1270,lJ)};zn.exports={init:Nz$}});var Un=t$((OD0,wn)=>{var f1=1e6;function _z$($){var J=$.readInt32BE(0),Y=$.readUInt32BE(4),X="";if(J<0)J=~J+(Y===0),Y=~Y+1>>>0,X="-";var W="",Z,G,Q,H,z,K;{if(Z=J%f1,J=J/f1>>>0,G=4294967296*Z+Y,Y=G/f1>>>0,Q=""+(G-f1*Y),Y===0&&J===0)return X+Q+W;H="",z=6-Q.length;for(K=0;K<z;K++)H+="0";W=H+Q+W}{if(Z=J%f1,J=J/f1>>>0,G=4294967296*Z+Y,Y=G/f1>>>0,Q=""+(G-f1*Y),Y===0&&J===0)return X+Q+W;H="",z=6-Q.length;for(K=0;K<z;K++)H+="0";W=H+Q+W}{if(Z=J%f1,J=J/f1>>>0,G=4294967296*Z+Y,Y=G/f1>>>0,Q=""+(G-f1*Y),Y===0&&J===0)return X+Q+W;H="",z=6-Q.length;for(K=0;K<z;K++)H+="0";W=H+Q+W}return Z=J%f1,G=4294967296*Z+Y,Q=""+G%f1,X+Q+W}wn.exports=_z$});var Nn=t$((PD0,Vn)=>{var Lz$=Un(),D6=function($,J,Y,X,W){Y=Y||0,X=X||!1,W=W||function(U,V,N){return U*Math.pow(2,N)+V};var Z=Y>>3,G=function(U){if(X)return~U&255;return U},Q=255,H=8-Y%8;if(J<H)Q=255<<8-J&255,H=J;if(Y)Q=Q>>Y%8;var z=0;if(Y%8+J>=8)z=W(0,G($[Z])&Q,H);var K=J+Y>>3;for(var w=Z+1;w<K;w++)z=W(z,G($[w]),8);var F=(J+Y)%8;if(F>0)z=W(z,G($[K])>>8-F,F);return z},Mn=function($,J,Y){var X=Math.pow(2,Y-1)-1,W=D6($,1),Z=D6($,Y,1);if(Z===0)return 0;var G=1,Q=function(z,K,w){if(z===0)z=1;for(var F=1;F<=w;F++)if(G/=2,(K&1<<w-F)>0)z+=G;return z},H=D6($,J,Y+1,!1,Q);if(Z==Math.pow(2,Y+1)-1){if(H===0)return W===0?1/0:-1/0;return NaN}return(W===0?1:-1)*Math.pow(2,Z-X)*H},qz$=function($){if(D6($,1)==1)return-1*(D6($,15,1,!0)+1);return D6($,15,1)},Fn=function($){if(D6($,1)==1)return-1*(D6($,31,1,!0)+1);return D6($,31,1)},Bz$=function($){return Mn($,23,8)},Oz$=function($){return Mn($,52,11)},Pz$=function($){var J=D6($,16,32);if(J==49152)return NaN;var Y=Math.pow(1e4,D6($,16,16)),X=0,W=[],Z=D6($,16);for(var G=0;G<Z;G++)X+=D6($,16,64+16*G)*Y,Y/=1e4;var Q=Math.pow(10,D6($,16,48));return(J===0?1:-1)*Math.round(X*Q)/Q},Dn=function($,J){var Y=D6(J,1),X=D6(J,63,1),W=new Date((Y===0?1:-1)*X/1000+946684800000);if(!$)W.setTime(W.getTime()+W.getTimezoneOffset()*60000);return W.usec=X%1000,W.getMicroSeconds=function(){return this.usec},W.setMicroSeconds=function(Z){this.usec=Z},W.getUTCMicroSeconds=function(){return this.usec},W},Jw=function($){var J=D6($,32),Y=D6($,32,32),X=D6($,32,64),W=96,Z=[];for(var G=0;G<J;G++)Z[G]=D6($,32,W),W+=32,W+=32;var Q=function(z){var K=D6($,32,W);if(W+=32,K==4294967295)return null;var w;if(z==23||z==20)return w=D6($,K*8,W),W+=K*8,w;else if(z==25)return w=$.toString(this.encoding,W>>3,(W+=K<<3)>>3),w;else console.log("ERROR: ElementType not implemented: "+z)},H=function(z,K){var w=[],F;if(z.length>1){var U=z.shift();for(F=0;F<U;F++)w[F]=H(z,K);z.unshift(U)}else for(F=0;F<z[0];F++)w[F]=Q(K);return w};return H(Z,X)},Sz$=function($){return $.toString("utf8")},Az$=function($){if($===null)return null;return D6($,8)>0},jz$=function($){$(20,Lz$),$(21,qz$),$(23,Fn),$(26,Fn),$(1700,Pz$),$(700,Bz$),$(701,Oz$),$(16,Az$),$(1114,Dn.bind(null,!1)),$(1184,Dn.bind(null,!0)),$(1000,Jw),$(1007,Jw),$(1016,Jw),$(1008,Jw),$(1009,Jw),$(25,Sz$)};Vn.exports={init:jz$}});var Ln=t$((SD0,_n)=>{_n.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Xw=t$((bz$)=>{var Ez$=Kn(),Cz$=Nn(),Tz$=oR(),Rz$=Ln();bz$.getTypeParser=Iz$;bz$.setTypeParser=kz$;bz$.arrayParser=Tz$;bz$.builtins=Rz$;var Yw={text:{},binary:{}};function qn($){return String($)}function Iz$($,J){if(J=J||"text",!Yw[J])return qn;return Yw[J][$]||qn}function kz$($,J,Y){if(typeof J=="function")Y=J,J="text";Yw[J][$]=Y}Ez$.init(function($,J){Yw.text[$]=J});Cz$.init(function($,J){Yw.binary[$]=J})});var Ww=t$((jD0,XI)=>{var Bn;try{Bn=process.platform==="win32"?process.env.USERNAME:process.env.USER}catch{}XI.exports={host:"localhost",user:Bn,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:30000,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t2=Xw(),yz$=t2.getTypeParser(20,"text"),hz$=t2.getTypeParser(1016,"text");XI.exports.__defineSetter__("parseInt8",function($){t2.setTypeParser(20,"text",$?t2.getTypeParser(23,"text"):yz$),t2.setTypeParser(1016,"text",$?t2.getTypeParser(1007,"text"):hz$)})});var a2=t$((ED0,Sn)=>{var mz$=Ww(),On=$4("util"),{isDate:uz$}=On.types||On;function dz$($){return'"'+$.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")+'"'}function Pn($){let J="{";for(let Y=0;Y<$.length;Y++){if(Y>0)J=J+",";if($[Y]===null||typeof $[Y]>"u")J=J+"NULL";else if(Array.isArray($[Y]))J=J+Pn($[Y]);else if(ArrayBuffer.isView($[Y])){let X=$[Y];if(!(X instanceof Buffer)){let W=Buffer.from(X.buffer,X.byteOffset,X.byteLength);if(W.length===X.byteLength)X=W;else X=W.slice(X.byteOffset,X.byteOffset+X.byteLength)}J+="\\\\x"+X.toString("hex")}else J+=dz$(tV($[Y]))}return J=J+"}",J}var tV=function($,J){if($==null)return null;if(typeof $==="object"){if($ instanceof Buffer)return $;if(ArrayBuffer.isView($)){let Y=Buffer.from($.buffer,$.byteOffset,$.byteLength);if(Y.length===$.byteLength)return Y;return Y.slice($.byteOffset,$.byteOffset+$.byteLength)}if(uz$($))if(mz$.parseInputDatesAsUTC)return lz$($);else return pz$($);if(Array.isArray($))return Pn($);return cz$($,J)}return $.toString()};function cz$($,J){if($&&typeof $.toPostgres==="function"){if(J=J||[],J.indexOf($)!==-1)throw Error('circular reference detected while preparing "'+$+'" for query');return J.push($),tV($.toPostgres(tV),J)}return JSON.stringify($)}function pz$($){let J=-$.getTimezoneOffset(),Y=$.getFullYear(),X=Y<1;if(X)Y=Math.abs(Y)+1;let W=String(Y).padStart(4,"0")+"-"+String($.getMonth()+1).padStart(2,"0")+"-"+String($.getDate()).padStart(2,"0")+"T"+String($.getHours()).padStart(2,"0")+":"+String($.getMinutes()).padStart(2,"0")+":"+String($.getSeconds()).padStart(2,"0")+"."+String($.getMilliseconds()).padStart(3,"0");if(J<0)W+="-",J*=-1;else W+="+";if(W+=String(Math.floor(J/60)).padStart(2,"0")+":"+String(J%60).padStart(2,"0"),X)W+=" BC";return W}function lz$($){let J=$.getUTCFullYear(),Y=J<1;if(Y)J=Math.abs(J)+1;let X=String(J).padStart(4,"0")+"-"+String($.getUTCMonth()+1).padStart(2,"0")+"-"+String($.getUTCDate()).padStart(2,"0")+"T"+String($.getUTCHours()).padStart(2,"0")+":"+String($.getUTCMinutes()).padStart(2,"0")+":"+String($.getUTCSeconds()).padStart(2,"0")+"."+String($.getUTCMilliseconds()).padStart(3,"0");if(X+="+00:00",Y)X+=" BC";return X}function nz$($,J,Y){if($=typeof $==="string"?{text:$}:$,J)if(typeof J==="function")$.callback=J;else $.values=J;if(Y)$.callback=Y;return $}var iz$=function($){return'"'+$.replace(/"/g,'""')+'"'},rz$=function($){let J=!1,Y="'";if($==null)return"''";if(typeof $!=="string")return"''";for(let X=0;X<$.length;X++){let W=$[X];if(W==="'")Y+=W+W;else if(W==="\\")Y+=W+W,J=!0;else Y+=W}if(Y+="'",J===!0)Y=" E"+Y;return Y};Sn.exports={prepareValue:function(J){return tV(J)},normalizeQueryConfig:nz$,escapeIdentifier:iz$,escapeLiteral:rz$}});var jn=t$((CD0,An)=>{var s2=$4("crypto");function WI($){return s2.createHash("md5").update($,"utf-8").digest("hex")}function oz$($,J,Y){let X=WI(J+$);return"md5"+WI(Buffer.concat([Buffer.from(X),Y]))}function tz$($){return s2.createHash("sha256").update($).digest()}function az$($,J){return $=$.replace(/(\D)-/,"$1"),s2.createHash($).update(J).digest()}function sz$($,J){return s2.createHmac("sha256",$).update(J).digest()}async function ez$($,J,Y){return s2.pbkdf2Sync($,J,Y,32,"sha256")}An.exports={postgresMd5PasswordHash:oz$,randomBytes:s2.randomBytes,deriveKey:ez$,sha256:tz$,hashByName:az$,hmacSha256:sz$,md5:WI}});var Rn=t$((TD0,Tn)=>{var En=$4("crypto");Tn.exports={postgresMd5PasswordHash:JK$,randomBytes:$K$,deriveKey:ZK$,sha256:YK$,hashByName:XK$,hmacSha256:WK$,md5:ZI};var Cn=En.webcrypto||globalThis.crypto,w7=Cn.subtle,GI=new TextEncoder;function $K$($){return Cn.getRandomValues(Buffer.alloc($))}async function ZI($){try{return En.createHash("md5").update($,"utf-8").digest("hex")}catch(J){let Y=typeof $==="string"?GI.encode($):$,X=await w7.digest("MD5",Y);return Array.from(new Uint8Array(X)).map((W)=>W.toString(16).padStart(2,"0")).join("")}}async function JK$($,J,Y){let X=await ZI(J+$);return"md5"+await ZI(Buffer.concat([Buffer.from(X),Y]))}async function YK$($){return await w7.digest("SHA-256",$)}async function XK$($,J){return await w7.digest($,J)}async function WK$($,J){let Y=await w7.importKey("raw",$,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await w7.sign("HMAC",Y,GI.encode(J))}async function ZK$($,J,Y){let X=await w7.importKey("raw",GI.encode($),"PBKDF2",!1,["deriveBits"]),W={name:"PBKDF2",hash:"SHA-256",salt:J,iterations:Y};return await w7.deriveBits(W,X,256,["deriveBits"])}});var HI=t$((RD0,QI)=>{var GK$=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;if(GK$)QI.exports=jn();else QI.exports=Rn()});var bn=t$((ID0,kn)=>{function U7($,J){return Error("SASL channel binding: "+$+" when parsing public certificate "+J.toString("base64"))}function zI($,J){let Y=$[J++];if(Y<128)return{length:Y,index:J};let X=Y&127;if(X>4)throw U7("bad length",$);Y=0;for(let W=0;W<X;W++)Y=Y<<8|$[J++];return{length:Y,index:J}}function In($,J){if($[J++]!==6)throw U7("non-OID data",$);let{length:Y,index:X}=zI($,J);J=X;let W=J+Y,Z=$[J++],G=(Z/40>>0)+"."+Z%40;while(J<W){let Q=0;while(J<W){let H=$[J++];if(Q=Q<<7|H&127,H<128)break}G+="."+Q}return{oid:G,index:J}}function Zw($,J){if($[J++]!==48)throw U7("non-sequence data",$);return zI($,J)}function QK$($,J){if(J===void 0)J=0;J=Zw($,J).index;let{length:Y,index:X}=Zw($,J);J=X+Y,J=Zw($,J).index;let{oid:W,index:Z}=In($,J);switch(W){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(J=Z,J=Zw($,J).index,$[J++]!==160)throw U7("non-tag data",$);J=zI($,J).index,J=Zw($,J).index;let{oid:G}=In($,J);switch(G){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw U7("unknown hash OID "+G,$)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw U7("Ed448 certificate channel binding is not currently supported by Postgres")}throw U7("unknown OID "+W,$)}kn.exports={signatureAlgorithmHashFromCertificate:QK$}});var xn=t$((kD0,gn)=>{var U5=HI(),{signatureAlgorithmHashFromCertificate:HK$}=bn();function zK$($,J){let Y=["SCRAM-SHA-256"];if(J)Y.unshift("SCRAM-SHA-256-PLUS");let X=Y.find((G)=>$.includes(G));if(!X)throw Error("SASL: Only mechanism(s) "+Y.join(" and ")+" are supported");if(X==="SCRAM-SHA-256-PLUS"&&typeof J.getPeerCertificate!=="function")throw Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let W=U5.randomBytes(18).toString("base64");return{mechanism:X,clientNonce:W,response:(X==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":J?"y":"n")+",,n=*,r="+W,message:"SASLInitialResponse"}}async function KK$($,J,Y,X){if($.message!=="SASLInitialResponse")throw Error("SASL: Last message was not SASLInitialResponse");if(typeof J!=="string")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(J==="")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof Y!=="string")throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let W=FK$(Y);if(!W.nonce.startsWith($.clientNonce))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");else if(W.nonce.length===$.clientNonce.length)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let Z="n=*,r="+$.clientNonce,G="r="+W.nonce+",s="+W.salt+",i="+W.iteration,Q=X?"eSws":"biws";if($.mechanism==="SCRAM-SHA-256-PLUS"){let L=X.getPeerCertificate().raw,g=HK$(L);if(g==="MD5"||g==="SHA-1")g="SHA-256";let k=await U5.hashByName(g,L);Q=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(k)]).toString("base64")}let H="c="+Q+",r="+W.nonce,z=Z+","+G+","+H,K=Buffer.from(W.salt,"base64"),w=await U5.deriveKey(J,K,W.iteration),F=await U5.hmacSha256(w,"Client Key"),U=await U5.sha256(F),V=await U5.hmacSha256(U,z),N=MK$(Buffer.from(F),Buffer.from(V)).toString("base64"),P=await U5.hmacSha256(w,"Server Key"),B=await U5.hmacSha256(P,z);$.message="SASLResponse",$.serverSignature=Buffer.from(B).toString("base64"),$.response=H+",p="+N}function wK$($,J){if($.message!=="SASLResponse")throw Error("SASL: Last message was not SASLResponse");if(typeof J!=="string")throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:Y}=DK$(J);if(Y!==$.serverSignature)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function UK$($){if(typeof $!=="string")throw TypeError("SASL: text must be a string");return $.split("").map((J,Y)=>$.charCodeAt(Y)).every((J)=>J>=33&&J<=43||J>=45&&J<=126)}function vn($){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test($)}function fn($){if(typeof $!=="string")throw TypeError("SASL: attribute pairs text must be a string");return new Map($.split(",").map((J)=>{if(!/^.=/.test(J))throw Error("SASL: Invalid attribute pair entry");let Y=J[0],X=J.substring(2);return[Y,X]}))}function FK$($){let J=fn($),Y=J.get("r");if(!Y)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");else if(!UK$(Y))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters");let X=J.get("s");if(!X)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");else if(!vn(X))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64");let W=J.get("i");if(!W)throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");else if(!/^[1-9][0-9]*$/.test(W))throw Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count");let Z=parseInt(W,10);return{nonce:Y,salt:X,iteration:Z}}function DK$($){let Y=fn($).get("v");if(!Y)throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");else if(!vn(Y))throw Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64");return{serverSignature:Y}}function MK$($,J){if(!Buffer.isBuffer($))throw TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(J))throw TypeError("second argument must be a Buffer");if($.length!==J.length)throw Error("Buffer lengths must match");if($.length===0)throw Error("Buffers cannot be empty");return Buffer.from($.map((Y,X)=>$[X]^J[X]))}gn.exports={startSession:zK$,continueSession:KK$,finalizeSession:wK$}});var sV=t$((bD0,yn)=>{var VK$=Xw();function aV($){this._types=$||VK$,this.text={},this.binary={}}aV.prototype.getOverrides=function($){switch($){case"text":return this.text;case"binary":return this.binary;default:return{}}};aV.prototype.setTypeParser=function($,J,Y){if(typeof J==="function")Y=J,J="text";this.getOverrides(J)[$]=Y};aV.prototype.getTypeParser=function($,J){return J=J||"text",this.getOverrides(J)[$]||this._types.getTypeParser($,J)};yn.exports=aV});var un=t$((vD0,mn)=>{function e2($,J={}){if($.charAt(0)==="/"){let H=$.split(" ");return{host:H[0],database:H[1]}}let Y={},X,W=!1;if(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test($))$=encodeURI($).replace(/%25(\d\d)/g,"%$1");try{try{X=new URL($,"postgres://base")}catch(H){X=new URL($.replace("@/","@___DUMMY___/"),"postgres://base"),W=!0}}catch(H){throw H.input&&(H.input="*****REDACTED*****"),H}for(let H of X.searchParams.entries())Y[H[0]]=H[1];if(Y.user=Y.user||decodeURIComponent(X.username),Y.password=Y.password||decodeURIComponent(X.password),X.protocol=="socket:")return Y.host=decodeURI(X.pathname),Y.database=X.searchParams.get("db"),Y.client_encoding=X.searchParams.get("encoding"),Y;let Z=W?"":X.hostname;if(!Y.host)Y.host=decodeURIComponent(Z);else if(Z&&/^%2f/i.test(Z))X.pathname=Z+X.pathname;if(!Y.port)Y.port=X.port;let G=X.pathname.slice(1)||null;if(Y.database=G?decodeURI(G):null,Y.ssl==="true"||Y.ssl==="1")Y.ssl=!0;if(Y.ssl==="0")Y.ssl=!1;if(Y.sslcert||Y.sslkey||Y.sslrootcert||Y.sslmode)Y.ssl={};let Q=Y.sslcert||Y.sslkey||Y.sslrootcert?$4("fs"):null;if(Y.sslcert)Y.ssl.cert=Q.readFileSync(Y.sslcert).toString();if(Y.sslkey)Y.ssl.key=Q.readFileSync(Y.sslkey).toString();if(Y.sslrootcert)Y.ssl.ca=Q.readFileSync(Y.sslrootcert).toString();if(J.useLibpqCompat&&Y.uselibpqcompat)throw Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(Y.uselibpqcompat==="true"||J.useLibpqCompat)switch(Y.sslmode){case"disable":{Y.ssl=!1;break}case"prefer":{Y.ssl.rejectUnauthorized=!1;break}case"require":{if(Y.sslrootcert)Y.ssl.checkServerIdentity=function(){};else Y.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!Y.ssl.ca)throw Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");Y.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(Y.sslmode){case"disable":{Y.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":{if(Y.sslmode!=="verify-full")KI(Y.sslmode);break}case"no-verify":{Y.ssl.rejectUnauthorized=!1;break}}return Y}function NK$($){return Object.entries($).reduce((Y,[X,W])=>{if(W!==void 0&&W!==null)Y[X]=W;return Y},{})}function hn($){return Object.entries($).reduce((Y,[X,W])=>{if(X==="ssl"){let Z=W;if(typeof Z==="boolean")Y[X]=Z;if(typeof Z==="object")Y[X]=NK$(Z)}else if(W!==void 0&&W!==null)if(X==="port"){if(W!==""){let Z=parseInt(W,10);if(isNaN(Z))throw Error(`Invalid ${X}: ${W}`);Y[X]=Z}}else Y[X]=W;return Y},{})}function _K$($){return hn(e2($))}function KI($){if(!KI.warned&&typeof process<"u"&&process.emitWarning)KI.warned=!0,process.emitWarning(`SECURITY WARNING: The SSL modes 'prefer', 'require', and 'verify-ca' are treated as aliases for 'verify-full'.
In the next major version (pg-connection-string v3.0.0 and pg v9.0.0), these modes will adopt standard libpq semantics, which have weaker security guarantees.

To prepare for this change:
- If you want the current behavior, explicitly use 'sslmode=verify-full'
- If you want libpq compatibility now, use 'uselibpqcompat=true&sslmode=${$}'

See https://www.postgresql.org/docs/current/libpq-ssl.html for libpq SSL mode definitions.`)}mn.exports=e2;e2.parse=e2;e2.toClientConfig=hn;e2.parseIntoClientConfig=_K$});var wI=t$((fD0,ln)=>{var LK$=$4("dns"),cn=Ww(),dn=un().parse,H1=function($,J,Y){if(J[$])return J[$];if(Y===void 0)Y=process.env["PG"+$.toUpperCase()];else if(Y===!1);else Y=process.env[Y];return Y||cn[$]},qK$=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return cn.ssl},$Q=function($){return"'"+(""+$).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},nJ=function($,J,Y){let X=J[Y];if(X!==void 0&&X!==null)$.push(Y+"="+$Q(X))};class pn{constructor($){if($=typeof $==="string"?dn($):$||{},$.connectionString)$=Object.assign({},$,dn($.connectionString));if(this.user=H1("user",$),this.database=H1("database",$),this.database===void 0)this.database=this.user;if(this.port=parseInt(H1("port",$),10),this.host=H1("host",$),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:H1("password",$)}),this.binary=H1("binary",$),this.options=H1("options",$),this.ssl=typeof $.ssl>"u"?qK$():$.ssl,typeof this.ssl==="string"){if(this.ssl==="true")this.ssl=!0}if(this.ssl==="no-verify")this.ssl={rejectUnauthorized:!1};if(this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});if(this.client_encoding=H1("client_encoding",$),this.replication=H1("replication",$),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=H1("application_name",$,"PGAPPNAME"),this.fallback_application_name=H1("fallback_application_name",$,!1),this.statement_timeout=H1("statement_timeout",$,!1),this.lock_timeout=H1("lock_timeout",$,!1),this.idle_in_transaction_session_timeout=H1("idle_in_transaction_session_timeout",$,!1),this.query_timeout=H1("query_timeout",$,!1),$.connectionTimeoutMillis===void 0)this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0;else this.connect_timeout=Math.floor($.connectionTimeoutMillis/1000);if($.keepAlive===!1)this.keepalives=0;else if($.keepAlive===!0)this.keepalives=1;if(typeof $.keepAliveInitialDelayMillis==="number")this.keepalives_idle=Math.floor($.keepAliveInitialDelayMillis/1000)}getLibpqConnectionString($){let J=[];nJ(J,this,"user"),nJ(J,this,"password"),nJ(J,this,"port"),nJ(J,this,"application_name"),nJ(J,this,"fallback_application_name"),nJ(J,this,"connect_timeout"),nJ(J,this,"options");let Y=typeof this.ssl==="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(nJ(J,Y,"sslmode"),nJ(J,Y,"sslca"),nJ(J,Y,"sslkey"),nJ(J,Y,"sslcert"),nJ(J,Y,"sslrootcert"),this.database)J.push("dbname="+$Q(this.database));if(this.replication)J.push("replication="+$Q(this.replication));if(this.host)J.push("host="+$Q(this.host));if(this.isDomainSocket)return $(null,J.join(" "));if(this.client_encoding)J.push("client_encoding="+$Q(this.client_encoding));LK$.lookup(this.host,function(X,W){if(X)return $(X,null);return J.push("hostaddr="+$Q(W)),$(null,J.join(" "))})}}ln.exports=pn});var UI=t$((gD0,on)=>{var BK$=Xw(),nn=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;class rn{constructor($,J){if(this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=J,this.RowCtor=null,this.rowAsArray=$==="array",this.rowAsArray)this.parseRow=this._parseRowAsArray;this._prebuiltEmptyResultObject=null}addCommandComplete($){let J;if($.text)J=nn.exec($.text);else J=nn.exec($.command);if(J){if(this.command=J[1],J[3])this.oid=parseInt(J[2],10),this.rowCount=parseInt(J[3],10);else if(J[2])this.rowCount=parseInt(J[2],10)}}_parseRowAsArray($){let J=Array($.length);for(let Y=0,X=$.length;Y<X;Y++){let W=$[Y];if(W!==null)J[Y]=this._parsers[Y](W);else J[Y]=null}return J}parseRow($){let J={...this._prebuiltEmptyResultObject};for(let Y=0,X=$.length;Y<X;Y++){let W=$[Y],Z=this.fields[Y].name;if(W!==null){let G=this.fields[Y].format==="binary"?Buffer.from(W):W;J[Z]=this._parsers[Y](G)}else J[Z]=null}return J}addRow($){this.rows.push($)}addFields($){if(this.fields=$,this.fields.length)this._parsers=Array($.length);let J={};for(let Y=0;Y<$.length;Y++){let X=$[Y];if(J[X.name]=null,this._types)this._parsers[Y]=this._types.getTypeParser(X.dataTypeID,X.format||"text");else this._parsers[Y]=BK$.getTypeParser(X.dataTypeID,X.format||"text")}this._prebuiltEmptyResultObject={...J}}}on.exports=rn});var $i=t$((xD0,en)=>{var{EventEmitter:OK$}=$4("events"),tn=UI(),an=a2();class sn extends OK${constructor($,J,Y){super();if($=an.normalizeQueryConfig($,J,Y),this.text=$.text,this.values=$.values,this.rows=$.rows,this.types=$.types,this.name=$.name,this.queryMode=$.queryMode,this.binary=$.binary,this.portal=$.portal||"",this.callback=$.callback,this._rowMode=$.rowMode,process.domain&&$.callback)this.callback=process.domain.bind($.callback);this._result=new tn(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){if(this.queryMode==="extended")return!0;if(this.name)return!0;if(this.rows)return!0;if(!this.text)return!1;if(!this.values)return!1;return this.values.length>0}_checkForMultirow(){if(this._result.command){if(!Array.isArray(this._results))this._results=[this._result];this._result=new tn(this._rowMode,this._result._types),this._results.push(this._result)}}handleRowDescription($){this._checkForMultirow(),this._result.addFields($.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow($){let J;if(this._canceledDueToError)return;try{J=this._result.parseRow($.fields)}catch(Y){this._canceledDueToError=Y;return}if(this.emit("row",J,this._result),this._accumulateRows)this._result.addRow(J)}handleCommandComplete($,J){if(this._checkForMultirow(),this._result.addCommandComplete($),this.rows)J.sync()}handleEmptyQuery($){if(this.rows)$.sync()}handleError($,J){if(this._canceledDueToError)$=this._canceledDueToError,this._canceledDueToError=!1;if(this.callback)return this.callback($);this.emit("error",$)}handleReadyForQuery($){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,$);if(this.callback)try{this.callback(null,this._results)}catch(J){process.nextTick(()=>{throw J})}this.emit("end",this._results)}submit($){if(typeof this.text!=="string"&&typeof this.name!=="string")return Error("A query must have either text or a name. Supplying neither is unsupported.");let J=$.parsedStatements[this.name];if(this.text&&J&&this.text!==J)return Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return Error("Query values must be an array");if(this.requiresPreparation()){$.stream.cork&&$.stream.cork();try{this.prepare($)}finally{$.stream.uncork&&$.stream.uncork()}}else $.query(this.text);return null}hasBeenParsed($){return this.name&&$.parsedStatements[this.name]}handlePortalSuspended($){this._getRows($,this.rows)}_getRows($,J){if($.execute({portal:this.portal,rows:J}),!J)$.sync();else $.flush()}prepare($){if(!this.hasBeenParsed($))$.parse({text:this.text,name:this.name,types:this.types});try{$.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:an.prepareValue})}catch(J){this.handleError(J,$);return}$.describe({type:"P",name:this.portal||""}),this._getRows($,this.rows)}handleCopyInResponse($){$.sendCopyFail("No source stream defined")}handleCopyData($,J){}}en.exports=sn});var FI=t$((Mi)=>{Object.defineProperty(Mi,"__esModule",{value:!0});Mi.NoticeMessage=Mi.DataRowMessage=Mi.CommandCompleteMessage=Mi.ReadyForQueryMessage=Mi.NotificationResponseMessage=Mi.BackendKeyDataMessage=Mi.AuthenticationMD5Password=Mi.ParameterStatusMessage=Mi.ParameterDescriptionMessage=Mi.RowDescriptionMessage=Mi.Field=Mi.CopyResponse=Mi.CopyDataMessage=Mi.DatabaseError=Mi.copyDone=Mi.emptyQuery=Mi.replicationStart=Mi.portalSuspended=Mi.noData=Mi.closeComplete=Mi.bindComplete=Mi.parseComplete=void 0;Mi.parseComplete={name:"parseComplete",length:5};Mi.bindComplete={name:"bindComplete",length:5};Mi.closeComplete={name:"closeComplete",length:5};Mi.noData={name:"noData",length:5};Mi.portalSuspended={name:"portalSuspended",length:5};Mi.replicationStart={name:"replicationStart",length:4};Mi.emptyQuery={name:"emptyQuery",length:4};Mi.copyDone={name:"copyDone",length:4};class Ji extends Error{constructor($,J,Y){super($);this.length=J,this.name=Y}}Mi.DatabaseError=Ji;class Yi{constructor($,J){this.length=$,this.chunk=J,this.name="copyData"}}Mi.CopyDataMessage=Yi;class Xi{constructor($,J,Y,X){this.length=$,this.name=J,this.binary=Y,this.columnTypes=Array(X)}}Mi.CopyResponse=Xi;class Wi{constructor($,J,Y,X,W,Z,G){this.name=$,this.tableID=J,this.columnID=Y,this.dataTypeID=X,this.dataTypeSize=W,this.dataTypeModifier=Z,this.format=G}}Mi.Field=Wi;class Zi{constructor($,J){this.length=$,this.fieldCount=J,this.name="rowDescription",this.fields=Array(this.fieldCount)}}Mi.RowDescriptionMessage=Zi;class Gi{constructor($,J){this.length=$,this.parameterCount=J,this.name="parameterDescription",this.dataTypeIDs=Array(this.parameterCount)}}Mi.ParameterDescriptionMessage=Gi;class Qi{constructor($,J,Y){this.length=$,this.parameterName=J,this.parameterValue=Y,this.name="parameterStatus"}}Mi.ParameterStatusMessage=Qi;class Hi{constructor($,J){this.length=$,this.salt=J,this.name="authenticationMD5Password"}}Mi.AuthenticationMD5Password=Hi;class zi{constructor($,J,Y){this.length=$,this.processID=J,this.secretKey=Y,this.name="backendKeyData"}}Mi.BackendKeyDataMessage=zi;class Ki{constructor($,J,Y,X){this.length=$,this.processId=J,this.channel=Y,this.payload=X,this.name="notification"}}Mi.NotificationResponseMessage=Ki;class wi{constructor($,J){this.length=$,this.status=J,this.name="readyForQuery"}}Mi.ReadyForQueryMessage=wi;class Ui{constructor($,J){this.length=$,this.text=J,this.name="commandComplete"}}Mi.CommandCompleteMessage=Ui;class Fi{constructor($,J){this.length=$,this.fields=J,this.name="dataRow",this.fieldCount=J.length}}Mi.DataRowMessage=Fi;class Di{constructor($,J){this.length=$,this.message=J,this.name="notice"}}Mi.NoticeMessage=Di});var qi=t$((_i)=>{Object.defineProperty(_i,"__esModule",{value:!0});_i.Writer=void 0;class Ni{constructor($=256){this.size=$,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe($)}ensure($){if(this.buffer.length-this.offset<$){let Y=this.buffer,X=Y.length+(Y.length>>1)+$;this.buffer=Buffer.allocUnsafe(X),Y.copy(this.buffer)}}addInt32($){return this.ensure(4),this.buffer[this.offset++]=$>>>24&255,this.buffer[this.offset++]=$>>>16&255,this.buffer[this.offset++]=$>>>8&255,this.buffer[this.offset++]=$>>>0&255,this}addInt16($){return this.ensure(2),this.buffer[this.offset++]=$>>>8&255,this.buffer[this.offset++]=$>>>0&255,this}addCString($){if(!$)this.ensure(1);else{let J=Buffer.byteLength($);this.ensure(J+1),this.buffer.write($,this.offset,"utf-8"),this.offset+=J}return this.buffer[this.offset++]=0,this}addString($=""){let J=Buffer.byteLength($);return this.ensure(J),this.buffer.write($,this.offset),this.offset+=J,this}add($){return this.ensure($.length),$.copy(this.buffer,this.offset),this.offset+=$.length,this}join($){if($){this.buffer[this.headerPosition]=$;let J=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(J,this.headerPosition+1)}return this.buffer.slice($?0:5,this.offset)}flush($){let J=this.join($);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),J}}_i.Writer=Ni});var Si=t$((Oi)=>{Object.defineProperty(Oi,"__esModule",{value:!0});Oi.serialize=void 0;var DI=qi(),J6=new DI.Writer,pK$=($)=>{J6.addInt16(3).addInt16(0);for(let X of Object.keys($))J6.addCString(X).addCString($[X]);J6.addCString("client_encoding").addCString("UTF8");let J=J6.addCString("").flush(),Y=J.length+4;return new DI.Writer().addInt32(Y).add(J).flush()},lK$=()=>{let $=Buffer.allocUnsafe(8);return $.writeInt32BE(8,0),$.writeInt32BE(80877103,4),$},nK$=($)=>{return J6.addCString($).flush(112)},iK$=function($,J){return J6.addCString($).addInt32(Buffer.byteLength(J)).addString(J),J6.flush(112)},rK$=function($){return J6.addString($).flush(112)},oK$=($)=>{return J6.addCString($).flush(81)},Bi=[],tK$=($)=>{let J=$.name||"";if(J.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",J,J.length),console.error("This can cause conflicts and silent errors executing queries");let Y=$.types||Bi,X=Y.length,W=J6.addCString(J).addCString($.text).addInt16(X);for(let Z=0;Z<X;Z++)W.addInt32(Y[Z]);return J6.flush(80)},JQ=new DI.Writer,aK$=function($,J){for(let Y=0;Y<$.length;Y++){let X=J?J($[Y],Y):$[Y];if(X==null)J6.addInt16(0),JQ.addInt32(-1);else if(X instanceof Buffer)J6.addInt16(1),JQ.addInt32(X.length),JQ.add(X);else J6.addInt16(0),JQ.addInt32(Buffer.byteLength(X)),JQ.addString(X)}},sK$=($={})=>{let J=$.portal||"",Y=$.statement||"",X=$.binary||!1,W=$.values||Bi,Z=W.length;return J6.addCString(J).addCString(Y),J6.addInt16(Z),aK$(W,$.valueMapper),J6.addInt16(Z),J6.add(JQ.flush()),J6.addInt16(1),J6.addInt16(X?1:0),J6.flush(66)},eK$=Buffer.from([69,0,0,0,9,0,0,0,0,0]),$w$=($)=>{if(!$||!$.portal&&!$.rows)return eK$;let J=$.portal||"",Y=$.rows||0,X=Buffer.byteLength(J),W=4+X+1+4,Z=Buffer.allocUnsafe(1+W);return Z[0]=69,Z.writeInt32BE(W,1),Z.write(J,5,"utf-8"),Z[X+5]=0,Z.writeUInt32BE(Y,Z.length-4),Z},Jw$=($,J)=>{let Y=Buffer.allocUnsafe(16);return Y.writeInt32BE(16,0),Y.writeInt16BE(1234,4),Y.writeInt16BE(5678,6),Y.writeInt32BE($,8),Y.writeInt32BE(J,12),Y},MI=($,J)=>{let X=4+Buffer.byteLength(J)+1,W=Buffer.allocUnsafe(1+X);return W[0]=$,W.writeInt32BE(X,1),W.write(J,5,"utf-8"),W[X]=0,W},Yw$=J6.addCString("P").flush(68),Xw$=J6.addCString("S").flush(68),Ww$=($)=>{return $.name?MI(68,`${$.type}${$.name||""}`):$.type==="P"?Yw$:Xw$},Zw$=($)=>{let J=`${$.type}${$.name||""}`;return MI(67,J)},Gw$=($)=>{return J6.add($).flush(100)},Qw$=($)=>{return MI(102,$)},eV=($)=>Buffer.from([$,0,0,0,4]),Hw$=eV(72),zw$=eV(83),Kw$=eV(88),ww$=eV(99),Uw$={startup:pK$,password:nK$,requestSsl:lK$,sendSASLInitialResponseMessage:iK$,sendSCRAMClientFinalMessage:rK$,query:oK$,parse:tK$,bind:sK$,execute:$w$,describe:Ww$,close:Zw$,flush:()=>Hw$,sync:()=>zw$,end:()=>Kw$,copyData:Gw$,copyDone:()=>ww$,copyFail:Qw$,cancel:Jw$};Oi.serialize=Uw$});var Ci=t$((ji)=>{Object.defineProperty(ji,"__esModule",{value:!0});ji.BufferReader=void 0;var Fw$=Buffer.allocUnsafe(0);class Ai{constructor($=0){this.offset=$,this.buffer=Fw$,this.encoding="utf-8"}setBuffer($,J){this.offset=$,this.buffer=J}int16(){let $=this.buffer.readInt16BE(this.offset);return this.offset+=2,$}byte(){let $=this.buffer[this.offset];return this.offset++,$}int32(){let $=this.buffer.readInt32BE(this.offset);return this.offset+=4,$}uint32(){let $=this.buffer.readUInt32BE(this.offset);return this.offset+=4,$}string($){let J=this.buffer.toString(this.encoding,this.offset,this.offset+$);return this.offset+=$,J}cstring(){let $=this.offset,J=$;while(this.buffer[J++]!==0);return this.offset=J,this.buffer.toString(this.encoding,$,J-1)}bytes($){let J=this.buffer.slice(this.offset,this.offset+$);return this.offset+=$,J}}ji.BufferReader=Ai});var fi=t$((bi)=>{Object.defineProperty(bi,"__esModule",{value:!0});bi.Parser=void 0;var M6=FI(),Dw$=Ci(),NI=1,Mw$=4,Ti=NI+Mw$,VJ=-1,VI=Buffer.allocUnsafe(0);class Ii{constructor($){if(this.buffer=VI,this.bufferLength=0,this.bufferOffset=0,this.reader=new Dw$.BufferReader,($===null||$===void 0?void 0:$.mode)==="binary")throw Error("Binary mode not supported yet");this.mode=($===null||$===void 0?void 0:$.mode)||"text"}parse($,J){this.mergeBuffer($);let Y=this.bufferOffset+this.bufferLength,X=this.bufferOffset;while(X+Ti<=Y){let W=this.buffer[X],Z=this.buffer.readUInt32BE(X+NI),G=NI+Z;if(G+X<=Y){let Q=this.handlePacket(X+Ti,W,Z,this.buffer);J(Q),X+=G}else break}if(X===Y)this.buffer=VI,this.bufferLength=0,this.bufferOffset=0;else this.bufferLength=Y-X,this.bufferOffset=X}mergeBuffer($){if(this.bufferLength>0){let J=this.bufferLength+$.byteLength;if(J+this.bufferOffset>this.buffer.byteLength){let X;if(J<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)X=this.buffer;else{let W=this.buffer.byteLength*2;while(J>=W)W*=2;X=Buffer.allocUnsafe(W)}this.buffer.copy(X,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=X,this.bufferOffset=0}$.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=J}else this.buffer=$,this.bufferOffset=0,this.bufferLength=$.byteLength}handlePacket($,J,Y,X){let{reader:W}=this;W.setBuffer($,X);let Z;switch(J){case 50:Z=M6.bindComplete;break;case 49:Z=M6.parseComplete;break;case 51:Z=M6.closeComplete;break;case 110:Z=M6.noData;break;case 115:Z=M6.portalSuspended;break;case 99:Z=M6.copyDone;break;case 87:Z=M6.replicationStart;break;case 73:Z=M6.emptyQuery;break;case 68:Z=Aw$(W);break;case 67:Z=Nw$(W);break;case 90:Z=Vw$(W);break;case 65:Z=Bw$(W);break;case 82:Z=Cw$(W,Y);break;case 83:Z=jw$(W);break;case 75:Z=Ew$(W);break;case 69:Z=Ri(W,"error");break;case 78:Z=Ri(W,"notice");break;case 84:Z=Ow$(W);break;case 116:Z=Sw$(W);break;case 71:Z=Lw$(W);break;case 72:Z=qw$(W);break;case 100:Z=_w$(W,Y);break;default:return new M6.DatabaseError("received invalid response: "+J.toString(16),Y,"error")}return W.setBuffer(0,VI),Z.length=Y,Z}}bi.Parser=Ii;var Vw$=($)=>{let J=$.string(1);return new M6.ReadyForQueryMessage(VJ,J)},Nw$=($)=>{let J=$.cstring();return new M6.CommandCompleteMessage(VJ,J)},_w$=($,J)=>{let Y=$.bytes(J-4);return new M6.CopyDataMessage(VJ,Y)},Lw$=($)=>ki($,"copyInResponse"),qw$=($)=>ki($,"copyOutResponse"),ki=($,J)=>{let Y=$.byte()!==0,X=$.int16(),W=new M6.CopyResponse(VJ,J,Y,X);for(let Z=0;Z<X;Z++)W.columnTypes[Z]=$.int16();return W},Bw$=($)=>{let J=$.int32(),Y=$.cstring(),X=$.cstring();return new M6.NotificationResponseMessage(VJ,J,Y,X)},Ow$=($)=>{let J=$.int16(),Y=new M6.RowDescriptionMessage(VJ,J);for(let X=0;X<J;X++)Y.fields[X]=Pw$($);return Y},Pw$=($)=>{let J=$.cstring(),Y=$.uint32(),X=$.int16(),W=$.uint32(),Z=$.int16(),G=$.int32(),Q=$.int16()===0?"text":"binary";return new M6.Field(J,Y,X,W,Z,G,Q)},Sw$=($)=>{let J=$.int16(),Y=new M6.ParameterDescriptionMessage(VJ,J);for(let X=0;X<J;X++)Y.dataTypeIDs[X]=$.int32();return Y},Aw$=($)=>{let J=$.int16(),Y=Array(J);for(let X=0;X<J;X++){let W=$.int32();Y[X]=W===-1?null:$.string(W)}return new M6.DataRowMessage(VJ,Y)},jw$=($)=>{let J=$.cstring(),Y=$.cstring();return new M6.ParameterStatusMessage(VJ,J,Y)},Ew$=($)=>{let J=$.int32(),Y=$.int32();return new M6.BackendKeyDataMessage(VJ,J,Y)},Cw$=($,J)=>{let Y=$.int32(),X={name:"authenticationOk",length:J};switch(Y){case 0:break;case 3:if(X.length===8)X.name="authenticationCleartextPassword";break;case 5:if(X.length===12){X.name="authenticationMD5Password";let W=$.bytes(4);return new M6.AuthenticationMD5Password(VJ,W)}break;case 10:{X.name="authenticationSASL",X.mechanisms=[];let W;do if(W=$.cstring(),W)X.mechanisms.push(W);while(W)}break;case 11:X.name="authenticationSASLContinue",X.data=$.string(J-8);break;case 12:X.name="authenticationSASLFinal",X.data=$.string(J-8);break;default:throw Error("Unknown authenticationOk message type "+Y)}return X},Ri=($,J)=>{let Y={},X=$.string(1);while(X!=="\x00")Y[X]=$.cstring(),X=$.string(1);let W=Y.M,Z=J==="notice"?new M6.NoticeMessage(VJ,W):new M6.DatabaseError(W,VJ,J);return Z.severity=Y.S,Z.code=Y.C,Z.detail=Y.D,Z.hint=Y.H,Z.position=Y.P,Z.internalPosition=Y.p,Z.internalQuery=Y.q,Z.where=Y.W,Z.schema=Y.s,Z.table=Y.t,Z.column=Y.c,Z.dataType=Y.d,Z.constraint=Y.n,Z.file=Y.F,Z.line=Y.L,Z.routine=Y.R,Z}});var _I=t$(($N)=>{Object.defineProperty($N,"__esModule",{value:!0});$N.DatabaseError=$N.serialize=$N.parse=void 0;var Tw$=FI();Object.defineProperty($N,"DatabaseError",{enumerable:!0,get:function(){return Tw$.DatabaseError}});var Rw$=Si();Object.defineProperty($N,"serialize",{enumerable:!0,get:function(){return Rw$.serialize}});var Iw$=fi();function kw$($,J){let Y=new Iw$.Parser;return $.on("data",(X)=>Y.parse(X,J)),new Promise((X)=>$.on("end",()=>X()))}$N.parse=kw$});var xi=t$((gi)=>{Object.defineProperty(gi,"__esModule",{value:!0});gi.default={}});var hi=t$((nD0,yi)=>{var{getStream:gw$,getSecureStream:xw$}=uw$();yi.exports={getStream:gw$,getSecureStream:xw$};function yw$(){function $(Y){return new($4("net")).Socket}function J(Y){return $4("tls").connect(Y)}return{getStream:$,getSecureStream:J}}function hw$(){function $(Y){let{CloudflareSocket:X}=xi();return new X(Y)}function J(Y){return Y.socket.startTls(Y),Y.socket}return{getStream:$,getSecureStream:J}}function mw$(){if(typeof navigator==="object"&&navigator!==null&&typeof navigator.userAgent==="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response==="function"){let $=new Response(null,{cf:{thing:!0}});if(typeof $.cf==="object"&&$.cf!==null&&$.cf.thing)return!0}return!1}function uw$(){if(mw$())return hw$();return yw$()}});var LI=t$((iD0,ui)=>{var dw$=$4("events").EventEmitter,{parse:cw$,serialize:F8}=_I(),{getStream:pw$,getSecureStream:lw$}=hi(),nw$=F8.flush(),iw$=F8.sync(),rw$=F8.end();class mi extends dw${constructor($){super();if($=$||{},this.stream=$.stream||pw$($.ssl),typeof this.stream==="function")this.stream=this.stream($);this._keepAlive=$.keepAlive,this._keepAliveInitialDelayMillis=$.keepAliveInitialDelayMillis,this.parsedStatements={},this.ssl=$.ssl||!1,this._ending=!1,this._emitMessage=!1;let J=this;this.on("newListener",function(Y){if(Y==="message")J._emitMessage=!0})}connect($,J){let Y=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect($,J),this.stream.once("connect",function(){if(Y._keepAlive)Y.stream.setKeepAlive(!0,Y._keepAliveInitialDelayMillis);Y.emit("connect")});let X=function(W){if(Y._ending&&(W.code==="ECONNRESET"||W.code==="EPIPE"))return;Y.emit("error",W)};if(this.stream.on("error",X),this.stream.on("close",function(){Y.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(W){switch(W.toString("utf8")){case"S":break;case"N":return Y.stream.end(),Y.emit("error",Error("The server does not support SSL connections"));default:return Y.stream.end(),Y.emit("error",Error("There was an error establishing an SSL connection"))}let G={socket:Y.stream};if(Y.ssl!==!0){if(Object.assign(G,Y.ssl),"key"in Y.ssl)G.key=Y.ssl.key}let Q=$4("net");if(Q.isIP&&Q.isIP(J)===0)G.servername=J;try{Y.stream=lw$(G)}catch(H){return Y.emit("error",H)}Y.attachListeners(Y.stream),Y.stream.on("error",X),Y.emit("sslconnect")})}attachListeners($){cw$($,(J)=>{let Y=J.name==="error"?"errorMessage":J.name;if(this._emitMessage)this.emit("message",J);this.emit(Y,J)})}requestSsl(){this.stream.write(F8.requestSsl())}startup($){this.stream.write(F8.startup($))}cancel($,J){this._send(F8.cancel($,J))}password($){this._send(F8.password($))}sendSASLInitialResponseMessage($,J){this._send(F8.sendSASLInitialResponseMessage($,J))}sendSCRAMClientFinalMessage($){this._send(F8.sendSCRAMClientFinalMessage($))}_send($){if(!this.stream.writable)return!1;return this.stream.write($)}query($){this._send(F8.query($))}parse($){this._send(F8.parse($))}bind($){this._send(F8.bind($))}execute($){this._send(F8.execute($))}flush(){if(this.stream.writable)this.stream.write(nw$)}sync(){this._ending=!0,this._send(iw$)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(rw$,()=>{this.stream.end()})}close($){this._send(F8.close($))}describe($){this._send(F8.describe($))}sendCopyFromChunk($){this._send(F8.copyData($))}endCopyFrom(){this._send(F8.copyDone())}sendCopyFail($){this._send(F8.copyFail($))}}ui.exports=mi});var li=t$((rD0,pi)=>{var{Transform:ow$}=$4("stream"),{StringDecoder:tw$}=$4("string_decoder"),F5=Symbol("last"),JN=Symbol("decoder");function aw$($,J,Y){let X;if(this.overflow){if(X=this[JN].write($).split(this.matcher),X.length===1)return Y();X.shift(),this.overflow=!1}else this[F5]+=this[JN].write($),X=this[F5].split(this.matcher);this[F5]=X.pop();for(let W=0;W<X.length;W++)try{ci(this,this.mapper(X[W]))}catch(Z){return Y(Z)}if(this.overflow=this[F5].length>this.maxLength,this.overflow&&!this.skipOverflow){Y(Error("maximum buffer reached"));return}Y()}function sw$($){if(this[F5]+=this[JN].end(),this[F5])try{ci(this,this.mapper(this[F5]))}catch(J){return $(J)}$()}function ci($,J){if(J!==void 0)$.push(J)}function di($){return $}function ew$($,J,Y){switch($=$||/\r?\n/,J=J||di,Y=Y||{},arguments.length){case 1:if(typeof $==="function")J=$,$=/\r?\n/;else if(typeof $==="object"&&!($ instanceof RegExp)&&!$[Symbol.split])Y=$,$=/\r?\n/;break;case 2:if(typeof $==="function")Y=J,J=$,$=/\r?\n/;else if(typeof J==="object")Y=J,J=di}Y=Object.assign({},Y),Y.autoDestroy=!0,Y.transform=aw$,Y.flush=sw$,Y.readableObjectMode=!0;let X=new ow$(Y);return X[F5]="",X[JN]=new tw$("utf8"),X.matcher=$,X.mapper=J,X.maxLength=Y.maxLength,X.skipOverflow=Y.skipOverflow||!1,X.overflow=!1,X._destroy=function(W,Z){this._writableState.errorEmitted=!1,Z(W)},X}pi.exports=ew$});var ri=t$((U3$,nW)=>{var ni=$4("path"),$3$=$4("stream").Stream,J3$=li(),ii=$4("util"),Y3$=5432,YN=process.platform==="win32",Gw=process.stderr,X3$=56,W3$=7,Z3$=61440,G3$=32768;function Q3$($){return($&Z3$)==G3$}var YQ=["host","port","database","user","password"],qI=YQ.length,H3$=YQ[qI-1];function BI(){var $=Gw instanceof $3$&&Gw.writable===!0;if($){var J=Array.prototype.slice.call(arguments).concat(`
`);Gw.write(ii.format.apply(ii,J))}}Object.defineProperty(U3$,"isWin",{get:function(){return YN},set:function($){YN=$}});U3$.warnTo=function($){var J=Gw;return Gw=$,J};U3$.getFileName=function($){var J=$||process.env,Y=J.PGPASSFILE||(YN?ni.join(J.APPDATA||"./","postgresql","pgpass.conf"):ni.join(J.HOME||"./",".pgpass"));return Y};U3$.usePgPass=function($,J){if(Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD"))return!1;if(YN)return!0;if(J=J||"<unkn>",!Q3$($.mode))return BI('WARNING: password file "%s" is not a plain file',J),!1;if($.mode&(X3$|W3$))return BI('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',J),!1;return!0};var z3$=U3$.match=function($,J){return YQ.slice(0,-1).reduce(function(Y,X,W){if(W==1){if(Number($[X]||Y3$)===Number(J[X]))return Y&&!0}return Y&&(J[X]==="*"||J[X]===$[X])},!0)};U3$.getPassword=function($,J,Y){var X,W=J.pipe(J3$());function Z(H){var z=K3$(H);if(z&&w3$(z)&&z3$($,z))X=z[H3$],W.end()}var G=function(){J.destroy(),Y(X)},Q=function(H){J.destroy(),BI("WARNING: error on reading file: %s",H),Y(void 0)};J.on("error",Q),W.on("data",Z).on("end",G).on("error",Q)};var K3$=U3$.parseLine=function($){if($.length<11||$.match(/^\s+#/))return null;var J="",Y="",X=0,W=0,Z=0,G={},Q=!1,H=function(K,w,F){var U=$.substring(w,F);if(!Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE"))U=U.replace(/\\([:\\])/g,"$1");G[YQ[K]]=U};for(var z=0;z<$.length-1;z+=1){if(J=$.charAt(z+1),Y=$.charAt(z),Q=X==qI-1,Q){H(X,W);break}if(z>=0&&J==":"&&Y!=="\\")H(X,W,z+1),W=z+2,X+=1}return G=Object.keys(G).length===qI?G:null,G},w3$=U3$.isValidEntry=function($){var J={0:function(G){return G.length>0},1:function(G){if(G==="*")return!0;return G=Number(G),isFinite(G)&&G>0&&G<9007199254740992&&Math.floor(G)===G},2:function(G){return G.length>0},3:function(G){return G.length>0},4:function(G){return G.length>0}};for(var Y=0;Y<YQ.length;Y+=1){var X=J[Y],W=$[YQ[Y]]||"",Z=X(W);if(!Z)return!1}return!0}});var ti=t$((eD0,OI)=>{var sD0=$4("path"),oi=$4("fs"),XN=ri();OI.exports=function($,J){var Y=XN.getFileName();oi.stat(Y,function(X,W){if(X||!XN.usePgPass(W,Y))return J(void 0);var Z=oi.createReadStream(Y);XN.getPassword($,Z,J)})};OI.exports.warnTo=XN.warnTo});var Jr=t$(($M0,$r)=>{var N3$=$4("events").EventEmitter,ai=a2(),WN=$4("util"),PI=xn(),_3$=sV(),L3$=wI(),ei=$i(),q3$=Ww(),B3$=LI(),O3$=HI(),si=WN.deprecate(()=>{},"Client.activeQuery is deprecated and will be removed in a future version."),P3$=WN.deprecate(()=>{},"Client.queryQueue is deprecated and will be removed in a future version."),S3$=WN.deprecate(()=>{},"pgpass support is deprecated and will be removed in a future version. You can provide an async function as the password property to the Client/Pool constructor that returns a password instead. Within this funciton you can call the pgpass module in your own code."),A3$=WN.deprecate(()=>{},"Passing a custom Promise implementation to the Client/Pool constructor is deprecated and will be removed in a future version.");class SI extends N3${constructor($){super();this.connectionParameters=new L3$($),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let J=$||{};if(J.Promise)A3$();if(this._Promise=J.Promise||global.Promise,this._types=new _3$(J.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this._activeQuery=null,this.enableChannelBinding=Boolean(J.enableChannelBinding),this.connection=J.connection||new B3$({stream:J.stream,ssl:this.connectionParameters.ssl,keepAlive:J.keepAlive||!1,keepAliveInitialDelayMillis:J.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this._queryQueue=[],this.binary=J.binary||q3$.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key)Object.defineProperty(this.ssl,"key",{enumerable:!1});this._connectionTimeoutMillis=J.connectionTimeoutMillis||0}get activeQuery(){return si(),this._activeQuery}set activeQuery($){si(),this._activeQuery=$}_getActiveQuery(){return this._activeQuery}_errorAllQueries($){let J=(X)=>{process.nextTick(()=>{X.handleError($,this.connection)})},Y=this._getActiveQuery();if(Y)J(Y),this._activeQuery=null;this._queryQueue.forEach(J),this._queryQueue.length=0}_connect($){let J=this,Y=this.connection;if(this._connectionCallback=$,this._connecting||this._connected){let X=Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{$(X)});return}if(this._connecting=!0,this._connectionTimeoutMillis>0){if(this.connectionTimeoutHandle=setTimeout(()=>{Y._ending=!0,Y.stream.destroy(Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref)this.connectionTimeoutHandle.unref()}if(this.host&&this.host.indexOf("/")===0)Y.connect(this.host+"/.s.PGSQL."+this.port);else Y.connect(this.port,this.host);Y.on("connect",function(){if(J.ssl)Y.requestSsl();else Y.startup(J.getStartupConf())}),Y.on("sslconnect",function(){Y.startup(J.getStartupConf())}),this._attachListeners(Y),Y.once("end",()=>{let X=this._ending?Error("Connection terminated"):Error("Connection terminated unexpectedly");if(clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(X),this._ended=!0,!this._ending){if(this._connecting&&!this._connectionError)if(this._connectionCallback)this._connectionCallback(X);else this._handleErrorEvent(X);else if(!this._connectionError)this._handleErrorEvent(X)}process.nextTick(()=>{this.emit("end")})})}connect($){if($){this._connect($);return}return new this._Promise((J,Y)=>{this._connect((X)=>{if(X)Y(X);else J(this)})})}_attachListeners($){$.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),$.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),$.on("authenticationSASL",this._handleAuthSASL.bind(this)),$.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),$.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),$.on("backendKeyData",this._handleBackendKeyData.bind(this)),$.on("error",this._handleErrorEvent.bind(this)),$.on("errorMessage",this._handleErrorMessage.bind(this)),$.on("readyForQuery",this._handleReadyForQuery.bind(this)),$.on("notice",this._handleNotice.bind(this)),$.on("rowDescription",this._handleRowDescription.bind(this)),$.on("dataRow",this._handleDataRow.bind(this)),$.on("portalSuspended",this._handlePortalSuspended.bind(this)),$.on("emptyQuery",this._handleEmptyQuery.bind(this)),$.on("commandComplete",this._handleCommandComplete.bind(this)),$.on("parseComplete",this._handleParseComplete.bind(this)),$.on("copyInResponse",this._handleCopyInResponse.bind(this)),$.on("copyData",this._handleCopyData.bind(this)),$.on("notification",this._handleNotification.bind(this))}_getPassword($){let J=this.connection;if(typeof this.password==="function")this._Promise.resolve().then(()=>this.password()).then((Y)=>{if(Y!==void 0){if(typeof Y!=="string"){J.emit("error",TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=Y}else this.connectionParameters.password=this.password=null;$()}).catch((Y)=>{J.emit("error",Y)});else if(this.password!==null)$();else try{ti()(this.connectionParameters,(X)=>{if(X!==void 0)S3$(),this.connectionParameters.password=this.password=X;$()})}catch(Y){this.emit("error",Y)}}_handleAuthCleartextPassword($){this._getPassword(()=>{this.connection.password(this.password)})}_handleAuthMD5Password($){this._getPassword(async()=>{try{let J=await O3$.postgresMd5PasswordHash(this.user,this.password,$.salt);this.connection.password(J)}catch(J){this.emit("error",J)}})}_handleAuthSASL($){this._getPassword(()=>{try{this.saslSession=PI.startSession($.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(J){this.connection.emit("error",J)}})}async _handleAuthSASLContinue($){try{await PI.continueSession(this.saslSession,this.password,$.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(J){this.connection.emit("error",J)}}_handleAuthSASLFinal($){try{PI.finalizeSession(this.saslSession,$.data),this.saslSession=null}catch(J){this.connection.emit("error",J)}}_handleBackendKeyData($){this.processID=$.processID,this.secretKey=$.secretKey}_handleReadyForQuery($){if(this._connecting){if(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)this._connectionCallback(null,this),this._connectionCallback=null;this.emit("connect")}let J=this._getActiveQuery();if(this._activeQuery=null,this.readyForQuery=!0,J)J.handleReadyForQuery(this.connection);this._pulseQueryQueue()}_handleErrorWhileConnecting($){if(this._connectionError)return;if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback($);this.emit("error",$)}_handleErrorEvent($){if(this._connecting)return this._handleErrorWhileConnecting($);this._queryable=!1,this._errorAllQueries($),this.emit("error",$)}_handleErrorMessage($){if(this._connecting)return this._handleErrorWhileConnecting($);let J=this._getActiveQuery();if(!J){this._handleErrorEvent($);return}this._activeQuery=null,J.handleError($,this.connection)}_handleRowDescription($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected rowDescription message from backend.");this._handleErrorEvent(Y);return}J.handleRowDescription($)}_handleDataRow($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected dataRow message from backend.");this._handleErrorEvent(Y);return}J.handleDataRow($)}_handlePortalSuspended($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected portalSuspended message from backend.");this._handleErrorEvent(Y);return}J.handlePortalSuspended(this.connection)}_handleEmptyQuery($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected emptyQuery message from backend.");this._handleErrorEvent(Y);return}J.handleEmptyQuery(this.connection)}_handleCommandComplete($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(Y);return}J.handleCommandComplete($,this.connection)}_handleParseComplete(){let $=this._getActiveQuery();if($==null){let J=Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(J);return}if($.name)this.connection.parsedStatements[$.name]=$.text}_handleCopyInResponse($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected copyInResponse message from backend.");this._handleErrorEvent(Y);return}J.handleCopyInResponse(this.connection)}_handleCopyData($){let J=this._getActiveQuery();if(J==null){let Y=Error("Received unexpected copyData message from backend.");this._handleErrorEvent(Y);return}J.handleCopyData($,this.connection)}_handleNotification($){this.emit("notification",$)}_handleNotice($){this.emit("notice",$)}getStartupConf(){let $=this.connectionParameters,J={user:$.user,database:$.database},Y=$.application_name||$.fallback_application_name;if(Y)J.application_name=Y;if($.replication)J.replication=""+$.replication;if($.statement_timeout)J.statement_timeout=String(parseInt($.statement_timeout,10));if($.lock_timeout)J.lock_timeout=String(parseInt($.lock_timeout,10));if($.idle_in_transaction_session_timeout)J.idle_in_transaction_session_timeout=String(parseInt($.idle_in_transaction_session_timeout,10));if($.options)J.options=$.options;return J}cancel($,J){if($.activeQuery===J){let Y=this.connection;if(this.host&&this.host.indexOf("/")===0)Y.connect(this.host+"/.s.PGSQL."+this.port);else Y.connect(this.port,this.host);Y.on("connect",function(){Y.cancel($.processID,$.secretKey)})}else if($._queryQueue.indexOf(J)!==-1)$._queryQueue.splice($._queryQueue.indexOf(J),1)}setTypeParser($,J,Y){return this._types.setTypeParser($,J,Y)}getTypeParser($,J){return this._types.getTypeParser($,J)}escapeIdentifier($){return ai.escapeIdentifier($)}escapeLiteral($){return ai.escapeLiteral($)}_pulseQueryQueue(){if(this.readyForQuery===!0){this._activeQuery=this._queryQueue.shift();let $=this._getActiveQuery();if($){this.readyForQuery=!1,this.hasExecuted=!0;let J=$.submit(this.connection);if(J)process.nextTick(()=>{$.handleError(J,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else if(this.hasExecuted)this._activeQuery=null,this.emit("drain")}}query($,J,Y){let X,W,Z,G,Q;if($===null||$===void 0)throw TypeError("Client was passed a null or undefined query");else if(typeof $.submit==="function"){if(Z=$.query_timeout||this.connectionParameters.query_timeout,W=X=$,typeof J==="function")X.callback=X.callback||J}else if(Z=$.query_timeout||this.connectionParameters.query_timeout,X=new ei($,J,Y),!X.callback)W=new this._Promise((H,z)=>{X.callback=(K,w)=>K?z(K):H(w)}).catch((H)=>{throw Error.captureStackTrace(H),H});if(Z)Q=X.callback,G=setTimeout(()=>{let H=Error("Query read timeout");process.nextTick(()=>{X.handleError(H,this.connection)}),Q(H),X.callback=()=>{};let z=this._queryQueue.indexOf(X);if(z>-1)this._queryQueue.splice(z,1);this._pulseQueryQueue()},Z),X.callback=(H,z)=>{clearTimeout(G),Q(H,z)};if(this.binary&&!X.binary)X.binary=!0;if(X._result&&!X._result._types)X._result._types=this._types;if(!this._queryable)return process.nextTick(()=>{X.handleError(Error("Client has encountered a connection error and is not queryable"),this.connection)}),W;if(this._ending)return process.nextTick(()=>{X.handleError(Error("Client was closed and is not queryable"),this.connection)}),W;return this._queryQueue.push(X),this._pulseQueryQueue(),W}ref(){this.connection.ref()}unref(){this.connection.unref()}end($){if(this._ending=!0,!this.connection._connecting||this._ended)if($)$();else return this._Promise.resolve();if(this._getActiveQuery()||!this._queryable)this.connection.stream.destroy();else this.connection.end();if($)this.connection.once("end",$);else return new this._Promise((J)=>{this.connection.once("end",J)})}get queryQueue(){return P3$(),this._queryQueue}}SI.Query=ei;$r.exports=SI});var Qr=t$((JM0,Gr)=>{var j3$=$4("events").EventEmitter,Yr=function(){},Xr=($,J)=>{let Y=$.findIndex(J);return Y===-1?void 0:$.splice(Y,1)[0]};class Wr{constructor($,J,Y){this.client=$,this.idleListener=J,this.timeoutId=Y}}class Qw{constructor($){this.callback=$}}function E3$(){throw Error("Release called on client which has already been released to the pool.")}function ZN($,J){if(J)return{callback:J,result:void 0};let Y,X,W=function(G,Q){G?Y(G):X(Q)},Z=new $(function(G,Q){X=G,Y=Q}).catch((G)=>{throw Error.captureStackTrace(G),G});return{callback:W,result:Z}}function C3$($,J){return function Y(X){X.client=J,J.removeListener("error",Y),J.on("error",()=>{$.log("additional client error after disconnection due to error",X)}),$._remove(J),$.emit("error",X,J)}}class Zr extends j3${constructor($,J){super();if(this.options=Object.assign({},$),$!=null&&"password"in $)Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:$.password});if($!=null&&$.ssl&&$.ssl.key)Object.defineProperty(this.options.ssl,"key",{enumerable:!1});if(this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||J||AI().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u")this.options.idleTimeoutMillis=1e4;this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){if(this.log("pulse queue on ending"),this._idle.length)this._idle.slice().map((J)=>{this._remove(J.client)});if(!this._clients.length)this.ended=!0,this._endCallback();return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let $=this._pendingQueue.shift();if(this._idle.length){let J=this._idle.pop();clearTimeout(J.timeoutId);let Y=J.client;Y.ref&&Y.ref();let X=J.idleListener;return this._acquireClient(Y,$,X,!1)}if(!this._isFull())return this.newClient($);throw Error("unexpected condition")}_remove($,J){let Y=Xr(this._idle,(W)=>W.client===$);if(Y!==void 0)clearTimeout(Y.timeoutId);this._clients=this._clients.filter((W)=>W!==$);let X=this;$.end(()=>{if(X.emit("remove",$),typeof J==="function")J()})}connect($){if(this.ending){let X=Error("Cannot use a pool after calling end on the pool");return $?$(X):this.Promise.reject(X)}let J=ZN(this.Promise,$),Y=J.result;if(this._isFull()||this._idle.length){if(this._idle.length)process.nextTick(()=>this._pulseQueue());if(!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Qw(J.callback)),Y;let X=(G,Q,H)=>{clearTimeout(Z),J.callback(G,Q,H)},W=new Qw(X),Z=setTimeout(()=>{Xr(this._pendingQueue,(G)=>G.callback===X),W.timedOut=!0,J.callback(Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);if(Z.unref)Z.unref();return this._pendingQueue.push(W),Y}return this.newClient(new Qw(J.callback)),Y}newClient($){let J=new this.Client(this.options);this._clients.push(J);let Y=C3$(this,J);this.log("checking client timeout");let X,W=!1;if(this.options.connectionTimeoutMillis)X=setTimeout(()=>{this.log("ending client due to timeout"),W=!0,J.connection?J.connection.stream.destroy():J.end()},this.options.connectionTimeoutMillis);this.log("connecting new client"),J.connect((Z)=>{if(X)clearTimeout(X);if(J.on("error",Y),Z){if(this.log("client failed to connect",Z),this._clients=this._clients.filter((G)=>G!==J),W)Z=Error("Connection terminated due to connection timeout",{cause:Z});if(this._pulseQueue(),!$.timedOut)$.callback(Z,void 0,Yr)}else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let G=setTimeout(()=>{if(this.log("ending client due to expired lifetime"),this._expired.add(J),this._idle.findIndex((H)=>H.client===J)!==-1)this._acquireClient(J,new Qw((H,z,K)=>K()),Y,!1)},this.options.maxLifetimeSeconds*1000);G.unref(),J.once("end",()=>clearTimeout(G))}return this._acquireClient(J,$,Y,!0)}})}_acquireClient($,J,Y,X){if(X)this.emit("connect",$);if(this.emit("acquire",$),$.release=this._releaseOnce($,Y),$.removeListener("error",Y),!J.timedOut)if(X&&this.options.verify)this.options.verify($,(W)=>{if(W)return $.release(W),J.callback(W,void 0,Yr);J.callback(void 0,$,$.release)});else J.callback(void 0,$,$.release);else if(X&&this.options.verify)this.options.verify($,$.release);else $.release()}_releaseOnce($,J){let Y=!1;return(X)=>{if(Y)E3$();Y=!0,this._release($,J,X)}}_release($,J,Y){if($.on("error",J),$._poolUseCount=($._poolUseCount||0)+1,this.emit("release",Y,$),Y||this.ending||!$._queryable||$._ending||$._poolUseCount>=this.options.maxUses){if($._poolUseCount>=this.options.maxUses)this.log("remove expended client");return this._remove($,this._pulseQueue.bind(this))}if(this._expired.has($))return this.log("remove expired client"),this._expired.delete($),this._remove($,this._pulseQueue.bind(this));let W;if(this.options.idleTimeoutMillis&&this._isAboveMin()){if(W=setTimeout(()=>{if(this._isAboveMin())this.log("remove idle client"),this._remove($,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle)W.unref()}if(this.options.allowExitOnIdle)$.unref();this._idle.push(new Wr($,J,W)),this._pulseQueue()}query($,J,Y){if(typeof $==="function"){let W=ZN(this.Promise,$);return setImmediate(function(){return W.callback(Error("Passing a function as the first parameter to pool.query is not supported"))}),W.result}if(typeof J==="function")Y=J,J=void 0;let X=ZN(this.Promise,Y);return Y=X.callback,this.connect((W,Z)=>{if(W)return Y(W);let G=!1,Q=(H)=>{if(G)return;G=!0,Z.release(H),Y(H)};Z.once("error",Q),this.log("dispatching query");try{Z.query($,J,(H,z)=>{if(this.log("query dispatched"),Z.removeListener("error",Q),G)return;if(G=!0,Z.release(H),H)return Y(H);return Y(void 0,z)})}catch(H){return Z.release(H),Y(H)}}),X.result}end($){if(this.log("ending"),this.ending){let Y=Error("Called end on pool more than once");return $?$(Y):this.Promise.reject(Y)}this.ending=!0;let J=ZN(this.Promise,$);return this._endCallback=J.callback,this._pulseQueue(),J.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce(($,J)=>$+(this._expired.has(J)?1:0),0)}get totalCount(){return this._clients.length}}Gr.exports=Zr});var Kr=t$((YM0,zr)=>{var Hr=$4("events").EventEmitter,T3$=$4("util"),jI=a2(),XQ=zr.exports=function($,J,Y){Hr.call(this),$=jI.normalizeQueryConfig($,J,Y),this.text=$.text,this.values=$.values,this.name=$.name,this.queryMode=$.queryMode,this.callback=$.callback,this.state="new",this._arrayMode=$.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(X){if(X==="row")this._emitRowEvents=!0}.bind(this))};T3$.inherits(XQ,Hr);var R3$={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};XQ.prototype.handleError=function($){let J=this.native.pq.resultErrorFields();if(J)for(let Y in J){let X=R3$[Y]||Y;$[X]=J[Y]}if(this.callback)this.callback($);else this.emit("error",$);this.state="error"};XQ.prototype.then=function($,J){return this._getPromise().then($,J)};XQ.prototype.catch=function($){return this._getPromise().catch($)};XQ.prototype._getPromise=function(){if(this._promise)return this._promise;return this._promise=new Promise(function($,J){this._once("end",$),this._once("error",J)}.bind(this)),this._promise};XQ.prototype.submit=function($){this.state="running";let J=this;this.native=$.native,$.native.arrayMode=this._arrayMode;let Y=function(X,W,Z){if($.native.arrayMode=!1,setImmediate(function(){J.emit("_done")}),X)return J.handleError(X);if(J._emitRowEvents)if(Z.length>1)W.forEach((G,Q)=>{G.forEach((H)=>{J.emit("row",H,Z[Q])})});else W.forEach(function(G){J.emit("row",G,Z)});if(J.state="end",J.emit("end",Z),J.callback)J.callback(null,Z)};if(process.domain)Y=process.domain.bind(Y);if(this.name){if(this.name.length>63)console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries");let X=(this.values||[]).map(jI.prepareValue);if($.namedQueries[this.name]){if(this.text&&$.namedQueries[this.name]!==this.text){let W=Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return Y(W)}return $.native.execute(this.name,X,Y)}return $.native.prepare(this.name,this.text,X.length,function(W){if(W)return Y(W);return $.namedQueries[J.name]=J.text,J.native.execute(J.name,X,Y)})}else if(this.values){if(!Array.isArray(this.values)){let W=Error("Query values must be an array");return Y(W)}let X=this.values.map(jI.prepareValue);$.native.query(this.text,X,Y)}else if(this.queryMode==="extended")$.native.query(this.text,[],Y);else $.native.query(this.text,Y)}});var EI=t$((XM0,Dr)=>{var wr;try{wr=(()=>{throw new Error("Cannot require module "+"pg-native");})()}catch($){throw $}var I3$=sV(),Ur=$4("events").EventEmitter,k3$=$4("util"),b3$=wI(),Fr=Kr(),g1=Dr.exports=function($){Ur.call(this),$=$||{},this._Promise=$.Promise||global.Promise,this._types=new I3$($.types),this.native=new wr({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let J=this.connectionParameters=new b3$($);if($.nativeConnectionString)J.nativeConnectionString=$.nativeConnectionString;this.user=J.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:J.password}),this.database=J.database,this.host=J.host,this.port=J.port,this.namedQueries={}};g1.Query=Fr;k3$.inherits(g1,Ur);g1.prototype._errorAllQueries=function($){let J=(Y)=>{process.nextTick(()=>{Y.native=this.native,Y.handleError($)})};if(this._hasActiveQuery())J(this._activeQuery),this._activeQuery=null;this._queryQueue.forEach(J),this._queryQueue.length=0};g1.prototype._connect=function($){let J=this;if(this._connecting){process.nextTick(()=>$(Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(Y,X){if(J.connectionParameters.nativeConnectionString)X=J.connectionParameters.nativeConnectionString;if(Y)return $(Y);J.native.connect(X,function(W){if(W)return J.native.end(),$(W);J._connected=!0,J.native.on("error",function(Z){J._queryable=!1,J._errorAllQueries(Z),J.emit("error",Z)}),J.native.on("notification",function(Z){J.emit("notification",{channel:Z.relname,payload:Z.extra})}),J.emit("connect"),J._pulseQueryQueue(!0),$(null,this)})})};g1.prototype.connect=function($){if($){this._connect($);return}return new this._Promise((J,Y)=>{this._connect((X)=>{if(X)Y(X);else J(this)})})};g1.prototype.query=function($,J,Y){let X,W,Z,G,Q;if($===null||$===void 0)throw TypeError("Client was passed a null or undefined query");else if(typeof $.submit==="function"){if(Z=$.query_timeout||this.connectionParameters.query_timeout,W=X=$,typeof J==="function")$.callback=J}else if(Z=$.query_timeout||this.connectionParameters.query_timeout,X=new Fr($,J,Y),!X.callback){let H,z;W=new this._Promise((K,w)=>{H=K,z=w}).catch((K)=>{throw Error.captureStackTrace(K),K}),X.callback=(K,w)=>K?z(K):H(w)}if(Z)Q=X.callback,G=setTimeout(()=>{let H=Error("Query read timeout");process.nextTick(()=>{X.handleError(H,this.connection)}),Q(H),X.callback=()=>{};let z=this._queryQueue.indexOf(X);if(z>-1)this._queryQueue.splice(z,1);this._pulseQueryQueue()},Z),X.callback=(H,z)=>{clearTimeout(G),Q(H,z)};if(!this._queryable)return X.native=this.native,process.nextTick(()=>{X.handleError(Error("Client has encountered a connection error and is not queryable"))}),W;if(this._ending)return X.native=this.native,process.nextTick(()=>{X.handleError(Error("Client was closed and is not queryable"))}),W;return this._queryQueue.push(X),this._pulseQueryQueue(),W};g1.prototype.end=function($){let J=this;if(this._ending=!0,!this._connected)this.once("connect",this.end.bind(this,$));let Y;if(!$)Y=new this._Promise(function(X,W){$=(Z)=>Z?W(Z):X()});return this.native.end(function(){J._errorAllQueries(Error("Connection terminated")),process.nextTick(()=>{if(J.emit("end"),$)$()})}),Y};g1.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};g1.prototype._pulseQueryQueue=function($){if(!this._connected)return;if(this._hasActiveQuery())return;let J=this._queryQueue.shift();if(!J){if(!$)this.emit("drain");return}this._activeQuery=J,J.submit(this);let Y=this;J.once("_done",function(){Y._pulseQueryQueue()})};g1.prototype.cancel=function($){if(this._activeQuery===$)this.native.cancel(function(){});else if(this._queryQueue.indexOf($)!==-1)this._queryQueue.splice(this._queryQueue.indexOf($),1)};g1.prototype.ref=function(){};g1.prototype.unref=function(){};g1.prototype.setTypeParser=function($,J,Y){return this._types.setTypeParser($,J,Y)};g1.prototype.getTypeParser=function($,J){return this._types.getTypeParser($,J)}});var AI=t$((WM0,GN)=>{var v3$=Jr(),f3$=Ww(),g3$=LI(),x3$=UI(),y3$=a2(),h3$=Qr(),m3$=sV(),{DatabaseError:u3$}=_I(),{escapeIdentifier:d3$,escapeLiteral:c3$}=a2(),p3$=($)=>{return class extends h3${constructor(Y){super(Y,$)}}},Mr=function($){this.defaults=f3$,this.Client=$,this.Query=this.Client.Query,this.Pool=p3$(this.Client),this._pools=[],this.Connection=g3$,this.types=Xw(),this.DatabaseError=u3$,this.TypeOverrides=m3$,this.escapeIdentifier=d3$,this.escapeLiteral=c3$,this.Result=x3$,this.utils=y3$},Vr=v3$,Nr=!1;try{Nr=!!process.env.NODE_PG_FORCE_NATIVE}catch{}if(Nr)Vr=EI();GN.exports=new Mr(Vr);Object.defineProperty(GN.exports,"native",{configurable:!0,enumerable:!1,get(){let $=null;try{$=new Mr(EI())}catch(J){if(J.code!=="MODULE_NOT_FOUND")throw J}return Object.defineProperty(GN.exports,"native",{value:$}),$}})});var q7=($,J)=>{let Y=J?.length?{}:null;if(Y)for(let X of J)Y[X.part.charCodeAt(0)]=X;return{part:$,store:null,inert:Y,params:null,wildcardStore:null}},Sk=($,J)=>({...$,part:J}),Ak=($)=>({name:$,store:null,inert:null}),uN=class ${constructor(J={}){if(this.config=J,J.lazy)this.find=this.lazyFind;if(J.onParam&&!Array.isArray(J.onParam))this.config.onParam=[this.config.onParam]}root={};history=[];deferred=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/(\/:\w+\?)/g};lazyFind=(J,Y)=>{if(!this.config.lazy)return this.find;return this.build(),this.find(J,Y)};build(){if(!this.config.lazy)return;for(let[J,Y,X]of this.deferred)this.add(J,Y,X,{lazy:!1,ignoreHistory:!0});this.deferred=[],this.find=(J,Y)=>{let X=this.root[J];if(!X)return null;return kw(Y,Y.length,X,0,this.config.onParam)}}add(J,Y,X,{ignoreError:W=!1,ignoreHistory:Z=!1,lazy:G=this.config.lazy}={}){if(G)return this.find=this.lazyFind,this.deferred.push([J,Y,X]),X;if(typeof Y!=="string")throw TypeError("Route path must be a string");if(Y==="")Y="/";else if(Y[0]!=="/")Y=`/${Y}`;let Q=Y[Y.length-1]==="*",H=Y.match($.regex.optionalParams);if(H){let U=Y.replaceAll("?","");this.add(J,U,X,{ignoreError:W,ignoreHistory:Z,lazy:G});for(let V=0;V<H.length;V++){let N=Y.replace(H[V],"");this.add(J,N,X,{ignoreError:!0,ignoreHistory:Z,lazy:G})}return X}if(H)Y=Y.replaceAll("?","");if(this.history.find(([U,V,N])=>U===J&&V===Y))return X;if(Q||H&&Y.charCodeAt(Y.length-1)===63)Y=Y.slice(0,-1);if(!Z)this.history.push([J,Y,X]);let z=Y.split($.regex.static),K=Y.match($.regex.params)||[];if(z[z.length-1]==="")z.pop();let w;if(!this.root[J])w=this.root[J]=q7("/");else w=this.root[J];let F=0;for(let U=0;U<z.length;++U){let V=z[U];if(U>0){let N=K[F++].slice(1);if(w.params===null)w.params=Ak(N);else if(w.params.name!==N)if(W)return X;else throw Error(`Cannot create route "${Y}" with parameter "${N}" because a route already exists with a different parameter name ("${w.params.name}") in the same location`);let P=w.params;if(P.inert===null){w=P.inert=q7(V);continue}w=P.inert}for(let N=0;;){if(N===V.length){if(N<w.part.length){let P=Sk(w,w.part.slice(N));Object.assign(w,q7(V,[P]))}break}if(N===w.part.length){if(w.inert===null)w.inert={};let P=w.inert[V.charCodeAt(N)];if(P){w=P,V=V.slice(N),N=0;continue}let B=q7(V.slice(N));w.inert[V.charCodeAt(N)]=B,w=B;break}if(V[N]!==w.part[N]){let P=Sk(w,w.part.slice(N)),B=q7(V.slice(N));Object.assign(w,q7(w.part.slice(0,N),[P,B])),w=B;break}++N}}if(F<K.length){let V=K[F].slice(1);if(w.params===null)w.params=Ak(V);else if(w.params.name!==V)if(W)return X;else throw Error(`Cannot create route "${Y}" with parameter "${V}" because a route already exists with a different parameter name ("${w.params.name}") in the same location`);if(w.params.store===null)w.params.store=X;return w.params.store}if(Q){if(w.wildcardStore===null)w.wildcardStore=X;return w.wildcardStore}if(w.store===null)w.store=X;return w.store}find(J,Y){let X=this.root[J];if(!X)return null;return kw(Y,Y.length,X,0,this.config.onParam)}},kw=($,J,Y,X,W)=>{let Z=Y.part,G=Z.length,Q=X+G;if(G>1){if(Q>J)return null;if(G<15){for(let H=1,z=X+1;H<G;++H,++z)if(Z.charCodeAt(H)!==$.charCodeAt(z))return null}else if($.slice(X,Q)!==Z)return null}if(Q===J){if(Y.store!==null)return{store:Y.store,params:{}};if(Y.wildcardStore!==null)return{store:Y.wildcardStore,params:{"*":""}};return null}if(Y.inert!==null){let H=Y.inert[$.charCodeAt(Q)];if(H!==void 0){let z=kw($,J,H,Q,W);if(z!==null)return z}}if(Y.params!==null){let{store:H,name:z,inert:K}=Y.params,w=$.indexOf("/",Q);if(w!==Q){if(w===-1||w>=J){if(H!==null){let F={};if(F[z]=$.substring(Q,J),W)for(let U=0;U<W.length;U++){let V=W[U](F[z],z);if(V!==void 0)F[z]=V}return{store:H,params:F}}}else if(K!==null){let F=kw($,J,K,w,W);if(F!==null){if(F.params[z]=$.substring(Q,w),W)for(let U=0;U<W.length;U++){let V=W[U](F.params[z],z);if(V!==void 0)F.params[z]=V}return F}}}}if(Y.wildcardStore!==null)return{store:Y.wildcardStore,params:{"*":$.substring(Q,J)}};return null};var R8={};k4(R8,{IsUndefined:()=>j6,IsUint8Array:()=>dX,IsSymbol:()=>nN,IsString:()=>O4,IsRegExp:()=>SQ,IsObject:()=>G4,IsNumber:()=>d1,IsNull:()=>lN,IsIterator:()=>pN,IsFunction:()=>cN,IsDate:()=>B5,IsBoolean:()=>uX,IsBigInt:()=>PQ,IsAsyncIterator:()=>dN,IsArray:()=>A6,HasPropertyKey:()=>bw});function bw($,J){return J in $}function dN($){return G4($)&&!A6($)&&!dX($)&&Symbol.asyncIterator in $}function A6($){return Array.isArray($)}function PQ($){return typeof $==="bigint"}function uX($){return typeof $==="boolean"}function B5($){return $ instanceof globalThis.Date}function cN($){return typeof $==="function"}function pN($){return G4($)&&!A6($)&&!dX($)&&Symbol.iterator in $}function lN($){return $===null}function d1($){return typeof $==="number"}function G4($){return typeof $==="object"&&$!==null}function SQ($){return $ instanceof globalThis.RegExp}function O4($){return typeof $==="string"}function nN($){return typeof $==="symbol"}function dX($){return $ instanceof globalThis.Uint8Array}function j6($){return $===void 0}function bs($){return $.map((J)=>vw(J))}function vs($){return new Date($.getTime())}function fs($){return new Uint8Array($)}function gs($){return new RegExp($.source,$.flags)}function xs($){let J={};for(let Y of Object.getOwnPropertyNames($))J[Y]=vw($[Y]);for(let Y of Object.getOwnPropertySymbols($))J[Y]=vw($[Y]);return J}function vw($){return A6($)?bs($):B5($)?vs($):dX($)?fs($):SQ($)?gs($):G4($)?xs($):$}function m4($){return vw($)}function B7($,J){return J===void 0?m4($):m4({...J,...$})}function fw($){return Y0($)&&globalThis.Symbol.asyncIterator in $}function gw($){return Y0($)&&globalThis.Symbol.iterator in $}function iN($){return Y0($)&&(globalThis.Object.getPrototypeOf($)===Object.prototype||globalThis.Object.getPrototypeOf($)===null)}function xw($){return $ instanceof globalThis.Promise}function t8($){return $ instanceof Date&&globalThis.Number.isFinite($.getTime())}function jk($){return $ instanceof globalThis.Map}function Ek($){return $ instanceof globalThis.Set}function qJ($){return globalThis.ArrayBuffer.isView($)}function O7($){return $ instanceof globalThis.Uint8Array}function i$($,J){return J in $}function Y0($){return $!==null&&typeof $==="object"}function c$($){return globalThis.Array.isArray($)&&!globalThis.ArrayBuffer.isView($)}function u4($){return $===void 0}function cX($){return $===null}function WX($){return typeof $==="boolean"}function x$($){return typeof $==="number"}function yw($){return globalThis.Number.isInteger($)}function M8($){return typeof $==="bigint"}function C0($){return typeof $==="string"}function eW($){return typeof $==="function"}function pX($){return typeof $==="symbol"}function c1($){return M8($)||WX($)||cX($)||x$($)||C0($)||pX($)||u4($)}var b4;(function($){$.InstanceMode="default",$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function J(G,Q){return $.ExactOptionalPropertyTypes?Q in G:G[Q]!==void 0}$.IsExactOptionalProperty=J;function Y(G){let Q=Y0(G);return $.AllowArrayObject?Q:Q&&!c$(G)}$.IsObjectLike=Y;function X(G){return Y(G)&&!(G instanceof Date)&&!(G instanceof Uint8Array)}$.IsRecordLike=X;function W(G){return $.AllowNaN?x$(G):Number.isFinite(G)}$.IsNumberLike=W;function Z(G){let Q=u4(G);return $.AllowNullVoid?Q||G===null:Q}$.IsVoidLike=Z})(b4||(b4={}));function ys($){return globalThis.Object.freeze($).map((J)=>AQ(J))}function hs($){return $}function ms($){return $}function us($){return $}function ds($){let J={};for(let Y of Object.getOwnPropertyNames($))J[Y]=AQ($[Y]);for(let Y of Object.getOwnPropertySymbols($))J[Y]=AQ($[Y]);return globalThis.Object.freeze(J)}function AQ($){return A6($)?ys($):B5($)?hs($):dX($)?ms($):SQ($)?us($):G4($)?ds($):$}function $$($,J){let Y=J!==void 0?{...J,...$}:$;switch(b4.InstanceMode){case"freeze":return AQ(Y);case"clone":return m4(Y);default:return Y}}class p$ extends Error{constructor($){super($)}}var v4=Symbol.for("TypeBox.Transform"),YY=Symbol.for("TypeBox.Readonly"),m6=Symbol.for("TypeBox.Optional"),BJ=Symbol.for("TypeBox.Hint"),l=Symbol.for("TypeBox.Kind");function P7($){return G4($)&&$[YY]==="Readonly"}function w1($){return G4($)&&$[m6]==="Optional"}function rN($){return P0($,"Any")}function oN($){return P0($,"Argument")}function XY($){return P0($,"Array")}function O5($){return P0($,"AsyncIterator")}function P5($){return P0($,"BigInt")}function lX($){return P0($,"Boolean")}function WY($){return P0($,"Computed")}function ZY($){return P0($,"Constructor")}function cs($){return P0($,"Date")}function GY($){return P0($,"Function")}function QY($){return P0($,"Integer")}function W6($){return P0($,"Intersect")}function S5($){return P0($,"Iterator")}function P0($,J){return G4($)&&l in $&&$[l]===J}function hw($){return uX($)||d1($)||O4($)}function p1($){return P0($,"Literal")}function l1($){return P0($,"MappedKey")}function d4($){return P0($,"MappedResult")}function $9($){return P0($,"Never")}function ps($){return P0($,"Not")}function jQ($){return P0($,"Null")}function HY($){return P0($,"Number")}function E6($){return P0($,"Object")}function A5($){return P0($,"Promise")}function j5($){return P0($,"Record")}function _6($){return P0($,"Ref")}function tN($){return P0($,"RegExp")}function nX($){return P0($,"String")}function EQ($){return P0($,"Symbol")}function n1($){return P0($,"TemplateLiteral")}function ls($){return P0($,"This")}function u0($){return G4($)&&v4 in $}function i1($){return P0($,"Tuple")}function iX($){return P0($,"Undefined")}function T0($){return P0($,"Union")}function ns($){return P0($,"Uint8Array")}function is($){return P0($,"Unknown")}function rs($){return P0($,"Unsafe")}function os($){return P0($,"Void")}function J9($){return G4($)&&l in $&&O4($[l])}function i4($){return rN($)||oN($)||XY($)||lX($)||P5($)||O5($)||WY($)||ZY($)||cs($)||GY($)||QY($)||W6($)||S5($)||p1($)||l1($)||d4($)||$9($)||ps($)||jQ($)||HY($)||E6($)||A5($)||j5($)||_6($)||tN($)||nX($)||EQ($)||n1($)||ls($)||i1($)||iX($)||T0($)||ns($)||is($)||rs($)||os($)||J9($)}var p={};k4(p,{TypeGuardUnknownTypeError:()=>Ck,IsVoid:()=>Mb,IsUnsafe:()=>Db,IsUnknown:()=>Fb,IsUnionLiteral:()=>We,IsUnion:()=>eN,IsUndefined:()=>wb,IsUint8Array:()=>Ub,IsTuple:()=>Kb,IsTransform:()=>zb,IsThis:()=>Hb,IsTemplateLiteral:()=>Qb,IsSymbol:()=>Gb,IsString:()=>Zb,IsSchema:()=>c4,IsRegExp:()=>Wb,IsRef:()=>Xb,IsRecursive:()=>Xe,IsRecord:()=>Yb,IsReadonly:()=>es,IsProperties:()=>mw,IsPromise:()=>Jb,IsOptional:()=>$e,IsObject:()=>$b,IsNumber:()=>ek,IsNull:()=>sk,IsNot:()=>ak,IsNever:()=>tk,IsMappedResult:()=>ok,IsMappedKey:()=>rk,IsLiteralValue:()=>ik,IsLiteralString:()=>lk,IsLiteralNumber:()=>nk,IsLiteralBoolean:()=>Ye,IsLiteral:()=>TQ,IsKindOf:()=>V0,IsKind:()=>Vb,IsIterator:()=>pk,IsIntersect:()=>ck,IsInteger:()=>dk,IsImport:()=>Je,IsFunction:()=>uk,IsDate:()=>mk,IsConstructor:()=>hk,IsComputed:()=>yk,IsBoolean:()=>xk,IsBigInt:()=>gk,IsAsyncIterator:()=>fk,IsArray:()=>vk,IsArgument:()=>bk,IsAny:()=>kk});class Ck extends p${}var ts=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function Tk($){try{return new RegExp($),!0}catch{return!1}}function aN($){if(!O4($))return!1;for(let J=0;J<$.length;J++){let Y=$.charCodeAt(J);if(Y>=7&&Y<=13||Y===27||Y===127)return!1}return!0}function Rk($){return sN($)||c4($)}function CQ($){return j6($)||PQ($)}function P4($){return j6($)||d1($)}function sN($){return j6($)||uX($)}function Q4($){return j6($)||O4($)}function as($){return j6($)||O4($)&&aN($)&&Tk($)}function ss($){return j6($)||O4($)&&aN($)}function Ik($){return j6($)||c4($)}function es($){return G4($)&&$[YY]==="Readonly"}function $e($){return G4($)&&$[m6]==="Optional"}function kk($){return V0($,"Any")&&Q4($.$id)}function bk($){return V0($,"Argument")&&d1($.index)}function vk($){return V0($,"Array")&&$.type==="array"&&Q4($.$id)&&c4($.items)&&P4($.minItems)&&P4($.maxItems)&&sN($.uniqueItems)&&Ik($.contains)&&P4($.minContains)&&P4($.maxContains)}function fk($){return V0($,"AsyncIterator")&&$.type==="AsyncIterator"&&Q4($.$id)&&c4($.items)}function gk($){return V0($,"BigInt")&&$.type==="bigint"&&Q4($.$id)&&CQ($.exclusiveMaximum)&&CQ($.exclusiveMinimum)&&CQ($.maximum)&&CQ($.minimum)&&CQ($.multipleOf)}function xk($){return V0($,"Boolean")&&$.type==="boolean"&&Q4($.$id)}function yk($){return V0($,"Computed")&&O4($.target)&&A6($.parameters)&&$.parameters.every((J)=>c4(J))}function hk($){return V0($,"Constructor")&&$.type==="Constructor"&&Q4($.$id)&&A6($.parameters)&&$.parameters.every((J)=>c4(J))&&c4($.returns)}function mk($){return V0($,"Date")&&$.type==="Date"&&Q4($.$id)&&P4($.exclusiveMaximumTimestamp)&&P4($.exclusiveMinimumTimestamp)&&P4($.maximumTimestamp)&&P4($.minimumTimestamp)&&P4($.multipleOfTimestamp)}function uk($){return V0($,"Function")&&$.type==="Function"&&Q4($.$id)&&A6($.parameters)&&$.parameters.every((J)=>c4(J))&&c4($.returns)}function Je($){return V0($,"Import")&&bw($,"$defs")&&G4($.$defs)&&mw($.$defs)&&bw($,"$ref")&&O4($.$ref)&&$.$ref in $.$defs}function dk($){return V0($,"Integer")&&$.type==="integer"&&Q4($.$id)&&P4($.exclusiveMaximum)&&P4($.exclusiveMinimum)&&P4($.maximum)&&P4($.minimum)&&P4($.multipleOf)}function mw($){return G4($)&&Object.entries($).every(([J,Y])=>aN(J)&&c4(Y))}function ck($){return V0($,"Intersect")&&(O4($.type)&&$.type!=="object"?!1:!0)&&A6($.allOf)&&$.allOf.every((J)=>c4(J)&&!zb(J))&&Q4($.type)&&(sN($.unevaluatedProperties)||Ik($.unevaluatedProperties))&&Q4($.$id)}function pk($){return V0($,"Iterator")&&$.type==="Iterator"&&Q4($.$id)&&c4($.items)}function V0($,J){return G4($)&&l in $&&$[l]===J}function lk($){return TQ($)&&O4($.const)}function nk($){return TQ($)&&d1($.const)}function Ye($){return TQ($)&&uX($.const)}function TQ($){return V0($,"Literal")&&Q4($.$id)&&ik($.const)}function ik($){return uX($)||d1($)||O4($)}function rk($){return V0($,"MappedKey")&&A6($.keys)&&$.keys.every((J)=>d1(J)||O4(J))}function ok($){return V0($,"MappedResult")&&mw($.properties)}function tk($){return V0($,"Never")&&G4($.not)&&Object.getOwnPropertyNames($.not).length===0}function ak($){return V0($,"Not")&&c4($.not)}function sk($){return V0($,"Null")&&$.type==="null"&&Q4($.$id)}function ek($){return V0($,"Number")&&$.type==="number"&&Q4($.$id)&&P4($.exclusiveMaximum)&&P4($.exclusiveMinimum)&&P4($.maximum)&&P4($.minimum)&&P4($.multipleOf)}function $b($){return V0($,"Object")&&$.type==="object"&&Q4($.$id)&&mw($.properties)&&Rk($.additionalProperties)&&P4($.minProperties)&&P4($.maxProperties)}function Jb($){return V0($,"Promise")&&$.type==="Promise"&&Q4($.$id)&&c4($.item)}function Yb($){return V0($,"Record")&&$.type==="object"&&Q4($.$id)&&Rk($.additionalProperties)&&G4($.patternProperties)&&((J)=>{let Y=Object.getOwnPropertyNames(J.patternProperties);return Y.length===1&&Tk(Y[0])&&G4(J.patternProperties)&&c4(J.patternProperties[Y[0]])})($)}function Xe($){return G4($)&&BJ in $&&$[BJ]==="Recursive"}function Xb($){return V0($,"Ref")&&Q4($.$id)&&O4($.$ref)}function Wb($){return V0($,"RegExp")&&Q4($.$id)&&O4($.source)&&O4($.flags)&&P4($.maxLength)&&P4($.minLength)}function Zb($){return V0($,"String")&&$.type==="string"&&Q4($.$id)&&P4($.minLength)&&P4($.maxLength)&&as($.pattern)&&ss($.format)}function Gb($){return V0($,"Symbol")&&$.type==="symbol"&&Q4($.$id)}function Qb($){return V0($,"TemplateLiteral")&&$.type==="string"&&O4($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function Hb($){return V0($,"This")&&Q4($.$id)&&O4($.$ref)}function zb($){return G4($)&&v4 in $}function Kb($){return V0($,"Tuple")&&$.type==="array"&&Q4($.$id)&&d1($.minItems)&&d1($.maxItems)&&$.minItems===$.maxItems&&(j6($.items)&&j6($.additionalItems)&&$.minItems===0||A6($.items)&&$.items.every((J)=>c4(J)))}function wb($){return V0($,"Undefined")&&$.type==="undefined"&&Q4($.$id)}function We($){return eN($)&&$.anyOf.every((J)=>lk(J)||nk(J))}function eN($){return V0($,"Union")&&Q4($.$id)&&G4($)&&A6($.anyOf)&&$.anyOf.every((J)=>c4(J))}function Ub($){return V0($,"Uint8Array")&&$.type==="Uint8Array"&&Q4($.$id)&&P4($.minByteLength)&&P4($.maxByteLength)}function Fb($){return V0($,"Unknown")&&Q4($.$id)}function Db($){return V0($,"Unsafe")}function Mb($){return V0($,"Void")&&$.type==="void"&&Q4($.$id)}function Vb($){return G4($)&&l in $&&O4($[l])&&!ts.includes($[l])}function c4($){return G4($)&&(kk($)||bk($)||vk($)||xk($)||gk($)||fk($)||yk($)||hk($)||mk($)||uk($)||dk($)||ck($)||pk($)||TQ($)||rk($)||ok($)||tk($)||ak($)||sk($)||ek($)||$b($)||Jb($)||Yb($)||Xb($)||Wb($)||Zb($)||Gb($)||Qb($)||Hb($)||Kb($)||wb($)||eN($)||Ub($)||Fb($)||Db($)||Mb($)||Vb($))}var Nb="(true|false)",uw="(0|[1-9][0-9]*)",_b="(.*)";var Y9="^(0|[1-9][0-9]*)$",X9="^(.*)$",Lb="^(?!.*)$";var J4={};k4(J4,{Set:()=>ze,Has:()=>He,Get:()=>Ke,Entries:()=>Ze,Delete:()=>Qe,Clear:()=>Ge});var S7=new Map;function Ze(){return new Map(S7)}function Ge(){return S7.clear()}function Qe($){return S7.delete($)}function He($){return S7.has($)}function ze($,J){S7.set($,J)}function Ke($){return S7.get($)}var u6={};k4(u6,{Set:()=>Me,Has:()=>De,Get:()=>Ve,Entries:()=>we,Delete:()=>Fe,Clear:()=>Ue});var A7=new Map;function we(){return new Map(A7)}function Ue(){return A7.clear()}function Fe($){return A7.delete($)}function De($){return A7.has($)}function Me($,J){A7.set($,J)}function Ve($){return A7.get($)}function qb($,J){return $.includes(J)}function Bb($){return[...new Set($)]}function Ne($,J){return $.filter((Y)=>J.includes(Y))}function _e($,J){return $.reduce((Y,X)=>{return Ne(Y,X)},J)}function Ob($){return $.length===1?$[0]:$.length>1?_e($.slice(1),$[0]):[]}function Pb($){let J=[];for(let Y of $)J.push(...Y);return J}function W9($){return $$({[l]:"Any"},$)}function j7($,J){return $$({[l]:"Array",type:"array",items:$},J)}function Sb($){return $$({[l]:"Argument",index:$})}function E7($,J){return $$({[l]:"AsyncIterator",type:"AsyncIterator",items:$},J)}function f4($,J,Y){return $$({[l]:"Computed",target:$,parameters:J},Y)}function Le($,J){let{[J]:Y,...X}=$;return X}function Z6($,J){return J.reduce((Y,X)=>Le(Y,X),$)}function z0($){return $$({[l]:"Never",not:{}},$)}function b0($){return $$({[l]:"MappedResult",properties:$})}function C7($,J,Y){return $$({[l]:"Constructor",type:"Constructor",parameters:$,returns:J},Y)}function ZX($,J,Y){return $$({[l]:"Function",type:"Function",parameters:$,returns:J},Y)}function RQ($,J){return $$({[l]:"Union",anyOf:$},J)}function qe($){return $.some((J)=>w1(J))}function Ab($){return $.map((J)=>w1(J)?Be(J):J)}function Be($){return Z6($,[m6])}function Oe($,J){return qe($)?I8(RQ(Ab($),J)):RQ(Ab($),J)}function GX($,J){return $.length===1?$$($[0],J):$.length===0?z0(J):Oe($,J)}function d0($,J){return $.length===0?z0(J):$.length===1?$$($[0],J):RQ($,J)}class $_ extends p${}function Pe($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function J_($,J,Y){return $[J]===Y&&$.charCodeAt(J-1)!==92}function oX($,J){return J_($,J,"(")}function IQ($,J){return J_($,J,")")}function jb($,J){return J_($,J,"|")}function Se($){if(!(oX($,0)&&IQ($,$.length-1)))return!1;let J=0;for(let Y=0;Y<$.length;Y++){if(oX($,Y))J+=1;if(IQ($,Y))J-=1;if(J===0&&Y!==$.length-1)return!1}return!0}function Ae($){return $.slice(1,$.length-1)}function je($){let J=0;for(let Y=0;Y<$.length;Y++){if(oX($,Y))J+=1;if(IQ($,Y))J-=1;if(jb($,Y)&&J===0)return!0}return!1}function Ee($){for(let J=0;J<$.length;J++)if(oX($,J))return!0;return!1}function Ce($){let[J,Y]=[0,0],X=[];for(let Z=0;Z<$.length;Z++){if(oX($,Z))J+=1;if(IQ($,Z))J-=1;if(jb($,Z)&&J===0){let G=$.slice(Y,Z);if(G.length>0)X.push(T7(G));Y=Z+1}}let W=$.slice(Y);if(W.length>0)X.push(T7(W));if(X.length===0)return{type:"const",const:""};if(X.length===1)return X[0];return{type:"or",expr:X}}function Te($){function J(W,Z){if(!oX(W,Z))throw new $_("TemplateLiteralParser: Index must point to open parens");let G=0;for(let Q=Z;Q<W.length;Q++){if(oX(W,Q))G+=1;if(IQ(W,Q))G-=1;if(G===0)return[Z,Q]}throw new $_("TemplateLiteralParser: Unclosed group parens in expression")}function Y(W,Z){for(let G=Z;G<W.length;G++)if(oX(W,G))return[Z,G];return[Z,W.length]}let X=[];for(let W=0;W<$.length;W++)if(oX($,W)){let[Z,G]=J($,W),Q=$.slice(Z,G+1);X.push(T7(Q)),W=G}else{let[Z,G]=Y($,W),Q=$.slice(Z,G);if(Q.length>0)X.push(T7(Q));W=G-1}return X.length===0?{type:"const",const:""}:X.length===1?X[0]:{type:"and",expr:X}}function T7($){return Se($)?T7(Ae($)):je($)?Ce($):Ee($)?Te($):{type:"const",const:Pe($)}}function R7($){return T7($.slice(1,$.length-1))}class Eb extends p${}function Re($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function Ie($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function ke($){return $.type==="const"&&$.const===".*"}function E5($){return Re($)||ke($)?!1:Ie($)?!0:$.type==="and"?$.expr.every((J)=>E5(J)):$.type==="or"?$.expr.every((J)=>E5(J)):$.type==="const"?!0:(()=>{throw new Eb("Unknown expression type")})()}function dw($){let J=R7($.pattern);return E5(J)}class Cb extends p${}function*Tb($){if($.length===1)return yield*$[0];for(let J of $[0])for(let Y of Tb($.slice(1)))yield`${J}${Y}`}function*be($){return yield*Tb($.expr.map((J)=>[...kQ(J)]))}function*ve($){for(let J of $.expr)yield*kQ(J)}function*fe($){return yield $.const}function*kQ($){return $.type==="and"?yield*be($):$.type==="or"?yield*ve($):$.type==="const"?yield*fe($):(()=>{throw new Cb("Unknown expression")})()}function I7($){let J=R7($.pattern);return E5(J)?[...kQ(J)]:[]}function S0($,J){return $$({[l]:"Literal",const:$,type:typeof $},J)}function cw($){return $$({[l]:"Boolean",type:"boolean"},$)}function k7($){return $$({[l]:"BigInt",type:"bigint"},$)}function OJ($){return $$({[l]:"Number",type:"number"},$)}function a8($){return $$({[l]:"String",type:"string"},$)}function*ge($){let J=$.trim().replace(/"|'/g,"");return J==="boolean"?yield cw():J==="number"?yield OJ():J==="bigint"?yield k7():J==="string"?yield a8():yield(()=>{let Y=J.split("|").map((X)=>S0(X.trim()));return Y.length===0?z0():Y.length===1?Y[0]:GX(Y)})()}function*xe($){if($[1]!=="{"){let J=S0("$"),Y=Y_($.slice(1));return yield*[J,...Y]}for(let J=2;J<$.length;J++)if($[J]==="}"){let Y=ge($.slice(2,J)),X=Y_($.slice(J+1));return yield*[...Y,...X]}yield S0($)}function*Y_($){for(let J=0;J<$.length;J++)if($[J]==="$"){let Y=S0($.slice(0,J)),X=xe($.slice(J));return yield*[Y,...X]}yield S0($)}function Rb($){return[...Y_($)]}class Ib extends p${}function ye($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function kb($,J){return n1($)?$.pattern.slice(1,$.pattern.length-1):T0($)?`(${$.anyOf.map((Y)=>kb(Y,J)).join("|")})`:HY($)?`${J}${uw}`:QY($)?`${J}${uw}`:P5($)?`${J}${uw}`:nX($)?`${J}${_b}`:p1($)?`${J}${ye($.const.toString())}`:lX($)?`${J}${Nb}`:(()=>{throw new Ib(`Unexpected Kind '${$[l]}'`)})()}function X_($){return`^${$.map((J)=>kb(J,"")).join("")}$`}function C5($){let Y=I7($).map((X)=>S0(X));return GX(Y)}function pw($,J){let Y=O4($)?X_(Rb($)):X_($);return $$({[l]:"TemplateLiteral",type:"string",pattern:Y},J)}function he($){return I7($).map((Y)=>Y.toString())}function me($){let J=[];for(let Y of $)J.push(...U1(Y));return J}function ue($){return[$.toString()]}function U1($){return[...new Set(n1($)?he($):T0($)?me($.anyOf):p1($)?ue($.const):HY($)?["[number]"]:QY($)?["[number]"]:[])]}function de($,J,Y){let X={};for(let W of Object.getOwnPropertyNames(J))X[W]=Z9($,U1(J[W]),Y);return X}function ce($,J,Y){return de($,J.properties,Y)}function bb($,J,Y){let X=ce($,J,Y);return b0(X)}function fb($,J){return $.map((Y)=>gb(Y,J))}function pe($){return $.filter((J)=>!$9(J))}function le($,J){return lw(pe(fb($,J)))}function ne($){return $.some((J)=>$9(J))?[]:$}function ie($,J){return GX(ne(fb($,J)))}function re($,J){return J in $?$[J]:J==="[number]"?GX($):z0()}function oe($,J){return J==="[number]"?$:z0()}function te($,J){return J in $?$[J]:z0()}function gb($,J){return W6($)?le($.allOf,J):T0($)?ie($.anyOf,J):i1($)?re($.items??[],J):XY($)?oe($.items,J):E6($)?te($.properties,J):z0()}function bQ($,J){return J.map((Y)=>gb($,Y))}function vb($,J){return GX(bQ($,J))}function Z9($,J,Y){if(_6($)||_6(J)){if(!i4($)||!i4(J))throw new p$("Index types using Ref parameters require both Type and Key to be of TSchema");return f4("Index",[$,J])}if(d4(J))return bb($,J,Y);if(l1(J))return xb($,J,Y);return $$(i4(J)?vb($,U1(J)):vb($,J),Y)}function ae($,J,Y){return{[J]:Z9($,[J],m4(Y))}}function se($,J,Y){return J.reduce((X,W)=>{return{...X,...ae($,W,Y)}},{})}function ee($,J,Y){return se($,J.keys,Y)}function xb($,J,Y){let X=ee($,J,Y);return b0(X)}function b7($,J){return $$({[l]:"Iterator",type:"Iterator",items:$},J)}function $$$($){return globalThis.Object.keys($).filter((J)=>!w1($[J]))}function J$$($,J){let Y=$$$($),X=Y.length>0?{[l]:"Object",type:"object",required:Y,properties:$}:{[l]:"Object",type:"object",properties:$};return $$(X,J)}var c0=J$$;function nw($,J){return $$({[l]:"Promise",type:"Promise",item:$},J)}function Y$$($){return $$(Z6($,[YY]))}function X$$($){return $$({...$,[YY]:"Readonly"})}function W$$($,J){return J===!1?Y$$($):X$$($)}function F1($,J){let Y=J??!0;return d4($)?yb($,Y):W$$($,Y)}function Z$$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=F1($[X],J);return Y}function G$$($,J){return Z$$($.properties,J)}function yb($,J){let Y=G$$($,J);return b0(Y)}function PJ($,J){return $$($.length>0?{[l]:"Tuple",type:"array",items:$,additionalItems:!1,minItems:$.length,maxItems:$.length}:{[l]:"Tuple",type:"array",minItems:$.length,maxItems:$.length},J)}function hb($,J){return $ in J?SJ($,J[$]):b0(J)}function Q$$($){return{[$]:S0($)}}function H$$($){let J={};for(let Y of $)J[Y]=S0(Y);return J}function z$$($,J){return qb(J,$)?Q$$($):H$$(J)}function K$$($,J){let Y=z$$($,J);return hb($,Y)}function vQ($,J){return J.map((Y)=>SJ($,Y))}function w$$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames(J))Y[X]=SJ($,J[X]);return Y}function SJ($,J){let Y={...J};return w1(J)?I8(SJ($,Z6(J,[m6]))):P7(J)?F1(SJ($,Z6(J,[YY]))):d4(J)?hb($,J.properties):l1(J)?K$$($,J.keys):ZY(J)?C7(vQ($,J.parameters),SJ($,J.returns),Y):GY(J)?ZX(vQ($,J.parameters),SJ($,J.returns),Y):O5(J)?E7(SJ($,J.items),Y):S5(J)?b7(SJ($,J.items),Y):W6(J)?k8(vQ($,J.allOf),Y):T0(J)?d0(vQ($,J.anyOf),Y):i1(J)?PJ(vQ($,J.items??[]),Y):E6(J)?c0(w$$($,J.properties),Y):XY(J)?j7(SJ($,J.items),Y):A5(J)?nw(SJ($,J.item),Y):J}function U$$($,J){let Y={};for(let X of $)Y[X]=SJ(X,J);return Y}function mb($,J,Y){let X=i4($)?U1($):$,W=J({[l]:"MappedKey",keys:X}),Z=U$$(X,W);return c0(Z,Y)}function F$$($){return $$(Z6($,[m6]))}function D$$($){return $$({...$,[m6]:"Optional"})}function M$$($,J){return J===!1?F$$($):D$$($)}function I8($,J){let Y=J??!0;return d4($)?ub($,Y):M$$($,Y)}function V$$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=I8($[X],J);return Y}function N$$($,J){return V$$($.properties,J)}function ub($,J){let Y=N$$($,J);return b0(Y)}function fQ($,J={}){let Y=$.every((W)=>E6(W)),X=i4(J.unevaluatedProperties)?{unevaluatedProperties:J.unevaluatedProperties}:{};return $$(J.unevaluatedProperties===!1||i4(J.unevaluatedProperties)||Y?{...X,[l]:"Intersect",type:"object",allOf:$}:{...X,[l]:"Intersect",allOf:$},J)}function _$$($){return $.every((J)=>w1(J))}function L$$($){return Z6($,[m6])}function db($){return $.map((J)=>w1(J)?L$$(J):J)}function q$$($,J){return _$$($)?I8(fQ(db($),J)):fQ(db($),J)}function lw($,J={}){if($.length===1)return $$($[0],J);if($.length===0)return z0(J);if($.some((Y)=>u0(Y)))throw Error("Cannot intersect transform types");return q$$($,J)}function k8($,J){if($.length===1)return $$($[0],J);if($.length===0)return z0(J);if($.some((Y)=>u0(Y)))throw Error("Cannot intersect transform types");return fQ($,J)}function AJ(...$){let[J,Y]=typeof $[0]==="string"?[$[0],$[1]]:[$[0].$id,$[1]];if(typeof J!=="string")throw new p$("Ref: $ref must be a string");return $$({[l]:"Ref",$ref:J},Y)}function B$$($,J){return f4("Awaited",[f4($,J)])}function O$$($){return f4("Awaited",[AJ($)])}function P$$($){return k8(cb($))}function S$$($){return d0(cb($))}function A$$($){return v7($)}function cb($){return $.map((J)=>v7(J))}function v7($,J){return $$(WY($)?B$$($.target,$.parameters):W6($)?P$$($.allOf):T0($)?S$$($.anyOf):A5($)?A$$($.item):_6($)?O$$($.$ref):$,J)}function pb($){let J=[];for(let Y of $)J.push(D1(Y));return J}function j$$($){let J=pb($);return Pb(J)}function E$$($){let J=pb($);return Ob(J)}function C$$($){return $.map((J,Y)=>Y.toString())}function T$$($){return["[number]"]}function R$$($){return globalThis.Object.getOwnPropertyNames($)}function I$$($){if(!W_)return[];return globalThis.Object.getOwnPropertyNames($).map((Y)=>{return Y[0]==="^"&&Y[Y.length-1]==="$"?Y.slice(1,Y.length-1):Y})}function D1($){return W6($)?j$$($.allOf):T0($)?E$$($.anyOf):i1($)?C$$($.items??[]):XY($)?T$$($.items):E6($)?R$$($.properties):j5($)?I$$($.patternProperties):[]}var W_=!1;function tX($){W_=!0;let J=D1($);return W_=!1,`^(${J.map((X)=>`(${X})`).join("|")})$`}function k$$($,J){return f4("KeyOf",[f4($,J)])}function b$$($){return f4("KeyOf",[AJ($)])}function v$$($,J){let Y=D1($),X=f$$(Y),W=GX(X);return $$(W,J)}function f$$($){return $.map((J)=>J==="[number]"?OJ():S0(J))}function f7($,J){return WY($)?k$$($.target,$.parameters):_6($)?b$$($.$ref):d4($)?lb($,J):v$$($,J)}function g$$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=f7($[X],m4(J));return Y}function x$$($,J){return g$$($.properties,J)}function lb($,J){let Y=x$$($,J);return b0(Y)}function iw($){let J=D1($),Y=bQ($,J);return J.map((X,W)=>[J[W],Y[W]])}function y$$($){let J=[];for(let Y of $)J.push(...D1(Y));return Bb(J)}function h$$($){return $.filter((J)=>!$9(J))}function m$$($,J){let Y=[];for(let X of $)Y.push(...bQ(X,[J]));return h$$(Y)}function u$$($,J){let Y={};for(let X of J)Y[X]=lw(m$$($,X));return Y}function nb($,J){let Y=y$$($),X=u$$($,Y);return c0(X,J)}function rw($){return $$({[l]:"Date",type:"Date"},$)}function ow($){return $$({[l]:"Null",type:"null"},$)}function tw($){return $$({[l]:"Symbol",type:"symbol"},$)}function aw($){return $$({[l]:"Undefined",type:"undefined"},$)}function sw($){return $$({[l]:"Uint8Array",type:"Uint8Array"},$)}function zY($){return $$({[l]:"Unknown"},$)}function d$$($){return $.map((J)=>Z_(J,!1))}function c$$($){let J={};for(let Y of globalThis.Object.getOwnPropertyNames($))J[Y]=F1(Z_($[Y],!1));return J}function ew($,J){return J===!0?$:F1($)}function Z_($,J){return dN($)?ew(W9(),J):pN($)?ew(W9(),J):A6($)?F1(PJ(d$$($))):dX($)?sw():B5($)?rw():G4($)?ew(c0(c$$($)),J):cN($)?ew(ZX([],zY()),J):j6($)?aw():lN($)?ow():nN($)?tw():PQ($)?k7():d1($)?S0($):uX($)?S0($):O4($)?S0($):c0({})}function ib($,J){return $$(Z_($,!0),J)}function rb($,J){return ZY($)?PJ($.parameters,J):z0(J)}function ob($,J){if(j6($))throw Error("Enum undefined or empty");let Y=globalThis.Object.getOwnPropertyNames($).filter((Z)=>isNaN(Z)).map((Z)=>$[Z]),W=[...new Set(Y)].map((Z)=>S0(Z));return d0(W,{...J,[BJ]:"Enum"})}class $v extends p${}var Y$;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(Y$||(Y$={}));function jJ($){return $===Y$.False?$:Y$.True}function g7($){throw new $v($)}function f6($){return p.IsNever($)||p.IsIntersect($)||p.IsUnion($)||p.IsUnknown($)||p.IsAny($)}function g6($,J){return p.IsNever(J)?Xv($,J):p.IsIntersect(J)?$3($,J):p.IsUnion(J)?K_($,J):p.IsUnknown(J)?Qv($,J):p.IsAny(J)?z_($,J):g7("StructuralRight")}function z_($,J){return Y$.True}function p$$($,J){return p.IsIntersect(J)?$3($,J):p.IsUnion(J)&&J.anyOf.some((Y)=>p.IsAny(Y)||p.IsUnknown(Y))?Y$.True:p.IsUnion(J)?Y$.Union:p.IsUnknown(J)?Y$.True:p.IsAny(J)?Y$.True:Y$.Union}function l$$($,J){return p.IsUnknown($)?Y$.False:p.IsAny($)?Y$.Union:p.IsNever($)?Y$.True:Y$.False}function n$$($,J){return p.IsObject(J)&&J3(J)?Y$.True:f6(J)?g6($,J):!p.IsArray(J)?Y$.False:jJ(H4($.items,J.items))}function i$$($,J){return f6(J)?g6($,J):!p.IsAsyncIterator(J)?Y$.False:jJ(H4($.items,J.items))}function r$$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsBigInt(J)?Y$.True:Y$.False}function Jv($,J){return p.IsLiteralBoolean($)?Y$.True:p.IsBoolean($)?Y$.True:Y$.False}function o$$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsBoolean(J)?Y$.True:Y$.False}function t$$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):!p.IsConstructor(J)?Y$.False:$.parameters.length>J.parameters.length?Y$.False:!$.parameters.every((Y,X)=>jJ(H4(J.parameters[X],Y))===Y$.True)?Y$.False:jJ(H4($.returns,J.returns))}function a$$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsDate(J)?Y$.True:Y$.False}function s$$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):!p.IsFunction(J)?Y$.False:$.parameters.length>J.parameters.length?Y$.False:!$.parameters.every((Y,X)=>jJ(H4(J.parameters[X],Y))===Y$.True)?Y$.False:jJ(H4($.returns,J.returns))}function Yv($,J){return p.IsLiteral($)&&R8.IsNumber($.const)?Y$.True:p.IsNumber($)||p.IsInteger($)?Y$.True:Y$.False}function e$$($,J){return p.IsInteger(J)||p.IsNumber(J)?Y$.True:f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):Y$.False}function $3($,J){return J.allOf.every((Y)=>H4($,Y)===Y$.True)?Y$.True:Y$.False}function $0$($,J){return $.allOf.some((Y)=>H4(Y,J)===Y$.True)?Y$.True:Y$.False}function J0$($,J){return f6(J)?g6($,J):!p.IsIterator(J)?Y$.False:jJ(H4($.items,J.items))}function Y0$($,J){return p.IsLiteral(J)&&J.const===$.const?Y$.True:f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsString(J)?Gv($,J):p.IsNumber(J)?Wv($,J):p.IsInteger(J)?Yv($,J):p.IsBoolean(J)?Jv($,J):Y$.False}function Xv($,J){return Y$.False}function X0$($,J){return Y$.True}function tb($){let[J,Y]=[$,0];while(!0){if(!p.IsNot(J))break;J=J.not,Y+=1}return Y%2===0?J:zY()}function W0$($,J){return p.IsNot($)?H4(tb($),J):p.IsNot(J)?H4($,tb(J)):g7("Invalid fallthrough for Not")}function Z0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsNull(J)?Y$.True:Y$.False}function Wv($,J){return p.IsLiteralNumber($)?Y$.True:p.IsNumber($)||p.IsInteger($)?Y$.True:Y$.False}function G0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsInteger(J)||p.IsNumber(J)?Y$.True:Y$.False}function M1($,J){return Object.getOwnPropertyNames($.properties).length===J}function ab($){return J3($)}function sb($){return M1($,0)||M1($,1)&&"description"in $.properties&&p.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(p.IsString($.properties.description.anyOf[0])&&p.IsUndefined($.properties.description.anyOf[1])||p.IsString($.properties.description.anyOf[1])&&p.IsUndefined($.properties.description.anyOf[0]))}function G_($){return M1($,0)}function eb($){return M1($,0)}function Q0$($){return M1($,0)}function H0$($){return M1($,0)}function z0$($){return J3($)}function K0$($){let J=OJ();return M1($,0)||M1($,1)&&"length"in $.properties&&jJ(H4($.properties.length,J))===Y$.True}function w0$($){return M1($,0)}function J3($){let J=OJ();return M1($,0)||M1($,1)&&"length"in $.properties&&jJ(H4($.properties.length,J))===Y$.True}function U0$($){let J=ZX([W9()],W9());return M1($,0)||M1($,1)&&"then"in $.properties&&jJ(H4($.properties.then,J))===Y$.True}function Zv($,J){return H4($,J)===Y$.False?Y$.False:p.IsOptional($)&&!p.IsOptional(J)?Y$.False:Y$.True}function b8($,J){return p.IsUnknown($)?Y$.False:p.IsAny($)?Y$.Union:p.IsNever($)||p.IsLiteralString($)&&ab(J)||p.IsLiteralNumber($)&&G_(J)||p.IsLiteralBoolean($)&&eb(J)||p.IsSymbol($)&&sb(J)||p.IsBigInt($)&&Q0$(J)||p.IsString($)&&ab(J)||p.IsSymbol($)&&sb(J)||p.IsNumber($)&&G_(J)||p.IsInteger($)&&G_(J)||p.IsBoolean($)&&eb(J)||p.IsUint8Array($)&&z0$(J)||p.IsDate($)&&H0$(J)||p.IsConstructor($)&&w0$(J)||p.IsFunction($)&&K0$(J)?Y$.True:p.IsRecord($)&&p.IsString(Q_($))?(()=>{return J[BJ]==="Record"?Y$.True:Y$.False})():p.IsRecord($)&&p.IsNumber(Q_($))?(()=>{return M1(J,0)?Y$.True:Y$.False})():Y$.False}function F0$($,J){return f6(J)?g6($,J):p.IsRecord(J)?EJ($,J):!p.IsObject(J)?Y$.False:(()=>{for(let Y of Object.getOwnPropertyNames(J.properties)){if(!(Y in $.properties)&&!p.IsOptional(J.properties[Y]))return Y$.False;if(p.IsOptional(J.properties[Y]))return Y$.True;if(Zv($.properties[Y],J.properties[Y])===Y$.False)return Y$.False}return Y$.True})()}function D0$($,J){return f6(J)?g6($,J):p.IsObject(J)&&U0$(J)?Y$.True:!p.IsPromise(J)?Y$.False:jJ(H4($.item,J.item))}function Q_($){return Y9 in $.patternProperties?OJ():(X9 in $.patternProperties)?a8():g7("Unknown record key pattern")}function H_($){return Y9 in $.patternProperties?$.patternProperties[Y9]:(X9 in $.patternProperties)?$.patternProperties[X9]:g7("Unable to get record value schema")}function EJ($,J){let[Y,X]=[Q_(J),H_(J)];return p.IsLiteralString($)&&p.IsNumber(Y)&&jJ(H4($,X))===Y$.True?Y$.True:p.IsUint8Array($)&&p.IsNumber(Y)?H4($,X):p.IsString($)&&p.IsNumber(Y)?H4($,X):p.IsArray($)&&p.IsNumber(Y)?H4($,X):p.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(Zv(X,$.properties[W])===Y$.False)return Y$.False;return Y$.True})():Y$.False}function M0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):!p.IsRecord(J)?Y$.False:H4(H_($),H_(J))}function V0$($,J){let Y=p.IsRegExp($)?a8():$,X=p.IsRegExp(J)?a8():J;return H4(Y,X)}function Gv($,J){return p.IsLiteral($)&&R8.IsString($.const)?Y$.True:p.IsString($)?Y$.True:Y$.False}function N0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsString(J)?Y$.True:Y$.False}function _0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsSymbol(J)?Y$.True:Y$.False}function L0$($,J){return p.IsTemplateLiteral($)?H4(C5($),J):p.IsTemplateLiteral(J)?H4($,C5(J)):g7("Invalid fallthrough for TemplateLiteral")}function q0$($,J){return p.IsArray(J)&&$.items!==void 0&&$.items.every((Y)=>H4(Y,J.items)===Y$.True)}function B0$($,J){return p.IsNever($)?Y$.True:p.IsUnknown($)?Y$.False:p.IsAny($)?Y$.Union:Y$.False}function O0$($,J){return f6(J)?g6($,J):p.IsObject(J)&&J3(J)?Y$.True:p.IsArray(J)&&q0$($,J)?Y$.True:!p.IsTuple(J)?Y$.False:R8.IsUndefined($.items)&&!R8.IsUndefined(J.items)||!R8.IsUndefined($.items)&&R8.IsUndefined(J.items)?Y$.False:R8.IsUndefined($.items)&&!R8.IsUndefined(J.items)?Y$.True:$.items.every((Y,X)=>H4(Y,J.items[X])===Y$.True)?Y$.True:Y$.False}function P0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsUint8Array(J)?Y$.True:Y$.False}function S0$($,J){return f6(J)?g6($,J):p.IsObject(J)?b8($,J):p.IsRecord(J)?EJ($,J):p.IsVoid(J)?E0$($,J):p.IsUndefined(J)?Y$.True:Y$.False}function K_($,J){return J.anyOf.some((Y)=>H4($,Y)===Y$.True)?Y$.True:Y$.False}function A0$($,J){return $.anyOf.every((Y)=>H4(Y,J)===Y$.True)?Y$.True:Y$.False}function Qv($,J){return Y$.True}function j0$($,J){return p.IsNever(J)?Xv($,J):p.IsIntersect(J)?$3($,J):p.IsUnion(J)?K_($,J):p.IsAny(J)?z_($,J):p.IsString(J)?Gv($,J):p.IsNumber(J)?Wv($,J):p.IsInteger(J)?Yv($,J):p.IsBoolean(J)?Jv($,J):p.IsArray(J)?l$$($,J):p.IsTuple(J)?B0$($,J):p.IsObject(J)?b8($,J):p.IsUnknown(J)?Y$.True:Y$.False}function E0$($,J){return p.IsUndefined($)?Y$.True:p.IsUndefined($)?Y$.True:Y$.False}function C0$($,J){return p.IsIntersect(J)?$3($,J):p.IsUnion(J)?K_($,J):p.IsUnknown(J)?Qv($,J):p.IsAny(J)?z_($,J):p.IsObject(J)?b8($,J):p.IsVoid(J)?Y$.True:Y$.False}function H4($,J){return p.IsTemplateLiteral($)||p.IsTemplateLiteral(J)?L0$($,J):p.IsRegExp($)||p.IsRegExp(J)?V0$($,J):p.IsNot($)||p.IsNot(J)?W0$($,J):p.IsAny($)?p$$($,J):p.IsArray($)?n$$($,J):p.IsBigInt($)?r$$($,J):p.IsBoolean($)?o$$($,J):p.IsAsyncIterator($)?i$$($,J):p.IsConstructor($)?t$$($,J):p.IsDate($)?a$$($,J):p.IsFunction($)?s$$($,J):p.IsInteger($)?e$$($,J):p.IsIntersect($)?$0$($,J):p.IsIterator($)?J0$($,J):p.IsLiteral($)?Y0$($,J):p.IsNever($)?X0$($,J):p.IsNull($)?Z0$($,J):p.IsNumber($)?G0$($,J):p.IsObject($)?F0$($,J):p.IsRecord($)?M0$($,J):p.IsString($)?N0$($,J):p.IsSymbol($)?_0$($,J):p.IsTuple($)?O0$($,J):p.IsPromise($)?D0$($,J):p.IsUint8Array($)?P0$($,J):p.IsUndefined($)?S0$($,J):p.IsUnion($)?A0$($,J):p.IsUnknown($)?j0$($,J):p.IsVoid($)?C0$($,J):g7(`Unknown left type operand '${$[l]}'`)}function G9($,J){return H4($,J)}function T0$($,J,Y,X,W){let Z={};for(let G of globalThis.Object.getOwnPropertyNames($))Z[G]=x7($[G],J,Y,X,m4(W));return Z}function R0$($,J,Y,X,W){return T0$($.properties,J,Y,X,W)}function Hv($,J,Y,X,W){let Z=R0$($,J,Y,X,W);return b0(Z)}function I0$($,J,Y,X){let W=G9($,J);return W===Y$.Union?d0([Y,X]):W===Y$.True?Y:X}function x7($,J,Y,X,W){return d4($)?Hv($,J,Y,X,W):l1($)?$$(zv($,J,Y,X,W)):$$(I0$($,J,Y,X),W)}function k0$($,J,Y,X,W){return{[$]:x7(S0($),J,Y,X,m4(W))}}function b0$($,J,Y,X,W){return $.reduce((Z,G)=>{return{...Z,...k0$(G,J,Y,X,W)}},{})}function v0$($,J,Y,X,W){return b0$($.keys,J,Y,X,W)}function zv($,J,Y,X,W){let Z=v0$($,J,Y,X,W);return b0(Z)}function f0$($){return $.allOf.every((J)=>aX(J))}function g0$($){return $.anyOf.some((J)=>aX(J))}function x0$($){return!aX($.not)}function aX($){return $[l]==="Intersect"?f0$($):$[l]==="Union"?g0$($):$[l]==="Not"?x0$($):$[l]==="Undefined"?!0:!1}function Kv($,J){return y7(C5($),J)}function y0$($,J){let Y=$.filter((X)=>G9(X,J)===Y$.False);return Y.length===1?Y[0]:d0(Y)}function y7($,J,Y={}){if(n1($))return $$(Kv($,J),Y);if(d4($))return $$(wv($,J),Y);return $$(T0($)?y0$($.anyOf,J):G9($,J)!==Y$.False?z0():$,Y)}function h0$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=y7($[X],J);return Y}function m0$($,J){return h0$($.properties,J)}function wv($,J){let Y=m0$($,J);return b0(Y)}function Uv($,J){return h7(C5($),J)}function u0$($,J){let Y=$.filter((X)=>G9(X,J)!==Y$.False);return Y.length===1?Y[0]:d0(Y)}function h7($,J,Y){if(n1($))return $$(Uv($,J),Y);if(d4($))return $$(Fv($,J),Y);return $$(T0($)?u0$($.anyOf,J):G9($,J)!==Y$.False?$:z0(),Y)}function d0$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=h7($[X],J);return Y}function c0$($,J){return d0$($.properties,J)}function Fv($,J){let Y=c0$($,J);return b0(Y)}function Dv($,J){return ZY($)?$$($.returns,J):z0(J)}function Y3($){return F1(I8($))}function T5($,J,Y){return $$({[l]:"Record",type:"object",patternProperties:{[$]:J}},Y)}function w_($,J,Y){let X={};for(let W of $)X[W]=J;return c0(X,{...Y,[BJ]:"Record"})}function p0$($,J,Y){return dw($)?w_(U1($),J,Y):T5($.pattern,J,Y)}function l0$($,J,Y){return w_(U1(d0($)),J,Y)}function n0$($,J,Y){return w_([$.toString()],J,Y)}function i0$($,J,Y){return T5($.source,J,Y)}function r0$($,J,Y){let X=j6($.pattern)?X9:$.pattern;return T5(X,J,Y)}function o0$($,J,Y){return T5(X9,J,Y)}function t0$($,J,Y){return T5(Lb,J,Y)}function a0$($,J,Y){return c0({true:J,false:J},Y)}function s0$($,J,Y){return T5(Y9,J,Y)}function e0$($,J,Y){return T5(Y9,J,Y)}function X3($,J,Y={}){return T0($)?l0$($.anyOf,J,Y):n1($)?p0$($,J,Y):p1($)?n0$($.const,J,Y):lX($)?a0$($,J,Y):QY($)?s0$($,J,Y):HY($)?e0$($,J,Y):tN($)?i0$($,J,Y):nX($)?r0$($,J,Y):rN($)?o0$($,J,Y):$9($)?t0$($,J,Y):z0(Y)}function W3($){return globalThis.Object.getOwnPropertyNames($.patternProperties)[0]}function Mv($){let J=W3($);return J===X9?a8():J===Y9?OJ():a8({pattern:J})}function Z3($){return $.patternProperties[W3($)]}function $4$($,J){return J.parameters=gQ($,J.parameters),J.returns=KY($,J.returns),J}function J4$($,J){return J.parameters=gQ($,J.parameters),J.returns=KY($,J.returns),J}function Y4$($,J){return J.allOf=gQ($,J.allOf),J}function X4$($,J){return J.anyOf=gQ($,J.anyOf),J}function W4$($,J){if(j6(J.items))return J;return J.items=gQ($,J.items),J}function Z4$($,J){return J.items=KY($,J.items),J}function G4$($,J){return J.items=KY($,J.items),J}function Q4$($,J){return J.items=KY($,J.items),J}function H4$($,J){return J.item=KY($,J.item),J}function z4$($,J){let Y=F4$($,J.properties);return{...J,...c0(Y)}}function K4$($,J){let Y=KY($,Mv(J)),X=KY($,Z3(J)),W=X3(Y,X);return{...J,...W}}function w4$($,J){return J.index in $?$[J.index]:zY()}function U4$($,J){let Y=P7(J),X=w1(J),W=KY($,J);return Y&&X?Y3(W):Y&&!X?F1(W):!Y&&X?I8(W):W}function F4$($,J){return globalThis.Object.getOwnPropertyNames(J).reduce((Y,X)=>{return{...Y,[X]:U4$($,J[X])}},{})}function gQ($,J){return J.map((Y)=>KY($,Y))}function KY($,J){return ZY(J)?$4$($,J):GY(J)?J4$($,J):W6(J)?Y4$($,J):T0(J)?X4$($,J):i1(J)?W4$($,J):XY(J)?Z4$($,J):O5(J)?G4$($,J):S5(J)?Q4$($,J):A5(J)?H4$($,J):E6(J)?z4$($,J):j5(J)?K4$($,J):oN(J)?w4$($,J):J}function Vv($,J){return KY(J,B7($))}function Nv($){return $$({[l]:"Integer",type:"integer"},$)}function D4$($,J,Y){return{[$]:wY(S0($),J,m4(Y))}}function M4$($,J,Y){return $.reduce((W,Z)=>{return{...W,...D4$(Z,J,Y)}},{})}function V4$($,J,Y){return M4$($.keys,J,Y)}function _v($,J,Y){let X=V4$($,J,Y);return b0(X)}function N4$($){let[J,Y]=[$.slice(0,1),$.slice(1)];return[J.toLowerCase(),Y].join("")}function _4$($){let[J,Y]=[$.slice(0,1),$.slice(1)];return[J.toUpperCase(),Y].join("")}function L4$($){return $.toUpperCase()}function q4$($){return $.toLowerCase()}function B4$($,J,Y){let X=R7($.pattern);if(!E5(X))return{...$,pattern:Lv($.pattern,J)};let G=[...kQ(X)].map((z)=>S0(z)),Q=qv(G,J),H=d0(Q);return pw([H],Y)}function Lv($,J){return typeof $==="string"?J==="Uncapitalize"?N4$($):J==="Capitalize"?_4$($):J==="Uppercase"?L4$($):J==="Lowercase"?q4$($):$:$.toString()}function qv($,J){return $.map((Y)=>wY(Y,J))}function wY($,J,Y={}){return l1($)?_v($,J,Y):n1($)?B4$($,J,Y):T0($)?d0(qv($.anyOf,J),Y):p1($)?S0(Lv($.const,J),Y):$$($,Y)}function Bv($,J={}){return wY($,"Capitalize",J)}function Ov($,J={}){return wY($,"Lowercase",J)}function Pv($,J={}){return wY($,"Uncapitalize",J)}function Sv($,J={}){return wY($,"Uppercase",J)}function O4$($,J,Y){let X={};for(let W of globalThis.Object.getOwnPropertyNames($))X[W]=Q9($[W],J,m4(Y));return X}function P4$($,J,Y){return O4$($.properties,J,Y)}function Av($,J,Y){let X=P4$($,J,Y);return b0(X)}function S4$($,J){return $.map((Y)=>U_(Y,J))}function A4$($,J){return $.map((Y)=>U_(Y,J))}function j4$($,J){let{[J]:Y,...X}=$;return X}function E4$($,J){return J.reduce((Y,X)=>j4$(Y,X),$)}function C4$($,J,Y){let X=Z6($,[v4,"$id","required","properties"]),W=E4$(Y,J);return c0(W,X)}function T4$($){let J=$.reduce((Y,X)=>hw(X)?[...Y,S0(X)]:Y,[]);return d0(J)}function U_($,J){return W6($)?k8(S4$($.allOf,J)):T0($)?d0(A4$($.anyOf,J)):E6($)?C4$($,J,$.properties):c0({})}function Q9($,J,Y){let X=A6(J)?T4$(J):J,W=i4(J)?U1(J):J,Z=_6($),G=_6(J);return d4($)?Av($,W,Y):l1(J)?jv($,J,Y):Z&&G?f4("Omit",[$,X],Y):!Z&&G?f4("Omit",[$,X],Y):Z&&!G?f4("Omit",[$,X],Y):$$({...U_($,W),...Y})}function R4$($,J,Y){return{[J]:Q9($,[J],m4(Y))}}function I4$($,J,Y){return J.reduce((X,W)=>{return{...X,...R4$($,W,Y)}},{})}function k4$($,J,Y){return I4$($,J.keys,Y)}function jv($,J,Y){let X=k4$($,J,Y);return b0(X)}function b4$($,J,Y){let X={};for(let W of globalThis.Object.getOwnPropertyNames($))X[W]=H9($[W],J,m4(Y));return X}function v4$($,J,Y){return b4$($.properties,J,Y)}function Ev($,J,Y){let X=v4$($,J,Y);return b0(X)}function f4$($,J){return $.map((Y)=>F_(Y,J))}function g4$($,J){return $.map((Y)=>F_(Y,J))}function x4$($,J){let Y={};for(let X of J)if(X in $)Y[X]=$[X];return Y}function y4$($,J,Y){let X=Z6($,[v4,"$id","required","properties"]),W=x4$(Y,J);return c0(W,X)}function h4$($){let J=$.reduce((Y,X)=>hw(X)?[...Y,S0(X)]:Y,[]);return d0(J)}function F_($,J){return W6($)?k8(f4$($.allOf,J)):T0($)?d0(g4$($.anyOf,J)):E6($)?y4$($,J,$.properties):c0({})}function H9($,J,Y){let X=A6(J)?h4$(J):J,W=i4(J)?U1(J):J,Z=_6($),G=_6(J);return d4($)?Ev($,W,Y):l1(J)?Cv($,J,Y):Z&&G?f4("Pick",[$,X],Y):!Z&&G?f4("Pick",[$,X],Y):Z&&!G?f4("Pick",[$,X],Y):$$({...F_($,W),...Y})}function m4$($,J,Y){return{[J]:H9($,[J],m4(Y))}}function u4$($,J,Y){return J.reduce((X,W)=>{return{...X,...m4$($,W,Y)}},{})}function d4$($,J,Y){return u4$($,J.keys,Y)}function Cv($,J,Y){let X=d4$($,J,Y);return b0(X)}function c4$($,J){return f4("Partial",[f4($,J)])}function p4$($){return f4("Partial",[AJ($)])}function l4$($){let J={};for(let Y of globalThis.Object.getOwnPropertyNames($))J[Y]=I8($[Y]);return J}function n4$($,J){let Y=Z6($,[v4,"$id","required","properties"]),X=l4$(J);return c0(X,Y)}function Tv($){return $.map((J)=>Rv(J))}function Rv($){return WY($)?c4$($.target,$.parameters):_6($)?p4$($.$ref):W6($)?k8(Tv($.allOf)):T0($)?d0(Tv($.anyOf)):E6($)?n4$($,$.properties):P5($)?$:lX($)?$:QY($)?$:p1($)?$:jQ($)?$:HY($)?$:nX($)?$:EQ($)?$:iX($)?$:c0({})}function m7($,J){if(d4($))return Iv($,J);else return $$({...Rv($),...J})}function i4$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=m7($[X],m4(J));return Y}function r4$($,J){return i4$($.properties,J)}function Iv($,J){let Y=r4$($,J);return b0(Y)}function o4$($,J){return f4("Required",[f4($,J)])}function t4$($){return f4("Required",[AJ($)])}function a4$($){let J={};for(let Y of globalThis.Object.getOwnPropertyNames($))J[Y]=Z6($[Y],[m6]);return J}function s4$($,J){let Y=Z6($,[v4,"$id","required","properties"]),X=a4$(J);return c0(X,Y)}function kv($){return $.map((J)=>bv(J))}function bv($){return WY($)?o4$($.target,$.parameters):_6($)?t4$($.$ref):W6($)?k8(kv($.allOf)):T0($)?d0(kv($.anyOf)):E6($)?s4$($,$.properties):P5($)?$:lX($)?$:QY($)?$:p1($)?$:jQ($)?$:HY($)?$:nX($)?$:EQ($)?$:iX($)?$:c0({})}function u7($,J){if(d4($))return vv($,J);else return $$({...bv($),...J})}function e4$($,J){let Y={};for(let X of globalThis.Object.getOwnPropertyNames($))Y[X]=u7($[X],J);return Y}function $6$($,J){return e4$($.properties,J)}function vv($,J){let Y=$6$($,J);return b0(Y)}function J6$($,J){return J.map((Y)=>{return _6(Y)?D_($,Y.$ref):r1($,Y)})}function D_($,J){return J in $?_6($[J])?D_($,$[J].$ref):r1($,$[J]):z0()}function Y6$($){return v7($[0])}function X6$($){return Z9($[0],$[1])}function W6$($){return f7($[0])}function Z6$($){return m7($[0])}function G6$($){return Q9($[0],$[1])}function Q6$($){return H9($[0],$[1])}function H6$($){return u7($[0])}function z6$($,J,Y){let X=J6$($,Y);return J==="Awaited"?Y6$(X):J==="Index"?X6$(X):J==="KeyOf"?W6$(X):J==="Partial"?Z6$(X):J==="Omit"?G6$(X):J==="Pick"?Q6$(X):J==="Required"?H6$(X):z0()}function K6$($,J){return j7(r1($,J))}function w6$($,J){return E7(r1($,J))}function U6$($,J,Y){return C7(xQ($,J),r1($,Y))}function F6$($,J,Y){return ZX(xQ($,J),r1($,Y))}function D6$($,J){return k8(xQ($,J))}function M6$($,J){return b7(r1($,J))}function V6$($,J){return c0(globalThis.Object.keys(J).reduce((Y,X)=>{return{...Y,[X]:r1($,J[X])}},{}))}function N6$($,J){let[Y,X]=[r1($,Z3(J)),W3(J)],W=B7(J);return W.patternProperties[X]=Y,W}function _6$($,J){return _6(J)?{...D_($,J.$ref),[v4]:J[v4]}:J}function L6$($,J){return PJ(xQ($,J))}function q6$($,J){return d0(xQ($,J))}function xQ($,J){return J.map((Y)=>r1($,Y))}function r1($,J){return w1(J)?$$(r1($,Z6(J,[m6])),J):P7(J)?$$(r1($,Z6(J,[YY])),J):u0(J)?$$(_6$($,J),J):XY(J)?$$(K6$($,J.items),J):O5(J)?$$(w6$($,J.items),J):WY(J)?$$(z6$($,J.target,J.parameters)):ZY(J)?$$(U6$($,J.parameters,J.returns),J):GY(J)?$$(F6$($,J.parameters,J.returns),J):W6(J)?$$(D6$($,J.allOf),J):S5(J)?$$(M6$($,J.items),J):E6(J)?$$(V6$($,J.properties),J):j5(J)?$$(N6$($,J)):i1(J)?$$(L6$($,J.items||[]),J):T0(J)?$$(q6$($,J.anyOf),J):J}function B6$($,J){return J in $?r1($,$[J]):z0()}function fv($){return globalThis.Object.getOwnPropertyNames($).reduce((J,Y)=>{return{...J,[Y]:B6$($,Y)}},{})}class gv{constructor($){let J=fv($),Y=this.WithIdentifiers(J);this.$defs=Y}Import($,J){let Y={...this.$defs,[$]:$$(this.$defs[$],J)};return $$({[l]:"Import",$defs:Y,$ref:$})}WithIdentifiers($){return globalThis.Object.getOwnPropertyNames($).reduce((J,Y)=>{return{...J,[Y]:{...$[Y],$id:Y}}},{})}}function xv($){return new gv($)}function yv($,J){return $$({[l]:"Not",not:$},J)}function hv($,J){return GY($)?PJ($.parameters,J):z0()}var O6$=0;function mv($,J={}){if(j6(J.$id))J.$id=`T${O6$++}`;let Y=B7($({[l]:"This",$ref:`${J.$id}`}));return Y.$id=J.$id,$$({[BJ]:"Recursive",...Y},J)}function uv($,J){let Y=O4($)?new globalThis.RegExp($):$;return $$({[l]:"RegExp",type:"RegExp",source:Y.source,flags:Y.flags},J)}function P6$($){return W6($)?$.allOf:T0($)?$.anyOf:i1($)?$.items??[]:[]}function dv($){return P6$($)}function cv($,J){return GY($)?$$($.returns,J):z0(J)}class pv{constructor($){this.schema=$}Decode($){return new lv(this.schema,$)}}class lv{constructor($,J){this.schema=$,this.decode=J}EncodeTransform($,J){let W={Encode:(Z)=>J[v4].Encode($(Z)),Decode:(Z)=>this.decode(J[v4].Decode(Z))};return{...J,[v4]:W}}EncodeSchema($,J){let Y={Decode:this.decode,Encode:$};return{...J,[v4]:Y}}Encode($){return u0(this.schema)?this.EncodeTransform($,this.schema):this.EncodeSchema($,this.schema)}}function nv($){return new pv($)}function G3($={}){return $$({[l]:$[l]??"Unsafe"},$)}function iv($){return $$({[l]:"Void",type:"void"},$)}var M_={};k4(M_,{Void:()=>iv,Uppercase:()=>Sv,Unsafe:()=>G3,Unknown:()=>zY,Union:()=>d0,Undefined:()=>aw,Uncapitalize:()=>Pv,Uint8Array:()=>sw,Tuple:()=>PJ,Transform:()=>nv,TemplateLiteral:()=>pw,Symbol:()=>tw,String:()=>a8,ReturnType:()=>cv,Rest:()=>dv,Required:()=>u7,RegExp:()=>uv,Ref:()=>AJ,Recursive:()=>mv,Record:()=>X3,ReadonlyOptional:()=>Y3,Readonly:()=>F1,Promise:()=>nw,Pick:()=>H9,Partial:()=>m7,Parameters:()=>hv,Optional:()=>I8,Omit:()=>Q9,Object:()=>c0,Number:()=>OJ,Null:()=>ow,Not:()=>yv,Never:()=>z0,Module:()=>xv,Mapped:()=>mb,Lowercase:()=>Ov,Literal:()=>S0,KeyOf:()=>f7,Iterator:()=>b7,Intersect:()=>k8,Integer:()=>Nv,Instantiate:()=>Vv,InstanceType:()=>Dv,Index:()=>Z9,Function:()=>ZX,Extract:()=>h7,Extends:()=>x7,Exclude:()=>y7,Enum:()=>ob,Date:()=>rw,ConstructorParameters:()=>rb,Constructor:()=>C7,Const:()=>ib,Composite:()=>nb,Capitalize:()=>Bv,Boolean:()=>cw,BigInt:()=>k7,Awaited:()=>v7,AsyncIterator:()=>E7,Array:()=>j7,Argument:()=>Sb,Any:()=>W9});var CJ=M_;var CL=q5(yQ(),1);function E6$($){switch($.errorType){case s.ArrayContains:return"Expected array to contain at least one matching value";case s.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case s.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case s.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case s.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case s.ArrayUniqueItems:return"Expected array elements to be unique";case s.Array:return"Expected array";case s.AsyncIterator:return"Expected AsyncIterator";case s.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case s.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case s.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case s.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case s.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case s.BigInt:return"Expected bigint";case s.Boolean:return"Expected boolean";case s.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case s.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case s.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case s.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case s.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case s.Date:return"Expected Date";case s.Function:return"Expected function";case s.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case s.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case s.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case s.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case s.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case s.Integer:return"Expected integer";case s.IntersectUnevaluatedProperties:return"Unexpected property";case s.Intersect:return"Expected all values to match";case s.Iterator:return"Expected Iterator";case s.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case s.Never:return"Never";case s.Not:return"Value should not match";case s.Null:return"Expected null";case s.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case s.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case s.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case s.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case s.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case s.Number:return"Expected number";case s.Object:return"Expected object";case s.ObjectAdditionalProperties:return"Unexpected property";case s.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case s.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case s.ObjectRequiredProperty:return"Expected required property";case s.Promise:return"Expected Promise";case s.RegExp:return"Expected string to match regular expression";case s.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case s.StringFormat:return`Expected string to match '${$.schema.format}' format`;case s.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case s.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case s.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case s.String:return"Expected string";case s.Symbol:return"Expected symbol";case s.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case s.Tuple:return"Expected tuple";case s.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case s.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case s.Uint8Array:return"Expected Uint8Array";case s.Undefined:return"Expected undefined";case s.Union:return"Expected union value";case s.Void:return"Expected void";case s.Kind:return`Expected kind '${$.schema[l]}'`;default:return"Unknown error type"}}var C6$=E6$;function av(){return C6$}class sv extends p${constructor($){super(`Unable to dereference schema with $id '${$.$ref}'`);this.schema=$}}function T6$($,J){let Y=J.find((X)=>X.$id===$.$ref);if(Y===void 0)throw new sv($);return R0(Y,J)}function a6($,J){if(!C0($.$id)||J.some((Y)=>Y.$id===$.$id))return J;return J.push($),J}function R0($,J){return $[l]==="This"||$[l]==="Ref"?T6$($,J):$}class ev extends p${constructor($){super("Unable to hash value");this.value=$}}var o1;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(o1||(o1={}));var d7=BigInt("14695981039346656037"),[R6$,I6$]=[BigInt("1099511628211"),BigInt("18446744073709551616")],k6$=Array.from({length:256}).map(($,J)=>BigInt(J)),$f=new Float64Array(1),Jf=new DataView($f.buffer),Yf=new Uint8Array($f.buffer);function*b6$($){let J=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Y=0;Y<J;Y++)yield $>>8*(J-1-Y)&255}function v6$($){v8(o1.Array);for(let J of $)c7(J)}function f6$($){v8(o1.Boolean),v8($?1:0)}function g6$($){v8(o1.BigInt),Jf.setBigInt64(0,$);for(let J of Yf)v8(J)}function x6$($){v8(o1.Date),c7($.getTime())}function y6$($){v8(o1.Null)}function h6$($){v8(o1.Number),Jf.setFloat64(0,$);for(let J of Yf)v8(J)}function m6$($){v8(o1.Object);for(let J of globalThis.Object.getOwnPropertyNames($).sort())c7(J),c7($[J])}function u6$($){v8(o1.String);for(let J=0;J<$.length;J++)for(let Y of b6$($.charCodeAt(J)))v8(Y)}function d6$($){v8(o1.Symbol),c7($.description)}function c6$($){v8(o1.Uint8Array);for(let J=0;J<$.length;J++)v8($[J])}function p6$($){return v8(o1.Undefined)}function c7($){if(c$($))return v6$($);if(WX($))return f6$($);if(M8($))return g6$($);if(t8($))return x6$($);if(cX($))return y6$($);if(x$($))return h6$($);if(Y0($))return m6$($);if(C0($))return u6$($);if(pX($))return d6$($);if(O7($))return c6$($);if(u4($))return p6$($);throw new ev($)}function v8($){d7=d7^k6$[$],d7=d7*R6$%I6$}function z9($){return d7=BigInt("14695981039346656037"),c7($),d7}class Xf extends p${constructor($){super("Unknown type");this.schema=$}}function l6$($){return $[l]==="Any"||$[l]==="Unknown"}function q0($){return $!==void 0}function n6$($,J,Y){return!0}function i6$($,J,Y){return!0}function r6$($,J,Y){if(!c$(Y))return!1;if(q0($.minItems)&&!(Y.length>=$.minItems))return!1;if(q0($.maxItems)&&!(Y.length<=$.maxItems))return!1;for(let Z of Y)if(!s6($.items,J,Z))return!1;if($.uniqueItems===!0&&!function(){let Z=new Set;for(let G of Y){let Q=z9(G);if(Z.has(Q))return!1;else Z.add(Q)}return!0}())return!1;if(!(q0($.contains)||x$($.minContains)||x$($.maxContains)))return!0;let X=q0($.contains)?$.contains:z0(),W=Y.reduce((Z,G)=>s6(X,J,G)?Z+1:Z,0);if(W===0)return!1;if(x$($.minContains)&&W<$.minContains)return!1;if(x$($.maxContains)&&W>$.maxContains)return!1;return!0}function o6$($,J,Y){return fw(Y)}function t6$($,J,Y){if(!M8(Y))return!1;if(q0($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(q0($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(q0($.maximum)&&!(Y<=$.maximum))return!1;if(q0($.minimum)&&!(Y>=$.minimum))return!1;if(q0($.multipleOf)&&Y%$.multipleOf!==BigInt(0))return!1;return!0}function a6$($,J,Y){return WX(Y)}function s6$($,J,Y){return s6($.returns,J,Y.prototype)}function e6$($,J,Y){if(!t8(Y))return!1;if(q0($.exclusiveMaximumTimestamp)&&!(Y.getTime()<$.exclusiveMaximumTimestamp))return!1;if(q0($.exclusiveMinimumTimestamp)&&!(Y.getTime()>$.exclusiveMinimumTimestamp))return!1;if(q0($.maximumTimestamp)&&!(Y.getTime()<=$.maximumTimestamp))return!1;if(q0($.minimumTimestamp)&&!(Y.getTime()>=$.minimumTimestamp))return!1;if(q0($.multipleOfTimestamp)&&Y.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function $8$($,J,Y){return eW(Y)}function J8$($,J,Y){let X=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return s6(W,[...J,...X],Y)}function Y8$($,J,Y){if(!yw(Y))return!1;if(q0($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(q0($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(q0($.maximum)&&!(Y<=$.maximum))return!1;if(q0($.minimum)&&!(Y>=$.minimum))return!1;if(q0($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0}function X8$($,J,Y){let X=$.allOf.every((W)=>s6(W,J,Y));if($.unevaluatedProperties===!1){let W=new RegExp(tX($)),Z=Object.getOwnPropertyNames(Y).every((G)=>W.test(G));return X&&Z}else if(i4($.unevaluatedProperties)){let W=new RegExp(tX($)),Z=Object.getOwnPropertyNames(Y).every((G)=>W.test(G)||s6($.unevaluatedProperties,J,Y[G]));return X&&Z}else return X}function W8$($,J,Y){return gw(Y)}function Z8$($,J,Y){return Y===$.const}function G8$($,J,Y){return!1}function Q8$($,J,Y){return!s6($.not,J,Y)}function H8$($,J,Y){return cX(Y)}function z8$($,J,Y){if(!b4.IsNumberLike(Y))return!1;if(q0($.exclusiveMaximum)&&!(Y<$.exclusiveMaximum))return!1;if(q0($.exclusiveMinimum)&&!(Y>$.exclusiveMinimum))return!1;if(q0($.minimum)&&!(Y>=$.minimum))return!1;if(q0($.maximum)&&!(Y<=$.maximum))return!1;if(q0($.multipleOf)&&Y%$.multipleOf!==0)return!1;return!0}function K8$($,J,Y){if(!b4.IsObjectLike(Y))return!1;if(q0($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(q0($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;let X=Object.getOwnPropertyNames($.properties);for(let W of X){let Z=$.properties[W];if($.required&&$.required.includes(W)){if(!s6(Z,J,Y[W]))return!1;if((aX(Z)||l6$(Z))&&!(W in Y))return!1}else if(b4.IsExactOptionalProperty(Y,W)&&!s6(Z,J,Y[W]))return!1}if($.additionalProperties===!1){let W=Object.getOwnPropertyNames(Y);if($.required&&$.required.length===X.length&&W.length===X.length)return!0;else return W.every((Z)=>X.includes(Z))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Y).every((Z)=>X.includes(Z)||s6($.additionalProperties,J,Y[Z]));else return!0}function w8$($,J,Y){return xw(Y)}function U8$($,J,Y){if(!b4.IsRecordLike(Y))return!1;if(q0($.minProperties)&&!(Object.getOwnPropertyNames(Y).length>=$.minProperties))return!1;if(q0($.maxProperties)&&!(Object.getOwnPropertyNames(Y).length<=$.maxProperties))return!1;let[X,W]=Object.entries($.patternProperties)[0],Z=new RegExp(X),G=Object.entries(Y).every(([z,K])=>{return Z.test(z)?s6(W,J,K):!0}),Q=typeof $.additionalProperties==="object"?Object.entries(Y).every(([z,K])=>{return!Z.test(z)?s6($.additionalProperties,J,K):!0}):!0,H=$.additionalProperties===!1?Object.getOwnPropertyNames(Y).every((z)=>{return Z.test(z)}):!0;return G&&Q&&H}function F8$($,J,Y){return s6(R0($,J),J,Y)}function D8$($,J,Y){let X=new RegExp($.source,$.flags);if(q0($.minLength)){if(!(Y.length>=$.minLength))return!1}if(q0($.maxLength)){if(!(Y.length<=$.maxLength))return!1}return X.test(Y)}function M8$($,J,Y){if(!C0(Y))return!1;if(q0($.minLength)){if(!(Y.length>=$.minLength))return!1}if(q0($.maxLength)){if(!(Y.length<=$.maxLength))return!1}if(q0($.pattern)){if(!new RegExp($.pattern).test(Y))return!1}if(q0($.format)){if(!J4.Has($.format))return!1;return J4.Get($.format)(Y)}return!0}function V8$($,J,Y){return pX(Y)}function N8$($,J,Y){return C0(Y)&&new RegExp($.pattern).test(Y)}function _8$($,J,Y){return s6(R0($,J),J,Y)}function L8$($,J,Y){if(!c$(Y))return!1;if($.items===void 0&&Y.length!==0)return!1;if(Y.length!==$.maxItems)return!1;if(!$.items)return!0;for(let X=0;X<$.items.length;X++)if(!s6($.items[X],J,Y[X]))return!1;return!0}function q8$($,J,Y){return u4(Y)}function B8$($,J,Y){return $.anyOf.some((X)=>s6(X,J,Y))}function O8$($,J,Y){if(!O7(Y))return!1;if(q0($.maxByteLength)&&!(Y.length<=$.maxByteLength))return!1;if(q0($.minByteLength)&&!(Y.length>=$.minByteLength))return!1;return!0}function P8$($,J,Y){return!0}function S8$($,J,Y){return b4.IsVoidLike(Y)}function A8$($,J,Y){if(!u6.Has($[l]))return!1;return u6.Get($[l])($,Y)}function s6($,J,Y){let X=q0($.$id)?a6($,J):J,W=$;switch(W[l]){case"Any":return n6$(W,X,Y);case"Argument":return i6$(W,X,Y);case"Array":return r6$(W,X,Y);case"AsyncIterator":return o6$(W,X,Y);case"BigInt":return t6$(W,X,Y);case"Boolean":return a6$(W,X,Y);case"Constructor":return s6$(W,X,Y);case"Date":return e6$(W,X,Y);case"Function":return $8$(W,X,Y);case"Import":return J8$(W,X,Y);case"Integer":return Y8$(W,X,Y);case"Intersect":return X8$(W,X,Y);case"Iterator":return W8$(W,X,Y);case"Literal":return Z8$(W,X,Y);case"Never":return G8$(W,X,Y);case"Not":return Q8$(W,X,Y);case"Null":return H8$(W,X,Y);case"Number":return z8$(W,X,Y);case"Object":return K8$(W,X,Y);case"Promise":return w8$(W,X,Y);case"Record":return U8$(W,X,Y);case"Ref":return F8$(W,X,Y);case"RegExp":return D8$(W,X,Y);case"String":return M8$(W,X,Y);case"Symbol":return V8$(W,X,Y);case"TemplateLiteral":return N8$(W,X,Y);case"This":return _8$(W,X,Y);case"Tuple":return L8$(W,X,Y);case"Undefined":return q8$(W,X,Y);case"Union":return B8$(W,X,Y);case"Uint8Array":return O8$(W,X,Y);case"Unknown":return P8$(W,X,Y);case"Void":return S8$(W,X,Y);default:if(!u6.Has(W[l]))throw new Xf(W);return A8$(W,X,Y)}}function K0(...$){return $.length===3?s6($[0],$[1],$[2]):s6($[0],[],$[1])}var s;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(s||(s={}));class Wf extends p${constructor($){super("Unknown type");this.schema=$}}function sX($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function B0($){return $!==void 0}class R5{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function P$($,J,Y,X,W=[]){return{type:$,schema:J,path:Y,value:X,message:av()({errorType:$,path:Y,schema:J,value:X,errors:W}),errors:W}}function*j8$($,J,Y,X){}function*E8$($,J,Y,X){}function*C8$($,J,Y,X){if(!c$(X))return yield P$(s.Array,$,Y,X);if(B0($.minItems)&&!(X.length>=$.minItems))yield P$(s.ArrayMinItems,$,Y,X);if(B0($.maxItems)&&!(X.length<=$.maxItems))yield P$(s.ArrayMaxItems,$,Y,X);for(let G=0;G<X.length;G++)yield*e6($.items,J,`${Y}/${G}`,X[G]);if($.uniqueItems===!0&&!function(){let G=new Set;for(let Q of X){let H=z9(Q);if(G.has(H))return!1;else G.add(H)}return!0}())yield P$(s.ArrayUniqueItems,$,Y,X);if(!(B0($.contains)||B0($.minContains)||B0($.maxContains)))return;let W=B0($.contains)?$.contains:z0(),Z=X.reduce((G,Q,H)=>e6(W,J,`${Y}${H}`,Q).next().done===!0?G+1:G,0);if(Z===0)yield P$(s.ArrayContains,$,Y,X);if(x$($.minContains)&&Z<$.minContains)yield P$(s.ArrayMinContains,$,Y,X);if(x$($.maxContains)&&Z>$.maxContains)yield P$(s.ArrayMaxContains,$,Y,X)}function*T8$($,J,Y,X){if(!fw(X))yield P$(s.AsyncIterator,$,Y,X)}function*R8$($,J,Y,X){if(!M8(X))return yield P$(s.BigInt,$,Y,X);if(B0($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield P$(s.BigIntExclusiveMaximum,$,Y,X);if(B0($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield P$(s.BigIntExclusiveMinimum,$,Y,X);if(B0($.maximum)&&!(X<=$.maximum))yield P$(s.BigIntMaximum,$,Y,X);if(B0($.minimum)&&!(X>=$.minimum))yield P$(s.BigIntMinimum,$,Y,X);if(B0($.multipleOf)&&X%$.multipleOf!==BigInt(0))yield P$(s.BigIntMultipleOf,$,Y,X)}function*I8$($,J,Y,X){if(!WX(X))yield P$(s.Boolean,$,Y,X)}function*k8$($,J,Y,X){yield*e6($.returns,J,Y,X.prototype)}function*b8$($,J,Y,X){if(!t8(X))return yield P$(s.Date,$,Y,X);if(B0($.exclusiveMaximumTimestamp)&&!(X.getTime()<$.exclusiveMaximumTimestamp))yield P$(s.DateExclusiveMaximumTimestamp,$,Y,X);if(B0($.exclusiveMinimumTimestamp)&&!(X.getTime()>$.exclusiveMinimumTimestamp))yield P$(s.DateExclusiveMinimumTimestamp,$,Y,X);if(B0($.maximumTimestamp)&&!(X.getTime()<=$.maximumTimestamp))yield P$(s.DateMaximumTimestamp,$,Y,X);if(B0($.minimumTimestamp)&&!(X.getTime()>=$.minimumTimestamp))yield P$(s.DateMinimumTimestamp,$,Y,X);if(B0($.multipleOfTimestamp)&&X.getTime()%$.multipleOfTimestamp!==0)yield P$(s.DateMultipleOfTimestamp,$,Y,X)}function*v8$($,J,Y,X){if(!eW(X))yield P$(s.Function,$,Y,X)}function*f8$($,J,Y,X){let W=globalThis.Object.values($.$defs),Z=$.$defs[$.$ref];yield*e6(Z,[...J,...W],Y,X)}function*g8$($,J,Y,X){if(!yw(X))return yield P$(s.Integer,$,Y,X);if(B0($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield P$(s.IntegerExclusiveMaximum,$,Y,X);if(B0($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield P$(s.IntegerExclusiveMinimum,$,Y,X);if(B0($.maximum)&&!(X<=$.maximum))yield P$(s.IntegerMaximum,$,Y,X);if(B0($.minimum)&&!(X>=$.minimum))yield P$(s.IntegerMinimum,$,Y,X);if(B0($.multipleOf)&&X%$.multipleOf!==0)yield P$(s.IntegerMultipleOf,$,Y,X)}function*x8$($,J,Y,X){let W=!1;for(let Z of $.allOf)for(let G of e6(Z,J,Y,X))W=!0,yield G;if(W)return yield P$(s.Intersect,$,Y,X);if($.unevaluatedProperties===!1){let Z=new RegExp(tX($));for(let G of Object.getOwnPropertyNames(X))if(!Z.test(G))yield P$(s.IntersectUnevaluatedProperties,$,`${Y}/${G}`,X)}if(typeof $.unevaluatedProperties==="object"){let Z=new RegExp(tX($));for(let G of Object.getOwnPropertyNames(X))if(!Z.test(G)){let Q=e6($.unevaluatedProperties,J,`${Y}/${G}`,X[G]).next();if(!Q.done)yield Q.value}}}function*y8$($,J,Y,X){if(!gw(X))yield P$(s.Iterator,$,Y,X)}function*h8$($,J,Y,X){if(X!==$.const)yield P$(s.Literal,$,Y,X)}function*m8$($,J,Y,X){yield P$(s.Never,$,Y,X)}function*u8$($,J,Y,X){if(e6($.not,J,Y,X).next().done===!0)yield P$(s.Not,$,Y,X)}function*d8$($,J,Y,X){if(!cX(X))yield P$(s.Null,$,Y,X)}function*c8$($,J,Y,X){if(!b4.IsNumberLike(X))return yield P$(s.Number,$,Y,X);if(B0($.exclusiveMaximum)&&!(X<$.exclusiveMaximum))yield P$(s.NumberExclusiveMaximum,$,Y,X);if(B0($.exclusiveMinimum)&&!(X>$.exclusiveMinimum))yield P$(s.NumberExclusiveMinimum,$,Y,X);if(B0($.maximum)&&!(X<=$.maximum))yield P$(s.NumberMaximum,$,Y,X);if(B0($.minimum)&&!(X>=$.minimum))yield P$(s.NumberMinimum,$,Y,X);if(B0($.multipleOf)&&X%$.multipleOf!==0)yield P$(s.NumberMultipleOf,$,Y,X)}function*p8$($,J,Y,X){if(!b4.IsObjectLike(X))return yield P$(s.Object,$,Y,X);if(B0($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield P$(s.ObjectMinProperties,$,Y,X);if(B0($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield P$(s.ObjectMaxProperties,$,Y,X);let W=Array.isArray($.required)?$.required:[],Z=Object.getOwnPropertyNames($.properties),G=Object.getOwnPropertyNames(X);for(let Q of W){if(G.includes(Q))continue;yield P$(s.ObjectRequiredProperty,$.properties[Q],`${Y}/${sX(Q)}`,void 0)}if($.additionalProperties===!1){for(let Q of G)if(!Z.includes(Q))yield P$(s.ObjectAdditionalProperties,$,`${Y}/${sX(Q)}`,X[Q])}if(typeof $.additionalProperties==="object")for(let Q of G){if(Z.includes(Q))continue;yield*e6($.additionalProperties,J,`${Y}/${sX(Q)}`,X[Q])}for(let Q of Z){let H=$.properties[Q];if($.required&&$.required.includes(Q)){if(yield*e6(H,J,`${Y}/${sX(Q)}`,X[Q]),aX($)&&!(Q in X))yield P$(s.ObjectRequiredProperty,H,`${Y}/${sX(Q)}`,void 0)}else if(b4.IsExactOptionalProperty(X,Q))yield*e6(H,J,`${Y}/${sX(Q)}`,X[Q])}}function*l8$($,J,Y,X){if(!xw(X))yield P$(s.Promise,$,Y,X)}function*n8$($,J,Y,X){if(!b4.IsRecordLike(X))return yield P$(s.Object,$,Y,X);if(B0($.minProperties)&&!(Object.getOwnPropertyNames(X).length>=$.minProperties))yield P$(s.ObjectMinProperties,$,Y,X);if(B0($.maxProperties)&&!(Object.getOwnPropertyNames(X).length<=$.maxProperties))yield P$(s.ObjectMaxProperties,$,Y,X);let[W,Z]=Object.entries($.patternProperties)[0],G=new RegExp(W);for(let[Q,H]of Object.entries(X))if(G.test(Q))yield*e6(Z,J,`${Y}/${sX(Q)}`,H);if(typeof $.additionalProperties==="object"){for(let[Q,H]of Object.entries(X))if(!G.test(Q))yield*e6($.additionalProperties,J,`${Y}/${sX(Q)}`,H)}if($.additionalProperties===!1)for(let[Q,H]of Object.entries(X)){if(G.test(Q))continue;return yield P$(s.ObjectAdditionalProperties,$,`${Y}/${sX(Q)}`,H)}}function*i8$($,J,Y,X){yield*e6(R0($,J),J,Y,X)}function*r8$($,J,Y,X){if(!C0(X))return yield P$(s.String,$,Y,X);if(B0($.minLength)&&!(X.length>=$.minLength))yield P$(s.StringMinLength,$,Y,X);if(B0($.maxLength)&&!(X.length<=$.maxLength))yield P$(s.StringMaxLength,$,Y,X);if(!new RegExp($.source,$.flags).test(X))return yield P$(s.RegExp,$,Y,X)}function*o8$($,J,Y,X){if(!C0(X))return yield P$(s.String,$,Y,X);if(B0($.minLength)&&!(X.length>=$.minLength))yield P$(s.StringMinLength,$,Y,X);if(B0($.maxLength)&&!(X.length<=$.maxLength))yield P$(s.StringMaxLength,$,Y,X);if(C0($.pattern)){if(!new RegExp($.pattern).test(X))yield P$(s.StringPattern,$,Y,X)}if(C0($.format)){if(!J4.Has($.format))yield P$(s.StringFormatUnknown,$,Y,X);else if(!J4.Get($.format)(X))yield P$(s.StringFormat,$,Y,X)}}function*t8$($,J,Y,X){if(!pX(X))yield P$(s.Symbol,$,Y,X)}function*a8$($,J,Y,X){if(!C0(X))return yield P$(s.String,$,Y,X);if(!new RegExp($.pattern).test(X))yield P$(s.StringPattern,$,Y,X)}function*s8$($,J,Y,X){yield*e6(R0($,J),J,Y,X)}function*e8$($,J,Y,X){if(!c$(X))return yield P$(s.Tuple,$,Y,X);if($.items===void 0&&X.length!==0)return yield P$(s.TupleLength,$,Y,X);if(X.length!==$.maxItems)return yield P$(s.TupleLength,$,Y,X);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*e6($.items[W],J,`${Y}/${W}`,X[W])}function*$1$($,J,Y,X){if(!u4(X))yield P$(s.Undefined,$,Y,X)}function*J1$($,J,Y,X){if(K0($,J,X))return;let W=$.anyOf.map((Z)=>new R5(e6(Z,J,Y,X)));yield P$(s.Union,$,Y,X,W)}function*Y1$($,J,Y,X){if(!O7(X))return yield P$(s.Uint8Array,$,Y,X);if(B0($.maxByteLength)&&!(X.length<=$.maxByteLength))yield P$(s.Uint8ArrayMaxByteLength,$,Y,X);if(B0($.minByteLength)&&!(X.length>=$.minByteLength))yield P$(s.Uint8ArrayMinByteLength,$,Y,X)}function*X1$($,J,Y,X){}function*W1$($,J,Y,X){if(!b4.IsVoidLike(X))yield P$(s.Void,$,Y,X)}function*Z1$($,J,Y,X){if(!u6.Get($[l])($,X))yield P$(s.Kind,$,Y,X)}function*e6($,J,Y,X){let W=B0($.$id)?[...J,$]:J,Z=$;switch(Z[l]){case"Any":return yield*j8$(Z,W,Y,X);case"Argument":return yield*E8$(Z,W,Y,X);case"Array":return yield*C8$(Z,W,Y,X);case"AsyncIterator":return yield*T8$(Z,W,Y,X);case"BigInt":return yield*R8$(Z,W,Y,X);case"Boolean":return yield*I8$(Z,W,Y,X);case"Constructor":return yield*k8$(Z,W,Y,X);case"Date":return yield*b8$(Z,W,Y,X);case"Function":return yield*v8$(Z,W,Y,X);case"Import":return yield*f8$(Z,W,Y,X);case"Integer":return yield*g8$(Z,W,Y,X);case"Intersect":return yield*x8$(Z,W,Y,X);case"Iterator":return yield*y8$(Z,W,Y,X);case"Literal":return yield*h8$(Z,W,Y,X);case"Never":return yield*m8$(Z,W,Y,X);case"Not":return yield*u8$(Z,W,Y,X);case"Null":return yield*d8$(Z,W,Y,X);case"Number":return yield*c8$(Z,W,Y,X);case"Object":return yield*p8$(Z,W,Y,X);case"Promise":return yield*l8$(Z,W,Y,X);case"Record":return yield*n8$(Z,W,Y,X);case"Ref":return yield*i8$(Z,W,Y,X);case"RegExp":return yield*r8$(Z,W,Y,X);case"String":return yield*o8$(Z,W,Y,X);case"Symbol":return yield*t8$(Z,W,Y,X);case"TemplateLiteral":return yield*a8$(Z,W,Y,X);case"This":return yield*s8$(Z,W,Y,X);case"Tuple":return yield*e8$(Z,W,Y,X);case"Undefined":return yield*$1$(Z,W,Y,X);case"Union":return yield*J1$(Z,W,Y,X);case"Uint8Array":return yield*Y1$(Z,W,Y,X);case"Unknown":return yield*X1$(Z,W,Y,X);case"Void":return yield*W1$(Z,W,Y,X);default:if(!u6.Has(Z[l]))throw new Wf($);return yield*Z1$(Z,W,Y,X)}}function QX(...$){let J=$.length===3?e6($[0],$[1],"",$[2]):e6($[0],[],"",$[1]);return new R5(J)}var G1$=function($,J,Y,X,W){if(X==="m")throw TypeError("Private method is not writable");if(X==="a"&&!W)throw TypeError("Private accessor was defined without a setter");if(typeof J==="function"?$!==J||!W:!J.has($))throw TypeError("Cannot write private member to an object whose class did not declare it");return X==="a"?W.call($,Y):W?W.value=Y:J.set($,Y),Y},Gf=function($,J,Y,X){if(Y==="a"&&!X)throw TypeError("Private accessor was defined without a getter");if(typeof J==="function"?$!==J||!X:!J.has($))throw TypeError("Cannot read private member from an object whose class did not declare it");return Y==="m"?X:Y==="a"?X.call($):X?X.value:J.get($)},N_,Q3,Qf;class Hf extends p${constructor($){let J=$.First();super(J===void 0?"Invalid Value":J.message);N_.add(this),Q3.set(this,void 0),G1$(this,Q3,$,"f"),this.error=J}Errors(){return new R5(Gf(this,N_,"m",Qf).call(this))}}Q3=new WeakMap,N_=new WeakSet,Qf=function*(){if(this.error)yield this.error;yield*Gf(this,Q3,"f")};function Zf($,J,Y){if(K0($,J,Y))return;throw new Hf(QX($,J,Y))}function H3(...$){return $.length===3?Zf($[0],$[1],$[2]):Zf($[0],[],$[1])}function Q1$($){let J={};for(let Y of Object.getOwnPropertyNames($))J[Y]=v0($[Y]);for(let Y of Object.getOwnPropertySymbols($))J[Y]=v0($[Y]);return J}function H1$($){return $.map((J)=>v0(J))}function z1$($){return $.slice()}function K1$($){return new Map(v0([...$.entries()]))}function w1$($){return new Set(v0([...$.entries()]))}function U1$($){return new Date($.toISOString())}function F1$($){return $}function v0($){if(c$($))return H1$($);if(t8($))return U1$($);if(qJ($))return z1$($);if(jk($))return K1$($);if(Ek($))return w1$($);if(Y0($))return Q1$($);if(c1($))return F1$($);throw Error("ValueClone: Unable to clone value")}class TJ extends p${constructor($,J){super(J);this.schema=$}}function f0($){return eW($)?$():v0($)}function D1$($,J){if(i$($,"default"))return f0($.default);else return{}}function M1$($,J){return{}}function V1$($,J){if($.uniqueItems===!0&&!i$($,"default"))throw new TJ($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!i$($,"default"))throw new TJ($,"Array with the contains constraint requires a default value");else if("default"in $)return f0($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Y)=>{return t1($.items,J)});else return[]}function N1$($,J){if(i$($,"default"))return f0($.default);else return async function*(){}()}function _1$($,J){if(i$($,"default"))return f0($.default);else return BigInt(0)}function L1$($,J){if(i$($,"default"))return f0($.default);else return!1}function q1$($,J){if(i$($,"default"))return f0($.default);else{let Y=t1($.returns,J);if(typeof Y==="object"&&!Array.isArray(Y))return class{constructor(){for(let[X,W]of Object.entries(Y)){let Z=this;Z[X]=W}}};else return class{}}}function B1$($,J){if(i$($,"default"))return f0($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function O1$($,J){if(i$($,"default"))return f0($.default);else return()=>t1($.returns,J)}function P1$($,J){let Y=globalThis.Object.values($.$defs),X=$.$defs[$.$ref];return t1(X,[...J,...Y])}function S1$($,J){if(i$($,"default"))return f0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function A1$($,J){if(i$($,"default"))return f0($.default);else{let Y=$.allOf.reduce((X,W)=>{let Z=t1(W,J);return typeof Z==="object"?{...X,...Z}:Z},{});if(!K0($,J,Y))throw new TJ($,"Intersect produced invalid value. Consider using a default value.");return Y}}function j1$($,J){if(i$($,"default"))return f0($.default);else return function*(){}()}function E1$($,J){if(i$($,"default"))return f0($.default);else return $.const}function C1$($,J){if(i$($,"default"))return f0($.default);else throw new TJ($,"Never types cannot be created. Consider using a default value.")}function T1$($,J){if(i$($,"default"))return f0($.default);else throw new TJ($,"Not types must have a default value")}function R1$($,J){if(i$($,"default"))return f0($.default);else return null}function I1$($,J){if(i$($,"default"))return f0($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function k1$($,J){if(i$($,"default"))return f0($.default);else{let Y=new Set($.required),X={};for(let[W,Z]of Object.entries($.properties)){if(!Y.has(W))continue;X[W]=t1(Z,J)}return X}}function b1$($,J){if(i$($,"default"))return f0($.default);else return Promise.resolve(t1($.item,J))}function v1$($,J){if(i$($,"default"))return f0($.default);else return{}}function f1$($,J){if(i$($,"default"))return f0($.default);else return t1(R0($,J),J)}function g1$($,J){if(i$($,"default"))return f0($.default);else throw new TJ($,"RegExp types cannot be created. Consider using a default value.")}function x1$($,J){if($.pattern!==void 0)if(!i$($,"default"))throw new TJ($,"String types with patterns must specify a default value");else return f0($.default);else if($.format!==void 0)if(!i$($,"default"))throw new TJ($,"String types with formats must specify a default value");else return f0($.default);else if(i$($,"default"))return f0($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function y1$($,J){if(i$($,"default"))return f0($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function h1$($,J){if(i$($,"default"))return f0($.default);if(!dw($))throw new TJ($,"Can only create template literals that produce a finite variants. Consider using a default value.");return I7($)[0]}function m1$($,J){if(zf++>r1$)throw new TJ($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(i$($,"default"))return f0($.default);else return t1(R0($,J),J)}function u1$($,J){if(i$($,"default"))return f0($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Y,X)=>t1($.items[X],J))}function d1$($,J){if(i$($,"default"))return f0($.default);else return}function c1$($,J){if(i$($,"default"))return f0($.default);else if($.anyOf.length===0)throw Error("ValueCreate.Union: Cannot create Union with zero variants");else return t1($.anyOf[0],J)}function p1$($,J){if(i$($,"default"))return f0($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function l1$($,J){if(i$($,"default"))return f0($.default);else return{}}function n1$($,J){if(i$($,"default"))return f0($.default);else return}function i1$($,J){if(i$($,"default"))return f0($.default);else throw Error("User defined types must specify a default value")}function t1($,J){let Y=a6($,J),X=$;switch(X[l]){case"Any":return D1$(X,Y);case"Argument":return M1$(X,Y);case"Array":return V1$(X,Y);case"AsyncIterator":return N1$(X,Y);case"BigInt":return _1$(X,Y);case"Boolean":return L1$(X,Y);case"Constructor":return q1$(X,Y);case"Date":return B1$(X,Y);case"Function":return O1$(X,Y);case"Import":return P1$(X,Y);case"Integer":return S1$(X,Y);case"Intersect":return A1$(X,Y);case"Iterator":return j1$(X,Y);case"Literal":return E1$(X,Y);case"Never":return C1$(X,Y);case"Not":return T1$(X,Y);case"Null":return R1$(X,Y);case"Number":return I1$(X,Y);case"Object":return k1$(X,Y);case"Promise":return b1$(X,Y);case"Record":return v1$(X,Y);case"Ref":return f1$(X,Y);case"RegExp":return g1$(X,Y);case"String":return x1$(X,Y);case"Symbol":return y1$(X,Y);case"TemplateLiteral":return h1$(X,Y);case"This":return m1$(X,Y);case"Tuple":return u1$(X,Y);case"Undefined":return d1$(X,Y);case"Union":return c1$(X,Y);case"Uint8Array":return p1$(X,Y);case"Unknown":return l1$(X,Y);case"Void":return n1$(X,Y);default:if(!u6.Has(X[l]))throw new TJ(X,"Unknown type");return i1$(X,Y)}}var r1$=512,zf=0;function UY(...$){return zf=0,$.length===2?t1($[0],$[1]):t1($[0],[])}class __ extends p${constructor($,J){super(J);this.schema=$}}function Kf($,J,Y){if($[l]==="Object"&&typeof Y==="object"&&!cX(Y)){let X=$,W=Object.getOwnPropertyNames(Y);return Object.entries(X.properties).reduce((G,[Q,H])=>{let z=H[l]==="Literal"&&H.const===Y[Q]?100:0,K=K0(H,J,Y[Q])?10:0,w=W.includes(Q)?1:0;return G+(z+K+w)},0)}else if($[l]==="Union"){let W=$.anyOf.map((Z)=>R0(Z,J)).map((Z)=>Kf(Z,J,Y));return Math.max(...W)}else return K0($,J,Y)?1:0}function o1$($,J,Y){let X=$.anyOf.map((G)=>R0(G,J)),[W,Z]=[X[0],0];for(let G of X){let Q=Kf(G,J,Y);if(Q>Z)W=G,Z=Q}return W}function t1$($,J,Y){if("default"in $)return typeof Y==="function"?$.default:v0($.default);else{let X=o1$($,J,Y);return hQ(X,J,Y)}}function a1$($,J,Y){return K0($,J,Y)?v0(Y):UY($,J)}function s1$($,J,Y){return K0($,J,Y)?Y:UY($,J)}function e1$($,J,Y){if(K0($,J,Y))return v0(Y);let X=c$(Y)?v0(Y):UY($,J),W=x$($.minItems)&&X.length<$.minItems?[...X,...Array.from({length:$.minItems-X.length},()=>null)]:X,G=(x$($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((H)=>FY($.items,J,H));if($.uniqueItems!==!0)return G;let Q=[...new Set(G)];if(!K0($,J,Q))throw new __($,"Array cast produced invalid data due to uniqueItems constraint");return Q}function $J$($,J,Y){if(K0($,J,Y))return UY($,J);let X=new Set($.returns.required||[]),W=function(){};for(let[Z,G]of Object.entries($.returns.properties)){if(!X.has(Z)&&Y.prototype[Z]===void 0)continue;W.prototype[Z]=FY(G,J,Y.prototype[Z])}return W}function JJ$($,J,Y){let X=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return FY(W,[...J,...X],Y)}function wf($,J){if(Y0($)&&!Y0(J)||!Y0($)&&Y0(J))return $;if(!Y0($)||!Y0(J))return J;return globalThis.Object.getOwnPropertyNames($).reduce((Y,X)=>{let W=X in J?wf($[X],J[X]):$[X];return{...Y,[X]:W}},{})}function YJ$($,J,Y){if(K0($,J,Y))return Y;let X=UY($,J),W=wf(X,Y);return K0($,J,W)?W:X}function XJ$($,J,Y){throw new __($,"Never types cannot be cast")}function WJ$($,J,Y){if(K0($,J,Y))return Y;if(Y===null||typeof Y!=="object")return UY($,J);let X=new Set($.required||[]),W={};for(let[Z,G]of Object.entries($.properties)){if(!X.has(Z)&&Y[Z]===void 0)continue;W[Z]=FY(G,J,Y[Z])}if(typeof $.additionalProperties==="object"){let Z=Object.getOwnPropertyNames($.properties);for(let G of Object.getOwnPropertyNames(Y)){if(Z.includes(G))continue;W[G]=FY($.additionalProperties,J,Y[G])}}return W}function ZJ$($,J,Y){if(K0($,J,Y))return v0(Y);if(Y===null||typeof Y!=="object"||Array.isArray(Y)||Y instanceof Date)return UY($,J);let X=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[X],Z={};for(let[G,Q]of Object.entries(Y))Z[G]=FY(W,J,Q);return Z}function GJ$($,J,Y){return FY(R0($,J),J,Y)}function QJ$($,J,Y){return FY(R0($,J),J,Y)}function HJ$($,J,Y){if(K0($,J,Y))return v0(Y);if(!c$(Y))return UY($,J);if($.items===void 0)return[];return $.items.map((X,W)=>FY(X,J,Y[W]))}function zJ$($,J,Y){return K0($,J,Y)?v0(Y):t1$($,J,Y)}function FY($,J,Y){let X=C0($.$id)?a6($,J):J,W=$;switch($[l]){case"Array":return e1$(W,X,Y);case"Constructor":return $J$(W,X,Y);case"Import":return JJ$(W,X,Y);case"Intersect":return YJ$(W,X,Y);case"Never":return XJ$(W,X,Y);case"Object":return WJ$(W,X,Y);case"Record":return ZJ$(W,X,Y);case"Ref":return GJ$(W,X,Y);case"This":return QJ$(W,X,Y);case"Tuple":return HJ$(W,X,Y);case"Union":return zJ$(W,X,Y);case"Date":case"Symbol":case"Uint8Array":return a1$($,J,Y);default:return s1$(W,X,Y)}}function hQ(...$){return $.length===3?FY($[0],$[1],$[2]):FY($[0],[],$[1])}function KJ$($){return J9($)&&$[l]!=="Unsafe"}function wJ$($,J,Y){if(!c$(Y))return Y;return Y.map((X)=>V1($.items,J,X))}function UJ$($,J,Y){let X=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return V1(W,[...J,...X],Y)}function FJ$($,J,Y){let X=$.unevaluatedProperties,Z=$.allOf.map((Q)=>V1(Q,J,v0(Y))).reduce((Q,H)=>Y0(H)?{...Q,...H}:H,{});if(!Y0(Y)||!Y0(Z)||!J9(X))return Z;let G=D1($);for(let Q of Object.getOwnPropertyNames(Y)){if(G.includes(Q))continue;if(K0(X,J,Y[Q]))Z[Q]=V1(X,J,Y[Q])}return Z}function DJ$($,J,Y){if(!Y0(Y)||c$(Y))return Y;let X=$.additionalProperties;for(let W of Object.getOwnPropertyNames(Y)){if(i$($.properties,W)){Y[W]=V1($.properties[W],J,Y[W]);continue}if(J9(X)&&K0(X,J,Y[W])){Y[W]=V1(X,J,Y[W]);continue}delete Y[W]}return Y}function MJ$($,J,Y){if(!Y0(Y))return Y;let X=$.additionalProperties,W=Object.getOwnPropertyNames(Y),[Z,G]=Object.entries($.patternProperties)[0],Q=new RegExp(Z);for(let H of W){if(Q.test(H)){Y[H]=V1(G,J,Y[H]);continue}if(J9(X)&&K0(X,J,Y[H])){Y[H]=V1(X,J,Y[H]);continue}delete Y[H]}return Y}function VJ$($,J,Y){return V1(R0($,J),J,Y)}function NJ$($,J,Y){return V1(R0($,J),J,Y)}function _J$($,J,Y){if(!c$(Y))return Y;if(u4($.items))return[];let X=Math.min(Y.length,$.items.length);for(let W=0;W<X;W++)Y[W]=V1($.items[W],J,Y[W]);return Y.length>X?Y.slice(0,X):Y}function LJ$($,J,Y){for(let X of $.anyOf)if(KJ$(X)&&K0(X,J,Y))return V1(X,J,Y);return Y}function V1($,J,Y){let X=C0($.$id)?a6($,J):J,W=$;switch(W[l]){case"Array":return wJ$(W,X,Y);case"Import":return UJ$(W,X,Y);case"Intersect":return FJ$(W,X,Y);case"Object":return DJ$(W,X,Y);case"Record":return MJ$(W,X,Y);case"Ref":return VJ$(W,X,Y);case"This":return NJ$(W,X,Y);case"Tuple":return _J$(W,X,Y);case"Union":return LJ$(W,X,Y);default:return Y}}function z3(...$){return $.length===3?V1($[0],$[1],$[2]):V1($[0],[],$[1])}function K3($){return C0($)&&!isNaN($)&&!isNaN(parseFloat($))}function qJ$($){return M8($)||WX($)||x$($)}function mQ($){return $===!0||x$($)&&$===1||M8($)&&$===BigInt("1")||C0($)&&($.toLowerCase()==="true"||$==="1")}function uQ($){return $===!1||x$($)&&($===0||Object.is($,-0))||M8($)&&$===BigInt("0")||C0($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function BJ$($){return C0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function OJ$($){return C0($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function PJ$($){return C0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function SJ$($){return C0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function AJ$($){return C0($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function jJ$($,J){let Y=Ff($);return Y===J?Y:$}function EJ$($,J){let Y=Df($);return Y===J?Y:$}function CJ$($,J){let Y=Uf($);return Y===J?Y:$}function TJ$($,J){return C0($.const)?jJ$(J,$.const):x$($.const)?EJ$(J,$.const):WX($.const)?CJ$(J,$.const):J}function Uf($){return mQ($)?!0:uQ($)?!1:$}function RJ$($){let J=(Y)=>Y.split(".")[0];return K3($)?BigInt(J($)):x$($)?BigInt(Math.trunc($)):uQ($)?BigInt(0):mQ($)?BigInt(1):$}function Ff($){return pX($)&&$.description!==void 0?$.description.toString():qJ$($)?$.toString():$}function Df($){return K3($)?parseFloat($):mQ($)?1:uQ($)?0:$}function IJ$($){return K3($)?parseInt($):x$($)?Math.trunc($):mQ($)?1:uQ($)?0:$}function kJ$($){return C0($)&&$.toLowerCase()==="null"?null:$}function bJ$($){return C0($)&&$==="undefined"?void 0:$}function vJ$($){return t8($)?$:x$($)?new Date($):mQ($)?new Date(1):uQ($)?new Date(0):K3($)?new Date(parseInt($)):OJ$($)?new Date(`1970-01-01T${$}.000Z`):BJ$($)?new Date(`1970-01-01T${$}`):SJ$($)?new Date(`${$}.000Z`):PJ$($)?new Date($):AJ$($)?new Date(`${$}T00:00:00.000Z`):$}function fJ$($){return $}function gJ$($,J,Y){return(c$(Y)?Y:[Y]).map((W)=>DY($.items,J,W))}function xJ$($,J,Y){return RJ$(Y)}function yJ$($,J,Y){return Uf(Y)}function hJ$($,J,Y){return vJ$(Y)}function mJ$($,J,Y){let X=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return DY(W,[...J,...X],Y)}function uJ$($,J,Y){return IJ$(Y)}function dJ$($,J,Y){return $.allOf.reduce((X,W)=>DY(W,J,X),Y)}function cJ$($,J,Y){return TJ$($,Y)}function pJ$($,J,Y){return kJ$(Y)}function lJ$($,J,Y){return Df(Y)}function nJ$($,J,Y){if(!Y0(Y)||c$(Y))return Y;for(let X of Object.getOwnPropertyNames($.properties)){if(!i$(Y,X))continue;Y[X]=DY($.properties[X],J,Y[X])}return Y}function iJ$($,J,Y){if(!(Y0(Y)&&!c$(Y)))return Y;let W=Object.getOwnPropertyNames($.patternProperties)[0],Z=$.patternProperties[W];for(let[G,Q]of Object.entries(Y))Y[G]=DY(Z,J,Q);return Y}function rJ$($,J,Y){return DY(R0($,J),J,Y)}function oJ$($,J,Y){return Ff(Y)}function tJ$($,J,Y){return C0(Y)||x$(Y)?Symbol(Y):Y}function aJ$($,J,Y){return DY(R0($,J),J,Y)}function sJ$($,J,Y){if(!(c$(Y)&&!u4($.items)))return Y;return Y.map((W,Z)=>{return Z<$.items.length?DY($.items[Z],J,W):W})}function eJ$($,J,Y){return bJ$(Y)}function $Y$($,J,Y){for(let X of $.anyOf)if(K0(X,J,Y))return Y;for(let X of $.anyOf){let W=DY(X,J,v0(Y));if(!K0(X,J,W))continue;return W}return Y}function DY($,J,Y){let X=a6($,J),W=$;switch($[l]){case"Array":return gJ$(W,X,Y);case"BigInt":return xJ$(W,X,Y);case"Boolean":return yJ$(W,X,Y);case"Date":return hJ$(W,X,Y);case"Import":return mJ$(W,X,Y);case"Integer":return uJ$(W,X,Y);case"Intersect":return dJ$(W,X,Y);case"Literal":return cJ$(W,X,Y);case"Null":return pJ$(W,X,Y);case"Number":return lJ$(W,X,Y);case"Object":return nJ$(W,X,Y);case"Record":return iJ$(W,X,Y);case"Ref":return rJ$(W,X,Y);case"String":return oJ$(W,X,Y);case"Symbol":return tJ$(W,X,Y);case"This":return aJ$(W,X,Y);case"Tuple":return sJ$(W,X,Y);case"Undefined":return eJ$(W,X,Y);case"Union":return $Y$(W,X,Y);default:return fJ$(Y)}}function w3(...$){return $.length===3?DY($[0],$[1],$[2]):DY($[0],[],$[1])}class dQ extends p${constructor($,J,Y){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=J,this.error=Y}}class I5 extends p${constructor($,J,Y,X){super(X instanceof Error?X.message:"Unknown error");this.schema=$,this.path=J,this.value=Y,this.error=X}}function r4($,J,Y){try{return u0($)?$[v4].Decode(Y):Y}catch(X){throw new I5($,J,Y,X)}}function JY$($,J,Y,X){return c$(X)?r4($,Y,X.map((W,Z)=>MY($.items,J,`${Y}/${Z}`,W))):r4($,Y,X)}function YY$($,J,Y,X){if(!Y0(X)||c1(X))return r4($,Y,X);let W=iw($),Z=W.map((K)=>K[0]),G={...X};for(let[K,w]of W)if(K in G)G[K]=MY(w,J,`${Y}/${K}`,G[K]);if(!u0($.unevaluatedProperties))return r4($,Y,G);let Q=Object.getOwnPropertyNames(G),H=$.unevaluatedProperties,z={...G};for(let K of Q)if(!Z.includes(K))z[K]=r4(H,`${Y}/${K}`,z[K]);return r4($,Y,z)}function XY$($,J,Y,X){let W=globalThis.Object.values($.$defs),Z=$.$defs[$.$ref],G=MY(Z,[...J,...W],Y,X);return r4($,Y,G)}function WY$($,J,Y,X){return r4($,Y,MY($.not,J,Y,X))}function ZY$($,J,Y,X){if(!Y0(X))return r4($,Y,X);let W=D1($),Z={...X};for(let z of W){if(!i$(Z,z))continue;if(u4(Z[z])&&(!iX($.properties[z])||b4.IsExactOptionalProperty(Z,z)))continue;Z[z]=MY($.properties[z],J,`${Y}/${z}`,Z[z])}if(!i4($.additionalProperties))return r4($,Y,Z);let G=Object.getOwnPropertyNames(Z),Q=$.additionalProperties,H={...Z};for(let z of G)if(!W.includes(z))H[z]=r4(Q,`${Y}/${z}`,H[z]);return r4($,Y,H)}function GY$($,J,Y,X){if(!Y0(X))return r4($,Y,X);let W=Object.getOwnPropertyNames($.patternProperties)[0],Z=new RegExp(W),G={...X};for(let K of Object.getOwnPropertyNames(X))if(Z.test(K))G[K]=MY($.patternProperties[W],J,`${Y}/${K}`,G[K]);if(!i4($.additionalProperties))return r4($,Y,G);let Q=Object.getOwnPropertyNames(G),H=$.additionalProperties,z={...G};for(let K of Q)if(!Z.test(K))z[K]=r4(H,`${Y}/${K}`,z[K]);return r4($,Y,z)}function QY$($,J,Y,X){let W=R0($,J);return r4($,Y,MY(W,J,Y,X))}function HY$($,J,Y,X){let W=R0($,J);return r4($,Y,MY(W,J,Y,X))}function zY$($,J,Y,X){return c$(X)&&c$($.items)?r4($,Y,$.items.map((W,Z)=>MY(W,J,`${Y}/${Z}`,X[Z]))):r4($,Y,X)}function KY$($,J,Y,X){for(let W of $.anyOf){if(!K0(W,J,X))continue;let Z=MY(W,J,Y,X);return r4($,Y,Z)}return r4($,Y,X)}function MY($,J,Y,X){let W=a6($,J),Z=$;switch($[l]){case"Array":return JY$(Z,W,Y,X);case"Import":return XY$(Z,W,Y,X);case"Intersect":return YY$(Z,W,Y,X);case"Not":return WY$(Z,W,Y,X);case"Object":return ZY$(Z,W,Y,X);case"Record":return GY$(Z,W,Y,X);case"Ref":return QY$(Z,W,Y,X);case"Symbol":return r4(Z,Y,X);case"This":return HY$(Z,W,Y,X);case"Tuple":return zY$(Z,W,Y,X);case"Union":return KY$(Z,W,Y,X);default:return r4(Z,Y,X)}}function p7($,J,Y){return MY($,J,"",Y)}class cQ extends p${constructor($,J,Y){super("The encoded value does not match the expected schema");this.schema=$,this.value=J,this.error=Y}}class Mf extends p${constructor($,J,Y,X){super(`${X instanceof Error?X.message:"Unknown error"}`);this.schema=$,this.path=J,this.value=Y,this.error=X}}function V8($,J,Y){try{return u0($)?$[v4].Encode(Y):Y}catch(X){throw new Mf($,J,Y,X)}}function wY$($,J,Y,X){let W=V8($,Y,X);return c$(W)?W.map((Z,G)=>VY($.items,J,`${Y}/${G}`,Z)):W}function UY$($,J,Y,X){let W=globalThis.Object.values($.$defs),Z=$.$defs[$.$ref],G=V8($,Y,X);return VY(Z,[...J,...W],Y,G)}function FY$($,J,Y,X){let W=V8($,Y,X);if(!Y0(X)||c1(X))return W;let Z=iw($),G=Z.map((w)=>w[0]),Q={...W};for(let[w,F]of Z)if(w in Q)Q[w]=VY(F,J,`${Y}/${w}`,Q[w]);if(!u0($.unevaluatedProperties))return Q;let H=Object.getOwnPropertyNames(Q),z=$.unevaluatedProperties,K={...Q};for(let w of H)if(!G.includes(w))K[w]=V8(z,`${Y}/${w}`,K[w]);return K}function DY$($,J,Y,X){return V8($.not,Y,V8($,Y,X))}function MY$($,J,Y,X){let W=V8($,Y,X);if(!Y0(W))return W;let Z=D1($),G={...W};for(let K of Z){if(!i$(G,K))continue;if(u4(G[K])&&(!iX($.properties[K])||b4.IsExactOptionalProperty(G,K)))continue;G[K]=VY($.properties[K],J,`${Y}/${K}`,G[K])}if(!i4($.additionalProperties))return G;let Q=Object.getOwnPropertyNames(G),H=$.additionalProperties,z={...G};for(let K of Q)if(!Z.includes(K))z[K]=V8(H,`${Y}/${K}`,z[K]);return z}function VY$($,J,Y,X){let W=V8($,Y,X);if(!Y0(X))return W;let Z=Object.getOwnPropertyNames($.patternProperties)[0],G=new RegExp(Z),Q={...W};for(let w of Object.getOwnPropertyNames(X))if(G.test(w))Q[w]=VY($.patternProperties[Z],J,`${Y}/${w}`,Q[w]);if(!i4($.additionalProperties))return Q;let H=Object.getOwnPropertyNames(Q),z=$.additionalProperties,K={...Q};for(let w of H)if(!G.test(w))K[w]=V8(z,`${Y}/${w}`,K[w]);return K}function NY$($,J,Y,X){let W=R0($,J),Z=VY(W,J,Y,X);return V8($,Y,Z)}function _Y$($,J,Y,X){let W=R0($,J),Z=VY(W,J,Y,X);return V8($,Y,Z)}function LY$($,J,Y,X){let W=V8($,Y,X);return c$($.items)?$.items.map((Z,G)=>VY(Z,J,`${Y}/${G}`,W[G])):[]}function qY$($,J,Y,X){for(let W of $.anyOf){if(!K0(W,J,X))continue;let Z=VY(W,J,Y,X);return V8($,Y,Z)}for(let W of $.anyOf){let Z=VY(W,J,Y,X);if(!K0($,J,Z))continue;return V8($,Y,Z)}return V8($,Y,X)}function VY($,J,Y,X){let W=a6($,J),Z=$;switch($[l]){case"Array":return wY$(Z,W,Y,X);case"Import":return UY$(Z,W,Y,X);case"Intersect":return FY$(Z,W,Y,X);case"Not":return DY$(Z,W,Y,X);case"Object":return MY$(Z,W,Y,X);case"Record":return VY$(Z,W,Y,X);case"Ref":return NY$(Z,W,Y,X);case"This":return _Y$(Z,W,Y,X);case"Tuple":return LY$(Z,W,Y,X);case"Union":return qY$(Z,W,Y,X);default:return V8(Z,Y,X)}}function l7($,J,Y){return VY($,J,"",Y)}function BY$($,J){return u0($)||d6($.items,J)}function OY$($,J){return u0($)||d6($.items,J)}function PY$($,J){return u0($)||d6($.returns,J)||$.parameters.some((Y)=>d6(Y,J))}function SY$($,J){return u0($)||d6($.returns,J)||$.parameters.some((Y)=>d6(Y,J))}function AY$($,J){return u0($)||u0($.unevaluatedProperties)||$.allOf.some((Y)=>d6(Y,J))}function jY$($,J){let Y=globalThis.Object.getOwnPropertyNames($.$defs).reduce((W,Z)=>[...W,$.$defs[Z]],[]),X=$.$defs[$.$ref];return u0($)||d6(X,[...Y,...J])}function EY$($,J){return u0($)||d6($.items,J)}function CY$($,J){return u0($)||d6($.not,J)}function TY$($,J){return u0($)||Object.values($.properties).some((Y)=>d6(Y,J))||i4($.additionalProperties)&&d6($.additionalProperties,J)}function RY$($,J){return u0($)||d6($.item,J)}function IY$($,J){let Y=Object.getOwnPropertyNames($.patternProperties)[0],X=$.patternProperties[Y];return u0($)||d6(X,J)||i4($.additionalProperties)&&u0($.additionalProperties)}function kY$($,J){if(u0($))return!0;return d6(R0($,J),J)}function bY$($,J){if(u0($))return!0;return d6(R0($,J),J)}function vY$($,J){return u0($)||!u4($.items)&&$.items.some((Y)=>d6(Y,J))}function fY$($,J){return u0($)||$.anyOf.some((Y)=>d6(Y,J))}function d6($,J){let Y=a6($,J),X=$;if($.$id&&L_.has($.$id))return!1;if($.$id)L_.add($.$id);switch($[l]){case"Array":return BY$(X,Y);case"AsyncIterator":return OY$(X,Y);case"Constructor":return PY$(X,Y);case"Function":return SY$(X,Y);case"Import":return jY$(X,Y);case"Intersect":return AY$(X,Y);case"Iterator":return EY$(X,Y);case"Not":return CY$(X,Y);case"Object":return TY$(X,Y);case"Promise":return RY$(X,Y);case"Record":return IY$(X,Y);case"Ref":return kY$(X,Y);case"This":return bY$(X,Y);case"Tuple":return vY$(X,Y);case"Union":return fY$(X,Y);default:return u0($)}}var L_=new Set;function eX($,J){return L_.clear(),d6($,J)}function Vf(...$){let[J,Y,X]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!K0(J,Y,X))throw new dQ(J,X,QX(J,Y,X).First());return eX(J,Y)?p7(J,Y,X):X}function $W($,J){let Y=i$($,"default")?$.default:void 0,X=eW(Y)?Y():v0(Y);return u4(J)?X:Y0(J)&&Y0(X)?Object.assign(X,J):J}function q_($){return J9($)&&"default"in $}function gY$($,J,Y){if(c$(Y)){for(let W=0;W<Y.length;W++)Y[W]=s8($.items,J,Y[W]);return Y}let X=$W($,Y);if(!c$(X))return X;for(let W=0;W<X.length;W++)X[W]=s8($.items,J,X[W]);return X}function xY$($,J,Y){return t8(Y)?Y:$W($,Y)}function yY$($,J,Y){let X=globalThis.Object.values($.$defs),W=$.$defs[$.$ref];return s8(W,[...J,...X],Y)}function hY$($,J,Y){let X=$W($,Y);return $.allOf.reduce((W,Z)=>{let G=s8(Z,J,X);return Y0(G)?{...W,...G}:G},{})}function mY$($,J,Y){let X=$W($,Y);if(!Y0(X))return X;let W=Object.getOwnPropertyNames($.properties);for(let Z of W){let G=s8($.properties[Z],J,X[Z]);if(u4(G))continue;X[Z]=s8($.properties[Z],J,X[Z])}if(!q_($.additionalProperties))return X;for(let Z of Object.getOwnPropertyNames(X)){if(W.includes(Z))continue;X[Z]=s8($.additionalProperties,J,X[Z])}return X}function uY$($,J,Y){let X=$W($,Y);if(!Y0(X))return X;let W=$.additionalProperties,[Z,G]=Object.entries($.patternProperties)[0],Q=new RegExp(Z);for(let H of Object.getOwnPropertyNames(X)){if(!(Q.test(H)&&q_(G)))continue;X[H]=s8(G,J,X[H])}if(!q_(W))return X;for(let H of Object.getOwnPropertyNames(X)){if(Q.test(H))continue;X[H]=s8(W,J,X[H])}return X}function dY$($,J,Y){return s8(R0($,J),J,$W($,Y))}function cY$($,J,Y){return s8(R0($,J),J,Y)}function pY$($,J,Y){let X=$W($,Y);if(!c$(X)||u4($.items))return X;let[W,Z]=[$.items,Math.max($.items.length,X.length)];for(let G=0;G<Z;G++)if(G<W.length)X[G]=s8(W[G],J,X[G]);return X}function lY$($,J,Y){let X=$W($,Y);for(let W of $.anyOf){let Z=s8(W,J,v0(X));if(K0(W,J,Z))return Z}return X}function s8($,J,Y){let X=a6($,J),W=$;switch(W[l]){case"Array":return gY$(W,X,Y);case"Date":return xY$(W,X,Y);case"Import":return yY$(W,X,Y);case"Intersect":return hY$(W,X,Y);case"Object":return mY$(W,X,Y);case"Record":return uY$(W,X,Y);case"Ref":return dY$(W,X,Y);case"This":return cY$(W,X,Y);case"Tuple":return pY$(W,X,Y);case"Union":return lY$(W,X,Y);default:return $W(W,Y)}}function U3(...$){return $.length===3?s8($[0],$[1],$[2]):s8($[0],[],$[1])}var NY={};k4(NY,{ValuePointerRootSetError:()=>B_,ValuePointerRootDeleteError:()=>O_,Set:()=>nY$,Has:()=>rY$,Get:()=>oY$,Format:()=>pQ,Delete:()=>iY$});class B_ extends p${constructor($,J,Y){super("Cannot set root value");this.value=$,this.path=J,this.update=Y}}class O_ extends p${constructor($,J){super("Cannot delete root value");this.value=$,this.path=J}}function Nf($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*pQ($){if($==="")return;let[J,Y]=[0,0];for(let X=0;X<$.length;X++)if($.charAt(X)==="/")if(X===0)J=X+1;else Y=X,yield Nf($.slice(J,Y)),J=X+1;else Y=X;yield Nf($.slice(J))}function nY$($,J,Y){if(J==="")throw new B_($,J,Y);let[X,W,Z]=[null,$,""];for(let G of pQ(J)){if(W[G]===void 0)W[G]={};X=W,W=W[G],Z=G}X[Z]=Y}function iY$($,J){if(J==="")throw new O_($,J);let[Y,X,W]=[null,$,""];for(let Z of pQ(J)){if(X[Z]===void 0||X[Z]===null)return;Y=X,X=X[Z],W=Z}if(Array.isArray(Y)){let Z=parseInt(W);Y.splice(Z,1)}else delete Y[W]}function rY$($,J){if(J==="")return!0;let[Y,X,W]=[null,$,""];for(let Z of pQ(J)){if(X[Z]===void 0)return!1;Y=X,X=X[Z],W=Z}return Object.getOwnPropertyNames(Y).includes(W)}function oY$($,J){if(J==="")return $;let Y=$;for(let X of pQ(J)){if(Y[X]===void 0)return;Y=Y[X]}return Y}function tY$($,J){if(!Y0(J))return!1;let Y=[...Object.keys($),...Object.getOwnPropertySymbols($)],X=[...Object.keys(J),...Object.getOwnPropertySymbols(J)];if(Y.length!==X.length)return!1;return Y.every((W)=>k5($[W],J[W]))}function aY$($,J){return t8(J)&&$.getTime()===J.getTime()}function sY$($,J){if(!c$(J)||$.length!==J.length)return!1;return $.every((Y,X)=>k5(Y,J[X]))}function eY$($,J){if(!qJ(J)||$.length!==J.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(J).constructor.name)return!1;return $.every((Y,X)=>k5(Y,J[X]))}function $X$($,J){return $===J}function k5($,J){if(t8($))return aY$($,J);if(qJ($))return eY$($,J);if(c$($))return sY$($,J);if(Y0($))return tY$($,J);if(c1($))return $X$($,J);throw Error("ValueEquals: Unable to compare value")}var JX$=c0({type:S0("insert"),path:a8(),value:zY()}),YX$=c0({type:S0("update"),path:a8(),value:zY()}),XX$=c0({type:S0("delete"),path:a8()}),Lf=d0([JX$,YX$,XX$]);class P_ extends p${constructor($,J){super(J);this.value=$}}function F3($,J){return{type:"update",path:$,value:J}}function qf($,J){return{type:"insert",path:$,value:J}}function Bf($){return{type:"delete",path:$}}function _f($){if(globalThis.Object.getOwnPropertySymbols($).length>0)throw new P_($,"Cannot diff objects with symbols")}function*WX$($,J,Y){if(_f(J),_f(Y),!iN(Y))return yield F3($,Y);let X=globalThis.Object.getOwnPropertyNames(J),W=globalThis.Object.getOwnPropertyNames(Y);for(let Z of W){if(i$(J,Z))continue;yield qf(`${$}/${Z}`,Y[Z])}for(let Z of X){if(!i$(Y,Z))continue;if(k5(J,Y))continue;yield*D3(`${$}/${Z}`,J[Z],Y[Z])}for(let Z of X){if(i$(Y,Z))continue;yield Bf(`${$}/${Z}`)}}function*ZX$($,J,Y){if(!c$(Y))return yield F3($,Y);for(let X=0;X<Math.min(J.length,Y.length);X++)yield*D3(`${$}/${X}`,J[X],Y[X]);for(let X=0;X<Y.length;X++){if(X<J.length)continue;yield qf(`${$}/${X}`,Y[X])}for(let X=J.length-1;X>=0;X--){if(X<Y.length)continue;yield Bf(`${$}/${X}`)}}function*GX$($,J,Y){if(!qJ(Y)||J.length!==Y.length||globalThis.Object.getPrototypeOf(J).constructor.name!==globalThis.Object.getPrototypeOf(Y).constructor.name)return yield F3($,Y);for(let X=0;X<Math.min(J.length,Y.length);X++)yield*D3(`${$}/${X}`,J[X],Y[X])}function*QX$($,J,Y){if(J===Y)return;yield F3($,Y)}function*D3($,J,Y){if(iN(J))return yield*WX$($,J,Y);if(c$(J))return yield*ZX$($,J,Y);if(qJ(J))return yield*GX$($,J,Y);if(c1(J))return yield*QX$($,J,Y);throw new P_(J,"Unable to diff value")}function Of($,J){return[...D3("",$,J)]}function HX$($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function zX$($){return $.length===0}function Pf($,J){if(HX$(J))return v0(J[0].value);if(zX$(J))return v0($);let Y=v0($);for(let X of J)switch(X.type){case"insert":{NY.Set(Y,X.path,X.value);break}case"update":{NY.Set(Y,X.path,X.value);break}case"delete":{NY.Delete(Y,X.path);break}}return Y}function Sf(...$){let[J,Y,X]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=eX(J,Y)?l7(J,Y,X):X;if(!K0(J,Y,W))throw new cQ(J,W,QX(J,Y,W).First());return W}function M3($){return Y0($)&&!c$($)}class S_ extends p${constructor($){super($)}}function KX$($,J,Y,X){if(!M3(Y))NY.Set($,J,v0(X));else{let W=Object.getOwnPropertyNames(Y),Z=Object.getOwnPropertyNames(X);for(let G of W)if(!Z.includes(G))delete Y[G];for(let G of Z)if(!W.includes(G))Y[G]=null;for(let G of Z)A_($,`${J}/${G}`,Y[G],X[G])}}function wX$($,J,Y,X){if(!c$(Y))NY.Set($,J,v0(X));else{for(let W=0;W<X.length;W++)A_($,`${J}/${W}`,Y[W],X[W]);Y.splice(X.length)}}function UX$($,J,Y,X){if(qJ(Y)&&Y.length===X.length)for(let W=0;W<Y.length;W++)Y[W]=X[W];else NY.Set($,J,v0(X))}function FX$($,J,Y,X){if(Y===X)return;NY.Set($,J,X)}function A_($,J,Y,X){if(c$(X))return wX$($,J,Y,X);if(qJ(X))return UX$($,J,Y,X);if(M3(X))return KX$($,J,Y,X);if(c1(X))return FX$($,J,Y,X)}function Af($){return qJ($)||c1($)}function DX$($,J){return M3($)&&c$(J)||c$($)&&M3(J)}function jf($,J){if(Af($)||Af(J))throw new S_("Only object and array types can be mutated at the root level");if(DX$($,J))throw new S_("Cannot assign due type mismatch of assignable values");A_($,"",$,J)}class E_ extends p${constructor($){super($)}}var j_;(function($){let J=new Map([["Assert",(Z,G,Q)=>{return H3(Z,G,Q),Q}],["Cast",(Z,G,Q)=>hQ(Z,G,Q)],["Clean",(Z,G,Q)=>z3(Z,G,Q)],["Clone",(Z,G,Q)=>v0(Q)],["Convert",(Z,G,Q)=>w3(Z,G,Q)],["Decode",(Z,G,Q)=>eX(Z,G)?p7(Z,G,Q):Q],["Default",(Z,G,Q)=>U3(Z,G,Q)],["Encode",(Z,G,Q)=>eX(Z,G)?l7(Z,G,Q):Q]]);function Y(Z){J.delete(Z)}$.Delete=Y;function X(Z,G){J.set(Z,G)}$.Set=X;function W(Z){return J.get(Z)}$.Get=W})(j_||(j_={}));var Ef=["Clone","Clean","Default","Convert","Assert","Decode"];function MX$($,J,Y,X){return $.reduce((W,Z)=>{let G=j_.Get(Z);if(u4(G))throw new E_(`Unable to find Parse operation '${Z}'`);return G(J,Y,W)},X)}function Cf(...$){let[J,Y,X,W]=$.length===4?[$[0],$[1],$[2],$[3]]:$.length===3?c$($[0])?[$[0],$[1],[],$[2]]:[Ef,$[0],$[1],$[2]]:$.length===2?[Ef,$[0],[],$[1]]:(()=>{throw new E_("Invalid Arguments")})();return MX$(J,Y,X,W)}var z4={};k4(z4,{ValueErrorIterator:()=>R5,Patch:()=>Pf,Parse:()=>Cf,Mutate:()=>jf,Hash:()=>z9,Errors:()=>QX,Equal:()=>k5,Encode:()=>Sf,Edit:()=>Lf,Diff:()=>Of,Default:()=>U3,Decode:()=>Vf,Create:()=>UY,Convert:()=>w3,Clone:()=>v0,Clean:()=>z3,Check:()=>K0,Cast:()=>hQ,Assert:()=>H3});class Tf{constructor($,J,Y,X){this.schema=$,this.references=J,this.checkFunc=Y,this.code=X,this.hasTransform=eX($,J)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors($){return QX(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new dQ(this.schema,$,this.Errors($).First());return this.hasTransform?p7(this.schema,this.references,$):$}Encode($){let J=this.hasTransform?l7(this.schema,this.references,$):$;if(!this.checkFunc(J))throw new cQ(this.schema,$,this.Errors($).First());return J}}var JW;(function($){function J(Z){return Z===36}$.DollarSign=J;function Y(Z){return Z===95}$.IsUnderscore=Y;function X(Z){return Z>=65&&Z<=90||Z>=97&&Z<=122}$.IsAlpha=X;function W(Z){return Z>=48&&Z<=57}$.IsNumeric=W})(JW||(JW={}));var V3;(function($){function J(Z){if(Z.length===0)return!1;return JW.IsNumeric(Z.charCodeAt(0))}function Y(Z){if(J(Z))return!1;for(let G=0;G<Z.length;G++){let Q=Z.charCodeAt(G);if(!(JW.IsAlpha(Q)||JW.IsNumeric(Q)||JW.DollarSign(Q)||JW.IsUnderscore(Q)))return!1}return!0}function X(Z){return Z.replace(/'/g,"\\'")}function W(Z,G){return Y(G)?`${Z}.${G}`:`${Z}['${X(G)}']`}$.Encode=W})(V3||(V3={}));var C_;(function($){function J(Y){let X=[];for(let W=0;W<Y.length;W++){let Z=Y.charCodeAt(W);if(JW.IsNumeric(Z)||JW.IsAlpha(Z))X.push(Y.charAt(W));else X.push(`_${Z}_`)}return X.join("").replace(/__/g,"_")}$.Encode=J})(C_||(C_={}));var T_;(function($){function J(Y){return Y.replace(/'/g,"\\'")}$.Escape=J})(T_||(T_={}));class Rf extends p${constructor($){super("Unknown type");this.schema=$}}class R_ extends p${constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var b5;(function($){function J(G,Q,H){return b4.ExactOptionalPropertyTypes?`('${Q}' in ${G} ? ${H} : true)`:`(${V3.Encode(G,Q)} !== undefined ? ${H} : true)`}$.IsExactOptionalProperty=J;function Y(G){return!b4.AllowArrayObject?`(typeof ${G} === 'object' && ${G} !== null && !Array.isArray(${G}))`:`(typeof ${G} === 'object' && ${G} !== null)`}$.IsObjectLike=Y;function X(G){return!b4.AllowArrayObject?`(typeof ${G} === 'object' && ${G} !== null && !Array.isArray(${G}) && !(${G} instanceof Date) && !(${G} instanceof Uint8Array))`:`(typeof ${G} === 'object' && ${G} !== null && !(${G} instanceof Date) && !(${G} instanceof Uint8Array))`}$.IsRecordLike=X;function W(G){return b4.AllowNaN?`typeof ${G} === 'number'`:`Number.isFinite(${G})`}$.IsNumberLike=W;function Z(G){return b4.AllowNullVoid?`(${G} === undefined || ${G} === null)`:`${G} === undefined`}$.IsVoidLike=Z})(b5||(b5={}));var _Y;(function($){function J(u){return u[l]==="Any"||u[l]==="Unknown"}function*Y(u,a,f){yield"true"}function*X(u,a,f){yield"true"}function*W(u,a,f){yield`Array.isArray(${f})`;let[n,t]=[J0("value","any"),J0("acc","number")];if(x$(u.maxItems))yield`${f}.length <= ${u.maxItems}`;if(x$(u.minItems))yield`${f}.length >= ${u.minItems}`;let J$=_$(u.items,a,"value");if(yield`((array) => { for(const ${n} of array) if(!(${J$})) { return false }; return true; })(${f})`,c4(u.contains)||x$(u.minContains)||x$(u.maxContains)){let A$=c4(u.contains)?u.contains:z0(),L0=_$(A$,a,"value"),Z4=x$(u.minContains)?[`(count >= ${u.minContains})`]:[],h4=x$(u.maxContains)?[`(count <= ${u.maxContains})`]:[],X6=`const count = value.reduce((${t}, ${n}) => ${L0} ? acc + 1 : acc, 0)`,LJ=["(count > 0)",...Z4,...h4].join(" && ");yield`((${n}) => { ${X6}; return ${LJ}})(${f})`}if(u.uniqueItems===!0)yield`((${n}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${f})`}function*Z(u,a,f){yield`(typeof value === 'object' && Symbol.asyncIterator in ${f})`}function*G(u,a,f){if(yield`(typeof ${f} === 'bigint')`,M8(u.exclusiveMaximum))yield`${f} < BigInt(${u.exclusiveMaximum})`;if(M8(u.exclusiveMinimum))yield`${f} > BigInt(${u.exclusiveMinimum})`;if(M8(u.maximum))yield`${f} <= BigInt(${u.maximum})`;if(M8(u.minimum))yield`${f} >= BigInt(${u.minimum})`;if(M8(u.multipleOf))yield`(${f} % BigInt(${u.multipleOf})) === 0`}function*Q(u,a,f){yield`(typeof ${f} === 'boolean')`}function*H(u,a,f){yield*G$(u.returns,a,`${f}.prototype`)}function*z(u,a,f){if(yield`(${f} instanceof Date) && Number.isFinite(${f}.getTime())`,x$(u.exclusiveMaximumTimestamp))yield`${f}.getTime() < ${u.exclusiveMaximumTimestamp}`;if(x$(u.exclusiveMinimumTimestamp))yield`${f}.getTime() > ${u.exclusiveMinimumTimestamp}`;if(x$(u.maximumTimestamp))yield`${f}.getTime() <= ${u.maximumTimestamp}`;if(x$(u.minimumTimestamp))yield`${f}.getTime() >= ${u.minimumTimestamp}`;if(x$(u.multipleOfTimestamp))yield`(${f}.getTime() % ${u.multipleOfTimestamp}) === 0`}function*K(u,a,f){yield`(typeof ${f} === 'function')`}function*w(u,a,f){let n=globalThis.Object.getOwnPropertyNames(u.$defs).reduce((t,J$)=>{return[...t,u.$defs[J$]]},[]);yield*G$(AJ(u.$ref),[...a,...n],f)}function*F(u,a,f){if(yield`Number.isInteger(${f})`,x$(u.exclusiveMaximum))yield`${f} < ${u.exclusiveMaximum}`;if(x$(u.exclusiveMinimum))yield`${f} > ${u.exclusiveMinimum}`;if(x$(u.maximum))yield`${f} <= ${u.maximum}`;if(x$(u.minimum))yield`${f} >= ${u.minimum}`;if(x$(u.multipleOf))yield`(${f} % ${u.multipleOf}) === 0`}function*U(u,a,f){let n=u.allOf.map((t)=>_$(t,a,f)).join(" && ");if(u.unevaluatedProperties===!1){let t=d$(`${new RegExp(tX(u))};`),J$=`Object.getOwnPropertyNames(${f}).every(key => ${t}.test(key))`;yield`(${n} && ${J$})`}else if(c4(u.unevaluatedProperties)){let t=d$(`${new RegExp(tX(u))};`),J$=`Object.getOwnPropertyNames(${f}).every(key => ${t}.test(key) || ${_$(u.unevaluatedProperties,a,`${f}[key]`)})`;yield`(${n} && ${J$})`}else yield`(${n})`}function*V(u,a,f){yield`(typeof value === 'object' && Symbol.iterator in ${f})`}function*N(u,a,f){if(typeof u.const==="number"||typeof u.const==="boolean")yield`(${f} === ${u.const})`;else yield`(${f} === '${T_.Escape(u.const)}')`}function*P(u,a,f){yield"false"}function*B(u,a,f){yield`(!${_$(u.not,a,f)})`}function*L(u,a,f){yield`(${f} === null)`}function*g(u,a,f){if(yield b5.IsNumberLike(f),x$(u.exclusiveMaximum))yield`${f} < ${u.exclusiveMaximum}`;if(x$(u.exclusiveMinimum))yield`${f} > ${u.exclusiveMinimum}`;if(x$(u.maximum))yield`${f} <= ${u.maximum}`;if(x$(u.minimum))yield`${f} >= ${u.minimum}`;if(x$(u.multipleOf))yield`(${f} % ${u.multipleOf}) === 0`}function*k(u,a,f){if(yield b5.IsObjectLike(f),x$(u.minProperties))yield`Object.getOwnPropertyNames(${f}).length >= ${u.minProperties}`;if(x$(u.maxProperties))yield`Object.getOwnPropertyNames(${f}).length <= ${u.maxProperties}`;let n=Object.getOwnPropertyNames(u.properties);for(let t of n){let J$=V3.Encode(f,t),A$=u.properties[t];if(u.required&&u.required.includes(t)){if(yield*G$(A$,a,J$),aX(A$)||J(A$))yield`('${t}' in ${f})`}else{let L0=_$(A$,a,J$);yield b5.IsExactOptionalProperty(f,t,L0)}}if(u.additionalProperties===!1)if(u.required&&u.required.length===n.length)yield`Object.getOwnPropertyNames(${f}).length === ${n.length}`;else{let t=`[${n.map((J$)=>`'${J$}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${f}).every(key => ${t}.includes(key))`}if(typeof u.additionalProperties==="object"){let t=_$(u.additionalProperties,a,`${f}[key]`),J$=`[${n.map((A$)=>`'${A$}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${f}).every(key => ${J$}.includes(key) || ${t}))`}}function*I(u,a,f){yield`${f} instanceof Promise`}function*O(u,a,f){if(yield b5.IsRecordLike(f),x$(u.minProperties))yield`Object.getOwnPropertyNames(${f}).length >= ${u.minProperties}`;if(x$(u.maxProperties))yield`Object.getOwnPropertyNames(${f}).length <= ${u.maxProperties}`;let[n,t]=Object.entries(u.patternProperties)[0],J$=d$(`${new RegExp(n)}`),A$=_$(t,a,"value"),L0=c4(u.additionalProperties)?_$(u.additionalProperties,a,f):u.additionalProperties===!1?"false":"true",Z4=`(${J$}.test(key) ? ${A$} : ${L0})`;yield`(Object.entries(${f}).every(([key, value]) => ${Z4}))`}function*b(u,a,f){let n=R0(u,a);if(Z$.functions.has(u.$ref))return yield`${E$(u.$ref)}(${f})`;yield*G$(n,a,f)}function*D(u,a,f){let n=d$(`${new RegExp(u.source,u.flags)};`);if(yield`(typeof ${f} === 'string')`,x$(u.maxLength))yield`${f}.length <= ${u.maxLength}`;if(x$(u.minLength))yield`${f}.length >= ${u.minLength}`;yield`${n}.test(${f})`}function*_(u,a,f){if(yield`(typeof ${f} === 'string')`,x$(u.maxLength))yield`${f}.length <= ${u.maxLength}`;if(x$(u.minLength))yield`${f}.length >= ${u.minLength}`;if(u.pattern!==void 0)yield`${d$(`${new RegExp(u.pattern)};`)}.test(${f})`;if(u.format!==void 0)yield`format('${u.format}', ${f})`}function*q(u,a,f){yield`(typeof ${f} === 'symbol')`}function*S(u,a,f){yield`(typeof ${f} === 'string')`,yield`${d$(`${new RegExp(u.pattern)};`)}.test(${f})`}function*j(u,a,f){yield`${E$(u.$ref)}(${f})`}function*E(u,a,f){if(yield`Array.isArray(${f})`,u.items===void 0)return yield`${f}.length === 0`;yield`(${f}.length === ${u.maxItems})`;for(let n=0;n<u.items.length;n++)yield`${_$(u.items[n],a,`${f}[${n}]`)}`}function*T(u,a,f){yield`${f} === undefined`}function*R(u,a,f){yield`(${u.anyOf.map((t)=>_$(t,a,f)).join(" || ")})`}function*v(u,a,f){if(yield`${f} instanceof Uint8Array`,x$(u.maxByteLength))yield`(${f}.length <= ${u.maxByteLength})`;if(x$(u.minByteLength))yield`(${f}.length >= ${u.minByteLength})`}function*h(u,a,f){yield"true"}function*y(u,a,f){yield b5.IsVoidLike(f)}function*o(u,a,f){let n=Z$.instances.size;Z$.instances.set(n,u),yield`kind('${u[l]}', ${n}, ${f})`}function*G$(u,a,f,n=!0){let t=C0(u.$id)?[...a,u]:a,J$=u;if(n&&C0(u.$id)){let A$=E$(u.$id);if(Z$.functions.has(A$))return yield`${A$}(${f})`;else{Z$.functions.set(A$,"<deferred>");let L0=n$(A$,u,a,"value",!1);return Z$.functions.set(A$,L0),yield`${A$}(${f})`}}switch(J$[l]){case"Any":return yield*Y(J$,t,f);case"Argument":return yield*X(J$,t,f);case"Array":return yield*W(J$,t,f);case"AsyncIterator":return yield*Z(J$,t,f);case"BigInt":return yield*G(J$,t,f);case"Boolean":return yield*Q(J$,t,f);case"Constructor":return yield*H(J$,t,f);case"Date":return yield*z(J$,t,f);case"Function":return yield*K(J$,t,f);case"Import":return yield*w(J$,t,f);case"Integer":return yield*F(J$,t,f);case"Intersect":return yield*U(J$,t,f);case"Iterator":return yield*V(J$,t,f);case"Literal":return yield*N(J$,t,f);case"Never":return yield*P(J$,t,f);case"Not":return yield*B(J$,t,f);case"Null":return yield*L(J$,t,f);case"Number":return yield*g(J$,t,f);case"Object":return yield*k(J$,t,f);case"Promise":return yield*I(J$,t,f);case"Record":return yield*O(J$,t,f);case"Ref":return yield*b(J$,t,f);case"RegExp":return yield*D(J$,t,f);case"String":return yield*_(J$,t,f);case"Symbol":return yield*q(J$,t,f);case"TemplateLiteral":return yield*S(J$,t,f);case"This":return yield*j(J$,t,f);case"Tuple":return yield*E(J$,t,f);case"Undefined":return yield*T(J$,t,f);case"Union":return yield*R(J$,t,f);case"Uint8Array":return yield*v(J$,t,f);case"Unknown":return yield*h(J$,t,f);case"Void":return yield*y(J$,t,f);default:if(!u6.Has(J$[l]))throw new Rf(u);return yield*o(J$,t,f)}}let Z$={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function _$(u,a,f,n=!0){return`(${[...G$(u,a,f,n)].join(" && ")})`}function E$(u){return`check_${C_.Encode(u)}`}function d$(u){let a=`local_${Z$.variables.size}`;return Z$.variables.set(a,`const ${a} = ${u}`),a}function n$(u,a,f,n,t=!0){let[J$,A$]=[`
`,(X6)=>"".padStart(X6," ")],L0=J0("value","any"),Z4=m0("boolean"),h4=[...G$(a,f,n,t)].map((X6)=>`${A$(4)}${X6}`).join(` &&${J$}`);return`function ${u}(${L0})${Z4} {${J$}${A$(2)}return (${J$}${h4}${J$}${A$(2)})
}`}function J0(u,a){let f=Z$.language==="typescript"?`: ${a}`:"";return`${u}${f}`}function m0(u){return Z$.language==="typescript"?`: ${u}`:""}function T8(u,a,f){let n=n$("check",u,a,"value"),t=J0("value","any"),J$=m0("boolean"),A$=[...Z$.functions.values()],L0=[...Z$.variables.values()],Z4=C0(u.$id)?`return function check(${t})${J$} {
  return ${E$(u.$id)}(value)
}`:`return ${n}`;return[...L0,...A$,Z4].join(`
`)}function XX(...u){let a={language:"javascript"},[f,n,t]=u.length===2&&c$(u[1])?[u[0],u[1],a]:u.length===2&&!c$(u[1])?[u[0],[],u[1]]:u.length===3?[u[0],u[1],u[2]]:u.length===1?[u[0],[],a]:[null,[],a];if(Z$.language=t.language,Z$.variables.clear(),Z$.functions.clear(),Z$.instances.clear(),!c4(f))throw new R_(f);for(let J$ of n)if(!c4(J$))throw new R_(J$);return T8(f,n,t)}$.Code=XX;function L5(u,a=[]){let f=XX(u,a,{language:"javascript"}),n=globalThis.Function("kind","format","hash",f),t=new Map(Z$.instances);function J$(h4,X6,LJ){if(!u6.Has(h4)||!t.has(X6))return!1;let sW=u6.Get(h4),OQ=t.get(X6);return sW(OQ,LJ)}function A$(h4,X6){if(!J4.Has(h4))return!1;return J4.Get(h4)(X6)}function L0(h4){return z9(h4)}let Z4=n(J$,A$,L0);return new Tf(u,a,Z4,f)}$.Compile=L5})(_Y||(_Y={}));var a1=typeof Bun<"u";function N3(){try{if(typeof caches<"u"&&typeof caches.default<"u"||typeof WebSocketPair<"u")return!0}catch{return!1}return!1}var b_={aac:"audio/aac",abw:"application/x-abiword",ai:"application/postscript",arc:"application/octet-stream",avi:"video/x-msvideo",azw:"application/vnd.amazon.ebook",bin:"application/octet-stream",bz:"application/x-bzip",bz2:"application/x-bzip2",csh:"application/x-csh",css:"text/css",csv:"text/csv",doc:"application/msword",dll:"application/octet-stream",eot:"application/vnd.ms-fontobject",epub:"application/epub+zip",gif:"image/gif",htm:"text/html",html:"text/html",ico:"image/x-icon",ics:"text/calendar",jar:"application/java-archive",jpeg:"image/jpeg",jpg:"image/jpeg",js:"application/javascript",json:"application/json",mid:"audio/midi",midi:"audio/midi",mp2:"audio/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpkg:"application/vnd.apple.installer+xml",odp:"application/vnd.oasis.opendocument.presentation",ods:"application/vnd.oasis.opendocument.spreadsheet",odt:"application/vnd.oasis.opendocument.text",oga:"audio/ogg",ogv:"video/ogg",ogx:"application/ogg",otf:"font/otf",png:"image/png",pdf:"application/pdf",ppt:"application/vnd.ms-powerpoint",rar:"application/x-rar-compressed",rtf:"application/rtf",sh:"application/x-sh",svg:"image/svg+xml",swf:"application/x-shockwave-flash",tar:"application/x-tar",tif:"image/tiff",tiff:"image/tiff",ts:"application/typescript",ttf:"font/ttf",txt:"text/plain",vsd:"application/vnd.visio",wav:"audio/x-wav",weba:"audio/webm",webm:"video/webm",webp:"image/webp",woff:"font/woff",woff2:"font/woff2",xhtml:"application/xhtml+xml",xls:"application/vnd.ms-excel",xlsx:"application/vnd.ms-excel",xlsx_OLD:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xml:"application/xml",xul:"application/vnd.mozilla.xul+xml",zip:"application/zip","3gp":"video/3gpp","3gp_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp","3gp2":"video/3gpp2","3gp2_DOES_NOT_CONTAIN_VIDEO":"audio/3gpp2","7z":"application/x-7z-compressed"},VX$=($)=>{let J=$.lastIndexOf(".");return J===-1?"":$.slice(J+1)};var I_,k_;class v5{constructor($){if(this.path=$,a1)this.value=Bun.file($);else{if(!I_||!k_){if(typeof window<"u"){console.warn("Browser environment does not support file");return}let J=(X)=>console.warn(Error(`[elysia] \`file\` require \`fs${X?"."+X:""}\` ${X?.includes(".")?"module ":""}which is not available in this environment`));if(typeof process>"u"||typeof process.getBuiltinModule!="function"){J();return}let Y=process.getBuiltinModule("fs");if(!Y){J();return}if(typeof Y.createReadStream!="function"){J();return}if(typeof Y.promises?.stat!="function"){J();return}I_=Y.createReadStream,k_=Y.promises.stat}this.value=I_($),this.stats=k_($)}}get type(){return b_[VX$(this.path)]||"application/octet-stream"}get length(){return a1?this.value.size:this.stats?.then(($)=>$.size)??0}}var L3=($,J)=>{let Y=$.indexOf("/",11),X=$.indexOf("?",Y);return X===-1?`${$.slice(0,Y)}${J.charCodeAt(0)===47?"":"/"}${J}`:`${$.slice(0,Y)}${J.charCodeAt(0)===47?"":"/"}${J}${$.slice(X)}`},NX$=($)=>typeof $=="function"&&/^\s*class\s+/.test($.toString())||$.toString&&$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||p0(Object.getPrototypeOf($)),v_=($)=>$&&typeof $=="object"&&!Array.isArray($),y6=($,J,Y)=>{let X=Y?.skipKeys,W=Y?.override??!0,Z=Y?.mergeArray??!1,G=Y?.seen??new WeakSet;if(!v_($)||!v_(J)||G.has(J))return $;G.add(J);for(let[Q,H]of Object.entries(J))if(!(X?.includes(Q)||["__proto__","constructor","prototype"].includes(Q))){if(Z&&Array.isArray(H)){$[Q]=Array.isArray($[Q])?[...$[Q],...H]:$[Q]=H;continue}if(!v_(H)||!(Q in $)||NX$(H)){if((W||!(Q in $))&&!Object.isFrozen($))try{$[Q]=H}catch{}continue}if(!Object.isFrozen($[Q]))try{$[Q]=y6($[Q],H,{skipKeys:X,override:W,mergeArray:Z,seen:G})}catch{}}return G.delete(J),$},lQ=($,J)=>{let Y=y6(Object.assign({},$),J,{skipKeys:["properties"],mergeArray:!1});return Y.properties&&delete Y.properties,Y},o4=($,J)=>{if(!J)return $;let Y=[],X=[];if($){Array.isArray($)||($=[$]);for(let W of $)Y.push(W),W.checksum&&X.push(W.checksum)}if(J){Array.isArray(J)||(J=[J]);for(let W of J)X.includes(W.checksum)||Y.push(W)}return Y},_X$=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],GC$=_X$.reduce(($,J)=>($[J]=!0,$),{}),_3=($)=>typeof $=="object"&&Object.keys($).every((J)=>!isNaN(+J)),kf=($,J)=>_3($)&&_3(J)?Object.assign({},$,J):$&&!_3($)&&_3(J)?Object.assign({200:$},J):J??$,n7=($,J)=>!$&&!J?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:{body:J?.body??$?.body,headers:J?.headers??$?.headers,params:J?.params??$?.params,query:J?.query??$?.query,cookie:J?.cookie??$?.cookie,response:kf($?.response,J?.response)},XW=($,J)=>{if(!J)return $??{};if(!$)return J??{};if(!Object.values(J).find((X)=>X!=null))return{...$};let Y={...$,...J,body:J.body??$.body,headers:J.headers??$.headers,params:J.params??$.params,query:J.query??$.query,cookie:J.cookie??$.cookie,response:kf($.response,J.response),type:$.type||J.type,detail:y6(J.detail??{},$.detail??{}),parse:o4($.parse,J.parse),transform:o4($.transform,J.transform),beforeHandle:o4(o4(x6($.resolve,"resolve"),$.beforeHandle),o4(x6(J.resolve,"resolve"),J.beforeHandle)),afterHandle:o4($.afterHandle,J.afterHandle),mapResponse:o4($.mapResponse,J.mapResponse),afterResponse:o4($.afterResponse,J.afterResponse),trace:o4($.trace,J.trace),error:o4($.error,J.error),standaloneSchema:$.standaloneSchema||J.standaloneSchema?$.standaloneSchema&&!J.standaloneSchema?$.standaloneSchema:J.standaloneSchema&&!$.standaloneSchema?J.standaloneSchema:[...$.standaloneSchema??[],...J.standaloneSchema??[]]:void 0};return Y.resolve&&delete Y.resolve,Y},bf=($)=>{$.parse&&!Array.isArray($.parse)&&($.parse=[$.parse]),$.transform&&!Array.isArray($.transform)&&($.transform=[$.transform]),$.afterHandle&&!Array.isArray($.afterHandle)&&($.afterHandle=[$.afterHandle]),$.mapResponse&&!Array.isArray($.mapResponse)&&($.mapResponse=[$.mapResponse]),$.afterResponse&&!Array.isArray($.afterResponse)&&($.afterResponse=[$.afterResponse]),$.trace&&!Array.isArray($.trace)&&($.trace=[$.trace]),$.error&&!Array.isArray($.error)&&($.error=[$.error]);let J=[];return $.resolve&&(J=x6(Array.isArray($.resolve)?$.resolve:[$.resolve],"resolve"),delete $.resolve),$.beforeHandle&&(J.length?J=J.concat(Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]):J=Array.isArray($.beforeHandle)?$.beforeHandle:[$.beforeHandle]),J.length&&($.beforeHandle=J),$},nQ=a1?"toJSON"in new Headers:!1,q3=typeof setImmediate=="function",w9=($)=>{let J=9;for(let Y=0;Y<$.length;)J=Math.imul(J^$.charCodeAt(Y++),387420489);return J=J^J>>>9},LY=($,J)=>{if(!J)return;if(!Array.isArray(J)){let X=J;return $&&!X.checksum&&(X.checksum=$),X.scope==="scoped"&&(X.scope="local"),X}let Y=[...J];for(let X of Y)$&&!X.checksum&&(X.checksum=$),X.scope==="scoped"&&(X.scope="local");return Y},f_=($,J,Y)=>({start:o4($.start,LY(Y,J?.start)),request:o4($.request,LY(Y,J?.request)),parse:o4($.parse,LY(Y,J?.parse)),transform:o4($.transform,LY(Y,J?.transform)),beforeHandle:o4(o4(x6($.resolve,"resolve"),$.beforeHandle),LY(Y,o4(x6(J?.resolve,"resolve"),J?.beforeHandle))),afterHandle:o4($.afterHandle,LY(Y,J?.afterHandle)),mapResponse:o4($.mapResponse,LY(Y,J?.mapResponse)),afterResponse:o4($.afterResponse,LY(Y,J?.afterResponse)),trace:o4($.trace,LY(Y,J?.trace)),error:o4($.error,LY(Y,J?.error)),stop:o4($.stop,LY(Y,J?.stop))}),vf=($,J,{skipIfHasType:Y=!1})=>{if(!$)return $;if(!Array.isArray($))return Y?$.scope??=J:$.scope=J,$;for(let X of $)Y?X.scope??=J:X.scope=J;return $},K9=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let J=[];for(let Y of $)switch(Y.scope){case"global":case"scoped":J.push({...Y});break}return J},g_=($)=>({...$,type:$?.type,detail:$?.detail,parse:K9($?.parse),transform:K9($?.transform),beforeHandle:K9($?.beforeHandle),afterHandle:K9($?.afterHandle),mapResponse:K9($?.mapResponse),afterResponse:K9($?.afterResponse),error:K9($?.error),trace:K9($?.trace)}),HX={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Enhance Your Calm":420,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},B3=Object.fromEntries(Object.entries(HX).map(([$,J])=>[J,$]));function LX$($){let J=$;for(;J.endsWith("=");)J=J.slice(0,-1);return J}var If=new TextEncoder,i7=async($,J)=>{if(typeof $=="object"?$=JSON.stringify($):typeof $!="string"&&($=$+""),J==null)throw TypeError("Secret key must be provided");let Y=await crypto.subtle.importKey("raw",If.encode(J),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),X=await crypto.subtle.sign("HMAC",Y,If.encode($));return $+"."+LX$(Buffer.from(X).toString("base64"))},qX$=typeof crypto?.timingSafeEqual=="function"?($,J)=>{let Y=Buffer.from($,"utf8"),X=Buffer.from(J,"utf8");return Y.length!==X.length?!1:crypto.timingSafeEqual(Y,X)}:($,J)=>$===J,x_=async($,J)=>{if(typeof $!="string")throw TypeError("Signed cookie string must be provided.");let Y=$.lastIndexOf(".");if(Y===-1)return J===null?$:!1;let X=$.slice(0,Y),W=await i7(X,J);return qX$(W,$)?X:!1},ff=($,J,Y)=>{if(!$.standaloneValidator?.length||!Array.isArray($.standaloneValidator)){$.standaloneValidator=[{[J]:Y}];return}let X=$.standaloneValidator[$.standaloneValidator.length-1];J in X?$.standaloneValidator.push({[J]:Y}):X[J]=Y},BX$=($)=>{if(typeof $=="number")return $;if($.length<16){if($.trim().length===0)return null;let J=Number($);return Number.isNaN(J)?null:J}if($.length===16){if($.trim().length===0)return null;let J=Number($);return Number.isNaN(J)||J.toString()!==$?null:J}return null},O3=($)=>BX$($)!==null;class y_{constructor($=console.error,J=()=>{}){this.onError=$,this.onFinally=J,this.root=null,this.promises=[]}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),this.promises.length===1&&this.then(this.onFinally),$}async drain(){for(;this.promises.length>0;){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,J){return(this.root??Promise.resolve()).then($,J)}}var x6=($,J)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $=="function"||typeof $=="string")return J?{fn:$,subType:J}:{fn:$};if("fn"in $)return $}let Y=[];for(let X of $)typeof X=="function"||typeof X=="string"?Y.push(J?{fn:X,subType:J}:{fn:X}):("fn"in X)&&Y.push(X);return Y},h_=($)=>($.start&&($.start=x6($.start)),$.request&&($.request=x6($.request)),$.parse&&($.parse=x6($.parse)),$.transform&&($.transform=x6($.transform)),$.beforeHandle&&($.beforeHandle=x6($.beforeHandle)),$.afterHandle&&($.afterHandle=x6($.afterHandle)),$.mapResponse&&($.mapResponse=x6($.mapResponse)),$.afterResponse&&($.afterResponse=x6($.afterResponse)),$.trace&&($.trace=x6($.trace)),$.error&&($.error=x6($.error)),$.stop&&($.stop=x6($.stop)),$),m_=($)=>{let J=Object.create(null);return $.start?.map&&(J.start=$.start.map((Y)=>Y.fn)),$.request?.map&&(J.request=$.request.map((Y)=>Y.fn)),$.parse?.map&&(J.parse=$.parse.map((Y)=>Y.fn)),$.transform?.map&&(J.transform=$.transform.map((Y)=>Y.fn)),$.beforeHandle?.map&&(J.beforeHandle=$.beforeHandle.map((Y)=>Y.fn)),$.afterHandle?.map&&(J.afterHandle=$.afterHandle.map((Y)=>Y.fn)),$.mapResponse?.map&&(J.mapResponse=$.mapResponse.map((Y)=>Y.fn)),$.afterResponse?.map&&(J.afterResponse=$.afterResponse.map((Y)=>Y.fn)),$.error?.map&&(J.error=$.error.map((Y)=>Y.fn)),$.stop?.map&&(J.stop=$.stop.map((Y)=>Y.fn)),$.trace?.map?J.trace=$.trace.map((Y)=>Y.fn):J.trace=[],J},P3=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server,path:$.path,route:$.route,url:$.url}),WW=($,J=302)=>Response.redirect($,J),YW=Symbol("ElysiaFormData"),ZW=Symbol("ElysiaRequestId"),u_=($)=>{let J=new FormData;if(J[YW]={},$)for(let[Y,X]of Object.entries($)){if(Array.isArray(X)){J[YW][Y]=[];for(let W of X)X instanceof File?J.append(Y,X,X.name):X instanceof v5?J.append(Y,X.value,X.value?.name):J.append(Y,X),J[YW][Y].push(X);continue}X instanceof File?J.append(Y,X,X.name):X instanceof v5?J.append(Y,X.value,X.value?.name):J.append(Y,X),J[YW][Y]=X}return J},GW=typeof crypto>"u"||N3()?()=>{let $="",J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let Y=0;Y<16;Y++)$+=J.charAt(Math.floor(Math.random()*62));return $}:()=>{let $=crypto.randomUUID();return $.slice(0,8)+$.slice(24,32)},d_=($)=>{if(!$.length)return[];let J=[];for(let Y=0;Y<$.length;Y++){let X=$[Y];X.checksum&&(J.includes(X.checksum)&&($.splice(Y,1),Y--),J.push(X.checksum))}return $},QW=($,J="scoped")=>{if($){if(J==="scoped"){for(let Y of $)"scope"in Y&&Y.scope==="local"&&(Y.scope="scoped");return}for(let Y of $)"scope"in Y&&(Y.scope="global")}},f5=($)=>$.charCodeAt($.length-1)===47?$.slice(0,$.length-1):$+"/",p0=($)=>{if(!$)return!1;for(let J in $)return!0;return!1},g5=($,{dynamic:J=!1}={})=>{let Y=encodeURIComponent($).replace(/%2F/g,"/");return J&&(Y=Y.replace(/%3A/g,":").replace(/%3F/g,"?")),Y},S3=!!(typeof Bun>"u"||Bun.semver?.satisfies?.(Bun.version,">=1.2.14"));async function gf($){if($.bodyUsed||!$.body)return 0;let J=0,Y=$.body.getReader();for(;;){let{done:X,value:W}=await Y.read();if(X)break;J+=W.byteLength}return J}var xf={headers:!0,cookie:!0,query:!0,params:!0,body:!0,response:!0};var yf=typeof Bun<"u"?Bun.env:typeof process<"u"?process?.env:void 0,x5=Symbol("ElysiaErrorCode"),HW=(yf?.NODE_ENV??yf?.ENV)==="production",OX$={101:void 0,204:void 0,205:void 0,304:void 0,307:void 0,308:void 0};class G6{constructor($,J){let Y=J??($ in B3?B3[$]:$);this.code=HX[$]??$,$ in OX$?this.response=void 0:this.response=Y}}var RJ=($,J)=>new G6($,J);class r7 extends Error{constructor($){super($??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}}class A3 extends Error{constructor($){super("Bad Request",{cause:$});this.code="PARSE",this.status=400}}class y5 extends Error{constructor($,J){super(J??`"${$}" has invalid cookie signature`);this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}}var c6=($)=>{if(!$)return $;let{message:J,path:Y,value:X,type:W}=$;Array.isArray(Y)&&(Y=Y[0]);let Z=typeof Y=="string"?Y.slice(1).replaceAll("/","."):"unknown",G=Y==="";switch(W){case 42:return{...$,summary:G?"Value should not be provided":`Property '${Z}' should not be provided`};case 45:return{...$,summary:G?"Value is missing":`Property '${Z}' is missing`};case 50:let Q=J.indexOf("'"),H=J.slice(Q+1,J.indexOf("'",Q+1));return{...$,summary:G?"Value should be an email":`Property '${Z}' should be ${H}`};case 54:return{...$,summary:`${J.slice(0,9).trim()} property '${Z}' to be ${J.slice(8).trim()} but found: ${X}`};case 62:let z=$.schema.anyOf.map((K)=>`'${K?.format??K.type}'`).join(", ");return{...$,summary:G?`Value should be one of ${z}`:`Property '${Z}' should be one of: ${z}`};default:return{summary:J,...$}}};class h5 extends Error{constructor($,J,Y=`"${$}" has invalid file type`){super(Y);this.property=$,this.expected=J,this.message=Y,this.code="INVALID_FILE_TYPE",this.status=422,Object.setPrototypeOf(this,h5.prototype)}toResponse($){return HW?new Response(JSON.stringify({type:"validation",on:"body"}),{status:422,headers:{...$,"content-type":"application/json"}}):new Response(JSON.stringify({type:"validation",on:"body",summary:"Invalid file type",message:this.message,property:this.property,expected:this.expected}),{status:422,headers:{...$,"content-type":"application/json"}})}}class s$ extends Error{constructor($,J,Y,X=!1,W){let Z="",G,Q,H;if(J?.provider==="standard"||"~standard"in J||J.schema&&"~standard"in J.schema){let z=("~standard"in J?J:J.schema)["~standard"];G=(W??z.validate(Y).issues)?.[0],HW&&!X?Z=JSON.stringify({type:"validation",on:$,found:Y}):Z=JSON.stringify({type:"validation",on:$,property:G.path?.[0]||"root",message:G?.message,summary:G?.problem,expected:Q,found:Y,errors:W},null,2),H=G?.message}else{Y&&typeof Y=="object"&&Y instanceof G6&&(Y=Y.response),G=W?.First()??("Errors"in J?J.Errors(Y).First():z4.Errors(J,Y).First());let z=G?.path||"root",K=J?.schema??J;if(!HW&&!X)try{Q=z4.Create(K)}catch(w){Q={type:"Could not create expected value",message:w?.message,error:w}}H=G?.schema?.message||G?.schema?.error!==void 0?typeof G.schema.error=="function"?G.schema.error(HW&&!X?{type:"validation",on:$,found:Y}:{type:"validation",on:$,value:Y,property:z,message:G?.message,summary:c6(G)?.summary,found:Y,expected:Q,errors:"Errors"in J?[...J.Errors(Y)].map(c6):[...z4.Errors(J,Y)].map(c6)},J):G.schema.error:void 0,H!==void 0?Z=typeof H=="object"?JSON.stringify(H):H+"":HW&&!X?Z=JSON.stringify({type:"validation",on:$,found:Y}):Z=JSON.stringify({type:"validation",on:$,property:z,message:G?.message,summary:c6(G)?.summary,expected:Q,found:Y,errors:"Errors"in J?[...J.Errors(Y)].map(c6):[...z4.Errors(J,Y)].map(c6)},null,2)}super(Z);this.type=$,this.validator=J,this.value=Y,this.allowUnsafeValidationDetails=X,this.code="VALIDATION",this.status=422,this.valueError=G,this.expected=Q,this.customError=H,Object.setPrototypeOf(this,s$.prototype)}get messageValue(){return this.valueError}get all(){return this.validator?.provider==="standard"||"~standard"in this.validator||"schema"in this.validator&&this.validator.schema&&"~standard"in this.validator.schema?("~standard"in this.validator?this.validator:this.validator.schema)["~standard"].validate(this.value).issues?.map(($)=>({summary:$.message,path:$.path?.join(".")||"root",message:$.message,value:this.value}))||[]:("Errors"in this.validator)?[...this.validator.Errors(this.value)].filter(($)=>$).map(($)=>c6($)):[...z4.Errors(this.validator,this.value)].map(c6)}static simplifyModel($){let J="schema"in $?$.schema:$;try{return z4.Create(J)}catch{return J}}get model(){return"~standard"in this.validator?this.validator:s$.simplifyModel(this.validator)}toResponse($){return new Response(this.message,{status:400,headers:{...$,"content-type":"application/json"}})}detail($,J=this.allowUnsafeValidationDetails){if(!this.customError)return this.message;let Y=this.value,X=this.expected,W=this.all;return HW&&!J?{type:"validation",on:this.type,found:Y,message:$}:{type:"validation",on:this.type,property:this.valueError?.path||"root",message:$,summary:c6(this.valueError)?.summary,found:Y,expected:X,errors:W}}}var $G=($,J)=>{try{return JSON.parse($)}catch{throw new s$("property",J,$)}};function JG($,J){return u6.Has($)||u6.Set($,J),(Y={})=>G3({...Y,[l]:$})}var qY=($)=>{try{let J=_Y.Compile($);return J.Create=()=>z4.Create($),J.Error=(Y)=>new s$("property",$,Y,J.Errors(Y)),J}catch{return{Check:(J)=>z4.Check($,J),CheckThrow:(J)=>{if(!z4.Check($,J))throw new s$("property",$,J,z4.Errors($,J))},Decode:(J)=>z4.Decode($,J),Create:()=>z4.Create($),Error:(J)=>new s$("property",$,J,z4.Errors($,J))}}},hg=($)=>{if(typeof $=="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},h3=($,J)=>$.startsWith(J)?!0:J.charCodeAt(J.length-1)===42&&J.charCodeAt(J.length-2)===47&&$.startsWith(J.slice(0,-1)),mg=!1,jW$=()=>{mg||(console.warn("[Elysia] Attempt to validate file type without 'file-type'. This may lead to security risks. We recommend installing 'file-type' to properly validate file extension."),mg=!0)},u3=async()=>Promise.resolve().then(() => (yg(),xg)).then(($)=>(m3=$.fileTypeFromBlob,m3)).catch(jW$),m3,EW$=($)=>m3?m3($):u3().then((J)=>{if(J)return J($)}),d3=async($,J,Y=$?.name??"")=>{if(Array.isArray($))return await Promise.all($.map((W)=>d3(W,J,Y))),!0;if(!$)return!1;let X=await EW$($);if(!X)throw new h5(Y,J);if(typeof J=="string"&&!h3(X.mime,J))throw new h5(Y,J);for(let W=0;W<J.length;W++)if(h3(X.mime,J[W]))return!0;throw new h5(Y,J)},c3=($,J)=>{if(J instanceof v5)return!0;if(!(J instanceof Blob)||$.minSize&&J.size<hg($.minSize)||$.maxSize&&J.size>hg($.maxSize))return!1;if($.extension){if(typeof $.extension=="string")return h3(J.type,$.extension);for(let Y=0;Y<$.extension.length;Y++)if(h3(J.type,$.extension[Y]))return!0;return!1}return!0};var GL={date:ig,time:ZL(!0),"date-time":ug(!0),"iso-time":ZL(!1),"iso-date-time":ug(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:fW$,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:dW$,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:gW$,int32:{type:"number",validate:hW$},int64:{type:"number",validate:mW$},float:{type:"number",validate:cg},double:{type:"number",validate:cg},password:!0,binary:!0};function CW$($){return $%4===0&&($%100!==0||$%400===0)}var TW$=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,RW$=[0,31,28,31,30,31,30,31,31,30,31,30,31];function ig($){let J=TW$.exec($);if(!J)return!1;let Y=+J[1],X=+J[2],W=+J[3];return X>=1&&X<=12&&W>=1&&W<=(X===2&&CW$(Y)?29:RW$[X])}var IW$=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function ZL($){return function(J){let Y=IW$.exec(J);if(!Y)return!1;let X=+Y[1],W=+Y[2],Z=+Y[3],G=Y[4],Q=Y[5]==="-"?-1:1,H=+(Y[6]||0),z=+(Y[7]||0);if(H>23||z>59||$&&!G)return!1;if(X<=23&&W<=59&&Z<60)return!0;let K=W-z*Q,w=X-H*Q-(K<0?1:0);return(w===23||w===-1)&&(K===59||K===-1)&&Z<61}}var p3=($)=>$.charCodeAt($.length-6)===32?$.slice(0,-6)+"+"+$.slice(-5):$,kW$=/t|\s/i;function ug($){let J=ZL($);return function(Y){let X=Y.split(kW$);return X.length===2&&ig(X[0])&&J(X[1])}}var bW$=/\/|:/,vW$=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function fW$($){return bW$.test($)&&vW$.test($)}var dg=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function gW$($){return dg.lastIndex=0,dg.test($)}var xW$=-2147483648,yW$=2147483647;function hW$($){return Number.isInteger($)&&$<=yW$&&$>=xW$}function mW$($){return Number.isInteger($)}function cg(){return!0}var uW$=/[^\\]\\Z/;function dW$($){if(uW$.test($))return!1;try{return new RegExp($),!0}catch{return!1}}var pg=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,lg=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,ng=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,cW$=GL.date,pW$=GL["date-time"];J4.Has("date")||J4.Set("date",($)=>{let J=p3($).replace(/"/g,"");if(pg.test(J)||lg.test(J)||ng.test(J)||cW$(J)){let Y=new Date(J);if(!Number.isNaN(Y.getTime()))return!0}return!1}),J4.Has("date-time")||J4.Set("date-time",($)=>{let J=$.replace(/"/g,"");if(pg.test(J)||lg.test(J)||ng.test(J)||pW$(J)){let Y=new Date(J);if(!Number.isNaN(Y.getTime()))return!0}return!1}),Object.entries(GL).forEach(($)=>{let[J,Y]=$;J4.Has(J)||(Y instanceof RegExp?J4.Set(J,(X)=>Y.test(X)):typeof Y=="function"&&J4.Set(J,Y))}),J4.Has("numeric")||J4.Set("numeric",($)=>!!$&&!isNaN(+$)),J4.Has("integer")||J4.Set("integer",($)=>!!$&&Number.isInteger(+$)),J4.Has("boolean")||J4.Set("boolean",($)=>$==="true"||$==="false"),J4.Has("ObjectString")||J4.Set("ObjectString",($)=>{let J=$.charCodeAt(0);if((J===9||J===10||J===32)&&(J=$.trimStart().charCodeAt(0)),J!==123&&J!==91)return!1;try{return JSON.parse($),!0}catch{return!1}}),J4.Has("ArrayString")||J4.Set("ArrayString",($)=>{let J=$.charCodeAt(0);if((J===9||J===10||J===32)&&(J=$.trimStart().charCodeAt(0)),J!==123&&J!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});var Q$=Object.assign({},CJ);JG("UnionEnum",($,J)=>(typeof J=="number"||typeof J=="string"||J===null)&&$.enum.includes(J)),JG("ArrayBuffer",($,J)=>J instanceof ArrayBuffer);var lW$=JG("Files",($,J)=>{if($.minItems&&$.minItems>1&&!Array.isArray(J))return!1;if(!Array.isArray(J))return c3($,J);if($.minItems&&J.length<$.minItems||$.maxItems&&J.length>$.maxItems)return!1;for(let Y=0;Y<J.length;Y++)if(!c3($,J[Y]))return!1;return!0}),nW$=JG("ElysiaForm",({compiler:$,...J},Y)=>{if(!(Y instanceof FormData))return!1;if($){if(!(YW in Y))throw new s$("property",J,Y);if(!$.Check(Y[YW]))throw $.Error(Y[YW])}return!0}),$8={String:($)=>CJ.String($),Numeric:($)=>{let J=CJ.Number($),Y=qY(J);return Q$.Transform(Q$.Union([Q$.String({format:"numeric",default:0}),Q$.Number($)],$)).Decode((X)=>{let W=+X;if(isNaN(W))return X;if($&&!Y.Check(W))throw Y.Error(W);return W}).Encode((X)=>X)},NumericEnum($,J){let Y=CJ.Enum($,J),X=qY(Y);return Q$.Transform(Q$.Union([Q$.String({format:"numeric"}),Q$.Number()],J)).Decode((W)=>{let Z=+W;if(isNaN(Z)||!X.Check(Z))throw X.Error(Z);return Z}).Encode((W)=>W)},Integer:($)=>{let J=CJ.Integer($),Y=qY(J);return Q$.Transform(Q$.Union([Q$.String({format:"integer",default:0}),CJ.Integer($)],$)).Decode((X)=>{let W=+X;if(!Y.Check(W))throw Y.Error(W);return W}).Encode((X)=>X)},Date:($)=>{let J=CJ.Date($),Y=qY(J),X=$?.default?new Date($.default):void 0;return Q$.Transform(Q$.Union([CJ.Date($),Q$.String({format:"date-time",default:X?.toISOString()}),Q$.String({format:"date",default:X?.toISOString()}),Q$.Number({default:X?.getTime()})],$)).Decode((W)=>{if(typeof W=="number"){let G=new Date(W);if(!Y.Check(G))throw Y.Error(G);return G}if(W instanceof Date)return W;let Z=new Date(p3(W));if(!Z||isNaN(Z.getTime()))throw new s$("property",J,Z);if(!Y.Check(Z))throw Y.Error(Z);return Z}).Encode((W)=>{if(W instanceof Date)return W.toISOString();if(typeof W=="string"){let Z=new Date(p3(W));if(isNaN(Z.getTime()))throw new s$("property",J,W);return Z.toISOString()}if(!Y.Check(W))throw Y.Error(W);return W})},BooleanString:($)=>{let J=CJ.Boolean($),Y=qY(J);return Q$.Transform(Q$.Union([Q$.Boolean($),Q$.String({format:"boolean",default:!1})],$)).Decode((X)=>{if(typeof X=="string")return X==="true";if(X!==void 0&&!Y.Check(X))throw Y.Error(X);return X}).Encode((X)=>X)},ObjectString:($,J)=>{let Y=Q$.Object($,J),X=qY(Y);return Q$.Transform(Q$.Union([Q$.String({format:"ObjectString",default:J?.default}),Y],{elysiaMeta:"ObjectString"})).Decode((W)=>{if(typeof W=="string"){if(W.charCodeAt(0)!==123)throw new s$("property",Y,W);if(!X.Check(W=$G(W,Y)))throw X.Error(W);return X.Decode(W)}return W}).Encode((W)=>{let Z;if(typeof W=="string"&&(W=$G(Z=W,Y)),!X.Check(W))throw X.Error(W);return Z??JSON.stringify(W)})},ArrayString:($=Q$.String(),J)=>{let Y=Q$.Array($,J),X=qY(Y),W=(Z,G=!1)=>{if(Z.charCodeAt(0)===91){if(!X.Check(Z=$G(Z,Y)))throw X.Error(Z);return X.Decode(Z)}if(G)return Z;throw new s$("property",Y,Z)};return Q$.Transform(Q$.Union([Q$.String({format:"ArrayString",default:J?.default}),Y],{elysiaMeta:"ArrayString"})).Decode((Z)=>{if(Array.isArray(Z)){let G=[];for(let Q=0;Q<Z.length;Q++){let H=Z[Q];if(typeof H=="string"){let z=W(H,!0);Array.isArray(z)?G=G.concat(z):G.push(z);continue}G.push(H)}return G}return typeof Z=="string"?W(Z):Z}).Encode((Z)=>{let G;if(typeof Z=="string"&&(Z=$G(G=Z,Y)),!X.Check(Z))throw new s$("property",Y,Z);return G??JSON.stringify(Z)})},ArrayQuery:($=Q$.String(),J)=>{let Y=Q$.Array($,J),X=qY(Y),W=(Z)=>Z.indexOf(",")!==-1?X.Decode(Z.split(",")):X.Decode([Z]);return Q$.Transform(Q$.Union([Q$.String({default:J?.default}),Y],{elysiaMeta:"ArrayQuery"})).Decode((Z)=>{if(Array.isArray(Z)){let G=[];for(let Q=0;Q<Z.length;Q++){let H=Z[Q];if(typeof H=="string"){let z=W(H);Array.isArray(z)?G=G.concat(z):G.push(z);continue}G.push(H)}return G}return typeof Z=="string"?W(Z):Z}).Encode((Z)=>{let G;if(typeof Z=="string"&&(Z=$G(G=Z,Y)),!X.Check(Z))throw new s$("property",Y,Z);return G??JSON.stringify(Z)})},File:JG("File",c3),Files:($={})=>Q$.Transform(lW$($)).Decode((J)=>Array.isArray(J)?J:[J]).Encode((J)=>J),Nullable:($,J)=>Q$.Union([$,Q$.Null()],{...J,nullable:!0}),MaybeEmpty:($,J)=>Q$.Union([$,Q$.Null(),Q$.Undefined()],J),Cookie:($,{domain:J,expires:Y,httpOnly:X,maxAge:W,path:Z,priority:G,sameSite:Q,secure:H,secrets:z,sign:K,...w}={})=>{let F=Q$.Object($,w);return F.config={domain:J,expires:Y,httpOnly:X,maxAge:W,path:Z,priority:G,sameSite:Q,secure:H,secrets:z,sign:K},F},UnionEnum:($,J={})=>{let Y=$.every((X)=>typeof X=="string")?{type:"string"}:$.every((X)=>typeof X=="number")?{type:"number"}:$.every((X)=>X===null)?{type:"null"}:{};if($.some((X)=>typeof X=="object"&&X!==null))throw Error("This type does not support objects or arrays");return{default:$[0],...J,[l]:"UnionEnum",...Y,enum:$}},NoValidate:($,J=!0)=>($.noValidate=J,$),Form:($,J={})=>{let Y=Q$.Object($,{default:u_({}),...J}),X=qY(Y);return Q$.Union([Y,nW$({compiler:X})])},ArrayBuffer($={}){return{default:[1,2,3],...$,[l]:"ArrayBuffer"}},Uint8Array:($)=>{let J=CJ.Uint8Array($),Y=qY(J);return Q$.Transform(Q$.Union([Q$.ArrayBuffer(),CJ.Uint8Array($)])).Decode((X)=>{if(X instanceof ArrayBuffer){if(!Y.Check(X=new Uint8Array(X)))throw Y.Error(X);return X}return X}).Encode((X)=>X)}};Q$.BooleanString=$8.BooleanString,Q$.ObjectString=$8.ObjectString,Q$.ArrayString=$8.ArrayString,Q$.ArrayQuery=$8.ArrayQuery,Q$.Numeric=$8.Numeric,Q$.NumericEnum=$8.NumericEnum,Q$.Integer=$8.Integer,Q$.File=($)=>($?.type&&u3(),$8.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"})),Q$.Files=($)=>($?.type&&u3(),$8.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}})),Q$.Nullable=$8.Nullable,Q$.MaybeEmpty=$8.MaybeEmpty,Q$.Cookie=$8.Cookie,Q$.Date=$8.Date,Q$.UnionEnum=$8.UnionEnum,Q$.NoValidate=$8.NoValidate,Q$.Form=$8.Form,Q$.ArrayBuffer=$8.ArrayBuffer,Q$.Uint8Array=$8.Uint8Array;var iW$=($)=>{$.startsWith("async")&&($=$.slice(5)),$=$.trimStart();let J=-1;if($.charCodeAt(0)===40&&(J=$.indexOf("=>",$.indexOf(")")),J!==-1)){let W=J;for(;W>0&&$.charCodeAt(--W)!==41;);let Z=$.slice(J+2);return Z.charCodeAt(0)===32&&(Z=Z.trimStart()),[$.slice(1,W),Z,{isArrowReturn:Z.charCodeAt(0)!==123}]}if(/^(\w+)=>/g.test($)&&(J=$.indexOf("=>"),J!==-1)){let W=$.slice(J+2);return W.charCodeAt(0)===32&&(W=W.trimStart()),[$.slice(0,J),W,{isArrowReturn:W.charCodeAt(0)!==123}]}if($.startsWith("function")){J=$.indexOf("(");let W=$.indexOf(")");return[$.slice(J+1,W),$.slice(W+2),{isArrowReturn:!1}]}let Y=$.indexOf("(");if(Y!==-1){let W=$.indexOf(`
`,2),Z=$.slice(0,W),G=Z.lastIndexOf(")")+1,Q=$.slice(W+1);return[Z.slice(Y,G),"{"+Q,{isArrowReturn:!1}]}let X=$.split(`
`,2);return[X[0],X[1],{isArrowReturn:!1}]},rW$=($)=>{let J=$.indexOf("{");if(J===-1)return[-1,0];let Y=J+1,X=1;for(;Y<$.length;Y++){let W=$.charCodeAt(Y);if(W===123?X++:W===125&&X--,X===0)break}return X!==0?[0,$.length]:[J,Y+1]},oW$=($)=>{let J=$.lastIndexOf("}");if(J===-1)return[-1,0];let Y=J-1,X=1;for(;Y>=0;Y--){let W=$.charCodeAt(Y);if(W===125?X++:W===123&&X--,X===0)break}return X!==0?[-1,0]:[Y,J+1]},og=($)=>{for(;;){let J=$.indexOf(":");if(J===-1)break;let Y=$.indexOf(",",J);Y===-1&&(Y=$.indexOf("}",J)-1),Y===-2&&(Y=$.length),$=$.slice(0,J)+$.slice(Y)}return $},tg=($)=>{let J=!1;$.charCodeAt(0)===40&&($=$.slice(1,-1)),$.charCodeAt(0)===123&&(J=!0,$=$.slice(1,-1)),$=$.replace(/( |\t|\n)/g,"").trim();let Y=[];for(;;){let[W,Z]=rW$($);if(W===-1)break;Y.push($.slice(0,W-1)),$.charCodeAt(Z)===44&&Z++,$=$.slice(Z)}$=og($),$&&(Y=Y.concat($.split(",")));let X=Object.create(null);for(let W of Y){if(W.indexOf(",")===-1){X[W]=!0;continue}for(let Z of W.split(","))X[Z.trim()]=!0}return{hasParenthesis:J,parameters:X}},tW$=($,J)=>{let{parameters:Y,hasParenthesis:X}=tg($);return Y.query&&(J.query=!0),Y.headers&&(J.headers=!0),Y.body&&(J.body=!0),Y.cookie&&(J.cookie=!0),Y.set&&(J.set=!0),Y.server&&(J.server=!0),Y.route&&(J.route=!0),Y.url&&(J.url=!0),Y.path&&(J.path=!0),X?`{ ${Object.keys(Y).join(", ")} }`:Object.keys(Y).join(", ")},rg=($,J,Y)=>{let X=new RegExp(`${$.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}[\\n\\t,; ]`);Y!==void 0&&(X.lastIndex=Y);let W=X.exec(J);return W?W.index:-1};var ag=($,J,Y=0)=>{if(Y>5)return[];let X=[],W=J;for(;;){let Z=rg(" = "+$,W);if(Z===-1&&(Z=rg("="+$,W)),Z===-1){let z=W.indexOf(" = "+$);if(z===-1&&(z=W.indexOf("="+$)),z+3+$.length!==W.length)break;Z=z}let G=W.slice(0,Z),Q=G.lastIndexOf(" "),H=G.slice(Q!==-1?Q+1:-1);if(H==="}"){let[z,K]=oW$(G);X.push(og(W.slice(z,K))),W=W.slice(Z+3+$.length);continue}for(;H.charCodeAt(0)===44;)H=H.slice(1);for(;H.charCodeAt(0)===9;)H=H.slice(1);H.includes("(")||X.push(H),W=W.slice(Z+3+$.length)}for(let Z of X){if(Z.charCodeAt(0)===123)continue;let G=ag(Z,J);G.length>0&&X.push(...G)}return X},aW$=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(","))return $.indexOf("...")!==-1?$.slice($.indexOf("...")+3):void 0;let J=$.indexOf("...");if(J!==-1)return $.slice(J+3).trimEnd()},sW$=($,J,Y)=>{let X=(W,Z)=>new RegExp(`${Z}\\.(${W})|${Z}\\["${W}"\\]|${Z}\\['${W}'\\]`).test($);for(let W of J)if(W){if(W.charCodeAt(0)===123){let Z=tg(W).parameters;Z.query&&(Y.query=!0),Z.headers&&(Y.headers=!0),Z.body&&(Y.body=!0),Z.cookie&&(Y.cookie=!0),Z.set&&(Y.set=!0),Z.server&&(Y.server=!0),Z.url&&(Y.url=!0),Z.route&&(Y.route=!0),Z.path&&(Y.path=!0);continue}if(!Y.query&&(X("query",W)||$.includes("return "+W)||$.includes("return "+W+".query"))&&(Y.query=!0),!Y.headers&&X("headers",W)&&(Y.headers=!0),!Y.body&&X("body",W)&&(Y.body=!0),!Y.cookie&&X("cookie",W)&&(Y.cookie=!0),!Y.set&&X("set",W)&&(Y.set=!0),!Y.server&&X("server",W)&&(Y.server=!0),!Y.route&&X("route",W)&&(Y.route=!0),!Y.url&&X("url",W)&&(Y.url=!0),!Y.path&&X("path",W)&&(Y.path=!0),Y.query&&Y.headers&&Y.body&&Y.cookie&&Y.set&&Y.server&&Y.route&&Y.url&&Y.path)break}return J};var eW$=($,J,Y)=>{try{let X=new RegExp(`\\w\\((?:.*?)?${$}(?:.*?)?\\)`,"gs"),W=new RegExp(`${$}(,|\\))`,"gs"),Z=J.length,G;for(G=X.exec(J)+"";X.lastIndex!==0&&X.lastIndex<Z+(G?G.length:0);){if(G&&W.test(G))return Y.query=!0,Y.headers=!0,Y.body=!0,Y.cookie=!0,Y.set=!0,Y.server=!0,Y.url=!0,Y.route=!0,Y.path=!0,!0;G=X.exec(J)+""}let Q=J.charCodeAt(X.lastIndex);return Q===41||Q===44?(Y.query=!0,Y.headers=!0,Y.body=!0,Y.cookie=!0,Y.set=!0,Y.server=!0,Y.url=!0,Y.route=!0,Y.path=!0,!0):!1}catch{return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(J),console.log("--- context ---"),console.log($),!0}},JH,l3={},$9$=($)=>{$===null||N3()||($===void 0&&($=295000),JH&&clearTimeout(JH),JH=setTimeout(()=>{l3={},JH=void 0,a1&&Bun.gc(!1)},$),JH.unref?.())},n3=($,J)=>({body:$.body||J.body,cookie:$.cookie||J.cookie,headers:$.headers||J.headers,query:$.query||J.query,set:$.set||J.set,server:$.server||J.server,url:$.url||J.url,route:$.route||J.route,path:$.path||J.path}),i5=($,J={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},Y={})=>{let X=[];$.request?.length&&X.push(...$.request),$.beforeHandle?.length&&X.push(...$.beforeHandle),$.parse?.length&&X.push(...$.parse),$.error?.length&&X.push(...$.error),$.transform?.length&&X.push(...$.transform),$.afterHandle?.length&&X.push(...$.afterHandle),$.mapResponse?.length&&X.push(...$.mapResponse),$.afterResponse?.length&&X.push(...$.afterResponse),$.handler&&typeof $.handler=="function"&&X.push($.handler);for(let W=0;W<X.length;W++){let Z=X[W];if(!Z)continue;let G=typeof Z=="object"?Z.fn:Z;if(typeof G!="function")continue;let Q=G.toString(),H=w9(Q),z=l3[H];if(z){J=n3(J,z);continue}$9$(Y.gcTime);let K={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1,url:!1,route:!1,path:!1},[w,F]=iW$(Q),U=tW$(w,K),V=aW$(U);if(V){let N=ag(V,F.slice(1,-1));N.splice(0,-1,V);let P=F;P.charCodeAt(0)===123&&P.charCodeAt(F.length-1)===125&&(P=P.slice(1,-1).trim()),eW$(V,P,K)||sW$(P,N,K),!K.query&&P.includes("return "+V+".query")&&(K.query=!0)}if(l3[H]||(l3[H]=K),J=n3(J,K),J.query&&J.headers&&J.body&&J.cookie&&J.set&&J.server&&J.url&&J.route&&J.path)break}return J};var r3=q5(Zx(),1),Qx=q5(yQ(),1);var F9$=($)=>{let J=2166136261,Y=$.length;for(let X=0;X<Y;X++)J^=$.charCodeAt(X),J=Math.imul(J,16777619);return J>>>0};class _1{constructor($,J,Y={}){this.name=$,this.jar=J,this.initial=Y}get cookie(){return this.jar[this.name]??this.initial}set cookie($){this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]=$,this.valueHash=void 0}get setCookie(){return this.name in this.jar||(this.jar[this.name]=this.initial),this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){let J=this.cookie.value;if(J!==$){if(typeof J=="object"&&J!==null&&typeof $=="object"&&$!==null)try{let Y=JSON.stringify($),X=F9$(Y);if(this.valueHash!==void 0&&this.valueHash!==X)this.valueHash=X;else{if(JSON.stringify(J)===Y){this.valueHash=X;return}this.valueHash=X}}catch{}this.name in this.jar||(this.jar[this.name]={...this.initial}),this.jar[this.name].value=$}}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $=="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $=="function"?$(this.cookie):$),this}remove(){if(this.value!==void 0)return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value=="object"?JSON.stringify(this.value):this.value?.toString()??""}}var Gx=($,J,Y)=>($.cookie||($.cookie={}),new Proxy(J,{get(X,W){return W in J?new _1(W,$.cookie,Object.assign({},Y??{},J[W])):new _1(W,$.cookie,Object.assign({},Y))}})),o3=async($,J,{secrets:Y,sign:X,...W}={})=>{if(!J)return Gx($,{},W);let Z=typeof Y=="string";X&&X!==!0&&!Array.isArray(X)&&(X=[X]);let G={},Q=r3.parse(J);for(let[H,z]of Object.entries(Q)){if(z===void 0)continue;let K=Qx.default(z);if(X===!0||X?.includes(H)){if(!Y)throw Error("No secret is provided to cookie plugin");if(Z){if(typeof K!="string")throw new y5(H);let w=await x_(K,Y);if(w===!1)throw new y5(H);K=w}else{let w=!1;for(let F=0;F<Y.length;F++){if(typeof K!="string")throw new y5(H);let U=await x_(K,Y[F]);if(U!==!1){w=!0,K=U;break}}if(!w)throw new y5(H)}}if(K){let w=K.charCodeAt(0),F=K.charCodeAt(K.length-1);if(w===123&&F===125||w===91&&F===93)try{K=JSON.parse(K)}catch{}}G[H]={value:K}}return Gx($,G,W)},YH=($)=>{if(!$||!p0($))return;let J=[];for(let[Y,X]of Object.entries($)){if(!Y||!X)continue;let W=X.value;W!=null&&J.push(r3.serialize(Y,typeof W=="object"?JSON.stringify(W):W+"",X))}if(J.length!==0)return J.length===1?J[0]:J};var r5=a1?Bun.env:typeof process<"u"&&process?.env?process.env:{};var p4=($,J)=>{if(!a1&&$ instanceof Promise)return $.then((Z)=>p4(Z,J));let Y=$.size,X=J&&(J.status===206||J.status===304||J.status===412||J.status===416),W=X?{}:{"accept-ranges":"bytes","content-range":Y?`bytes 0-${Y-1}/${Y}`:void 0};if(!J&&!Y)return new Response($);if(!J)return new Response($,{headers:W});if(J.headers instanceof Headers){for(let Z of Object.keys(W))Z in J.headers&&J.headers.append(Z,W[Z]);return X&&(J.headers.delete("content-length"),J.headers.delete("accept-ranges")),new Response($,J)}return p0(J.headers)?new Response($,{status:J.status,headers:Object.assign(W,J.headers)}):new Response($,{status:J.status,headers:W})},zL=($,J)=>{if(!$)return $;$.delete("set-cookie");for(let Y=0;Y<J.length;Y++){let X=J[Y].indexOf("=");$.append("set-cookie",`${J[Y].slice(0,X)}=${J[Y].slice(X+1)||""}`)}return $},M9$=($,J)=>{if(J?.headers){if($)if(nQ)Object.assign(J.headers,$.headers.toJSON());else for(let[Y,X]of $.headers.entries())Y in J.headers&&(J.headers[Y]=X);return J.status===200&&(J.status=$.status),J.headers["content-encoding"]&&delete J.headers["content-encoding"],J}if(!$)return{headers:{},status:J?.status??200};if(nQ)return J={headers:$.headers.toJSON(),status:J?.status??200},J.headers["content-encoding"]&&delete J.headers["content-encoding"],J;J={headers:{},status:J?.status??200};for(let[Y,X]of $.headers.entries())Y!=="content-encoding"&&Y in J.headers&&(J.headers[Y]=X);return J},V9$=r5.ELYSIA_RAPID_STREAM==="true",XH=({mapResponse:$,mapCompactResponse:J})=>async(Y,X,W,Z)=>{let G=Y.next?.();if(X&&o5(X),G instanceof Promise&&(G=await G),G?.value instanceof ReadableStream)Y=G.value;else if(G&&(typeof G?.done>"u"||G?.done))return X?$(G.value,X,W):J(G.value,W);let Q=!Z&&(G?.value?.sse??Y?.sse??X?.headers["content-type"]?.startsWith("text/event-stream")),H=Q?(w)=>`data: ${w}

`:(w)=>w,z=Q?"text/event-stream":G?.value&&typeof G?.value=="object"?"application/json":"text/plain";X?.headers?(X.headers["transfer-encoding"]||(X.headers["transfer-encoding"]="chunked"),X.headers["content-type"]||(X.headers["content-type"]=z),X.headers["cache-control"]||(X.headers["cache-control"]="no-cache")):X={status:200,headers:{"content-type":z,"transfer-encoding":"chunked","cache-control":"no-cache",connection:"keep-alive"}};let K=W?.headers.has("Origin");return new Response(new ReadableStream({async start(w){let F=!1;if(W?.signal?.addEventListener("abort",()=>{F=!0;try{w.close()}catch{}}),!(!G||G.value instanceof ReadableStream)){if(G.value!==void 0&&G.value!==null)if(G.value.toSSE)w.enqueue(G.value.toSSE());else if(typeof G.value=="object")try{w.enqueue(H(JSON.stringify(G.value)))}catch{w.enqueue(H(G.value.toString()))}else w.enqueue(H(G.value.toString()))}try{for await(let U of Y){if(F)break;if(U!=null)if(U.toSSE)w.enqueue(U.toSSE());else{if(typeof U=="object")try{w.enqueue(H(JSON.stringify(U)))}catch{w.enqueue(H(U.toString()))}else w.enqueue(H(U.toString()));!V9$&&K&&!Q&&await new Promise((V)=>setTimeout(()=>V(),0))}}}catch(U){console.warn(U)}try{w.close()}catch{}}}),X)};async function*N9$($){let J=$.body;if(!J)return;let Y=J.getReader(),X=new TextDecoder;try{for(;;){let{done:W,value:Z}=await Y.read();if(W)break;typeof Z=="string"?yield Z:yield X.decode(Z)}}finally{Y.releaseLock()}}var o5=($)=>{if(typeof $.status=="string"&&($.status=HX[$.status]),$.cookie&&p0($.cookie)){let J=YH($.cookie);J&&($.headers["set-cookie"]=J)}$.headers["set-cookie"]&&Array.isArray($.headers["set-cookie"])&&($.headers=zL(new Headers($.headers),$.headers["set-cookie"]))};function _9$($,J){let Y=new Headers($);if(J instanceof Headers)for(let X of J.keys())if(X==="set-cookie"){if(Y.has("set-cookie"))continue;for(let W of J.getSetCookie())Y.append("set-cookie",W)}else $.has(X)||Y.set(X,J?.get(X)??"");else for(let X in J)X==="set-cookie"?Y.append(X,J[X]):$.has(X)||Y.set(X,J[X]);return Y}function L9$($,J){return typeof J=="string"&&(J=HX[J]),$===200?J:$}var t3=($)=>{let J=XH($);return(Y,X,W)=>{let Z=new Response(Y.body,{headers:_9$(Y.headers,X.headers),status:L9$(Y.status,X.status)});return!Z.headers.has("content-length")&&Z.headers.get("transfer-encoding")==="chunked"?J(N9$(Z),M9$(Z,X),W,!0):Z}};async function Hx($,J=2){let Y=[],X=!1,W=[];(async()=>{for await(let G of $)Y.push(G),W.forEach((Q)=>Q.resolve()),W=[];X=!0,W.forEach((G)=>G.resolve())})();async function*Z(){let G=0;for(;;)if(G<Y.length)yield Y[G++];else{if(X)return;await new Promise((Q)=>W.push({resolve:Q}))}}return Array.from({length:J},Z)}var a3=($,J={headers:{}})=>{let Y=$.path,X=b_[Y.slice(Y.lastIndexOf(".")+1)];return X&&(J.headers["content-type"]=X),$.stats&&J.status!==206&&J.status!==304&&J.status!==412&&J.status!==416?$.stats.then((W)=>{let Z=W.size;return Z!==void 0&&(J.headers["content-range"]=`bytes 0-${Z-1}/${Z}`,J.headers["content-length"]=Z),p4($.value,J)}):p4($.value,J)},$1=($,J,Y)=>{if(p0(J.headers)||J.status!==200||J.cookie)switch(o5(J),$?.constructor?.name){case"String":return J.headers["content-type"]="text/plain",new Response($,J);case"Array":case"Object":return J.headers["content-type"]="application/json",new Response(JSON.stringify($),J);case"ElysiaFile":return a3($,J);case"File":return p4($,J);case"Blob":return p4($,J);case"ElysiaCustomStatusResponse":return J.status=$.code,$1($.response,J,Y);case void 0:return $?new Response(JSON.stringify($),J):new Response("",J);case"Response":return s3($,J,Y);case"Error":return D9($,J);case"Promise":return $.then((X)=>$1(X,J,Y));case"Function":return $1($(),J,Y);case"Number":case"Boolean":return new Response($.toString(),J);case"Cookie":return $ instanceof _1?new Response($.value,J):new Response($?.toString(),J);case"FormData":return new Response($,J);default:if($ instanceof Response)return s3($,J,Y);if($ instanceof Promise)return $.then((X)=>$1(X,J));if($ instanceof Error)return D9($,J);if($ instanceof G6)return J.status=$.code,$1($.response,J,Y);if(typeof $?.next=="function"||$ instanceof ReadableStream)return WH($,J,Y);if(typeof $?.then=="function")return $.then((X)=>$1(X,J));if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if(typeof $?.toResponse=="function")return $1($.toResponse(),J);if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return J.headers["Content-Type"]||(J.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),J)}return new Response($,J)}return typeof $?.next=="function"||$ instanceof ReadableStream?WH($,J,Y):BY($,Y)},e8=($,J,Y)=>{if($!=null)if(p0(J.headers)||J.status!==200||J.cookie)switch(o5(J),$?.constructor?.name){case"String":return J.headers["content-type"]="text/plain",new Response($,J);case"Array":case"Object":return J.headers["content-type"]="application/json",new Response(JSON.stringify($),J);case"ElysiaFile":return a3($,J);case"File":return p4($,J);case"Blob":return p4($,J);case"ElysiaCustomStatusResponse":return J.status=$.code,e8($.response,J,Y);case void 0:return $?new Response(JSON.stringify($),J):void 0;case"Response":return s3($,J,Y);case"Promise":return $.then((X)=>e8(X,J));case"Error":return D9($,J);case"Function":return e8($(),J);case"Number":case"Boolean":return new Response($.toString(),J);case"FormData":return new Response($);case"Cookie":return $ instanceof _1?new Response($.value,J):new Response($?.toString(),J);default:if($ instanceof Response)return s3($,J,Y);if($ instanceof Promise)return $.then((X)=>e8(X,J));if($ instanceof Error)return D9($,J);if($ instanceof G6)return J.status=$.code,e8($.response,J,Y);if(typeof $?.next=="function"||$ instanceof ReadableStream)return WH($,J,Y);if(typeof $?.then=="function")return $.then((X)=>e8(X,J));if(typeof $?.toResponse=="function")return e8($.toResponse(),J);if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return J.headers["Content-Type"]||(J.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),J)}return new Response($,J)}else switch($?.constructor?.name){case"String":return J.headers["content-type"]="text/plain",new Response($);case"Array":case"Object":return J.headers["content-type"]="application/json",new Response(JSON.stringify($),J);case"ElysiaFile":return a3($,J);case"File":return p4($,J);case"Blob":return p4($,J);case"ElysiaCustomStatusResponse":return J.status=$.code,e8($.response,J,Y);case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Promise":return $.then((X)=>{let W=e8(X,J);if(W!==void 0)return W});case"Error":return D9($,J);case"Function":return BY($(),Y);case"Number":case"Boolean":return new Response($.toString());case"Cookie":return $ instanceof _1?new Response($.value,J):new Response($?.toString(),J);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((X)=>e8(X,J));if($ instanceof Error)return D9($,J);if($ instanceof G6)return J.status=$.code,e8($.response,J,Y);if(typeof $?.next=="function"||$ instanceof ReadableStream)return WH($,J,Y);if(typeof $?.then=="function")return $.then((X)=>e8(X,J));if(typeof $?.toResponse=="function")return e8($.toResponse(),J);if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return J.headers["Content-Type"]||(J.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),J)}return new Response($)}},BY=($,J)=>{switch($?.constructor?.name){case"String":return new Response($,{headers:{"Content-Type":"text/plain"}});case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return a3($);case"File":return p4($);case"Blob":return p4($);case"ElysiaCustomStatusResponse":return $1($.response,{status:$.code,headers:{}});case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Error":return D9($);case"Promise":return $.then((Y)=>BY(Y,J));case"Function":return BY($(),J);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Y)=>BY(Y,J));if($ instanceof Error)return D9($);if($ instanceof G6)return $1($.response,{status:$.code,headers:{}});if(typeof $?.next=="function"||$ instanceof ReadableStream)return WH($,void 0,J);if(typeof $?.then=="function")return $.then((Y)=>BY(Y,J));if(typeof $?.toResponse=="function")return BY($.toResponse());if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if("charCodeAt"in $){let Y=$.charCodeAt(0);if(Y===123||Y===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},D9=($,J)=>{if(typeof $?.toResponse=="function"){let Y=$.toResponse(),X=J??{headers:{},status:200,redirect:""},W=(Z)=>(Z instanceof Response&&(X.status=Z.status),$1(Z,X));return typeof Y?.then=="function"?Y.then(W):W(Y)}return new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:J?.status!==200?J?.status??500:500,headers:J?.headers})},zx=($,J,Y={})=>{if(typeof $=="function")return;let X=$1($,{headers:Y});if(!J.parse?.length&&!J.transform?.length&&!J.beforeHandle?.length&&!J.afterHandle?.length)return()=>X.clone()},s3=t3({mapResponse:$1,mapCompactResponse:BY}),WH=XH({mapResponse:$1,mapCompactResponse:BY});var ZH={name:"web-standard",isWebStandard:!0,handler:{mapResponse:$1,mapEarlyResponse:e8,mapCompactResponse:BY,createStaticHandler:zx},composeHandler:{mapResponseContext:"c.request",preferWebstandardHeaders:!0,headers:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`,parser:{json($){return $?`try{c.body=await c.request.json()}catch{}
`:`c.body=await c.request.json()
`},text(){return`c.body=await c.request.text()
`},urlencoded(){return`c.body=parseQuery(await c.request.text())
`},arrayBuffer(){return`c.body=await c.request.arrayBuffer()
`},formData($){let J=`
c.body={}
`;return $?J+="let form;try{form=await c.request.formData()}catch{}":J+=`const form=await c.request.formData()
`,J+`const dangerousKeys=new Set(['__proto__','constructor','prototype'])
const isDangerousKey=(k)=>{if(dangerousKeys.has(k))return true;const m=k.match(/^(.+)\\[(\\d+)\\]$/);return m?dangerousKeys.has(m[1]):false}
const parseArrayKey=(k)=>{const m=k.match(/^(.+)\\[(\\d+)\\]$/);return m?{name:m[1],index:parseInt(m[2],10)}:null}
for(const key of form.keys()){if(c.body[key])continue
const value=form.getAll(key)
let finalValue
if(value.length===1){
const sv=value[0]
if(typeof sv==='string'&&(sv.charCodeAt(0)===123||sv.charCodeAt(0)===91)){
try{
const p=JSON.parse(sv)
if(p&&typeof p==='object')finalValue=p
}catch{}
}
if(finalValue===undefined)finalValue=sv
}else finalValue=value
if(Array.isArray(finalValue)){
const stringValue=finalValue.find((entry)=>typeof entry==='string')
const files=typeof File==='undefined'?[]:finalValue.filter((entry)=>entry instanceof File)
if(stringValue&&files.length&&stringValue.charCodeAt(0)===123){
try{
const parsed=JSON.parse(stringValue)
if(parsed&&typeof parsed==='object'&&!Array.isArray(parsed)){
if(!('file' in parsed)&&files.length===1)parsed.file=files[0]
else if(!('files' in parsed)&&files.length>1)parsed.files=files
finalValue=parsed
}
}catch{}
}
}
if(key.includes('.')||key.includes('[')){const keys=key.split('.')
const lastKey=keys.pop()
if(isDangerousKey(lastKey)||keys.some(isDangerousKey))continue
let current=c.body
for(const k of keys){const arrayInfo=parseArrayKey(k)
if(arrayInfo){if(!Array.isArray(current[arrayInfo.name]))current[arrayInfo.name]=[]
const existing=current[arrayInfo.name][arrayInfo.index]
const isFile=typeof File!=='undefined'&&existing instanceof File
if(!existing||typeof existing!=='object'||Array.isArray(existing)||isFile){
let parsed
if(typeof existing==='string'&&existing.charCodeAt(0)===123){
try{parsed=JSON.parse(existing)
if(!parsed||typeof parsed!=='object'||Array.isArray(parsed))parsed=undefined}catch{}
}
current[arrayInfo.name][arrayInfo.index]=parsed||{}
}
current=current[arrayInfo.name][arrayInfo.index]}else{if(!current[k]||typeof current[k]!=='object')current[k]={}
current=current[k]}}
const arrayInfo=parseArrayKey(lastKey)
if(arrayInfo){if(!Array.isArray(current[arrayInfo.name]))current[arrayInfo.name]=[]
current[arrayInfo.name][arrayInfo.index]=finalValue}else{current[lastKey]=finalValue}}else c.body[key]=finalValue}`}}},async stop($,J){if(!$.server)throw Error("Elysia isn't running. Call `app.listen` to start the server.");if($.server&&(await $.server.stop(J),$.server=null,$.event.stop?.length))for(let Y=0;Y<$.event.stop.length;Y++)$.event.stop[Y].fn($)},composeGeneralHandler:{parameters:"r",createContext($){let J="",Y="",X=$.setHeaders;for(let G of Object.keys($.decorator))J+=`,'${G}':decorator['${G}']`;let W=$.config.handler?.standardHostname??!0,Z=!!$.event.trace?.length;return Y+=`const u=r.url,s=u.indexOf('/',${W?11:7}),qi=u.indexOf('?',s+1),p=u.substring(s,qi===-1?undefined:qi)
`,Z&&(Y+=`const id=randomId()
`),Y+="const c={request:r,store,qi,path:p,url:u,redirect,status,set:{headers:",Y+=Object.keys(X??{}).length?"Object.assign({},app.setHeaders)":"Object.create(null)",Y+=",status:200}",$.inference.server&&(Y+=",get server(){return app.getServer()}"),Z&&(Y+=",[ELYSIA_REQUEST_ID]:id"),Y+=J,Y+=`}
`,Y},error404($,J,Y=""){let X="if(route===null){"+Y+(J?"":"c.set.status=404")+`
return `;return J?X+=`app.handleError(c,notFound,false,${this.parameters})`:X+=$?"c.response=c.responseValue=new Response(error404Message,{status:c.set.status===200?404:c.set.status,headers:c.set.headers})":"c.response=c.responseValue=error404.clone()",X+="}",{declare:J?"":`const error404Message=notFound.message.toString()
const error404=new Response(error404Message,{status:404})
`,code:X}}},composeError:{mapResponseContext:"",validationError:"set.headers['content-type']='application/json';return mapResponse(error.message,set)",unknownError:"set.status=error.status??set.status??500;return mapResponse(error.message,set)"},listen(){return()=>{throw Error("WebStandard does not support listen, you might want to export default Elysia.fetch instead")}}};var _8=($,J,Y)=>{if(p0(J.headers)||J.status!==200||J.cookie)switch(o5(J),$?.constructor?.name){case"String":return new Response($,J);case"Array":case"Object":return J.headers["content-type"]="application/json",new Response(JSON.stringify($),J);case"ElysiaFile":return p4($.value,J);case"File":return p4($,J);case"Blob":return p4($,J);case"ElysiaCustomStatusResponse":return J.status=$.code,_8($.response,J,Y);case void 0:return $?new Response(JSON.stringify($),J):new Response("",J);case"Response":return e3($,J,Y);case"Error":return M9($,J);case"Promise":return $.then((X)=>_8(X,J,Y));case"Function":return _8($(),J,Y);case"Number":case"Boolean":return new Response($.toString(),J);case"Cookie":return $ instanceof _1?new Response($.value,J):new Response($?.toString(),J);case"FormData":return new Response($,J);default:if($ instanceof Response)return e3($,J,Y);if($ instanceof Promise)return $.then((X)=>_8(X,J));if($ instanceof Error)return M9($,J);if($ instanceof G6)return J.status=$.code,_8($.response,J,Y);if(typeof $?.next=="function"||$ instanceof ReadableStream)return GH($,J,Y);if(typeof $?.then=="function")return $.then((X)=>_8(X,J));if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if(typeof $?.toResponse=="function")return _8($.toResponse(),J);if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return J.headers["Content-Type"]||(J.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),J)}return new Response($,J)}return typeof $?.next=="function"||$ instanceof ReadableStream?GH($,J,Y):OY($,Y)},N8=($,J,Y)=>{if($!=null)if(p0(J.headers)||J.status!==200||J.cookie)switch(o5(J),$?.constructor?.name){case"String":return new Response($,J);case"Array":case"Object":return J.headers["content-type"]="application/json",new Response(JSON.stringify($),J);case"ElysiaFile":return p4($.value,J);case"File":return p4($,J);case"Blob":return p4($,J);case"ElysiaCustomStatusResponse":return J.status=$.code,N8($.response,J,Y);case void 0:return $?new Response(JSON.stringify($),J):void 0;case"Response":return e3($,J,Y);case"Promise":return $.then((X)=>N8(X,J));case"Error":return M9($,J);case"Function":return N8($(),J);case"Number":case"Boolean":return new Response($.toString(),J);case"FormData":return new Response($);case"Cookie":return $ instanceof _1?new Response($.value,J):new Response($?.toString(),J);default:if($ instanceof Response)return e3($,J,Y);if($ instanceof Promise)return $.then((X)=>N8(X,J));if($ instanceof Error)return M9($,J);if($ instanceof G6)return J.status=$.code,N8($.response,J,Y);if(typeof $?.next=="function"||$ instanceof ReadableStream)return GH($,J,Y);if(typeof $?.then=="function")return $.then((X)=>N8(X,J));if(typeof $?.toResponse=="function")return N8($.toResponse(),J);if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return J.headers["Content-Type"]||(J.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),J)}return new Response($,J)}else switch($?.constructor?.name){case"String":return new Response($);case"Array":case"Object":return J.headers["content-type"]="application/json",new Response(JSON.stringify($),J);case"ElysiaFile":return p4($.value,J);case"File":return p4($,J);case"Blob":return p4($,J);case"ElysiaCustomStatusResponse":return J.status=$.code,N8($.response,J,Y);case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Promise":return $.then((X)=>{let W=N8(X,J);if(W!==void 0)return W});case"Error":return M9($,J);case"Function":return OY($(),Y);case"Number":case"Boolean":return new Response($.toString());case"Cookie":return $ instanceof _1?new Response($.value,J):new Response($?.toString(),J);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((X)=>N8(X,J));if($ instanceof Error)return M9($,J);if($ instanceof G6)return J.status=$.code,N8($.response,J,Y);if(typeof $?.next=="function"||$ instanceof ReadableStream)return GH($,J,Y);if(typeof $?.then=="function")return $.then((X)=>N8(X,J));if(typeof $?.toResponse=="function")return N8($.toResponse(),J);if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if("charCodeAt"in $){let X=$.charCodeAt(0);if(X===123||X===91)return J.headers["Content-Type"]||(J.headers["Content-Type"]="application/json"),new Response(JSON.stringify($),J)}return new Response($)}},OY=($,J)=>{switch($?.constructor?.name){case"String":return new Response($);case"Object":case"Array":return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});case"ElysiaFile":return p4($.value);case"File":return p4($);case"Blob":return p4($);case"ElysiaCustomStatusResponse":return _8($.response,{status:$.code,headers:{}});case void 0:return $?new Response(JSON.stringify($),{headers:{"content-type":"application/json"}}):new Response("");case"Response":return $;case"Error":return M9($);case"Promise":return $.then((Y)=>OY(Y,J));case"Function":return OY($(),J);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Y)=>OY(Y,J));if($ instanceof Error)return M9($);if($ instanceof G6)return _8($.response,{status:$.code,headers:{}});if(typeof $?.next=="function"||$ instanceof ReadableStream)return GH($,void 0,J);if(typeof $?.then=="function")return $.then((Y)=>OY(Y,J));if(typeof $?.toResponse=="function")return OY($.toResponse());if(Array.isArray($))return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}});if("charCodeAt"in $){let Y=$.charCodeAt(0);if(Y===123||Y===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},M9=($,J)=>{if(typeof $?.toResponse=="function"){let Y=$.toResponse(),X=J??{headers:{},status:200,redirect:""},W=(Z)=>(Z instanceof Response&&(X.status=Z.status),_8(Z,X));return typeof Y?.then=="function"?Y.then(W):W(Y)}return new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:J?.status!==200?J?.status??500:500,headers:J?.headers})},Kx=($,J,Y={})=>{if(typeof $=="function")return;let X=_8($,{headers:Y});if(!J.parse?.length&&!J.transform?.length&&!J.beforeHandle?.length&&!J.afterHandle?.length)return()=>X.clone()},e3=t3({mapResponse:_8,mapCompactResponse:OY}),GH=XH({mapResponse:_8,mapCompactResponse:OY});var qx=q5(yQ(),1);var t5=q5(yQ(),1),YG=1,XG=2,WG=4,zW=8;function KL($,J=0,Y,X){let W=Object.create(null),Z=0,G=$.length,Q=J-1,H=Q;for(let K=0;K<G;K++)switch($.charCodeAt(K)){case 38:z($,K),Q=K,H=K,Z=0;break;case 61:H<=Q?H=K:Z|=zW;break;case 43:H>Q?Z|=WG:Z|=YG;break;case 37:H>Q?Z|=zW:Z|=XG;break}return Q<G&&z($,G),W;function z(K,w){let F=H>Q,U=F?H:w,V=K.slice(Q+1,U);if(!F&&V.length===0)return;let N=V;Z&YG&&(N=N.replace(/\+/g," ")),Z&XG&&(N=t5.default(N)||N);let P="";if(F){let L=K.slice(H+1,w);Z&WG&&(L=L.replace(/\+/g," ")),Z&zW&&(L=t5.default(L)||L),P=L}let B=W[N];Y&&Y?.[N]?P.charCodeAt(0)===91?(X&&X?.[N]?P=JSON.parse(P):P=P.slice(1,-1).split(","),B===void 0?W[N]=P:Array.isArray(B)?B.push(...P):(W[N]=P,W[N].unshift(B))):B===void 0?W[N]=P:Array.isArray(B)?B.push(P):W[N]=[B,P]:W[N]=P}}function wx($,J=0){let Y=Object.create(null),X=0,W=$.length,Z=J-1,G=Z;for(let H=0;H<W;H++)switch($.charCodeAt(H)){case 38:Q($,H),Z=H,G=H,X=0;break;case 61:G<=Z?G=H:X|=zW;break;case 43:G>Z?X|=WG:X|=YG;break;case 37:G>Z?X|=zW:X|=XG;break}return Z<W&&Q($,W),Y;function Q(H,z){let K=G>Z,w=K?G:z,F=H.slice(Z+1,w);if(!K&&F.length===0)return;let U=F;X&YG&&(U=U.replace(/\+/g," ")),X&XG&&(U=t5.default(U)||U);let V="";if(K){let P=H.slice(G+1,z);X&WG&&(P=P.replace(/\+/g," ")),X&zW&&(P=t5.default(P)||P),V=P}let N=Y[U];if(V.charCodeAt(0)===91&&V.charCodeAt(V.length-1)===93){try{V=JSON.parse(V)}catch{}N===void 0?Y[U]=V:Array.isArray(N)?N.push(V):Y[U]=[N,V]}else if(V.charCodeAt(0)===123&&V.charCodeAt(V.length-1)===125){try{V=JSON.parse(V)}catch{}N===void 0?Y[U]=V:Array.isArray(N)?N.push(V):Y[U]=[N,V]}else V.includes(",")&&(V=V.split(",")),N===void 0?Y[U]=V:Array.isArray(N)?N.push(V):Y[U]=[N,V]}}function V9($){let J=Object.create(null),Y=0,X=$.length,W=-1,Z=-1;for(let Q=0;Q<X;Q++)switch($.charCodeAt(Q)){case 38:G($,Q),W=Q,Z=Q,Y=0;break;case 61:Z<=W?Z=Q:Y|=zW;break;case 43:Z>W?Y|=WG:Y|=YG;break;case 37:Z>W?Y|=zW:Y|=XG;break}return W<X&&G($,X),J;function G(Q,H){let z=Z>W,K=z?Z:H,w=Q.slice(W+1,K);if(!z&&w.length===0)return;let F=w;Y&YG&&(F=F.replace(/\+/g," ")),Y&XG&&(F=t5.default(F)||F);let U="";if(z){let N=Q.slice(Z+1,H);Y&WG&&(N=N.replace(/\+/g," ")),Y&zW&&(N=t5.default(N)||N),U=N}let V=J[F];V===void 0?J[F]=U:Array.isArray(V)?V.push(U):J[F]=[V,U]}}var a5=Symbol("ElysiaTrace"),KW=()=>{let{promise:$,resolve:J}=Promise.withResolvers(),{promise:Y,resolve:X}=Promise.withResolvers(),{promise:W,resolve:Z}=Promise.withResolvers(),G=[],Q=[];return[(H)=>(H&&G.push(H),$),(H)=>{let z=[],K=[],w=null;for(let U=0;U<(H.total??0);U++){let{promise:V,resolve:N}=Promise.withResolvers(),{promise:P,resolve:B}=Promise.withResolvers(),{promise:L,resolve:g}=Promise.withResolvers(),k=[],I=[];z.push((O)=>(O&&k.push(O),V)),K.push((O)=>{let b={...O,end:P,error:L,index:U,onStop(D){return D&&I.push(D),P}};N(b);for(let D=0;D<k.length;D++)k[D](b);return(D=null)=>{let _=performance.now();D&&(w=D);let q={end:_,error:D,get elapsed(){return _-O.begin}};for(let S=0;S<I.length;S++)I[S](q);B(_),g(D)}})}let F={...H,end:Y,error:W,onEvent(U){for(let V=0;V<z.length;V++)z[V](U)},onStop(U){return U&&Q.push(U),Y}};J(F);for(let U=0;U<G.length;U++)G[U](F);return{resolveChild:K,resolve(U=null){let V=performance.now();!U&&w&&(U=w);let N={end:V,error:U,get elapsed(){return V-H.begin}};for(let P=0;P<Q.length;P++)Q[P](N);X(V),Z(U)}}}]},Ux=($)=>(J)=>{let[Y,X]=KW(),[W,Z]=KW(),[G,Q]=KW(),[H,z]=KW(),[K,w]=KW(),[F,U]=KW(),[V,N]=KW(),[P,B]=KW(),[L,g]=KW();return $({id:J[ZW],context:J,set:J.set,onRequest:Y,onParse:W,onTransform:G,onBeforeHandle:H,onHandle:K,onAfterHandle:F,onMapResponse:P,onAfterResponse:L,onError:V,time:Date.now(),store:J.store}),{request:X,parse:Z,transform:Q,beforeHandle:z,handle:w,afterHandle:U,error:N,mapResponse:B,afterResponse:g}};var L1=Symbol.for("TypeBox.Kind"),q9$=Symbol.for("TypeBox.Hint"),Dx=($)=>/(\ |-|\t|\n|\.|\[|\]|\{|\})/.test($)||!isNaN(+$[0]),Mx=($,J,Y=!1)=>{if(typeof J==="number")return`${$}[${J}]`;if(Dx(J))return`${$}${Y?"?.":""}["${J}"]`;return`${$}${Y?"?":""}.${J}`},B9$=($)=>Dx($)?`"${$}"`:$,Fx=($,J=0,Y)=>{if(Y.type!=="string"||Y.const||Y.trusted)return $;let X="";for(let W=J-1;W>=0;W--)X+=`d.h${W}(`;return X+$+")".repeat(J)},Vx=($)=>{if(!$.allOf||L1 in $&&($[L1]!=="Intersect"||$.type!=="object"))return $;let{allOf:J,...Y}=$;if(Y.properties={},L1 in Y)Y[L1]="Object";for(let X of J){if(X.type!=="object")continue;let{properties:W,required:Z,type:G,[L1]:Q,...H}=X;if(Z)Y.required=Y.required?Y.required.concat(Z):Z;Object.assign(Y,H);for(let z in X.properties)Y.properties[z]=Vx(X.properties[z])}return Y},O9$=($,J,Y)=>{let X=$.patternProperties["^(.*)$"]??$.patternProperties[Object.keys($.patternProperties)[0]];if(!X)return J;let W=Y.array;Y.array++;let Z=`(()=>{const ar${W}s=Object.keys(${J}),ar${W}v={};for(let i=0;i<ar${W}s.length;i++){const ar${W}p=${J}[ar${W}s[i]];ar${W}v[ar${W}s[i]]=${UX(X,`ar${W}p`,Y)}`,G=Y.optionalsInArray[W+1];if(G){for(let Q=0;Q<G.length;Q++){let H=`ar${W}v[ar${W}s[i]]${G[Q]}`;Z+=`;if(${H}===undefined)delete ${H}`}Y.optionalsInArray[W+1]=[]}return Z+=`}return ar${W}v})()`,Z},P9$=($,J,Y)=>{let X=Y.array;Y.array++;let W=J==="v"&&!Y.unions.length,Z="";if(!W)Z="(()=>{";Z+=`const ar${X}v=[`;for(let G=0;G<$.length;G++){if(G!==0)Z+=",";Z+=UX($[G],Mx(J,G,Y.parentIsOptional||Y.fromUnion),Y)}if(Z+="];",!W)Z+=`return ar${X}v})()`;return Z};function $U($,J=new WeakMap){if($===null||typeof $!=="object"||typeof $==="function")return $;if(J.has($))return J.get($);if(Array.isArray($)){let Y=Array($.length);J.set($,Y);for(let X=0;X<$.length;X++)Y[X]=$U($[X],J);return Y}if(typeof $==="object"){let Y=Object.keys($).concat(Object.getOwnPropertySymbols($)),X={};for(let W of Y)X[W]=$U($[W],J);return X}return $}var S9$=($,J,Y)=>{if(Y.TypeCompiler===void 0){if(!Y.typeCompilerWanred)console.warn(Error("[exact-mirror] TypeBox's TypeCompiler is required to use Union")),Y.typeCompilerWanred=!0;return J}Y.unionKeys[J]=1;let X=Y.unions.length,W=Y.unions[X]=[],Z=`(()=>{
`,G=(H)=>{if(!(L1 in H)||!H.$ref)return H;if(H[L1]==="This")return $U(Y.definitions[H.$ref]);else if(H[L1]==="Ref")if(!Y.modules)console.warn(Error("[exact-mirror] modules is required when using nested cyclic reference"));else return Y.modules.Import(H.$ref);return H},Q="";for(let H=0;H<$.length;H++){let z=G($[H]);if(Array.isArray(z.anyOf))for(let K=0;K<z.anyOf.length;K++)z.anyOf[K]=G(z.anyOf[K]);else if(z.items)if(Array.isArray(z.items))for(let K=0;K<z.items.length;K++)z.items[K]=G(z.items[K]);else z.items=G(z.items);W.push(_Y.Compile(z)),Z+=`if(d.unions[${X}][${H}].Check(${J})){return ${UX(z,J,{...Y,recursion:Y.recursion+1,parentIsOptional:!0,fromUnion:!0})}}
`,Q+=(H?"":"let ")+"tmp="+UX(z,J,{...Y,recursion:Y.recursion+1,parentIsOptional:!0,fromUnion:!0})+`
if(d.unions[${X}][${H}].Check(tmp))return tmp
`}if(Q)Z+=Q;return Z+=`return ${Y.removeUnknownUnionType?"undefined":J}`,Z+"})()"},UX=($,J,Y)=>{if(!$)return"";let X=J==="v"&&!Y.unions.length;if(L1 in $&&$[L1]==="Import"&&$.$ref in $.$defs)return UX($.$defs[$.$ref],J,{...Y,definitions:Object.assign(Y.definitions,$.$defs)});if(X&&$.type!=="object"&&$.type!=="array"&&!$.anyOf)return`return ${Fx("v",Y.sanitize?.length,$)}`;if(Y.recursion>=Y.recursionLimit)return J;let W="";if($.$id&&q9$ in $)Y.definitions[$.$id]=$;switch($.type){case"object":if($[L1]==="Record"){W=O9$($,J,Y);break}if($=Vx($),W+="{",$.additionalProperties)W+=`...${J},`;let Z=Object.keys($.properties);for(let z=0;z<Z.length;z++){let K=Z[z],w=!$.required||$.required&&!$.required.includes(K)||Array.isArray($.properties[K].anyOf),F=Mx(J,K,Y.parentIsOptional||Y.fromUnion);if(w){let V=Y.array;if(J.startsWith("ar")){let N=F.indexOf("."),P;if(N>=0)P=F.slice(N);else P=F.slice(J.length);if(P.startsWith("?."))if(P.charAt(2)==="[")P=P.slice(2);else P=P.slice(1);let B=Y.optionalsInArray;if(B[V])B[V].push(P);else B[V]=[P]}else Y.optionals.push(F)}let U=$.properties[K];if(z!==0)W+=",";W+=`${B9$(K)}:${w?`${F}===undefined?undefined:`:""}${UX(U,F,{...Y,recursion:Y.recursion+1,parentIsOptional:w})}`}W+="}";break;case"array":if($.items.type!=="object"&&$.items.type!=="array"){if(Array.isArray($.items)){W=P9$($.items,J,Y);break}else if(X&&!Array.isArray($.items.anyOf))return"return v";else if(L1 in $.items&&$.items.$ref&&($.items[L1]==="Ref"||$.items[L1]==="This"))W=UX($U(Y.definitions[$.items.$ref]),J,{...Y,parentIsOptional:!0,recursion:Y.recursion+1});else if(!Array.isArray($.items.anyOf)){W=J;break}}let G=Y.array;Y.array++;let Q=J;if(X)W=`const ar${G}v=new Array(${J}.length);`;else Q=`ar${G}s`,W=`((${Q})=>{const ar${G}v=new Array(${Q}.length);`;W+=`for(let i=0;i<${Q}.length;i++){const ar${G}p=${Q}[i];ar${G}v[i]=${UX($.items,`ar${G}p`,Y)}`;let H=Y.optionalsInArray[G+1];if(H){for(let z=0;z<H.length;z++){let K=`ar${G}v[i]${H[z]}`;W+=`;if(${K}===undefined)delete ${K}`}Y.optionalsInArray[G+1]=[]}if(W+="}",!X)W+=`return ar${G}v})(${J})`;break;default:if($.$ref&&$.$ref in Y.definitions)return UX(Y.definitions[$.$ref],J,Y);if(Array.isArray($.anyOf)){W=S9$($.anyOf,J,Y);break}W=Fx(J,Y.sanitize?.length,$);break}if(!X)return W;if($.type==="array")W=`${W}const x=ar0v;`;else W=`const x=${W}
`;for(let Z=0;Z<Y.optionals.length;Z++){let G=Y.optionals[Z],Q=G.slice(1);if(W+=`if(${G}===undefined`,Y.unionKeys[G])W+=`||x${Q}===undefined`;let H=Q.charCodeAt(0)!==63&&$.type!=="array";W+=`)delete x${H?Q.charCodeAt(0)===91?"?.":"?":""}${Q}
`}return`${W}return x`},JU=($,{TypeCompiler:J,modules:Y,definitions:X,sanitize:W,recursionLimit:Z=8,removeUnknownUnionType:G=!1}={})=>{let Q=[];if(typeof W==="function")W=[W];let H=UX($,"v",{optionals:[],optionalsInArray:[],array:0,parentIsOptional:!1,unions:Q,unionKeys:{},TypeCompiler:J,modules:Y,definitions:X??Y?.$defs??{},sanitize:W,recursion:0,recursionLimit:Z,removeUnknownUnionType:G});if(!Q.length&&!W?.length)return Function("v",H);let z;if(W?.length){z={};for(let K=0;K<W.length;K++)z[`h${K}`]=W[K]}return Function("d",`return function mirror(v){${H}}`)({unions:Q,...z})};var QH=($,J)=>{if(Array.isArray(J)){let Y=$;for(let X of J)Y=Nx(Y,X);return Y}return Nx($,J)},Nx=($,J)=>{if(J.rootOnly&&J.excludeRoot)throw Error("Can't set both rootOnly and excludeRoot");if(J.rootOnly&&J.onlyFirst)throw Error("Can't set both rootOnly and onlyFirst");if(J.rootOnly&&J.untilObjectFound)throw Error("Can't set both rootOnly and untilObjectFound");let Y=({s:X,isRoot:W,treeLvl:Z})=>{if(!X)return X;let G=W&&J.excludeRoot,Q=J.from[l];if(X.elysiaMeta)return J.from.elysiaMeta===X.elysiaMeta&&!G?J.to(X):X;let H=Q&&X[l]===Q;if(!G&&J.onlyFirst&&X.type===J.onlyFirst||W&&J.rootOnly)return H?J.to(X):X;if(!W&&J.untilObjectFound&&X.type==="object")return X;let z={isRoot:!1,treeLvl:Z+1},K={...X};if(X.oneOf&&(K.oneOf=X.oneOf.map((w)=>Y({...z,s:w}))),X.anyOf&&(K.anyOf=X.anyOf.map((w)=>Y({...z,s:w}))),X.allOf&&(K.allOf=X.allOf.map((w)=>Y({...z,s:w}))),X.not&&(K.not=Y({...z,s:X.not})),X.properties){K.properties={};for(let[w,F]of Object.entries(X.properties))K.properties[w]=Y({...z,s:F})}if(X.items){let w=X.items;K.items=Array.isArray(w)?w.map((F)=>Y({...z,s:F})):Y({...z,s:w})}return!G&&Q&&K[l]===Q?J.to(K):K};return Y({s:$,isRoot:!0,treeLvl:0})};var wL,s5=()=>(wL||(wL=[{from:Q$.Object({}),to:($)=>Q$.ObjectString($.properties||{},$),excludeRoot:!0},{from:Q$.Array(Q$.Any()),to:($)=>Q$.ArrayString($.items||Q$.Any(),$)}]),wL),UL,ML=()=>(UL||(UL=[{from:Q$.Object({}),to:($)=>Q$.ObjectString($.properties??{},$),excludeRoot:!0},{from:Q$.Array(Q$.Any()),to:($)=>Q$.ArrayQuery($.items??Q$.Any(),$)}]),UL),FL,HH=()=>(FL||(FL=[{from:Q$.Number(),to:($)=>Q$.Numeric($),rootOnly:!0},{from:Q$.Boolean(),to:($)=>Q$.BooleanString($),rootOnly:!0}]),FL),DL,VL=()=>(DL||(DL=[{from:Q$.Object({}),to:($)=>Q$.ObjectString($.properties??{},$),onlyFirst:"object",excludeRoot:!0},{from:Q$.Array(Q$.Any()),to:($)=>Q$.ArrayString($.items??Q$.Any(),$),onlyFirst:"array",excludeRoot:!0}]),DL);var NL=($)=>$?$?.[l]==="Import"&&$.References?$.References().some(NL):($.schema&&($=$.schema),!!$&&(m6 in $)):!1,FX=($)=>{if(!$)return!1;let J=$?.schema??$;if(J[l]==="Import"&&$.References)return $.References().some(FX);if(J.anyOf)return J.anyOf.some(FX);if(J.someOf)return J.someOf.some(FX);if(J.allOf)return J.allOf.some(FX);if(J.not)return J.not.some(FX);if(J.type==="object"){let Y=J.properties;if("additionalProperties"in J)return J.additionalProperties;if("patternProperties"in J)return!1;for(let X of Object.keys(Y)){let W=Y[X];if(W.type==="object"){if(FX(W))return!0}else if(W.anyOf){for(let Z=0;Z<W.anyOf.length;Z++)if(FX(W.anyOf[Z]))return!0}return W.additionalProperties}return!1}return J.type==="array"&&J.items&&!Array.isArray(J.items)?FX(J.items):!1},_L=($,J,Y)=>{if($)return typeof $!="string"?$:Y&&($ in Y.$defs)?Y.Import($):J?.[$]},J8=($,J)=>{if(!J)return!1;if(l in J&&J[l]===$)return!0;if(l in J&&J[l]==="Import"&&J.$defs&&J.$ref){let Y=J.$ref.replace("#/$defs/","");if(J.$defs[Y])return J8($,J.$defs[Y])}if(J.anyOf)return J.anyOf.some((Y)=>J8($,Y));if(J.oneOf)return J.oneOf.some((Y)=>J8($,Y));if(J.allOf)return J.allOf.some((Y)=>J8($,Y));if(J.type==="array"&&J.items)return $==="Files"&&l in J.items&&J.items[l]==="File"?!0:J8($,J.items);if(J.type==="object"){let Y=J.properties;if(!Y)return!1;for(let X of Object.keys(Y))if(J8($,Y[X]))return!0}return!1},PY=($,J)=>{if(!J)return!1;let Y=J?.schema??J;if(Y.elysiaMeta===$)return!0;if(Y[l]==="Import"&&J.References)return J.References().some((X)=>PY($,X));if(Y.anyOf)return Y.anyOf.some((X)=>PY($,X));if(Y.someOf)return Y.someOf.some((X)=>PY($,X));if(Y.allOf)return Y.allOf.some((X)=>PY($,X));if(Y.not)return Y.not.some((X)=>PY($,X));if(Y.type==="object"){let X=Y.properties;if(!X)return!1;for(let W of Object.keys(X)){let Z=X[W];if(Z.type==="object"){if(PY($,Z))return!0}else if(Z.anyOf){for(let G=0;G<Z.anyOf.length;G++)if(PY($,Z.anyOf[G]))return!0}return Y.elysiaMeta===$}return!1}return Y.type==="array"&&Y.items&&!Array.isArray(Y.items)?PY($,Y.items):!1},N9=($,J)=>{if(!J)return!1;let Y=J.schema??J;if(Y[l]==="Import"&&J.References)return J.References().some((X)=>N9($,X));if(Y.anyOf)return Y.anyOf.some((X)=>N9($,X));if(Y.allOf)return Y.allOf.some((X)=>N9($,X));if(Y.oneOf)return Y.oneOf.some((X)=>N9($,X));if(Y.type==="object"){let X=Y.properties;if(!X)return!1;for(let W of Object.keys(X)){let Z=X[W];if($ in Z)return!0;if(Z.type==="object"){if(N9($,Z))return!0}else if(Z.anyOf){for(let G=0;G<Z.anyOf.length;G++)if(N9($,Z.anyOf[G]))return!0}}return!1}return $ in Y},SY=($)=>{if(!$)return!1;if($.oneOf){for(let J=0;J<$.oneOf.length;J++)if(SY($.oneOf[J]))return!0}if($.anyOf){for(let J=0;J<$.anyOf.length;J++)if(SY($.anyOf[J]))return!0}if($.oneOf){for(let J=0;J<$.oneOf.length;J++)if(SY($.oneOf[J]))return!0}if($.allOf){for(let J=0;J<$.allOf.length;J++)if(SY($.allOf[J]))return!0}if($.not&&SY($.not))return!0;if($.type==="object"&&$.properties){let J=$.properties;for(let Y of Object.keys(J)){let X=J[Y];if(SY(X)||X.type==="array"&&X.items&&SY(X.items))return!0}}return $.type==="array"&&$.items&&SY($.items)?!0:$[l]==="Ref"&&("$ref"in $)},AY=($)=>{if(!$)return!1;if($.$ref&&$.$defs&&$.$ref in $.$defs&&AY($.$defs[$.$ref]))return!0;if($.oneOf){for(let J=0;J<$.oneOf.length;J++)if(AY($.oneOf[J]))return!0}if($.anyOf){for(let J=0;J<$.anyOf.length;J++)if(AY($.anyOf[J]))return!0}if($.allOf){for(let J=0;J<$.allOf.length;J++)if(AY($.allOf[J]))return!0}if($.not&&AY($.not))return!0;if($.type==="object"&&$.properties){let J=$.properties;for(let Y of Object.keys(J)){let X=J[Y];if(AY(X)||X.type==="array"&&X.items&&AY(X.items))return!0}}return $.type==="array"&&$.items&&AY($.items)?!0:(v4 in $)},ZG=($)=>(J)=>{if(typeof J=="object")try{return z4.Clean($,J)}catch{}return J},H6=($,{models:J={},dynamic:Y=!1,modules:X,normalize:W=!1,additionalProperties:Z=!1,forceAdditionalProperties:G=!1,coerce:Q=!1,additionalCoerce:H=[],validators:z,sanitize:K}={})=>{if(z=z?.filter((B)=>B),!$){if(!z?.length)return;$=z[0],z=z.slice(1)}let w,F=(B)=>Q?QH(B,[{from:Q$.Number(),to:(L)=>Q$.Numeric(L),untilObjectFound:!0},{from:Q$.Boolean(),to:(L)=>Q$.BooleanString(L),untilObjectFound:!0},...Array.isArray(H)?H:[H]]):QH(B,H),U=(B)=>{if(B&&typeof B!="string"&&"~standard"in B)return B;if(!B)return;let L;if(typeof B!="string")L=B;else if(L=X&&B in X.$defs?X.Import(B):J[B],!L)return;let g=Array.isArray(H)?H.length>0:!!H;if(l in L)if(L[l]==="Import")SY(L.$defs[L.$ref])||(L=L.$defs[L.$ref]??J[L.$ref],(Q||g)&&(L=F(L),("$id"in L)&&!L.$defs&&(L.$id=`${L.$id}_coerced_${GW()}`)));else if(SY(L)){let k=GW();L=Q$.Module({...X?.$defs,[k]:L}).Import(k)}else(Q||g)&&(L=F(L));return L},V=U($),N=z;if("~standard"in V||z?.length&&z.some((B)=>B&&typeof B!="string"&&("~standard"in B))){let B=(O)=>{let b;if(W===!0||W==="exactMirror")try{b=JU(O,{TypeCompiler:_Y,sanitize:K?.(),modules:X})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(O),b=ZG(O)}let D=H6(O,{models:J,modules:X,dynamic:Y,normalize:W,additionalProperties:!0,forceAdditionalProperties:!0,coerce:Q,additionalCoerce:H});return D.Decode=b,(_)=>D.Check(_)?{value:D.Decode(_)}:{issues:[...D.Errors(_)]}},L=V["~standard"]?V["~standard"].validate:B(V),g=[];if(z?.length){for(let O of z)if(O&&typeof O!="string"){if(O?.["~standard"]){g.push(O["~standard"]);continue}if(l in O){g.push(B(O));continue}}}async function k(O){let b=L(O);if(b instanceof Promise&&(b=await b),b.issues)return b;let D=[];b&&typeof b=="object"&&D.push(b.value);for(let q=0;q<g.length;q++){if(b=g[q].validate(O),b instanceof Promise&&(b=await b),b.issues)return b;b&&typeof b=="object"&&D.push(b.value)}if(!D.length)return{value:b};if(D.length===1)return{value:D[0]};if(D.length===2)return{value:y6(D[0],D[1])};let _=y6(D[0],D[1]);for(let q=2;q<D.length;q++)_=y6(_,D[q]);return{value:_}}let I={provider:"standard",schema:V,references:"",checkFunc:()=>{},code:"",Check:k,Errors:(O)=>k(O)?.then?.((b)=>b?.issues),Code:()=>"",Decode:k,Encode:(O)=>O,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return I.parse=(O)=>{try{return I.Decode(I.Clean?.(O)??O)}catch{throw[...I.Errors(O)].map(c6)}},I.safeParse=(O)=>{try{return{success:!0,data:I.Decode(I.Clean?.(O)??O),error:null}}catch{let b=[...P.Errors(O)].map(c6);return{success:!1,data:null,error:b[0]?.summary,errors:b}}},I}else if(z?.length){let B=!1,L=N,{schema:g,notObjects:k}=A9$([V,...L.map(U)]);k&&(V=Q$.Intersect([...g?[g]:[],...k.map((I)=>{let O=U(I);return O.type==="object"&&"additionalProperties"in O&&(!B&&O.additionalProperties===!1&&(B=!0),delete O.additionalProperties),O})]),V.type==="object"&&B&&(V.additionalProperties=!1))}else V.type==="object"&&(!("additionalProperties"in V)||G)?V.additionalProperties=Z:V=QH(V,{onlyFirst:"object",from:Q$.Object({}),to(B){return!B.properties||"additionalProperties"in B?B:Q$.Object(B.properties,{...B,additionalProperties:!1})}});if(Y)if(l in V){let B={provider:"typebox",schema:V,references:"",checkFunc:()=>{},code:"",Check:(L)=>z4.Check(V,L),Errors:(L)=>z4.Errors(V,L),Code:()=>"",Clean:ZG(V),Decode:(L)=>z4.Decode(V,L),Encode:(L)=>z4.Encode(V,L),get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=FX(V)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=N9("default",V)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=NL(V)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=AY(V)},"~hasRef":w,get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=AY(V)}};if(V.config&&(B.config=V.config,B?.schema?.config&&delete B.schema.config),W&&V.additionalProperties===!1)if(W===!0||W==="exactMirror")try{B.Clean=JU(V,{TypeCompiler:_Y,sanitize:K?.(),modules:X})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.warn(V),B.Clean=ZG(V)}else B.Clean=ZG(V);return B.parse=(L)=>{try{return B.Decode(B.Clean?.(L)??L)}catch{throw[...B.Errors(L)].map(c6)}},B.safeParse=(L)=>{try{return{success:!0,data:B.Decode(B.Clean?.(L)??L),error:null}}catch{let g=[...P.Errors(L)].map(c6);return{success:!1,data:null,error:g[0]?.summary,errors:g}}},B}else{let B={provider:"standard",schema:V,references:"",checkFunc:()=>{},code:"",Check:(L)=>V["~standard"].validate(L),Errors(L){let g=V["~standard"].validate(L);if(g instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return g.issues},Code:()=>"",Decode(L){let g=V["~standard"].validate(L);if(g instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return g},Encode:(L)=>L,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return B.parse=(L)=>{try{return B.Decode(B.Clean?.(L)??L)}catch{throw[...B.Errors(L)].map(c6)}},B.safeParse=(L)=>{try{return{success:!0,data:B.Decode(B.Clean?.(L)??L),error:null}}catch{let g=[...P.Errors(L)].map(c6);return{success:!1,data:null,error:g[0]?.summary,errors:g}}},B}let P;if(l in V)if(P=_Y.Compile(V,Object.values(J).filter((B)=>(l in B))),P.provider="typebox",V.config&&(P.config=V.config,P?.schema?.config&&delete P.schema.config),W===!0||W==="exactMirror")try{P.Clean=JU(V,{TypeCompiler:_Y,sanitize:K?.(),modules:X})}catch{console.warn("Failed to create exactMirror. Please report the following code to https://github.com/elysiajs/elysia/issues"),console.dir(V,{depth:null}),P.Clean=ZG(V)}else W==="typebox"&&(P.Clean=ZG(V));else P={provider:"standard",schema:V,references:"",checkFunc(B){let L=V["~standard"].validate(B);if(L instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return L},code:"",Check:(B)=>V["~standard"].validate(B),Errors(B){let L=V["~standard"].validate(B);if(L instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return L.issues},Code:()=>"",Decode(B){let L=V["~standard"].validate(B);if(L instanceof Promise)throw Error("Async validation is not supported in non-dynamic schema");return L},Encode:(B)=>B,hasAdditionalProperties:!1,hasDefault:!1,isOptional:!1,hasTransform:!1,hasRef:!1};return P.parse=(B)=>{try{return P.Decode(P.Clean?.(B)??B)}catch{throw[...P.Errors(B)].map(c6)}},P.safeParse=(B)=>{try{return{success:!0,data:P.Decode(P.Clean?.(B)??B),error:null}}catch{let L=[...P.Errors(B)].map(c6);return{success:!1,data:null,error:L[0]?.summary,errors:L}}},l in V&&Object.assign(P,{get hasAdditionalProperties(){return"~hasAdditionalProperties"in this?this["~hasAdditionalProperties"]:this["~hasAdditionalProperties"]=FX(P)},get hasDefault(){return"~hasDefault"in this?this["~hasDefault"]:this["~hasDefault"]=N9("default",P)},get isOptional(){return"~isOptional"in this?this["~isOptional"]:this["~isOptional"]=NL(P)},get hasTransform(){return"~hasTransform"in this?this["~hasTransform"]:this["~hasTransform"]=AY(V)},get hasRef(){return"~hasRef"in this?this["~hasRef"]:this["~hasRef"]=SY(V)},"~hasRef":w}),P},_x=($)=>$[l]==="Union"||!$.schema&&!!$.anyOf,DX=($)=>{if(!$)return;if($.properties)return $.properties;let J=$.allOf??$.anyOf??$.oneOf;if(J){let Y={};for(let X of J){let W=DX(X);W&&Object.assign(Y,W)}return Object.keys(Y).length>0?Y:void 0}},A9$=($)=>{if($.length===0)return{schema:void 0,notObjects:[]};if($.length===1)return $[0].type==="object"?{schema:$[0],notObjects:[]}:{schema:void 0,notObjects:$};let J,Y=[],X=!1,W=!1;for(let Z of $){if(Z.type!=="object"){Y.push(Z);continue}if("additionalProperties"in Z&&(Z.additionalProperties===!0?X=!0:Z.additionalProperties===!1&&(W=!0)),!J){J=Z;continue}J={...J,...Z,properties:{...J.properties,...Z.properties},required:[...J?.required??[],...Z.required??[]]}}return J&&(J.required&&(J.required=[...new Set(J.required)]),W?J.additionalProperties=!1:X&&(J.additionalProperties=!0)),{schema:J,notObjects:Y}},YU=($,{models:J={},modules:Y,dynamic:X=!1,normalize:W=!1,additionalProperties:Z=!1,validators:G=[],sanitize:Q})=>{if(G=G.filter((K)=>K),!$){if(!G?.length)return;$=G[0],G=G.slice(1)}let H;if(typeof $!="string")H=$;else if(H=Y&&$ in Y.$defs?Y.Import($):J[$],!H)return;if(!H)return;if(l in H||"~standard"in H)return{200:H6(H,{modules:Y,models:J,additionalProperties:Z,dynamic:X,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((K)=>K[200]),sanitize:Q})};let z={};return Object.keys(H).forEach((K)=>{if(isNaN(+K))return;let w=H[+K];if(typeof w=="string"){if(w in J){let F=J[w];if(!F)return;z[+K]=l in F||"~standard"in F?H6(F,{modules:Y,models:J,additionalProperties:Z,dynamic:X,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((U)=>U[+K]),sanitize:Q}):F}return}z[+K]=l in w||"~standard"in w?H6(w,{modules:Y,models:J,additionalProperties:Z,dynamic:X,normalize:W,coerce:!1,additionalCoerce:[],validators:G.map((F)=>F[+K]),sanitize:Q}):w}),z},Lx=({validator:$,modules:J,defaultConfig:Y={},config:X,dynamic:W,normalize:Z=!1,models:G,validators:Q,sanitize:H})=>{let z=$?.provider?$:H6($,{modules:J,dynamic:W,models:G,normalize:Z,additionalProperties:!0,coerce:!0,additionalCoerce:s5(),validators:Q,sanitize:H});return z?z.config=lQ(z.config,X):(z=H6(Q$.Cookie(Q$.Any()),{modules:J,dynamic:W,models:G,additionalProperties:!0,validators:Q,sanitize:H}),z.config=Y),z},e5=($)=>$&&$[l]==="Import"&&$.$defs[$.$ref][l]==="Object"?$.$defs[$.$ref]:$;var z6=($,J)=>J?$:"",j9$=["json","text","urlencoded","arrayBuffer","formdata","application/json","text/plain","application/x-www-form-urlencoded","application/octet-stream","multipart/form-data"],wH=({context:$="c",trace:J=[],addFn:Y})=>{if(!J.length)return()=>({resolveChild(){return()=>{}},resolve(){}});for(let X=0;X<J.length;X++)Y(`let report${X},reportChild${X},reportErr${X},reportErrChild${X};let trace${X}=${$}[ELYSIA_TRACE]?.[${X}]??trace[${X}](${$});
`);return(X,{name:W,total:Z=0,alias:G}={})=>{W||(W="anonymous");let Q=X==="error"?"reportErr":"report";for(let H=0;H<J.length;H++)Y(`${G?"const ":""}${G??Q}${H}=trace${H}.${X}({id,event:'${X}',name:'${W}',begin:performance.now(),total:${Z}})
`),G&&Y(`${Q}${H}=${G}${H}
`);return{resolve(){for(let H=0;H<J.length;H++)Y(`${G??Q}${H}.resolve()
`)},resolveChild(H){for(let z=0;z<J.length;z++)Y(`${Q}Child${z}=${Q}${z}.resolveChild?.shift()?.({id,event:'${X}',name:'${H}',begin:performance.now()})
`);return(z)=>{for(let K=0;K<J.length;K++)Y(z?`if(${z} instanceof Error){${Q}Child${K}?.(${z}) }else{${Q}Child${K}?.()}`:`${Q}Child${K}?.()
`)}}}}},zH=({schema:$,name:J,type:Y,typeAlias:X=Y,normalize:W,ignoreTryCatch:Z=!1})=>!W||!$.Clean?"":W===!0||W==="exactMirror"?Z?`${J}=validator.${X}.Clean(${J})
`:`try{${J}=validator.${X}.Clean(${J})
}catch{}`:W==="typebox"?`${J}=validator.${X}.Clean(${J})
`:"",E9$=({injectResponse:$="",normalize:J=!1,validator:Y,encodeSchema:X=!1,isStaticResponse:W=!1,hasSanitize:Z=!1,allowUnsafeValidationDetails:G=!1})=>({validate:(Q,H=`c.${Q}`,z)=>`c.set.status=422;throw new ValidationError('${Q}',validator.${Q},${H},${G}${z?","+z:""})`,response:(Q="r")=>{if(W||!Y.response)return"";let H=$+`
`;H+=`if(${Q} instanceof ElysiaCustomStatusResponse){c.set.status=${Q}.code
${Q}=${Q}.response}if(${Q} instanceof Response === false && typeof ${Q}?.next !== 'function' && !(${Q} instanceof ReadableStream))switch(c.set.status){`;for(let[z,K]of Object.entries(Y.response)){if(H+=`
case ${z}:
`,K.provider==="standard"){H+=`let vare${z}=validator.response[${z}].Check(${Q})
if(vare${z} instanceof Promise)vare${z}=await vare${z}
if(vare${z}.issues)throw new ValidationError('response',validator.response[${z}],${Q},${G},vare${z}.issues)
${Q}=vare${z}.value
c.set.status=${z}
break
`;continue}let w=K.schema?.noValidate===!0;if(!w&&K.schema?.$ref&&K.schema?.$defs){let N=K.schema.$ref,P=typeof N=="string"&&N.includes("/")?N.split("/").pop():N;K.schema.$defs[P]?.noValidate===!0&&(w=!0)}let F=w||Z,U=({ignoreTryCatch:N=!1}={})=>zH({name:Q,schema:K,type:"response",typeAlias:`response[${z}]`,normalize:J,ignoreTryCatch:N});F&&(H+=U());let V=!F&&J&&!w;X&&K.hasTransform&&!w?(H+=`try{${Q}=validator.response[${z}].Encode(${Q})
`,F||(H+=U({ignoreTryCatch:!0})),H+=`c.set.status=${z}}catch{`+(V?`try{
`+U({ignoreTryCatch:!0})+`${Q}=validator.response[${z}].Encode(${Q})
}catch{throw new ValidationError('response',validator.response[${z}],${Q},${G})}`:`throw new ValidationError('response',validator.response[${z}],${Q}),${G}`)+"}"):(F||(H+=U()),w||(H+=`if(validator.response[${z}].Check(${Q})===false)throw new ValidationError('response',validator.response[${z}],${Q},${G})
c.set.status=${z}
`)),H+=`break
`}return H+"}"}}),_9=($)=>($?.fn??$).constructor.name==="AsyncFunction",C9$=/=>\s?response\.clone\(/,T9$=/(?:return|=>)\s?\S+\(|a(?:sync|wait)/,L6=($)=>{let J=typeof $=="object";if(J&&$.isAsync!==void 0)return $.isAsync;let Y=J?$.fn:$;if(Y.constructor.name==="AsyncFunction"||Y.constructor.name==="AsyncGeneratorFunction")return!0;let X=Y.toString();if(C9$.test(X))return J&&($.isAsync=!1),!1;let W=T9$.test(X);return J&&($.isAsync=W),W},KH=($)=>{let J=typeof $=="object";if(J&&$.hasReturn!==void 0)return $.hasReturn;let Y=J?$.fn.toString():$.toString(),X=Y.indexOf(")"),W=Y.indexOf("=>",X);if(W!==-1){let G=W+2,Q;for(;G<Y.length&&((Q=Y.charCodeAt(G))===32||Q===9||Q===10||Q===13);)G++;if(G<Y.length&&Y.charCodeAt(G)!==123)return J&&($.hasReturn=!0),!0}let Z=Y.includes("return");return J&&($.hasReturn=Z),Z},XU=($)=>{let J=$?.fn??$;return J.constructor.name==="AsyncGeneratorFunction"||J.constructor.name==="GeneratorFunction"},GG=($,J,Y=!1,X=`c.${J}`)=>`try{${$}}catch(error){if(error.constructor.name === 'TransformDecodeError'){c.set.status=422
throw error.error ?? new ValidationError('${J}',validator.${J},${X},${Y})}}`,WU=q3?"setImmediate":"Promise.resolve().then",Bx=({app:$,path:J,method:Y,hooks:X,validator:W,handler:Z,allowMeta:G=!1,inference:Q})=>{let H=$["~adapter"].composeHandler,z=$["~adapter"].handler,K=typeof Z=="function";if(!K){Z=z.mapResponse(Z,{headers:$.setHeaders??{}});let a=Z instanceof Response||Z?.constructor?.name==="Response"&&typeof Z?.clone=="function";if(X.parse?.length&&X.transform?.length&&X.beforeHandle?.length&&X.afterHandle?.length)return a?Function("a",`"use strict";
return function(){return a.clone()}`)(Z):Function("a",`"use strict";
return function(){return a}`)(Z);if(a){let f=Z;Z=()=>f.clone()}}let w=K?"handler(c)":"handler",F=!!X.trace?.length,U="";if(Q=i5(Object.assign({handler:Z},X),Q,$.config.sucrose),H.declare){let a=H.declare(Q);a&&(U+=a)}Q.server&&(U+=`Object.defineProperty(c,'server',{get:function(){return getServer()}})
`),W.createBody?.(),W.createQuery?.(),W.createHeaders?.(),W.createParams?.(),W.createCookie?.(),W.createResponse?.();let V=!!W.body||!!W.headers||!!W.params||!!W.query||!!W.cookie||!!W.response,N=Q.query||!!W.query,P=X.parse?.length===1&&X.parse[0].fn==="none",B=Y!==""&&Y!=="GET"&&Y!=="HEAD"&&(Q.body||!!W.body||!!X.parse?.length)&&!P,L=$.setHeaders,g=L&&!!Object.keys(L).length,k=Q.headers||!!W.headers||H.preferWebstandardHeaders!==!0&&Q.body,I=Q.cookie||!!W.cookie,O=W.cookie?.config?lQ(W?.cookie?.config,$.config.cookie):$.config.cookie,b="",D=()=>{if(b)return b;if(O?.sign){if(O.secrets==="")throw Error(`cookie secret can't be an empty string at (${Y}) ${J}`,{cause:`(${Y}) ${J}`});if(!O.secrets)throw Error(`cookie secret must be defined (${Y}) ${J}`,{cause:`(${Y}) ${J}`});let a=O.secrets?typeof O.secrets=="string"?O.secrets:O.secrets[0]:void 0;if(b+=`const _setCookie = c.set.cookie
if(_setCookie){`,O.sign===!0)b+=`for(const [key, cookie] of Object.entries(_setCookie)){c.set.cookie[key].value=await signCookie(cookie.value,${a?JSON.stringify(a):"undefined"})}`;else{typeof O.sign=="string"&&(O.sign=[O.sign]);for(let f of O.sign)b+=`if(_setCookie[${JSON.stringify(f)}]?.value)c.set.cookie[${JSON.stringify(f)}].value=await signCookie(_setCookie[${JSON.stringify(f)}].value,${a?JSON.stringify(a):"undefined"})
`}b+=`}
`}return b},_=$.config.normalize,q=$.config.encodeSchema,S=$.config.allowUnsafeValidationDetails,j=E9$({normalize:_,validator:W,encodeSchema:q,isStaticResponse:Z instanceof Response,hasSanitize:!!$.config.sanitize,allowUnsafeValidationDetails:S});k&&(U+=H.headers),F&&(U+=`const id=c[ELYSIA_REQUEST_ID]
`);let E=wH({trace:X.trace,addFn:(a)=>{U+=a}});if(U+="try{",I){let a=(n,t)=>{let J$=O?.[n]??t;return J$===void 0?"":J$?typeof J$=="string"?`${n}:${JSON.stringify(J$)},`:J$ instanceof Date?`${n}: new Date(${J$.getTime()}),`:`${n}:${J$},`:typeof t=="string"?`${n}:"${t}",`:`${n}:${t},`},f=O?`{secrets:${O.secrets!==void 0&&O.secrets!==null?typeof O.secrets=="string"?JSON.stringify(O.secrets):"["+O.secrets.map((n)=>JSON.stringify(n)).join(",")+"]":"undefined"},sign:${O.sign===!0?!0:O.sign!==void 0?typeof O.sign=="string"?JSON.stringify(O.sign):"["+O.sign.map((n)=>JSON.stringify(n)).join(",")+"]":"undefined"},`+a("domain")+a("expires")+a("httpOnly")+a("maxAge")+a("path","/")+a("priority")+a("sameSite")+a("secure")+"}":"undefined";k?U+=`
c.cookie=await parseCookie(c.set,c.headers.cookie,${f})
`:U+=`
c.cookie=await parseCookie(c.set,c.request.headers.get('cookie'),${f})
`}if(N){let a={},f={},n=!1,t=!1;if(W.query?.schema){let J$=e5(W.query?.schema),A$=DX(J$);if(A$)for(let[L0,Z4]of Object.entries(A$))PY("ArrayQuery",Z4)&&(a[L0]=!0,n=!0),PY("ObjectString",Z4)&&(f[L0]=!0,t=!0)}U+=`if(c.qi===-1){c.query=Object.create(null)}else{c.query=parseQueryFromURL(c.url,c.qi+1${n?","+JSON.stringify(a):t?",undefined":""}${t?","+JSON.stringify(f):""})}`}let T=typeof Z=="function"&&L6(Z),R=F||X.afterResponse?.length?"c.response=c.responseValue= ":"",v=Object.keys(W.response??{}),h=v.length>1,y=v.length===0||v.length===1&&v[0]==="200",o=I||B||T||!!X.parse?.length||!!X.afterHandle?.some(L6)||!!X.beforeHandle?.some(L6)||!!X.transform?.some(L6)||!!X.mapResponse?.some(L6)||W.body?.provider==="standard"||W.headers?.provider==="standard"||W.query?.provider==="standard"||W.params?.provider==="standard"||W.cookie?.provider==="standard"||Object.values(W.response??{}).find((a)=>a.provider==="standard"),G$=(typeof Z=="function"?XU(Z):!1)||!!X.beforeHandle?.some(XU)||!!X.afterHandle?.some(XU)||!!X.transform?.some(XU),Z$=Q.cookie||Q.set||k||F||h||!y||K&&g||G$,_$,E$=(a=!0)=>{if(_$!==void 0)return _$;if(!X.afterResponse?.length&&!F)return"";let f="";f+=`
${WU}(async()=>{if(c.responseValue){if(c.responseValue instanceof ElysiaCustomStatusResponse) c.set.status=c.responseValue.code
`+(a?`if(typeof afterHandlerStreamListener!=='undefined')for await(const v of afterHandlerStreamListener){}
`:"")+`}
`;let n=wH({trace:X.trace,addFn:(t)=>{f+=t}})("afterResponse",{total:X.afterResponse?.length});if(X.afterResponse?.length&&X.afterResponse)for(let t=0;t<X.afterResponse.length;t++){let J$=n.resolveChild(X.afterResponse[t].fn.name),A$=L6(X.afterResponse[t])?"await ":"";f+=`
${A$}e.afterResponse[${t}](c)
`,J$()}return n.resolve(),f+=`})
`,_$=f},d$=(a="r")=>{let f=E$(),n=`${G$&&o?"await ":""}${Z$?"mapResponse":"mapCompactResponse"}(${R}${a}${Z$?",c.set":""}${n$})
`;return f?`const _res=${n}`+f+"return _res":`return ${n}`},n$=G$&&H.mapResponseContext?`,${H.mapResponseContext}`:"";(F||Q.route)&&(U+=`c.route=\`${J}\`
`),(F||X.afterResponse?.length)&&(U+=`let afterHandlerStreamListener
`);let J0=E("parse",{total:X.parse?.length});if(B){let a=!!X.parse?.length||Q.body||W.body;H.parser.declare&&(U+=H.parser.declare),U+=`
try{`;let f=typeof X.parse=="string"?X.parse:Array.isArray(X.parse)&&X.parse.length===1?typeof X.parse[0]=="string"?X.parse[0]:typeof X.parse[0].fn=="string"?X.parse[0].fn:void 0:void 0;if(!f&&W.body&&!X.parse?.length){let n=W.body.schema;n&&n.anyOf&&n[l]==="Union"&&n.anyOf?.length===2&&n.anyOf?.find((t)=>t[l]==="ElysiaForm")&&(f="formdata")}if(f&&j9$.includes(f)){let n=E("parse",{total:X.parse?.length}),t=!!W.body?.isOptional;switch(f){case"json":case"application/json":U+=H.parser.json(t);break;case"text":case"text/plain":U+=H.parser.text(t);break;case"urlencoded":case"application/x-www-form-urlencoded":U+=H.parser.urlencoded(t);break;case"arrayBuffer":case"application/octet-stream":U+=H.parser.arrayBuffer(t);break;case"formdata":case"multipart/form-data":U+=H.parser.formData(t);break;default:f[0]in $["~parser"]&&(U+=k?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",U+=`
if(contentType){const index=contentType.indexOf(';')
if(index!==-1)contentType=contentType.substring(0,index)}
else{contentType=''}c.contentType=contentType
let result=parser['${f}'](c, contentType)
if(result instanceof Promise)result=await result
if(result instanceof ElysiaCustomStatusResponse)throw result
if(result!==undefined)c.body=result
delete c.contentType
`);break}n.resolve()}else if(a){U+=`
`,U+=`let contentType
if(c.request.body)`,U+=k?`contentType=c.headers['content-type']
`:`contentType=c.request.headers.get('content-type')
`;let n=!1;if(X.parse?.length)U+=`if(contentType){
const index=contentType.indexOf(';')

if(index!==-1)contentType=contentType.substring(0,index)}else{contentType=''}let used=false
c.contentType=contentType
`;else{n=!0;let J$=!!W.body?.isOptional;U+=`if(contentType)switch(contentType.charCodeAt(12)){
case 106:`+H.parser.json(J$)+`break
case 120:`+H.parser.urlencoded(J$)+`break
case 111:`+H.parser.arrayBuffer(J$)+`break
case 114:`+H.parser.formData(J$)+`break
default:if(contentType.charCodeAt(0)===116){`+H.parser.text(J$)+`}break
}`}let t=E("parse",{total:X.parse?.length});if(X.parse)for(let J$=0;J$<X.parse.length;J$++){let A$=`bo${J$}`;if(J$!==0&&(U+=`
if(!used){`),typeof X.parse[J$].fn=="string"){let L0=t.resolveChild(X.parse[J$].fn),Z4=!!W.body?.isOptional;switch(X.parse[J$].fn){case"json":case"application/json":n=!0,U+=H.parser.json(Z4);break;case"text":case"text/plain":n=!0,U+=H.parser.text(Z4);break;case"urlencoded":case"application/x-www-form-urlencoded":n=!0,U+=H.parser.urlencoded(Z4);break;case"arrayBuffer":case"application/octet-stream":n=!0,U+=H.parser.arrayBuffer(Z4);break;case"formdata":case"multipart/form-data":n=!0,U+=H.parser.formData(Z4);break;default:U+=`let ${A$}=parser['${X.parse[J$].fn}'](c,contentType)
if(${A$} instanceof Promise)${A$}=await ${A$}
if(${A$}!==undefined){c.body=${A$};used=true;}
`}L0()}else{let L0=t.resolveChild(X.parse[J$].fn.name);U+=`let ${A$}=e.parse[${J$}]
${A$}=${A$}(c,contentType)
if(${A$} instanceof Promise)${A$}=await ${A$}
if(${A$}!==undefined){c.body=${A$};used=true}`,L0()}if(J$!==0&&(U+="}"),n)break}if(t.resolve(),!n){let J$=!!W.body?.isOptional;X.parse?.length&&(U+=`
if(!used){
`),U+=`switch(contentType){case 'application/json':
`+H.parser.json(J$)+`break
case 'text/plain':`+H.parser.text(J$)+`break
case 'application/x-www-form-urlencoded':`+H.parser.urlencoded(J$)+`break
case 'application/octet-stream':`+H.parser.arrayBuffer(J$)+`break
case 'multipart/form-data':`+H.parser.formData(J$)+`break
`;for(let A$ of Object.keys($["~parser"]))U+=`case '${A$}':let bo${A$}=parser['${A$}'](c,contentType)
if(bo${A$} instanceof Promise)bo${A$}=await bo${A$}
if(bo${A$} instanceof ElysiaCustomStatusResponse){`+d$(`bo${A$}`)+`}if(bo${A$}!==undefined)c.body=bo${A$}
break
`;X.parse?.length&&(U+="}"),U+="}"}X.parse?.length&&(U+=`
delete c.contentType`)}U+="}catch(error){throw new ParseError(error)}"}if(J0.resolve(),X?.transform||F){let a=E("transform",{total:X.transform?.length});if(X.transform?.length){U+=`let transformed
`;for(let f=0;f<X.transform.length;f++){let n=X.transform[f],t=a.resolveChild(n.fn.name);U+=L6(n)?`transformed=await e.transform[${f}](c)
`:`transformed=e.transform[${f}](c)
`,n.subType==="mapDerive"?U+="if(transformed instanceof ElysiaCustomStatusResponse){"+d$("transformed")+`}else{transformed.request=c.request
transformed.store=c.store
transformed.qi=c.qi
transformed.path=c.path
transformed.url=c.url
transformed.redirect=c.redirect
transformed.set=c.set
transformed.error=c.error
c=transformed}`:U+="if(transformed instanceof ElysiaCustomStatusResponse){"+d$("transformed")+`}else Object.assign(c,transformed)
`,t()}}a.resolve()}let m0=[];if(W){if(W.headers){if(W.headers.hasDefault)for(let[a,f]of Object.entries(z4.Default(W.headers.schema,{}))){let n=typeof f=="object"?JSON.stringify(f):typeof f=="string"?`'${f}'`:f;n!==void 0&&(U+=`c.headers['${a}']??=${n}
`)}U+=zH({name:"c.headers",schema:W.headers,type:"headers",normalize:_}),W.headers.isOptional&&(U+="if(isNotEmpty(c.headers)){"),W.headers?.provider==="standard"?U+=`let vah=validator.headers.Check(c.headers)
if(vah instanceof Promise)vah=await vah
if(vah.issues){`+j.validate("headers",void 0,"vah.issues")+`}else{c.headers=vah.value}
`:W.headers?.schema?.noValidate!==!0&&(U+="if(validator.headers.Check(c.headers) === false){"+j.validate("headers")+"}"),W.headers.hasTransform&&(U+=GG(`c.headers=validator.headers.Decode(c.headers)
`,"headers",S)),W.headers.isOptional&&(U+="}")}if(W.params){if(W.params.hasDefault)for(let[a,f]of Object.entries(z4.Default(W.params.schema,{}))){let n=typeof f=="object"?JSON.stringify(f):typeof f=="string"?`'${f}'`:f;n!==void 0&&(U+=`c.params['${a}']??=${n}
`)}W.params.provider==="standard"?U+=`let vap=validator.params.Check(c.params)
if(vap instanceof Promise)vap=await vap
if(vap.issues){`+j.validate("params",void 0,"vap.issues")+`}else{c.params=vap.value}
`:W.params?.schema?.noValidate!==!0&&(U+="if(validator.params.Check(c.params)===false){"+j.validate("params")+"}"),W.params.hasTransform&&(U+=GG(`c.params=validator.params.Decode(c.params)
`,"params",S))}if(W.query){if(l in W.query?.schema&&W.query.hasDefault)for(let[a,f]of Object.entries(z4.Default(W.query.schema,{}))){let n=typeof f=="object"?JSON.stringify(f):typeof f=="string"?`'${f}'`:f;n!==void 0&&(U+=`if(c.query['${a}']===undefined)c.query['${a}']=${n}
`)}U+=zH({name:"c.query",schema:W.query,type:"query",normalize:_}),W.query.isOptional&&(U+="if(isNotEmpty(c.query)){"),W.query.provider==="standard"?U+=`let vaq=validator.query.Check(c.query)
if(vaq instanceof Promise)vaq=await vaq
if(vaq.issues){`+j.validate("query",void 0,"vaq.issues")+`}else{c.query=vaq.value}
`:W.query?.schema?.noValidate!==!0&&(U+="if(validator.query.Check(c.query)===false){"+j.validate("query")+"}"),W.query.hasTransform&&(U+=GG(`c.query=validator.query.Decode(c.query)
`,"query",S),U+=GG(`c.query=validator.query.Decode(c.query)
`,"query",S)),W.query.isOptional&&(U+="}")}if(B&&W.body){(W.body.hasTransform||W.body.isOptional)&&(U+=`const isNotEmptyObject=c.body&&(typeof c.body==="object"&&(isNotEmpty(c.body)||c.body instanceof ArrayBuffer))
`);let a=_x(W.body.schema),f=!1;if(W.body.hasDefault){let n=z4.Default(W.body.schema,W.body.schema.type==="object"||e5(W.body.schema)[l]==="Object"?{}:void 0),t=e5(W.body.schema);if(!a&&n&&typeof n=="object"&&(J8("File",t)||J8("Files",t))){f=!0;for(let[A$,L0]of Object.entries(n))(L0==="File"||L0==="Files")&&delete n[A$];p0(n)||(n=void 0)}let J$=typeof n=="object"?JSON.stringify(n):typeof n=="string"?`'${n}'`:n;n!=null&&(Array.isArray(n)?U+=`if(!c.body)c.body=${J$}
`:typeof n=="object"?U+=`c.body=Object.assign(${J$},c.body)
`:U+=`c.body=${J$}
`),U+=zH({name:"c.body",schema:W.body,type:"body",normalize:_}),W.body.provider==="standard"?U+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+j.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`:W.body?.schema?.noValidate!==!0&&(W.body.isOptional?U+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+j.validate("body")+"}":U+="if(validator.body.Check(c.body)===false){"+j.validate("body")+"}")}else U+=zH({name:"c.body",schema:W.body,type:"body",normalize:_}),W.body.provider==="standard"?U+=`let vab=validator.body.Check(c.body)
if(vab instanceof Promise)vab=await vab
if(vab.issues){`+j.validate("body",void 0,"vab.issues")+`}else{c.body=vab.value}
`:W.body?.schema?.noValidate!==!0&&(W.body.isOptional?U+="if(isNotEmptyObject&&validator.body.Check(c.body)===false){"+j.validate("body")+"}":U+="if(validator.body.Check(c.body)===false){"+j.validate("body")+"}");if(W.body.hasTransform&&(U+=GG(`if(isNotEmptyObject)c.body=validator.body.Decode(c.body)
`,"body",S)),a&&W.body.schema.anyOf?.length){let n=Object.values(W.body.schema.anyOf);for(let t=0;t<n.length;t++){let J$=n[t];if(J8("File",J$)||J8("Files",J$)){let A$=H6(J$,{modules:$.definitions.typebox,dynamic:!$.config.aot,models:$.definitions.type,normalize:$.config.normalize,additionalCoerce:HH(),sanitize:()=>$.config.sanitize});if(A$){let L0=m0.length===0,Z4=DX(A$.schema)??DX(J$);if(!Z4)continue;let h4=Object.entries(Z4),X6=L0?`
`:" else ";X6+=`if(fileUnions[${m0.length}].Check(c.body)){`;let LJ="",sW=0;for(let OQ=0;OQ<h4.length;OQ++){let[Pk,Iw]=h4[OQ];!Iw.extension||Iw[l]!=="File"&&Iw[l]!=="Files"||(sW&&(LJ+=","),LJ+=`fileType(c.body.${Pk},${JSON.stringify(Iw.extension)},'body.${Pk}')`,sW++)}LJ&&(sW===1?X6+=`await ${LJ}
`:sW>1&&(X6+=`await Promise.all([${LJ}])
`),X6+="}",U+=X6,m0.push(A$))}}}}else if(f||!a&&(J8("File",e5(W.body.schema))||J8("Files",e5(W.body.schema)))){let n="",t=DX(e5(W.body.schema)),J$=0;if(t)for(let[A$,L0]of Object.entries(t))!L0.extension||L0[l]!=="File"&&L0[l]!=="Files"||(J$&&(n+=","),n+=`fileType(c.body.${A$},${JSON.stringify(L0.extension)},'body.${A$}')`,J$++);J$&&(U+=`
`),J$===1?U+=`await ${n}
`:J$>1&&(U+=`await Promise.all([${n}])
`)}}W.cookie&&(W.cookie.config=lQ(W.cookie.config,W.cookie?.config??{}),U+=`let cookieValue={}
for(const [key,value] of Object.entries(c.cookie))cookieValue[key]=value.value
`,W.cookie.isOptional&&(U+="if(isNotEmpty(c.cookie)){"),W.cookie.provider==="standard"?(U+=`let vac=validator.cookie.Check(cookieValue)
if(vac instanceof Promise)vac=await vac
if(vac.issues){`+j.validate("cookie",void 0,"vac.issues")+`}else{cookieValue=vac.value}
`,U+=`for(const k of Object.keys(cookieValue))c.cookie[k].value=cookieValue[k]
`):W.body?.schema?.noValidate!==!0&&(U+="if(validator.cookie.Check(cookieValue)===false){"+j.validate("cookie","cookieValue")+"}",W.cookie.hasTransform&&(U+=GG("for(const [key,value] of Object.entries(validator.cookie.Decode(cookieValue))){c.cookie[key].cookie.value = value}","cookie",S))),W.cookie.isOptional&&(U+="}"))}if(X?.beforeHandle||F){let a=E("beforeHandle",{total:X.beforeHandle?.length}),f=!1;if(X.beforeHandle?.length)for(let n=0;n<X.beforeHandle.length;n++){let t=X.beforeHandle[n],J$=a.resolveChild(t.fn.name),A$=KH(t);if(t.subType==="resolve"||t.subType==="mapResolve")f||(f=!0,U+=`
let resolved
`),U+=L6(t)?`resolved=await e.beforeHandle[${n}](c);
`:`resolved=e.beforeHandle[${n}](c);
`,t.subType==="mapResolve"?U+="if(resolved instanceof ElysiaCustomStatusResponse){"+d$("resolved")+`}else{resolved.request=c.request
resolved.store=c.store
resolved.qi=c.qi
resolved.path=c.path
resolved.url=c.url
resolved.redirect=c.redirect
resolved.set=c.set
resolved.error=c.error
c=resolved}`:U+="if(resolved instanceof ElysiaCustomStatusResponse){"+d$("resolved")+`}else Object.assign(c, resolved)
`,J$();else if(!A$)U+=L6(t)?`await e.beforeHandle[${n}](c)
`:`e.beforeHandle[${n}](c)
`,J$();else{if(U+=L6(t)?`be=await e.beforeHandle[${n}](c)
`:`be=e.beforeHandle[${n}](c)
`,J$("be"),U+="if(be!==undefined){",a.resolve(),X.afterHandle?.length||F){E("handle",{name:K?Z.name:void 0}).resolve();let Z4=E("afterHandle",{total:X.afterHandle?.length});if(X.afterHandle?.length)for(let h4=0;h4<X.afterHandle.length;h4++){let X6=X.afterHandle[h4],LJ=KH(X6),sW=Z4.resolveChild(X6.fn.name);U+=`c.response=c.responseValue=be
`,LJ?(U+=L6(X6.fn)?`af=await e.afterHandle[${h4}](c)
`:`af=e.afterHandle[${h4}](c)
`,U+=`if(af!==undefined) c.response=c.responseValue=be=af
`):U+=L6(X6.fn)?`await e.afterHandle[${h4}](c, be)
`:`e.afterHandle[${h4}](c, be)
`,sW("af")}Z4.resolve()}W.response&&(U+=j.response("be"));let L0=E("mapResponse",{total:X.mapResponse?.length});if(X.mapResponse?.length){U+=`c.response=c.responseValue=be
`;for(let Z4=0;Z4<X.mapResponse.length;Z4++){let h4=X.mapResponse[Z4],X6=L0.resolveChild(h4.fn.name);U+=`if(mr===undefined){mr=${_9(h4)?"await ":""}e.mapResponse[${Z4}](c)
if(mr!==undefined)be=c.response=c.responseValue=mr}`,X6()}}L0.resolve(),U+=E$(),U+=D(),U+=`return mapEarlyResponse(${R}be,c.set${n$})}
`}}a.resolve()}function T8(a){let f=E("handle",{name:a,alias:"reportHandler"});return()=>{F&&(U+='if(r&&(r[Symbol.iterator]||r[Symbol.asyncIterator])&&typeof r.next==="function"){'+(o?"":"(async()=>{")+`const stream=await tee(r,3)
r=stream[0]
`+(X.afterHandle?.length?`c.response=c.responseValue=r
`:"")+`const listener=stream[1]
`+(F||X.afterResponse?.length?`afterHandlerStreamListener=stream[2]
`:"")+`${WU}(async ()=>{if(listener)for await(const v of listener){}
`,f.resolve(),U+="})"+(o?"":"})()")+"}else{",f.resolve(),U+=`}
`)}}if(X.afterHandle?.length||F){let a=T8(K?Z.name:void 0);X.afterHandle?.length?U+=T?`let r=c.response=c.responseValue=await ${w}
`:`let r=c.response=c.responseValue=${w}
`:U+=T?`let r=await ${w}
`:`let r=${w}
`,a();let f=E("afterHandle",{total:X.afterHandle?.length});if(X.afterHandle?.length)for(let t=0;t<X.afterHandle.length;t++){let J$=X.afterHandle[t],A$=KH(J$),L0=f.resolveChild(J$.fn.name);A$?(U+=L6(J$.fn)?`af=await e.afterHandle[${t}](c)
`:`af=e.afterHandle[${t}](c)
`,L0("af"),W.response?(U+="if(af!==undefined){",f.resolve(),U+=j.response("af"),U+="c.response=c.responseValue=af}"):(U+="if(af!==undefined){",f.resolve(),U+="c.response=c.responseValue=af}")):(U+=L6(J$.fn)?`await e.afterHandle[${t}](c)
`:`e.afterHandle[${t}](c)
`,L0())}f.resolve(),X.afterHandle?.length&&(U+=`r=c.response
`),W.response&&(U+=j.response()),U+=D();let n=E("mapResponse",{total:X.mapResponse?.length});if(X.mapResponse?.length)for(let t=0;t<X.mapResponse.length;t++){let J$=X.mapResponse[t],A$=n.resolveChild(J$.fn.name);U+=`mr=${_9(J$)?"await ":""}e.mapResponse[${t}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr
`,A$()}n.resolve(),U+=d$()}else{let a=T8(K?Z.name:void 0);if(W.response||X.mapResponse?.length||F){U+=T?`let r=await ${w}
`:`let r=${w}
`,a(),W.response&&(U+=j.response());let f=E("mapResponse",{total:X.mapResponse?.length});if(X.mapResponse?.length){U+=`
c.response=c.responseValue=r
`;for(let n=0;n<X.mapResponse.length;n++){let t=X.mapResponse[n],J$=f.resolveChild(t.fn.name);U+=`
if(mr===undefined){mr=${_9(t)?"await ":""}e.mapResponse[${n}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}
`,J$()}}f.resolve(),U+=D(),Z instanceof Response?(U+=E$(),U+=Q.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${R}${w}.clone(),c.set${n$})
else return ${w}.clone()`:`return ${w}.clone()`,U+=`
`):U+=d$()}else if(I||F){U+=T?`let r=await ${w}
`:`let r=${w}
`,a();let f=E("mapResponse",{total:X.mapResponse?.length});if(X.mapResponse?.length){U+=`c.response=c.responseValue= r
`;for(let n=0;n<X.mapResponse.length;n++){let t=X.mapResponse[n],J$=f.resolveChild(t.fn.name);U+=`if(mr===undefined){mr=${_9(t)?"await ":""}e.mapResponse[${n}](c)
if(mr!==undefined)r=c.response=c.responseValue=mr}`,J$()}}f.resolve(),U+=D()+d$()}else{a();let f=T?`await ${w}`:w;Z instanceof Response?(U+=E$(),U+=Q.set?`if(isNotEmpty(c.set.headers)||c.set.status!==200||c.set.redirect||c.set.cookie)return mapResponse(${R}${w}.clone(),c.set${n$})
else return ${w}.clone()
`:`return ${w}.clone()
`):U+=d$(f)}}if(U+=`
}catch(error){`,!o&&X.error?.length&&(U+="return(async()=>{"),U+=`const set=c.set
if(!set.status||set.status<300)set.status=error?.status||500
`,I&&(U+=D()),F&&X.trace)for(let a=0;a<X.trace.length;a++)U+=`report${a}?.resolve(error);reportChild${a}?.(error)
`;let XX=E("error",{total:X.error?.length});if(X.error?.length){U+=`c.error=error
`,V?U+=`if(error instanceof TypeBoxError){c.code="VALIDATION"
c.set.status=422}else{c.code=error.code??error[ERROR_CODE]??"UNKNOWN"}`:U+=`c.code=error.code??error[ERROR_CODE]??"UNKNOWN"
`,U+=`let er
`,X.mapResponse?.length&&(U+=`let mep
`);for(let a=0;a<X.error.length;a++){let f=XX.resolveChild(X.error[a].fn.name);if(L6(X.error[a])?U+=`er=await e.error[${a}](c)
`:U+=`er=e.error[${a}](c)
if(er instanceof Promise)er=await er
`,f(),X.mapResponse?.length){let n=E("mapResponse",{total:X.mapResponse?.length});for(let t=0;t<X.mapResponse.length;t++){let J$=X.mapResponse[t],A$=n.resolveChild(J$.fn.name);U+=`c.response=c.responseValue=er
mep=e.mapResponse[${t}](c)
if(mep instanceof Promise)er=await er
if(mep!==undefined)er=mep
`,A$()}n.resolve()}if(U+=`er=mapEarlyResponse(er,set${n$})
`,U+="if(er){",F&&X.trace){for(let n=0;n<X.trace.length;n++)U+=`report${n}.resolve()
`;XX.resolve()}U+=E$(!1),U+="return er}"}}XX.resolve(),U+="return handleError(c,error,true)",!o&&X.error?.length&&(U+="})()"),U+="}";let L5=H.inject?Object.keys(H.inject).join(",")+",":"",u="const {handler,handleError,hooks:e, "+z6("validator,",V)+"mapResponse,mapCompactResponse,mapEarlyResponse,isNotEmpty,utils:{"+z6("parseQuery,",B)+z6("parseQueryFromURL,",N)+"},error:{"+z6("ValidationError,",V)+z6("ParseError",B)+"},fileType,schema,definitions,tee,ERROR_CODE,"+z6("parseCookie,",I)+z6("signCookie,",I)+z6("decodeURIComponent,",N)+"ElysiaCustomStatusResponse,"+z6("ELYSIA_TRACE,",F)+z6("ELYSIA_REQUEST_ID,",F)+z6("parser,",X.parse?.length)+z6("getServer,",Q.server)+z6("fileUnions,",m0.length)+L5+z6("TypeBoxError",V)+`}=hooks
const trace=e.trace
return ${o?"async ":""}function handle(c){`;X.beforeHandle?.length&&(u+=`let be
`),X.afterHandle?.length&&(u+=`let af
`),X.mapResponse?.length&&(u+=`let mr
`),G&&(u+=`c.schema=schema
c.defs=definitions
`),U=u+U+"}",u="";try{return Function("hooks",`"use strict";
`+U)({handler:Z,hooks:m_(X),validator:V?W:void 0,handleError:$.handleError,mapResponse:z.mapResponse,mapCompactResponse:z.mapCompactResponse,mapEarlyResponse:z.mapEarlyResponse,isNotEmpty:p0,utils:{parseQuery:B?V9:void 0,parseQueryFromURL:N?W.query?.provider==="standard"?wx:KL:void 0},error:{ValidationError:V?s$:void 0,ParseError:B?A3:void 0},fileType:d3,schema:$.router.history,definitions:$.definitions.type,tee:Hx,ERROR_CODE:x5,parseCookie:I?o3:void 0,signCookie:I?i7:void 0,Cookie:I?_1:void 0,decodeURIComponent:N?qx.default:void 0,ElysiaCustomStatusResponse:G6,ELYSIA_TRACE:F?a5:void 0,ELYSIA_REQUEST_ID:F?ZW:void 0,getServer:Q.server?()=>$.getServer():void 0,fileUnions:m0.length?m0:void 0,TypeBoxError:V?p$:void 0,parser:$["~parser"],...H.inject})}catch(a){let f=m_(X);return console.log("[Composer] failed to generate optimized handler"),console.log("---"),console.log({handler:typeof Z=="function"?Z.toString():Z,instruction:U,hooks:{...f,transform:f?.transform?.map?.((n)=>n.toString()),resolve:f?.resolve?.map?.((n)=>n.toString()),beforeHandle:f?.beforeHandle?.map?.((n)=>n.toString()),afterHandle:f?.afterHandle?.map?.((n)=>n.toString()),mapResponse:f?.mapResponse?.map?.((n)=>n.toString()),parse:f?.parse?.map?.((n)=>n.toString()),error:f?.error?.map?.((n)=>n.toString()),afterResponse:f?.afterResponse?.map?.((n)=>n.toString()),stop:f?.stop?.map?.((n)=>n.toString())},validator:W,definitions:$.definitions.type,error:a}),console.log("---"),typeof process?.exit=="function"&&process.exit(1),()=>new Response("Internal Server Error",{status:500})}},LL=($,J)=>{let Y="",X=wH({trace:$.event.trace,addFn:J??((W)=>{Y+=W})})("request",{total:$.event.request?.length});if($.event.request?.length){Y+="try{";for(let W=0;W<$.event.request.length;W++){let Z=$.event.request[W],G=KH(Z),Q=L6(Z),H=X.resolveChild($.event.request[W].fn.name);G?(Y+=`re=mapEarlyResponse(${Q?"await ":""}onRequest[${W}](c),c.set)
`,H("re"),Y+=`if(re!==undefined)return re
`):(Y+=`${Q?"await ":""}onRequest[${W}](c)
`,H())}Y+="}catch(error){return app.handleError(c,error,false)}"}return X.resolve(),Y},qL=($,J="map")=>{let Y=$.extender.higherOrderFunctions;if(!Y.length)return"return "+J;let X=$["~adapter"].composeGeneralHandler,W=J;for(let Z=0;Z<Y.length;Z++)W=`hoc[${Z}](${W},${X.parameters})`;return`return function hocMap(${X.parameters}){return ${W}(${X.parameters})}`},ZU=($)=>{let J=$["~adapter"].composeGeneralHandler;$.router.http.build();let Y=$["~adapter"].isWebStandard,X=$.event.trace?.length,W="",Z=$.router,G=Z.http.root.WS?"const route=router.find(r.method==='GET'&&r.headers.get('upgrade')==='websocket'?'WS':r.method,p)":"const route=router.find(r.method,p)";G+=Z.http.root.ALL?`??router.find('ALL',p)
`:`
`,Y&&(G+='if(r.method==="HEAD"){const route=router.find("GET",p);if(route){c.params=route.params;const _res=route.store.handler?route.store.handler(c):route.store.compile()(c);if(_res)return Promise.resolve(_res).then((_res)=>{if(!_res.headers)_res.headers=new Headers();return getResponseLength(_res).then((length)=>{_res.headers.set("content-length", length);return new Response(null,{status:_res.status,statusText:_res.statusText,headers:_res.headers});})});}}');let Q=`c.error=notFound
`;if($.event.afterResponse?.length&&!$.event.error){Q=`
c.error=notFound
`;let V=$.event.afterResponse.some(L6)?"async":"";Q+=`
${WU}(${V}()=>{if(c.responseValue instanceof ElysiaCustomStatusResponse) c.set.status=c.responseValue.code
`;for(let N=0;N<$.event.afterResponse.length;N++){let P=$.event.afterResponse[N].fn;Q+=`
${_9(P)?"await ":""}afterResponse[${N}](c)
`}Q+=`})
`}$.inference.query&&(Q+=`
if(c.qi===-1){c.query={}}else{c.query=parseQueryFromURL(c.url,c.qi+1)}`);let H=J.error404(!!$.event.request?.length,!!$.event.error?.length,Q);G+=H.code,G+=`
c.params=route.params
if(route.store.handler)return route.store.handler(c)
return route.store.compile()(c)
`;let z="";for(let[V,N]of Object.entries(Z.static)){z+=`case'${V}':`,$.config.strictPath!==!0&&(z+=`case'${f5(V)}':`);let P=g5(V);V!==P&&(z+=`case'${P}':`),z+="switch(r.method){",(("GET"in N)||("WS"in N))&&(z+="case 'GET':",("WS"in N)&&(z+=`if(r.headers.get('upgrade')==='websocket')return ht[${N.WS}].composed(c)
`,("GET"in N)||("ALL"in N?z+=`return ht[${N.ALL}].composed(c)
`:z+=`break map
`)),("GET"in N)&&(z+=`return ht[${N.GET}].composed(c)
`)),Y&&(("GET"in N)||("ALL"in N))&&!("HEAD"in N)&&(z+=`case 'HEAD':return Promise.resolve(ht[${N.GET??N.ALL}].composed(c)).then(_ht=>getResponseLength(_ht).then((length)=>{_ht.headers.set('content-length', length)
return new Response(null,{status:_ht.status,statusText:_ht.statusText,headers:_ht.headers})
}))
`);for(let[B,L]of Object.entries(N))B==="ALL"||B==="GET"||B==="WS"||(z+=`case '${B}':return ht[${L}].composed(c)
`);"ALL"in N?z+=`default:return ht[${N.ALL}].composed(c)
`:z+=`default:break map
`,z+="}"}let K=!!$.event.request?.some(L6),w=J.inject?Object.keys(J.inject).join(",")+",":"";W+=`
const {app,mapEarlyResponse,NotFoundError,randomId,handleError,status,redirect,getResponseLength,ElysiaCustomStatusResponse,`+z6("parseQueryFromURL,",$.inference.query)+z6("ELYSIA_TRACE,",X)+z6("ELYSIA_REQUEST_ID,",X)+w+`}=data
const store=app.singleton.store
const decorator=app.singleton.decorator
const staticRouter=app.router.static.http
const ht=app.router.history
const router=app.router.http
const trace=app.event.trace?.map(x=>typeof x==='function'?x:x.fn)??[]
const notFound=new NotFoundError()
const hoc=app.extender.higherOrderFunctions.map(x=>x.fn)
`,$.event.request?.length&&(W+=`const onRequest=app.event.request.map(x=>x.fn)
`),$.event.afterResponse?.length&&(W+=`const afterResponse=app.event.afterResponse.map(x=>x.fn)
`),W+=H.declare,$.event.trace?.length&&(W+="const "+$.event.trace.map((V,N)=>`tr${N}=app.event.trace[${N}].fn`).join(",")+`
`),W+=`${K?"async ":""}function map(${J.parameters}){`,$.event.request?.length&&(W+=`let re
`),W+=J.createContext($),$.event.trace?.length&&(W+="c[ELYSIA_TRACE]=["+$.event.trace.map((V,N)=>`tr${N}(c)`).join(",")+`]
`),W+=LL($),z&&(W+=`
map: switch(p){
`+z+"}"),W+=G+`}
`+qL($);let F=BL($);$.handleError=F;let U=Function("data",`"use strict";
`+W)({app:$,mapEarlyResponse:$["~adapter"].handler.mapEarlyResponse,NotFoundError:r7,randomId:GW,handleError:F,status:RJ,redirect:WW,getResponseLength:gf,ElysiaCustomStatusResponse:G6,parseQueryFromURL:$.inference.query?KL:void 0,ELYSIA_TRACE:X?a5:void 0,ELYSIA_REQUEST_ID:X?ZW:void 0,...J.inject});return a1&&Bun.gc(!1),U},BL=($)=>{let J=$.event,Y="",X=$["~adapter"].composeError,W=X.inject?Object.keys(X.inject).join(",")+",":"",Z=!!$.event.trace?.length;Y+="const {mapResponse,ERROR_CODE,ElysiaCustomStatusResponse,ValidationError,TransformDecodeError,"+z6("onError,",$.event.error)+z6("afterResponse,",$.event.afterResponse)+z6("trace,",$.event.trace)+z6("onMapResponse,",$.event.mapResponse)+z6("ELYSIA_TRACE,",Z)+z6("ELYSIA_REQUEST_ID,",Z)+W+`}=inject
`,Y+="return async function(context,error,skipGlobal){",Y+="",Z&&(Y+=`const id=context[ELYSIA_REQUEST_ID]
`);let G=wH({context:"context",trace:J.trace,addFn:(w)=>{Y+=w}}),Q=()=>{if(!J.afterResponse?.length&&!Z)return"";let w="",F=J.afterResponse?.some(L6)?"async":"";w+=`
${WU}(${F}()=>{`;let U=wH({context:"context",trace:J.trace,addFn:(V)=>{w+=V}})("afterResponse",{total:J.afterResponse?.length,name:"context"});if(J.afterResponse?.length&&J.afterResponse)for(let V=0;V<J.afterResponse.length;V++){let N=J.afterResponse[V].fn,P=U.resolveChild(N.name);w+=`
${_9(N)?"await ":""}afterResponse[${V}](context)
`,P()}return U.resolve(),w+=`})
`,w};Y+=`const set=context.set
let _r
if(!context.code)context.code=error.code??error[ERROR_CODE]
if(!(context.error instanceof Error))context.error=error
if(error instanceof ElysiaCustomStatusResponse){set.status=error.status=error.code
error.message=error.response}`,X.declare&&(Y+=X.declare);let H=Z||J.afterResponse?.length?"context.response = ":"";if(Y+=`if(typeof error?.toResponse==='function'&&!(error instanceof ValidationError)&&!(error instanceof TransformDecodeError)){try{let raw=error.toResponse()
if(typeof raw?.then==='function')raw=await raw
if(raw instanceof Response)set.status=raw.status
context.response=context.responseValue=raw
}catch(toResponseError){
}
}
`,$.event.error)for(let w=0;w<$.event.error.length;w++){let F=$.event.error[w],U=`${L6(F)?"await ":""}onError[${w}](context)
`;if(Y+="if(skipGlobal!==true&&!context.response){",KH(F)){Y+=`_r=${U}
if(_r!==undefined){if(_r instanceof Response){`+Q()+`return mapResponse(_r,set${X.mapResponseContext})}if(_r instanceof ElysiaCustomStatusResponse){error.status=error.code
error.message=error.response}if(set.status===200||!set.status)set.status=error.status
`;let V=G("mapResponse",{total:J.mapResponse?.length,name:"context"});if(J.mapResponse?.length)for(let N=0;N<J.mapResponse.length;N++){let P=J.mapResponse[N],B=V.resolveChild(P.fn.name);Y+=`context.response=context.responseValue=_r
_r=${_9(P)?"await ":""}onMapResponse[${N}](context)
`,B()}V.resolve(),Y+=Q()+`return mapResponse(${H}_r,set${X.mapResponseContext})}`}else Y+=U;Y+="}"}Y+=`if(error instanceof ValidationError||error instanceof TransformDecodeError){
if(error.error)error=error.error
set.status=error.status??422
`+Q()+X.validationError+`
}
`,Y+="if(!context.response&&error instanceof Error){"+Q()+X.unknownError+`
}`;let z=G("mapResponse",{total:J.mapResponse?.length,name:"context"});if(Y+=`
if(!context.response)context.response=context.responseValue=error.message??error
`,J.mapResponse?.length){Y+=`let mr
`;for(let w=0;w<J.mapResponse.length;w++){let F=J.mapResponse[w],U=z.resolveChild(F.fn.name);Y+=`if(mr===undefined){mr=${_9(F)?"await ":""}onMapResponse[${w}](context)
if(mr!==undefined)error=context.response=context.responseValue=mr}`,U()}}z.resolve(),Y+=Q()+`
return mapResponse(${H}error,set${X.mapResponseContext})}`;let K=(w)=>typeof w=="function"?w:w.fn;return Function("inject",`"use strict";
`+Y)({mapResponse:$["~adapter"].handler.mapResponse,ERROR_CODE:x5,ElysiaCustomStatusResponse:G6,ValidationError:s$,TransformDecodeError:I5,onError:$.event.error?.map(K),afterResponse:$.event.afterResponse?.map(K),trace:$.event.trace?.map(K),onMapResponse:$.event.mapResponse?.map(K),ELYSIA_TRACE:Z?a5:void 0,ELYSIA_REQUEST_ID:Z?ZW:void 0,...X.inject})};var wW=($,J)=>J?$:"",Ox=($,J,Y,X=!1)=>{let W="",Z=$.setHeaders,G=!!$.event.trace?.length;G&&(W+=`const id=randomId()
`);let Q=/[:*]/.test(J.path),H=`const u=request.url,s=u.indexOf('/',${$.config.handler?.standardHostname??!0?11:7}),qi=u.indexOf('?',s+1)
`,z=Y.query||!!J.hooks.query||!!J.hooks.standaloneValidator?.find((w)=>w.query)||$.event.request?.length;z&&(W+=H);let K=Y.path?Q?"get path(){"+(z?"":H)+`if(qi===-1)return u.substring(s)
return u.substring(s,qi)
},`:`path:'${J.path}',`:"";W+=wW("const c=",!X)+"{request,store,"+wW("qi,",z)+wW("params:request.params,",Q)+K+wW("url:request.url,",G||Y.url||z)+"redirect,status,set:{headers:"+(p0(Z)?"Object.assign({},app.setHeaders)":"Object.create(null)")+",status:200}",Y.server&&(W+=",get server(){return app.getServer()}"),G&&(W+=",[ELYSIA_REQUEST_ID]:id");{let w="";for(let F of Object.keys($.singleton.decorator))w+=`,'${F}':decorator['${F}']`;W+=w}return W+=`}
`,W},GU=($,J)=>{let Y=!!$.event.trace?.length,X=!!$.extender.higherOrderFunctions.length,W=i5(J.hooks,$.inference);W=i5({handler:J.handler},W);let Z="const handler=data.handler,app=data.app,store=data.store,decorator=data.decorator,redirect=data.redirect,route=data.route,mapEarlyResponse=data.mapEarlyResponse,"+wW("randomId=data.randomId,",Y)+wW("ELYSIA_REQUEST_ID=data.ELYSIA_REQUEST_ID,",Y)+wW("ELYSIA_TRACE=data.ELYSIA_TRACE,",Y)+wW("trace=data.trace,",Y)+wW("hoc=data.hoc,",X)+`status=data.status
`;$.event.request?.length&&(Z+=`const onRequest=app.event.request.map(x=>x.fn)
`),Z+=`${$.event.request?.find(L6)?"async":""} function map(request){`;let G=W.query||!!J.hooks.query||!!J.hooks.standaloneValidator?.find((Q)=>Q.query);return Y||G||$.event.request?.length?(Z+=Ox($,J,W),Z+=LL($),Z+="return handler(c)}"):Z+=`return handler(${Ox($,J,W,!0)})}`,Z+=qL($),Function("data",Z)({app:$,handler:J.compile?.()??J.composed,redirect:WW,status:RJ,hoc:$.extender.higherOrderFunctions.map((Q)=>Q.fn),store:$.store,decorator:$.decorator,route:J.path,randomId:Y?GW:void 0,ELYSIA_TRACE:Y?a5:void 0,ELYSIA_REQUEST_ID:Y?ZW:void 0,trace:Y?$.event.trace?.map((Q)=>Q?.fn??Q):void 0,mapEarlyResponse:N8})};var Px=($,J,Y)=>{if(typeof $=="function"||$ instanceof Blob)return;if(QU($))return()=>$;let X=_8($ instanceof Response?$.clone():$ instanceof Promise?$.then((W)=>W instanceof Response?W.clone():W):$,Y??{headers:{}});if(!J.parse?.length&&!J.transform?.length&&!J.beforeHandle?.length&&!J.afterHandle?.length)return X instanceof Promise?X.then((W)=>{if(W)return W.headers.has("content-type")||W.headers.append("content-type","text/plain"),W.clone()}):(X.headers.has("content-type")||X.headers.append("content-type","text/plain"),()=>X.clone())};var OL={open($){$.data.open?.($)},message($,J){$.data.message?.($,J)},drain($){$.data.drain?.($)},close($,J,Y){$.data.close?.($,J,Y)},ping($){$.data.ping?.($)},pong($){$.data.pong?.($)}};class QG{constructor($,J,Y=void 0){this.raw=$,this.data=J,this.body=Y,this.validator=$.data?.validator,this.sendText=$.sendText.bind($),this.sendBinary=$.sendBinary.bind($),this.close=$.close.bind($),this.terminate=$.terminate.bind($),this.publishText=$.publishText.bind($),this.publishBinary=$.publishBinary.bind($),this.subscribe=$.subscribe.bind($),this.unsubscribe=$.unsubscribe.bind($),this.isSubscribed=$.isSubscribed.bind($),this.cork=$.cork.bind($),this.remoteAddress=$.remoteAddress,this.binaryType=$.binaryType,this.data=$.data,this.subscriptions=$.subscriptions,this.send=this.send.bind(this),this.ping=this.ping.bind(this),this.pong=this.pong.bind(this),this.publish=this.publish.bind(this)}send($,J){return Buffer.isBuffer($)?this.raw.send($,J):this.validator?.Check($)===!1?this.raw.send(new s$("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.send($,J))}ping($){return Buffer.isBuffer($)?this.raw.ping($):this.validator?.Check($)===!1?this.raw.send(new s$("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.ping($))}pong($){return Buffer.isBuffer($)?this.raw.pong($):this.validator?.Check($)===!1?this.raw.send(new s$("message",this.validator,$).message):(typeof $=="object"&&($=JSON.stringify($)),this.raw.pong($))}publish($,J,Y){return Buffer.isBuffer(J)?this.raw.publish($,J,Y):this.validator?.Check(J)===!1?this.raw.send(new s$("message",this.validator,J).message):(typeof J=="object"&&(J=JSON.stringify(J)),this.raw.publish($,J,Y))}get readyState(){return this.raw.readyState}get id(){return this.data.id}}var Sx=($)=>{let J=typeof $=="function"?[$]:$;return async function(Y,X){if(typeof X=="string"){let W=X?.charCodeAt(0);if(W===34||W===47||W===91||W===123)try{X=JSON.parse(X)}catch{}else O3(X)?X=+X:X==="true"?X=!0:X==="false"?X=!1:X==="null"&&(X=null)}if(J)for(let W=0;W<J.length;W++){let Z=J[W](Y,X);if(Z instanceof Promise&&(Z=await Z),Z!==void 0)return Z}return X}},Ax=($)=>{let J=(Y,X)=>{if(X instanceof Promise)return X.then((Q)=>J(Y,Q));if(Buffer.isBuffer(X))return Y.send(X.toString());if(X===void 0)return;let W=$?$.provider==="standard"?(Q)=>$.schema["~standard"].validate(Q).issues:(Q)=>$.Check(Q)===!1:void 0,Z=(Q)=>{if(W&&W(Q)===!1)return Y.send(new s$("message",$,Q).message);if(typeof Q=="object")return Y.send(JSON.stringify(Q));Y.send(Q)};if(typeof X?.next!="function")return void Z(X);let G=X.next();if(G instanceof Promise)return(async()=>{let Q=await G;if(W&&W(Q))return Y.send(new s$("message",$,Q).message);if(Z(Q.value),!Q.done)for await(let H of X)Z(H)})();if(Z(G.value),!G.done)for(let Q of X)Z(Q)};return J};var R9$=/:.+?\?(?=\/|$)/,jx=($)=>{let J=R9$.exec($);if(!J)return[$];let Y=[],X=$.slice(0,J.index),W=J[0].slice(0,-1),Z=$.slice(J.index+J[0].length);Y.push(X.slice(0,-1)),Y.push(X+W);for(let G of jx(Z))G&&(G.startsWith("/:")||Y.push(X.slice(0,-1)+G),Y.push(X+W+G));return Y},QU=($)=>typeof $=="object"&&$!==null&&($.toString()==="[object HTMLBundle]"||typeof $.index=="string"),Ex={GET:!0,HEAD:!0,OPTIONS:!0,DELETE:!0,PATCH:!0,POST:!0,PUT:!0},PL=($)=>{if(!$.config.aot||$.config.systemRouter===!1)return;let J={},Y=(W,Z)=>{let G=encodeURI(W.path);J[G]?J[G][W.method]||(J[G][W.method]=Z):J[G]={[W.method]:Z}},X=$.routeTree;for(let W of $.router.history){if(typeof W.handler!="function")continue;let Z=W.method;if(Z==="GET"&&`WS_${W.path}`in X||Z==="WS"||W.path.charCodeAt(W.path.length-1)===42||!(Z in Ex))continue;if(Z==="ALL"){`WS_${W.path}`in X||(J[W.path]=W.hooks?.config?.mount?W.hooks.trace||$.event.trace||$.extender.higherOrderFunctions?GU($,W):W.hooks.mount||W.handler:W.handler);continue}let G,Q=$.config.precompile?GU($,W):(H)=>G?G(H):(G=GU($,W))(H);for(let H of jx(W.path))Y({method:Z,path:H},Q)}return J},HG=($,J)=>{if(!J)return $;for(let Y of Object.keys(J))if($[Y]!==J[Y]){if(!$[Y]){$[Y]=J[Y];continue}if($[Y]&&J[Y]){if(typeof $[Y]=="function"||$[Y]instanceof Response){$[Y]=J[Y];continue}$[Y]={...$[Y],...J[Y]}}}return $},Cx={...ZH,name:"bun",handler:{mapResponse:_8,mapEarlyResponse:N8,mapCompactResponse:OY,createStaticHandler:Kx,createNativeStaticHandler:Px},composeHandler:{...ZH.composeHandler,headers:nQ?`c.headers=c.request.headers.toJSON()
`:`c.headers={}
for(const [k,v] of c.request.headers.entries())c.headers[k]=v
`},listen($){return(J,Y)=>{if(typeof Bun>"u")throw Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if($.compile(),typeof J=="string"){if(!O3(J))throw Error("Port must be a numeric value");J=parseInt(J)}let X=(Z,{withAsync:G=!1}={})=>{let Q={},H=[];for(let[z,K]of Object.entries(Z))if(z=encodeURI(z),S3){if(!K)continue;for(let[w,F]of Object.entries(K))if(!(!F||!(w in Ex))){if(F instanceof Promise){G&&(Q[z]||(Q[z]={}),H.push(F.then((U)=>{U instanceof Response&&(Q[z][w]=U),QU(U)&&(Q[z][w]=U)})));continue}!(F instanceof Response)&&!QU(F)||(Q[z]||(Q[z]={}),Q[z][w]=F)}}else{if(!K)continue;if(K instanceof Promise){G&&(Q[z]||(Q[z]={}),H.push(K.then((w)=>{w instanceof Response&&(Q[z]=w)})));continue}if(!(K instanceof Response))continue;Q[z]=K}return G?Promise.all(H).then(()=>Q):Q},W=typeof J=="object"?{development:!HW,reusePort:!0,idleTimeout:30,...$.config.serve||{},...J||{},routes:HG(HG(X($.router.response),PL($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...OL||{},...J.websocket||{}},fetch:$.fetch}:{development:!HW,reusePort:!0,idleTimeout:30,...$.config.serve||{},routes:HG(HG(X($.router.response),PL($)),$.config.serve?.routes),websocket:{...$.config.websocket||{},...OL||{}},port:J,fetch:$.fetch};if($.server=Bun.serve(W),$.event.start)for(let Z=0;Z<$.event.start.length;Z++)$.event.start[Z].fn($);Y&&Y($.server),process.on("beforeExit",async()=>{if($.server&&(await $.server.stop?.(),$.server=null,$.event.stop))for(let Z=0;Z<$.event.stop.length;Z++)$.event.stop[Z].fn($)}),$.promisedModules.then(async()=>{$.config.aot,$.compile(),$.server?.reload({...W,fetch:$.fetch,routes:HG(HG(await X($.router.response,{withAsync:!0}),PL($)),$.config.serve?.routes)}),Bun?.gc(!1)})}},async stop($,J){if($.server){if(await $.server.stop(J),$.server=null,$.event.stop?.length)for(let Y=0;Y<$.event.stop.length;Y++)$.event.stop[Y].fn($)}else console.log("Elysia isn't running. Call `app.listen` to start the server.",Error().stack)},ws($,J,Y){let{parse:X,body:W,response:Z,...G}=Y,Q=H6(W,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize}),H=Q?Q.provider==="standard"?(K)=>Q.schema["~standard"].validate(K).issues:(K)=>Q.Check(K)===!1:void 0,z=H6(Z,{modules:$.definitions.typebox,models:$.definitions.type,normalize:$.config.normalize});$.route("WS",J,async(K)=>{let w=K.server??$.server,{set:F,path:U,qi:V,headers:N,query:P,params:B}=K;if(K.validator=z,Y.upgrade)if(typeof Y.upgrade=="function"){let D=Y.upgrade(K);D instanceof Promise&&await D}else Y.upgrade&&Object.assign(F.headers,Y.upgrade);if(F.cookie&&p0(F.cookie)){let D=YH(F.cookie);D&&(F.headers["set-cookie"]=D)}F.headers["set-cookie"]&&Array.isArray(F.headers["set-cookie"])&&(F.headers=zL(new Headers(F.headers),F.headers["set-cookie"]));let L=Ax(z),g=Sx(X),k;if(typeof Y.beforeHandle=="function"){let D=Y.beforeHandle(K);D instanceof Promise&&await D}let I=[...Y.error?Array.isArray(Y.error)?Y.error:[Y.error]:[],...($.event.error??[]).map((D)=>typeof D=="function"?D:D.fn)].filter((D)=>D),O=I.length>0,b=O?async(D,_)=>{for(let q of I){let S=q(Object.assign(K,{error:_}));if(S instanceof Promise&&(S=await S),await L(D,S),S)break}}:()=>{};if(!w?.upgrade(K.request,{headers:p0(F.headers)?F.headers:void 0,data:{...K,get id(){return k||(k=GW())},validator:z,ping(D,_){Y.ping?.(D,_)},pong(D,_){Y.pong?.(D,_)},open:async(D)=>{try{await L(D,Y.open?.(new QG(D,K)))}catch(_){b(D,_)}},message:async(D,_)=>{let q=await g(D,_);if(H&&H(q)){let S=new s$("message",Q,q);return O?b(D,S):void D.send(S.message)}try{await L(D,Y.message?.(new QG(D,K,q),q))}catch(S){b(D,S)}},drain:async(D)=>{try{await L(D,Y.drain?.(new QG(D,K)))}catch(_){b(D,_)}},close:async(D,_,q)=>{try{await L(D,Y.close?.(new QG(D,K),_,q))}catch(S){b(D,S)}}}}))return RJ(400,"Expected a websocket connection")},{...G,websocket:Y})}};var kx=/^(.+)\[(\d+)\]$/,Tx=new Set(["__proto__","constructor","prototype"]),Rx=($)=>{if(Tx.has($))return!0;let J=$.match(kx);return J?Tx.has(J[1]):!1},Ix=($)=>{let J=$.match(kx);return J?{name:J[1],index:parseInt(J[2],10)}:null},I9$=($)=>{if(!(typeof $!="string"||$.charCodeAt(0)!==123))try{let J=JSON.parse($);if(J&&typeof J=="object"&&!Array.isArray(J))return J}catch{return}},SL=($,J,Y)=>{let X=J.split("."),W=X.pop();if(Rx(W)||X.some(Rx))return;let Z=$;for(let Q of X){let H=Ix(Q);if(H){Array.isArray(Z[H.name])||(Z[H.name]=[]);let z=Z[H.name][H.index],K=typeof File<"u"&&z instanceof File;(!z||typeof z!="object"||Array.isArray(z)||K)&&(Z[H.name][H.index]=I9$(z)??{}),Z=Z[H.name][H.index]}else(!Z[Q]||typeof Z[Q]!="object")&&(Z[Q]={}),Z=Z[Q]}let G=Ix(W);G?(Array.isArray(Z[G.name])||(Z[G.name]=[]),Z[G.name][G.index]=Y):Z[W]=Y},AL=($)=>{if($.length===1){let W=$[0];if(typeof W=="string"&&(W.charCodeAt(0)===123||W.charCodeAt(0)===91))try{let Z=JSON.parse(W);if(Z&&typeof Z=="object")return Z}catch{}return $[0]}let J=$.find((W)=>typeof W=="string");if(!J||typeof File>"u")return $;let Y=$.filter((W)=>W instanceof File);if(!Y.length||J.charCodeAt(0)!==123)return $;let X;try{X=JSON.parse(J)}catch{return $}return typeof X!="object"||X===null?$:(!("file"in X)&&Y.length===1?X.file=Y[0]:!("files"in X)&&Y.length>1&&(X.files=Y),X)},jL=($,J)=>{let Y=$.schema;if(!Y)return;Y.$defs?.[Y.$ref]&&(Y=Y.$defs[Y.$ref]);let X=DX(Y);if(X)for(let[W,Z]of Object.entries(X))J[W]??=Z.default},EL=($)=>{let{mapResponse:J,mapEarlyResponse:Y}=$["~adapter"].handler,X=$.setHeaders;return async(W)=>{let Z=W.url,G=Z.indexOf("/",11),Q=Z.indexOf("?",G+1),H=Q===-1?Z.substring(G):Z.substring(G,Q),z={cookie:{},status:200,headers:X?{...X}:{}},K=Object.assign({},$.singleton.decorator,{set:z,store:$.singleton.store,request:W,path:H,qi:Q,error:RJ,status:RJ,redirect:WW}),w;try{if($.event.request)for(let _=0;_<$.event.request.length;_++){let q=$.event.request[_].fn,S=q(K);if(S instanceof Promise&&(S=await S),S=Y(S,z),S)return K.response=S}let F=W.method==="GET"&&W.headers.get("upgrade")?.toLowerCase()==="websocket"?"WS":W.method,U=$.router.dynamic.find(W.method,H)??$.router.dynamic.find(F,H)??$.router.dynamic.find("ALL",H);if(!U)throw K.query=Q===-1?{}:V9(Z.substring(Q+1)),new r7;let{handle:V,validator:N,content:P,route:B}=U.store;if(w=U.store.hooks,w.config?.mount)return await w.config.mount(W);let L;if(W.method!=="GET"&&W.method!=="HEAD")if(P)switch(P){case"application/json":L=await W.json();break;case"text/plain":L=await W.text();break;case"application/x-www-form-urlencoded":L=V9(await W.text());break;case"application/octet-stream":L=await W.arrayBuffer();break;case"multipart/form-data":{L={};let _=await W.formData();for(let q of _.keys()){if(L[q])continue;let S=_.getAll(q),j=AL(S);q.includes(".")||q.includes("[")?SL(L,q,j):L[q]=j}break}}else{let _;if(W.body&&(_=W.headers.get("content-type")),_){let q=_.indexOf(";");if(q!==-1&&(_=_.slice(0,q)),K.contentType=_,w.parse)for(let S=0;S<w.parse.length;S++){let j=w.parse[S].fn;if(typeof j=="string")switch(j){case"json":case"application/json":L=await W.json();break;case"text":case"text/plain":L=await W.text();break;case"urlencoded":case"application/x-www-form-urlencoded":L=V9(await W.text());break;case"arrayBuffer":case"application/octet-stream":L=await W.arrayBuffer();break;case"formdata":case"multipart/form-data":{L={};let E=await W.formData();for(let T of E.keys()){if(L[T])continue;let R=E.getAll(T),v=AL(R);T.includes(".")||T.includes("[")?SL(L,T,v):L[T]=v}break}default:{let E=$["~parser"][j];if(E){let T=E(K,_);if(T instanceof Promise&&(T=await T),T){L=T;break}}break}}else{let E=j(K,_);if(E instanceof Promise&&(E=await E),E){L=E;break}}}if(delete K.contentType,L===void 0)switch(_){case"application/json":L=await W.json();break;case"text/plain":L=await W.text();break;case"application/x-www-form-urlencoded":L=V9(await W.text());break;case"application/octet-stream":L=await W.arrayBuffer();break;case"multipart/form-data":{L={};let S=await W.formData();for(let j of S.keys()){if(L[j])continue;let E=S.getAll(j),T=AL(E);j.includes(".")||j.includes("[")?SL(L,j,T):L[j]=T}break}}}}K.route=B,K.body=L,K.params=U?.params||void 0,K.query=Q===-1?{}:V9(Z.substring(Q+1)),K.headers={};for(let[_,q]of W.headers.entries())K.headers[_]=q;let g={domain:$.config.cookie?.domain??N?.cookie?.config.domain,expires:$.config.cookie?.expires??N?.cookie?.config.expires,httpOnly:$.config.cookie?.httpOnly??N?.cookie?.config.httpOnly,maxAge:$.config.cookie?.maxAge??N?.cookie?.config.maxAge,path:$.config.cookie?.path??N?.cookie?.config.path,priority:$.config.cookie?.priority??N?.cookie?.config.priority,partitioned:$.config.cookie?.partitioned??N?.cookie?.config.partitioned,sameSite:$.config.cookie?.sameSite??N?.cookie?.config.sameSite,secure:$.config.cookie?.secure??N?.cookie?.config.secure,secrets:$.config.cookie?.secrets??N?.cookie?.config.secrets,sign:$.config.cookie?.sign??N?.cookie?.config.sign},k=W.headers.get("cookie");K.cookie=await o3(K.set,k,g);let I=N?.createHeaders?.();I&&jL(I,K.headers);let O=N?.createParams?.();O&&jL(O,K.params);let b=N?.createQuery?.();if(b&&jL(b,K.query),w.transform)for(let _=0;_<w.transform.length;_++){let q=w.transform[_],S=q.fn(K);if(S instanceof Promise&&(S=await S),S instanceof G6){let j=Y(S,K.set);if(j)return K.response=j}q.subType==="derive"&&Object.assign(K,S)}if(N){if(I){let _=structuredClone(K.headers);for(let[q,S]of W.headers)_[q]=S;if(N.headers.Check(_)===!1)throw new s$("header",N.headers,_)}else N.headers?.Decode&&(K.headers=N.headers.Decode(K.headers));if(O?.Check(K.params)===!1)throw new s$("params",N.params,K.params);if(N.params?.Decode&&(K.params=N.params.Decode(K.params)),N.query?.schema){let _=N.query.schema;_.$defs?.[_.$ref]&&(_=_.$defs[_.$ref]);let q=DX(_);if(q)for(let S of Object.keys(q)){let j=q[S];(j.type==="array"||j.items?.type==="string")&&typeof K.query[S]=="string"&&K.query[S]&&(K.query[S]=K.query[S].split(","))}}if(b?.Check(K.query)===!1)throw new s$("query",N.query,K.query);if(N.query?.Decode&&(K.query=N.query.Decode(K.query)),N.createCookie?.()){let _={};for(let[q,S]of Object.entries(K.cookie))_[q]=S.value;if(N.cookie.Check(_)===!1)throw new s$("cookie",N.cookie,_);N.cookie?.Decode&&(_=N.cookie.Decode(_))}if(N.createBody?.()?.Check(L)===!1)throw new s$("body",N.body,L);if(N.body?.Decode){let _=N.body.Decode(L);_ instanceof Promise&&(_=await _),K.body=_?.value??_}}if(w.beforeHandle)for(let _=0;_<w.beforeHandle.length;_++){let q=w.beforeHandle[_],S=q.fn(K);if(S instanceof Promise&&(S=await S),S instanceof G6){let j=Y(S,K.set);if(j)return K.response=j}if(q.subType==="resolve"){Object.assign(K,S);continue}if(S!==void 0){if(K.response=S,w.afterHandle)for(let E=0;E<w.afterHandle.length;E++){let T=w.afterHandle[E].fn(K);T instanceof Promise&&(T=await T),T&&(S=T)}let j=Y(S,K.set);if(j)return K.response=j}}let D=typeof V=="function"?V(K):V;if(D instanceof Promise&&(D=await D),w.afterHandle?.length){K.response=D;for(let _=0;_<w.afterHandle.length;_++){let q=w.afterHandle[_].fn(K);q instanceof Promise&&(q=await q);let S=q instanceof G6,j=S?q.code:z.status?typeof z.status=="string"?HX[z.status]:z.status:200;S&&(z.status=j,q=q.response);let E=N?.createResponse?.()?.[j];if(E?.Check(q)===!1)if(E?.Clean)try{let R=E.Clean(q);if(E?.Check(R)===!1)throw new s$("response",E,q);q=R}catch(R){throw R instanceof s$?R:new s$("response",E,q)}else throw new s$("response",E,q);if(E?.Encode&&(K.response=q=E.Encode(q)),E?.Clean)try{K.response=q=E.Clean(q)}catch{}let T=Y(q,K.set);if(T!==void 0)return K.response=T}}else{let _=D instanceof G6,q=_?D.code:z.status?typeof z.status=="string"?HX[z.status]:z.status:200;_&&(z.status=q,D=D.response);let S=N?.createResponse?.()?.[q];if(S?.Check(D)===!1)if(S?.Clean)try{let j=S.Clean(D);if(S?.Check(j)===!1)throw new s$("response",S,D);D=j}catch(j){throw j instanceof s$?j:new s$("response",S,D)}else throw new s$("response",S,D);if(S?.Encode&&(D=S.Encode(D)),S?.Clean)try{D=S.Clean(D)}catch{}}if(K.set.cookie&&g?.sign){let _=g.secrets?typeof g.secrets=="string"?g.secrets:g.secrets[0]:void 0;if(g.sign===!0){if(_)for(let[q,S]of Object.entries(K.set.cookie))K.set.cookie[q].value=await i7(S.value,_)}else{let q=DX(N?.cookie?.schema);if(_)for(let S of g.sign)!q||!(S in q)||K.set.cookie[S]?.value&&(K.set.cookie[S].value=await i7(K.set.cookie[S].value,_))}}return J(K.response=D,K.set)}catch(F){let U=F instanceof I5&&F.error?F.error:F;return $.handleError(K,U)}finally{let F=w?w.afterResponse:$.event.afterResponse;F&&(q3?setImmediate(async()=>{for(let U of F)await U.fn(K)}):Promise.resolve().then(async()=>{for(let U of F)await U.fn(K)}))}}},bx=($)=>{let{mapResponse:J}=$["~adapter"].handler;return async(Y,X)=>{let W=Object.assign(Y,{error:X,code:X.code});if(W.set=Y.set,typeof X?.toResponse=="function"&&!(X instanceof s$)&&!(X instanceof I5))try{let Z=X.toResponse();typeof Z?.then=="function"&&(Z=await Z),Z instanceof Response&&(Y.set.status=Z.status),Y.response=Z}catch{}if(!Y.response&&$.event.error)for(let Z=0;Z<$.event.error.length;Z++){let G=$.event.error[Z].fn(W);if(G instanceof Promise&&(G=await G),G!=null)return Y.response=J(G,Y.set)}if(Y.response){if($.event.mapResponse)for(let Z=0;Z<$.event.mapResponse.length;Z++){let G=$.event.mapResponse[Z].fn(W);G instanceof Promise&&(G=await G),G!=null&&(Y.response=G)}return J(Y.response,Y.set)}return Y.set.status=X.status??500,J(typeof X.cause=="string"?X.cause:X.message,Y.set)}};var vx;vx=Symbol.dispose;var k9$=class ${constructor(J={}){this.server=null,this.dependencies={},this["~Prefix"]="",this["~Singleton"]=null,this["~Definitions"]=null,this["~Metadata"]=null,this["~Ephemeral"]=null,this["~Volatile"]=null,this["~Routes"]=null,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={typebox:Q$.Module({}),type:{},error:{}},this.extender={macro:{},higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return!this.global&&!this.scoped&&!this.local?{body:void 0,headers:void 0,params:void 0,query:void 0,cookie:void 0,response:void 0}:n7(n7(this.global,this.scoped),this.local)}},this.standaloneValidator={global:null,scoped:null,local:null},this.event={},this.router={"~http":void 0,get http(){return this["~http"]||(this["~http"]=new uN({lazy:!0,onParam:CL.default})),this["~http"]},"~dynamic":void 0,get dynamic(){return this["~dynamic"]||(this["~dynamic"]=new uN({onParam:CL.default})),this["~dynamic"]},static:{},response:{},history:[]},this.routeTree={},this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1,path:!1,route:!1,url:!1},this["~parser"]={},this.handle=async(Y)=>this.fetch(Y),this.handleError=async(Y,X)=>(this.handleError=this.config.aot?BL(this):bx(this))(Y,X),this.listen=(Y,X)=>(this["~adapter"].listen(this)(Y,X),this),this.stop=async(Y)=>(await this["~adapter"].stop?.(this,Y),this),this[vx]=()=>{this.server&&this.stop()},J.tags&&(J.detail?J.detail.tags=J.tags:J.detail={tags:J.tags}),this.config={aot:r5.ELYSIA_AOT!=="false",nativeStaticResponse:!0,encodeSchema:!0,normalize:!0,...J,prefix:J.prefix?J.prefix.charCodeAt(0)===47?J.prefix:`/${J.prefix}`:void 0,cookie:{path:"/",...J?.cookie},experimental:J?.experimental??{},seed:J?.seed===void 0?"":J?.seed},this["~adapter"]=J.adapter??(typeof Bun<"u"?Cx:ZH),J?.analytic&&(J?.name||J?.seed!==void 0)&&(this.telemetry={stack:Error().stack})}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getGlobalDefinitions(){return this.definitions}getServer(){return this.server}getParent(){return null}get promisedModules(){return this._promisedModules||(this._promisedModules=new y_(console.error,()=>{})),this._promisedModules}env(J,Y=r5){if(H6(J,{modules:this.definitions.typebox,dynamic:!0,additionalProperties:!0,coerce:!0,sanitize:()=>this.config.sanitize}).Check(Y)===!1){let X=new s$("env",J,Y);throw Error(X.all.map((W)=>W.summary).join(`
`))}return this}wrap(J){return this.extender.higherOrderFunctions.push({checksum:w9(JSON.stringify({name:this.config.name,seed:this.config.seed,content:J.toString()})),fn:J}),this}get models(){let J={};for(let Y of Object.keys(this.definitions.type))J[Y]=H6(this.definitions.typebox.Import(Y),{models:this.definitions.type});return J.modules=this.definitions.typebox,J}add(J,Y,X,W,Z){let G=Z?.skipPrefix??!1,Q=Z?.allowMeta??!1;W??={},this.applyMacro(W);let H=[];if(W.standaloneValidator&&(H=H.concat(W.standaloneValidator)),this.standaloneValidator.local&&(H=H.concat(this.standaloneValidator.local)),this.standaloneValidator.scoped&&(H=H.concat(this.standaloneValidator.scoped)),this.standaloneValidator.global&&(H=H.concat(this.standaloneValidator.global)),Y!==""&&Y.charCodeAt(0)!==47&&(Y="/"+Y),this.config.prefix&&!G&&(Y=this.config.prefix+Y),W?.type)switch(W.type){case"text":W.type="text/plain";break;case"json":W.type="application/json";break;case"formdata":W.type="multipart/form-data";break;case"urlencoded":W.type="application/x-www-form-urlencoded";break;case"arrayBuffer":W.type="application/octet-stream";break;default:break}let z=this.validator.getCandidate(),K={body:W?.body??z?.body,headers:W?.headers??z?.headers,params:W?.params??z?.params,query:W?.query??z?.query,cookie:W?.cookie??z?.cookie,response:W?.response??z?.response},w=this.config.precompile===!0||typeof this.config.precompile=="object"&&this.config.precompile.compose===!0,F=()=>{let S=this.definitions.type,j=!this.config.aot,E=this.config.normalize,T=this.definitions.typebox,R=()=>this.config.sanitize,v=()=>{if(K.cookie||H.find((h)=>h.cookie))return Lx({modules:T,validator:K.cookie,defaultConfig:this.config.cookie,normalize:E,config:K.cookie?.config??{},dynamic:j,models:S,validators:H.map((h)=>h.cookie),sanitize:R})};return w?{body:H6(K.body,{modules:T,dynamic:j,models:S,normalize:E,additionalCoerce:(()=>{let h=_L(K.body,S,T);return h&&l in h&&(J8("File",h)||J8("Files",h))?VL():HH()})(),validators:H.map((h)=>h.body),sanitize:R}),headers:H6(K.headers,{modules:T,dynamic:j,models:S,additionalProperties:!0,coerce:!0,additionalCoerce:s5(),validators:H.map((h)=>h.headers),sanitize:R}),params:H6(K.params,{modules:T,dynamic:j,models:S,coerce:!0,additionalCoerce:s5(),validators:H.map((h)=>h.params),sanitize:R}),query:H6(K.query,{modules:T,dynamic:j,models:S,normalize:E,coerce:!0,additionalCoerce:ML(),validators:H.map((h)=>h.query),sanitize:R}),cookie:v(),response:YU(K.response,{modules:T,dynamic:j,models:S,normalize:E,validators:H.map((h)=>h.response),sanitize:R})}:{createBody(){return this.body?this.body:this.body=H6(K.body,{modules:T,dynamic:j,models:S,normalize:E,additionalCoerce:(()=>{let h=_L(K.body,S,T);return h&&l in h&&(J8("File",h)||J8("Files",h))?VL():HH()})(),validators:H.map((h)=>h.body),sanitize:R})},createHeaders(){return this.headers?this.headers:this.headers=H6(K.headers,{modules:T,dynamic:j,models:S,normalize:E,additionalProperties:!E,coerce:!0,additionalCoerce:s5(),validators:H.map((h)=>h.headers),sanitize:R})},createParams(){return this.params?this.params:this.params=H6(K.params,{modules:T,dynamic:j,models:S,normalize:E,coerce:!0,additionalCoerce:s5(),validators:H.map((h)=>h.params),sanitize:R})},createQuery(){return this.query?this.query:this.query=H6(K.query,{modules:T,dynamic:j,models:S,normalize:E,coerce:!0,additionalCoerce:ML(),validators:H.map((h)=>h.query),sanitize:R})},createCookie(){return this.cookie?this.cookie:this.cookie=v()},createResponse(){return this.response?this.response:this.response=YU(K.response,{modules:T,dynamic:j,models:S,normalize:E,validators:H.map((h)=>h.response),sanitize:R})}}};(z.body||z.cookie||z.headers||z.params||z.query||z.response)&&(W=XW(W,z)),W.tags&&(W.detail?W.detail.tags=W.tags:W.detail={tags:W.tags}),p0(this.config.detail)&&(W.detail=y6(Object.assign({},this.config.detail),W.detail));let U=p0(this.event)?XW(this.event,h_(W)):{...bf(h_(W))};if(H.length&&Object.assign(U,{standaloneValidator:H}),this.config.aot===!1){let S=F();this.router.dynamic.add(J,Y,{validator:S,hooks:U,content:W?.type,handle:X,route:Y});let j=g5(Y,{dynamic:!0});if(Y!==j&&this.router.dynamic.add(J,j,{validator:S,hooks:U,content:W?.type,handle:X,route:Y}),!this.config.strictPath){let E=f5(Y);this.router.dynamic.add(J,E,{validator:S,hooks:U,content:W?.type,handle:X,route:Y});let T=g5(E);E!==T&&this.router.dynamic.add(J,E,{validator:S,hooks:U,content:W?.type,handle:X,route:Y})}this.router.history.push({method:J,path:Y,composed:null,handler:X,compile:void 0,hooks:U});return}let V=this["~adapter"].handler,N=typeof X!="function"?()=>{let S={redirect:WW,request:this["~adapter"].isWebStandard?new Request(`http://ely.sia${Y}`,{method:J}):void 0,server:null,set:{headers:Object.assign({},this.setHeaders)},status:RJ,store:this.store};try{this.event.request?.map((E)=>{if(typeof E.fn=="function")return E.fn(S);if(typeof E=="function")return E(S)})}catch(E){let T;S.error=E,this.event.error?.some((R)=>{if(typeof R.fn=="function")return T=R.fn(S);if(typeof R=="function")return T=R(S)}),T!==void 0&&(X=T)}let j=V.createNativeStaticHandler?.(X,U,S.set);return j instanceof Promise?j.then((E)=>{if(E)return E}):j?.()}:void 0,P=this.config.nativeStaticResponse===!0,B=(S)=>{!P||!N||(S3?this.router.response[S]?this.router.response[S][J]=N():this.router.response[S]={[J]:N()}:this.router.response[S]=N())};B(Y);let L,g=()=>{if(L)return L;let S=Bx({app:this,path:Y,method:J,hooks:U,validator:F(),handler:typeof X!="function"&&typeof V.createStaticHandler!="function"?()=>X:X,allowMeta:Q,inference:this.inference});return this.router.history[I]&&(L=this.router.history[I].composed=S),S},k;if(`${J}_${Y}`in this.routeTree)for(let S=0;S<this.router.history.length;S++){let j=this.router.history[S];if(j.path===Y&&j.method===J){k=S;break}}else this.routeTree[`${J}_${Y}`]=this.router.history.length;let I=k??this.router.history.length,O=this.router.history,b=w?g():(S)=>L?L(S):(O[I].composed=g())(S);k!==void 0?this.router.history[k]=Object.assign({method:J,path:Y,composed:b,compile:g,handler:X,hooks:U},H.length?{standaloneValidators:H}:void 0,W.webSocket?{websocket:W.websocket}:void 0):this.router.history.push(Object.assign({method:J,path:Y,composed:b,compile:g,handler:X,hooks:U},W.webSocket?{websocket:W.websocket}:void 0));let D={handler:w?O[I].composed:void 0,compile(){return this.handler=g()}},_=this.router.static,q=Y.indexOf(":")===-1&&Y.indexOf("*")===-1;if(J==="WS"){if(q){Y in _?_[Y][J]=I:_[Y]={[J]:I};return}this.router.http.add("WS",Y,D),this.config.strictPath||this.router.http.add("WS",f5(Y),D);let S=g5(Y,{dynamic:!0});Y!==S&&this.router.http.add("WS",S,D);return}if(q)Y in _?_[Y][J]=I:_[Y]={[J]:I},this.config.strictPath||B(f5(Y));else{if(this.router.http.add(J,Y,D),!this.config.strictPath){let j=f5(Y);B(j),this.router.http.add(J,j,D)}let S=g5(Y,{dynamic:!0});Y!==S&&(this.router.http.add(J,S,D),B(S))}}headers(J){return J?(this.setHeaders||(this.setHeaders={}),this.setHeaders=y6(this.setHeaders,J),this):this}onStart(J){return this.on("start",J),this}onRequest(J){return this.on("request",J),this}onParse(J,Y){return Y?this.on(J,"parse",Y):typeof J=="string"?this.on("parse",this["~parser"][J]):this.on("parse",J)}parser(J,Y){return this["~parser"][J]=Y,this}onTransform(J,Y){return Y?this.on(J,"transform",Y):this.on("transform",J)}resolve(J,Y){Y||(Y=J,J={as:"local"});let X={subType:"resolve",fn:Y};return this.onBeforeHandle(J,X)}mapResolve(J,Y){Y||(Y=J,J={as:"local"});let X={subType:"mapResolve",fn:Y};return this.onBeforeHandle(J,X)}onBeforeHandle(J,Y){return Y?this.on(J,"beforeHandle",Y):this.on("beforeHandle",J)}onAfterHandle(J,Y){return Y?this.on(J,"afterHandle",Y):this.on("afterHandle",J)}mapResponse(J,Y){return Y?this.on(J,"mapResponse",Y):this.on("mapResponse",J)}onAfterResponse(J,Y){return Y?this.on(J,"afterResponse",Y):this.on("afterResponse",J)}trace(J,Y){Y||(Y=J,J={as:"local"}),Array.isArray(Y)||(Y=[Y]);for(let X of Y)this.on(J,"trace",Ux(X));return this}error(J,Y){switch(typeof J){case"string":return Y.prototype[x5]=J,this.definitions.error[J]=Y,this;case"function":return this.definitions.error=J(this.definitions.error),this}for(let[X,W]of Object.entries(J))W.prototype[x5]=X,this.definitions.error[X]=W;return this}onError(J,Y){return Y?this.on(J,"error",Y):this.on("error",J)}onStop(J){return this.on("stop",J),this}on(J,Y,X){let W;switch(typeof J){case"string":W=J,X=Y;break;case"object":W=Y,!Array.isArray(Y)&&typeof Y=="object"&&(X=Y);break}Array.isArray(X)?X=x6(X):typeof X=="function"?X=[{fn:X}]:X=[X];let Z=X;for(let G of Z)G.scope=typeof J=="string"?"local":J?.as??"local",(W==="resolve"||W==="derive")&&(G.subType=W);W!=="trace"&&(this.inference=i5({[W]:Z.map((G)=>G.fn)},this.inference,this.config.sucrose));for(let G of Z){let Q=vf(G,"global",{skipIfHasType:!0});switch(W){case"start":this.event.start??=[],this.event.start.push(Q);break;case"request":this.event.request??=[],this.event.request.push(Q);break;case"parse":this.event.parse??=[],this.event.parse.push(Q);break;case"transform":this.event.transform??=[],this.event.transform.push(Q);break;case"derive":this.event.transform??=[],this.event.transform.push(x6(Q,"derive"));break;case"beforeHandle":this.event.beforeHandle??=[],this.event.beforeHandle.push(Q);break;case"resolve":this.event.beforeHandle??=[],this.event.beforeHandle.push(x6(Q,"resolve"));break;case"afterHandle":this.event.afterHandle??=[],this.event.afterHandle.push(Q);break;case"mapResponse":this.event.mapResponse??=[],this.event.mapResponse.push(Q);break;case"afterResponse":this.event.afterResponse??=[],this.event.afterResponse.push(Q);break;case"trace":this.event.trace??=[],this.event.trace.push(Q);break;case"error":this.event.error??=[],this.event.error.push(Q);break;case"stop":this.event.stop??=[],this.event.stop.push(Q);break}}return this}as(J){return QW(this.event.parse,J),QW(this.event.transform,J),QW(this.event.beforeHandle,J),QW(this.event.afterHandle,J),QW(this.event.mapResponse,J),QW(this.event.afterResponse,J),QW(this.event.trace,J),QW(this.event.error,J),J==="scoped"?(this.validator.scoped=n7(this.validator.scoped,this.validator.local),this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null)):J==="global"&&(this.validator.global=n7(this.validator.global,n7(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null,this.standaloneValidator.local!==null&&(this.standaloneValidator.scoped||=[],this.standaloneValidator.scoped.push(...this.standaloneValidator.local),this.standaloneValidator.local=null),this.standaloneValidator.scoped!==null&&(this.standaloneValidator.global||=[],this.standaloneValidator.global.push(...this.standaloneValidator.scoped),this.standaloneValidator.scoped=null)),this}group(J,Y,X){let W=new $({...this.config,prefix:""});W.singleton={...this.singleton},W.definitions={...this.definitions},W.getServer=()=>this.getServer(),W.inference=P3(this.inference),W.extender={...this.extender},W["~parser"]=this["~parser"],W.standaloneValidator={local:[...this.standaloneValidator.local??[]],scoped:[...this.standaloneValidator.scoped??[]],global:[...this.standaloneValidator.global??[]]};let Z=typeof Y=="object",G=(Z?X:Y)(W);return this.singleton=y6(this.singleton,W.singleton),this.definitions=y6(this.definitions,W.definitions),G.event.request?.length&&(this.event.request=[...this.event.request||[],...G.event.request||[]]),G.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...G.event.mapResponse||[]]),this.model(G.definitions.type),Object.values(W.router.history).forEach(({method:Q,path:H,handler:z,hooks:K})=>{if(H=(Z?"":this.config.prefix??"")+J+H,Z){let{body:w,headers:F,query:U,params:V,cookie:N,response:P,...B}=Y,L=K;this.applyMacro(B);let g=w||F||U||V||N||P;this.add(Q,H,z,XW(B,{...L||{},error:L.error?Array.isArray(L.error)?[...L.error??[],...G.event.error??[]]:[L.error,...G.event.error??[]]:G.event.error,standaloneValidator:B.standaloneValidator||L.standaloneValidator||g?[...B.standaloneValidator??[],...L.standaloneValidator??[],...g?[{body:w,headers:F,query:U,params:V,cookie:N,response:P}]:[]]:void 0}),void 0)}else this.add(Q,H,z,XW(K,{error:G.event.error}),{skipPrefix:!0})}),this}guard(J,Y){if(!Y){if(typeof J=="object"){this.applyMacro(J),J.detail&&(this.config.detail?this.config.detail=y6(Object.assign({},this.config.detail),J.detail):this.config.detail=J.detail),J.tags&&(this.config.detail?this.config.detail.tags=J.tags:this.config.detail={tags:J.tags});let Z=J.as??"local";if(J.schema==="standalone"){this.standaloneValidator[Z]||(this.standaloneValidator[Z]=[]);let G=J?.response?typeof J.response=="string"||l in J.response||"~standard"in J.response?{200:J.response}:J?.response:void 0;this.standaloneValidator[Z].push({body:J.body,headers:J.headers,params:J.params,query:J.query,response:G,cookie:J.cookie})}else this.validator[Z]={body:J.body??this.validator[Z]?.body,headers:J.headers??this.validator[Z]?.headers,params:J.params??this.validator[Z]?.params,query:J.query??this.validator[Z]?.query,response:J.response??this.validator[Z]?.response,cookie:J.cookie??this.validator[Z]?.cookie};return J.parse&&this.on({as:Z},"parse",J.parse),J.transform&&this.on({as:Z},"transform",J.transform),J.derive&&this.on({as:Z},"derive",J.derive),J.beforeHandle&&this.on({as:Z},"beforeHandle",J.beforeHandle),J.resolve&&this.on({as:Z},"resolve",J.resolve),J.afterHandle&&this.on({as:Z},"afterHandle",J.afterHandle),J.mapResponse&&this.on({as:Z},"mapResponse",J.mapResponse),J.afterResponse&&this.on({as:Z},"afterResponse",J.afterResponse),J.error&&this.on({as:Z},"error",J.error),this}return this.guard({},J)}let X=new $({...this.config,prefix:""});X.singleton={...this.singleton},X.definitions={...this.definitions},X.inference=P3(this.inference),X.extender={...this.extender},X.getServer=()=>this.getServer();let W=Y(X);return this.singleton=y6(this.singleton,X.singleton),this.definitions=y6(this.definitions,X.definitions),W.getServer=()=>this.server,W.event.request?.length&&(this.event.request=[...this.event.request||[],...W.event.request||[]]),W.event.mapResponse?.length&&(this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]]),this.model(W.definitions.type),Object.values(X.router.history).forEach(({method:Z,path:G,handler:Q,hooks:H})=>{let{body:z,headers:K,query:w,params:F,cookie:U,response:V,...N}=J,P=z||K||w||F||U||V;this.add(Z,G,Q,XW(N,{...H||{},error:H.error?Array.isArray(H.error)?[...H.error??[],...W.event.error??[]]:[H.error,...W.event.error??[]]:W.event.error,standaloneValidator:P?[...H.standaloneValidator??[],{body:z,headers:K,query:w,params:F,cookie:U,response:V}]:H.standaloneValidator}))}),this}use(J){if(!J)return this;if(Array.isArray(J)){let Y=this;for(let X of J)Y=Y.use(X);return Y}return J instanceof Promise?(this.promisedModules.add(J.then((Y)=>{if(typeof Y=="function")return Y(this);if(Y instanceof $)return this._use(Y).compile();if(Y.constructor?.name==="Elysia")return this._use(Y).compile();if(typeof Y.default=="function")return Y.default(this);if(Y.default instanceof $)return this._use(Y.default);if(Y.constructor?.name==="Elysia")return this._use(Y.default);if(Y.constructor?.name==="_Elysia")return this._use(Y.default);try{return this._use(Y.default)}catch(X){throw console.error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.'),X}}).then((Y)=>(Y&&typeof Y.compile=="function"&&Y.compile(),Y))),this):this._use(J)}propagatePromiseModules(J){if(J.promisedModules.size<=0)return this;for(let Y of J.promisedModules.promises)this.promisedModules.add(Y.then((X)=>{if(!X)return;let W=this._use(X);return W instanceof Promise?W.then((Z)=>{Z?Z.compile():X.compile()}):X.compile()}));return this}_use(J){if(typeof J=="function"){let W=J(this);return W instanceof Promise?(this.promisedModules.add(W.then((Z)=>{if(Z instanceof $){Z.getServer=()=>this.getServer(),Z.getGlobalRoutes=()=>this.getGlobalRoutes(),Z.getGlobalDefinitions=()=>this.getGlobalDefinitions(),Z.model(this.definitions.type),Z.error(this.definitions.error);for(let{method:G,path:Q,handler:H,hooks:z}of Object.values(Z.router.history))this.add(G,Q,H,z,void 0);return Z===this?void 0:(this.propagatePromiseModules(Z),Z)}return typeof Z=="function"?Z(this):typeof Z.default=="function"?Z.default(this):this._use(Z)}).then((Z)=>(Z&&typeof Z.compile=="function"&&Z.compile(),Z))),this):W}this.propagatePromiseModules(J);let Y=J.config.name,X=J.config.seed;if(J.getParent=()=>this,J.getServer=()=>this.getServer(),J.getGlobalRoutes=()=>this.getGlobalRoutes(),J.getGlobalDefinitions=()=>this.getGlobalDefinitions(),J.standaloneValidator?.scoped&&(this.standaloneValidator.local?this.standaloneValidator.local=this.standaloneValidator.local.concat(J.standaloneValidator.scoped):this.standaloneValidator.local=J.standaloneValidator.scoped),J.standaloneValidator?.global&&(this.standaloneValidator.global?this.standaloneValidator.global=this.standaloneValidator.global.concat(J.standaloneValidator.global):this.standaloneValidator.global=J.standaloneValidator.global),p0(J["~parser"])&&(this["~parser"]={...J["~parser"],...this["~parser"]}),J.setHeaders&&this.headers(J.setHeaders),Y){Y in this.dependencies||(this.dependencies[Y]=[]);let W=X!==void 0?w9(Y+JSON.stringify(X)):0;this.dependencies[Y].some(({checksum:Z})=>W===Z)||(this.extender.macro={...this.extender.macro,...J.extender.macro},this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(J.extender.higherOrderFunctions))}else p0(J.extender.macro)&&(this.extender.macro={...this.extender.macro,...J.extender.macro}),J.extender.higherOrderFunctions.length&&(this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(J.extender.higherOrderFunctions));if(J.extender.higherOrderFunctions.length){d_(this.extender.higherOrderFunctions);let W=[];for(let Z=0;Z<this.extender.higherOrderFunctions.length;Z++){let G=this.extender.higherOrderFunctions[Z];G.checksum&&(W.includes(G.checksum)&&(this.extender.higherOrderFunctions.splice(Z,1),Z--),W.push(G.checksum))}W.length=0}this.inference=n3(this.inference,J.inference),p0(J.singleton.decorator)&&this.decorate(J.singleton.decorator),p0(J.singleton.store)&&this.state(J.singleton.store),p0(J.definitions.type)&&this.model(J.definitions.type),p0(J.definitions.error)&&this.error(J.definitions.error),p0(J.extender.macro)&&(this.extender.macro={...this.extender.macro,...J.extender.macro});for(let{method:W,path:Z,handler:G,hooks:Q}of Object.values(J.router.history))this.add(W,Z,G,Q);if(Y){Y in this.dependencies||(this.dependencies[Y]=[]);let W=X!==void 0?w9(Y+JSON.stringify(X)):0;if(this.dependencies[Y].some(({checksum:Z})=>W===Z))return this;this.dependencies[Y].push(this.config?.analytic?{name:J.config.name,seed:J.config.seed,checksum:W,dependencies:J.dependencies,stack:J.telemetry?.stack,routes:J.router.history,decorators:J.singleton,store:J.singleton.store,error:J.definitions.error,derive:J.event.transform?.filter((Z)=>Z?.subType==="derive").map((Z)=>({fn:Z.toString(),stack:Error().stack??""})),resolve:J.event.transform?.filter((Z)=>Z?.subType==="resolve").map((Z)=>({fn:Z.toString(),stack:Error().stack??""}))}:{name:J.config.name,seed:J.config.seed,checksum:W,dependencies:J.dependencies}),p0(J.event)&&(this.event=f_(this.event,g_(J.event),W))}else p0(J.event)&&(this.event=f_(this.event,g_(J.event)));return J.validator.global&&(this.validator.global=XW(this.validator.global,{...J.validator.global})),J.validator.scoped&&(this.validator.local=XW(this.validator.local,{...J.validator.scoped})),this}macro(J,Y){if(typeof J=="string"&&!Y)throw Error("Macro function is required");return typeof J=="string"?this.extender.macro[J]=Y:this.extender.macro={...this.extender.macro,...J},this}applyMacro(J,Y=J,{iteration:X=0,applied:W={}}={}){if(X>=16)return;let Z=this.extender.macro;for(let[G,Q]of Object.entries(Y)){if(!(G in Z))continue;let H=typeof Z[G]=="function"?Z[G](Q):Z[G];if(!H||typeof Z[G]=="object"&&Q===!1)return;let z=w9(G+JSON.stringify(H.seed??Q));if(!(z in W)){W[z]=!0;for(let[K,w]of Object.entries(H))if(K!=="seed"){if(K in xf){ff(J,K,w),delete J[G];continue}if(K==="introspect"){w?.(J),delete J[G];continue}if(K==="detail"){J.detail||(J.detail={}),J.detail=y6(J.detail,w,{mergeArray:!0}),delete J[G];continue}if(K in Z){this.applyMacro(J,{[K]:w},{applied:W,iteration:X+1}),delete J[G];continue}switch((K==="derive"||K==="resolve")&&typeof w=="function"&&(w={fn:w,subType:K}),typeof J[K]){case"function":J[K]=[J[K],w];break;case"object":Array.isArray(J[K])?J[K].push(w):J[K]=[J[K],w];break;case"undefined":J[K]=w;break}delete J[G]}}}}mount(J,Y,X){if(J instanceof $||typeof J=="function"||J.length===0||J==="/"){let Q=typeof J=="function"?J:J instanceof $?J.compile().fetch:Y instanceof $?Y.compile().fetch:typeof Y=="function"?Y:(()=>{throw Error("Invalid handler")})(),H=({request:z,path:K})=>Q(new Request(L3(z.url,K),{method:z.method,headers:z.headers,signal:z.signal,credentials:z.credentials,referrerPolicy:z.referrerPolicy,duplex:z.duplex,redirect:z.redirect,mode:z.mode,keepalive:z.keepalive,integrity:z.integrity,body:z.body}));return this.route("ALL","/*",H,{parse:"none",...X,detail:{...X?.detail,hide:!0},config:{mount:Q}}),this}let W=Y instanceof $?Y.compile().fetch:typeof Y=="function"?Y:(()=>{throw Error("Invalid handler")})(),Z=(typeof J=="string"&&this.config.prefix?this.config.prefix+J:J).length-(J.endsWith("*")?1:0),G=({request:Q,path:H})=>W(new Request(L3(Q.url,H.slice(Z)||"/"),{method:Q.method,headers:Q.headers,signal:Q.signal,credentials:Q.credentials,referrerPolicy:Q.referrerPolicy,duplex:Q.duplex,redirect:Q.redirect,mode:Q.mode,keepalive:Q.keepalive,integrity:Q.integrity,body:Q.body}));return this.route("ALL",J,G,{parse:"none",...X,detail:{...X?.detail,hide:!0},config:{mount:W}}),this.route("ALL",J+(J.endsWith("/")?"*":"/*"),G,{parse:"none",...X,detail:{...X?.detail,hide:!0},config:{mount:W}}),this}get(J,Y,X){return this.add("GET",J,Y,X),this}post(J,Y,X){return this.add("POST",J,Y,X),this}put(J,Y,X){return this.add("PUT",J,Y,X),this}patch(J,Y,X){return this.add("PATCH",J,Y,X),this}delete(J,Y,X){return this.add("DELETE",J,Y,X),this}options(J,Y,X){return this.add("OPTIONS",J,Y,X),this}all(J,Y,X){return this.add("ALL",J,Y,X),this}head(J,Y,X){return this.add("HEAD",J,Y,X),this}connect(J,Y,X){return this.add("CONNECT",J,Y,X),this}route(J,Y,X,W){return this.add(J.toUpperCase(),Y,X,W,W?.config),this}ws(J,Y){return this["~adapter"].ws?this["~adapter"].ws(this,J,Y):console.warn("Current adapter doesn't support WebSocket"),this}state(J,Y,X){Y===void 0?(X=J,J={as:"append"},Y=""):X===void 0&&(typeof J=="string"?(X=Y,Y=J,J={as:"append"}):typeof J=="object"&&(X=Y,Y=""));let{as:W}=J;if(typeof Y!="string")return this;switch(typeof X){case"object":return!X||!p0(X)?this:Y?((Y in this.singleton.store)?this.singleton.store[Y]=y6(this.singleton.store[Y],X,{override:W==="override"}):this.singleton.store[Y]=X,this):X===null?this:(this.singleton.store=y6(this.singleton.store,X,{override:W==="override"}),this);case"function":return Y?(W==="override"||!(Y in this.singleton.store))&&(this.singleton.store[Y]=X):this.singleton.store=X(this.singleton.store),this;default:return(W==="override"||!(Y in this.singleton.store))&&(this.singleton.store[Y]=X),this}}decorate(J,Y,X){Y===void 0?(X=J,J={as:"append"},Y=""):X===void 0&&(typeof J=="string"?(X=Y,Y=J,J={as:"append"}):typeof J=="object"&&(X=Y,Y=""));let{as:W}=J;if(typeof Y!="string")return this;switch(typeof X){case"object":return Y?((Y in this.singleton.decorator)?this.singleton.decorator[Y]=y6(this.singleton.decorator[Y],X,{override:W==="override"}):this.singleton.decorator[Y]=X,this):X===null?this:(this.singleton.decorator=y6(this.singleton.decorator,X,{override:W==="override"}),this);case"function":return Y?(W==="override"||!(Y in this.singleton.decorator))&&(this.singleton.decorator[Y]=X):this.singleton.decorator=X(this.singleton.decorator),this;default:return(W==="override"||!(Y in this.singleton.decorator))&&(this.singleton.decorator[Y]=X),this}}derive(J,Y){Y||(Y=J,J={as:"local"});let X={subType:"derive",fn:Y};return this.onTransform(J,X)}model(J,Y){let X=(W)=>{let Z={};for(let G in W)"~standard"in W[G]||(Z[G]=W[G]);return Z};switch(typeof J){case"object":let W={},Z=Object.entries(J);if(!Z.length)return this;for(let[H,z]of Z)H in this.definitions.type||("~standard"in z?this.definitions.type[H]=z:(W[H]=this.definitions.type[H]=z,W[H].$id??=`#/components/schemas/${H}`));return this.definitions.typebox=Q$.Module({...this.definitions.typebox.$defs,...W}),this;case"function":let G=J(this.definitions.type);return this.definitions.type=G,this.definitions.typebox=Q$.Module(X(G)),this;case"string":if(!Y)break;if(this.definitions.type[J]=Y,"~standard"in Y)return this;let Q={...Y,id:Y.$id??`#/components/schemas/${J}`};return this.definitions.typebox=Q$.Module({...this.definitions.typebox.$defs,...Q}),this}return Y?(this.definitions.type[J]=Y,("~standard"in Y)?this:(this.definitions.typebox=Q$.Module({...this.definitions.typebox.$defs,[J]:Y}),this)):this}Ref(J){return Q$.Ref(J)}mapDerive(J,Y){Y||(Y=J,J={as:"local"});let X={subType:"mapDerive",fn:Y};return this.onTransform(J,X)}affix(J,Y,X){if(X==="")return this;let W=["_","-"," "],Z=(z)=>z[0].toUpperCase()+z.slice(1),G=J==="prefix"?(z,K)=>W.includes(z.at(-1)??"")?z+K:z+Z(K):W.includes(X.at(-1)??"")?(z,K)=>K+z:(z,K)=>K+Z(z),Q=(z)=>{let K={};switch(z){case"decorator":for(let w in this.singleton.decorator)K[G(X,w)]=this.singleton.decorator[w];this.singleton.decorator=K;break;case"state":for(let w in this.singleton.store)K[G(X,w)]=this.singleton.store[w];this.singleton.store=K;break;case"model":for(let w in this.definitions.type)K[G(X,w)]=this.definitions.type[w];this.definitions.type=K;break;case"error":for(let w in this.definitions.error)K[G(X,w)]=this.definitions.error[w];this.definitions.error=K;break}},H=Array.isArray(Y)?Y:[Y];for(let z of H.some((K)=>K==="all")?["decorator","state","model","error"]:H)Q(z);return this}prefix(J,Y){return this.affix("prefix",J,Y)}suffix(J,Y){return this.affix("suffix",J,Y)}compile(){return this["~adapter"].beforeCompile?.(this),this["~adapter"].isWebStandard?(this._handle=this.config.aot?ZU(this):EL(this),Object.defineProperty(this,"fetch",{value:this._handle,configurable:!0,writable:!0}),typeof this.server?.reload=="function"&&this.server.reload({...this.server||{},fetch:this.fetch}),this):(typeof this.server?.reload=="function"&&this.server.reload(this.server||{}),this._handle=ZU(this),this)}get fetch(){let J=this.config.aot?ZU(this):EL(this);return Object.defineProperty(this,"fetch",{value:J,configurable:!0,writable:!0}),J}get modules(){return this.promisedModules}},f8=k9$;var fx=typeof new Headers()?.toJSON==="function",b9$=($)=>{if(fx)return Object.keys($.toJSON()).join(", ");let J="",Y=0;return $.forEach((X,W)=>{if(Y)J=J+", "+W;else J=W;Y++}),J},gx=($)=>{let{aot:J=!0,origin:Y=!0,methods:X=!0,allowedHeaders:W=!0,exposeHeaders:Z=!0,credentials:G=!0,maxAge:Q=5,preflight:H=!0}=$??{};if(Array.isArray(W))W=W.join(", ");if(Array.isArray(Z))Z=Z.join(", ");let z=typeof Y==="boolean"?void 0:Array.isArray(Y)?Y:[Y],K=new f8({name:"@elysiajs/cors",seed:$,aot:J}),w=z?.some((L)=>L==="*"),F={};if(z){for(let L of z)if(typeof L==="string")F[L]=!0}let U=(L,g,k)=>{if(Array.isArray(L))return L.some((I)=>U(I,g,k));switch(typeof L){case"string":if(k in F)return!0;let I=k.indexOf("://");if(I!==-1)k=k.slice(I+3);return L===k;case"function":return L(g)===!0;case"object":if(L instanceof RegExp)return L.test(k)}return!1},V=(L,g)=>{if(Y===!0){L.headers.vary="*",L.headers["access-control-allow-origin"]=g.headers.get("Origin")||"*";return}if(w){L.headers.vary="*",L.headers["access-control-allow-origin"]="*";return}if(!z?.length)return;if(z.length){let k=g.headers.get("Origin")??"";for(let I=0;I<z.length;I++)if(U(z[I],g,k)===!0){L.headers.vary=Y?"Origin":"*",L.headers["access-control-allow-origin"]=k||"*";return}}L.headers.vary="Origin"},N=(L,g)=>{if(!g)return;if(X===!0)return L.headers["access-control-allow-methods"]=g??"*";if(X===!1||!X?.length)return;if(X==="*")return L.headers["access-control-allow-methods"]="*";if(!Array.isArray(X))return L.headers["access-control-allow-methods"]=X;L.headers["access-control-allow-methods"]=X.join(", ")},P={};if(typeof Z==="string")P["access-control-expose-headers"]=Z;if(typeof W==="string")P["access-control-allow-headers"]=W;if(G===!0)P["access-control-allow-credentials"]="true";K.headers(P);function B({set:L,request:g,headers:k}){if(V(L,g),N(L,g.headers.get("access-control-request-method")),W===!0||Z===!0){if(W===!0)L.headers["access-control-allow-headers"]=k["access-control-request-headers"];if(Z===!0)L.headers["access-control-expose-headers"]=Object.keys(k).join(",")}if(Q)L.headers["access-control-max-age"]=Q.toString();return new Response(null,{status:204})}if(H)K.options("/",B).options("/*",B);return K.onRequest(function({set:g,request:k}){if(V(g,k),H&&k.method==="OPTIONS")return B({set:g,request:k,headers:fx?k.headers.toJSON():Object.fromEntries(k.headers.entries())});if(N(g,k.method),W===!0||Z===!0){let I=b9$(k.headers);if(W===!0)g.headers["access-control-allow-headers"]=I;if(Z===!0)g.headers["access-control-expose-headers"]=I}})};HU();var K6=zG("a-z","0-9","A-Z","-_");function UH($,J){if(typeof $==="string")$=new TextEncoder().encode($);if(typeof J==="string")J=new TextEncoder().encode(J);let Y=new Uint8Array($),X=new Uint8Array(J),W=Y.length^X.length,Z=Math.max(Y.length,X.length);for(let G=0;G<Z;G++)W|=(G<Y.length?Y[G]:0)^(G<X.length?X[G]:0);return W===0}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function v9$($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function Y8($,J=""){if(!Number.isSafeInteger($)||$<0){let Y=J&&`"${J}" `;throw Error(`${Y}expected integer >= 0, got ${$}`)}}function IJ($,J,Y=""){let X=v9$($),W=$?.length,Z=J!==void 0;if(!X||Z&&W!==J){let G=Y&&`"${Y}" `,Q=Z?` of length ${J}`:"",H=X?`length=${W}`:`type=${typeof $}`;throw Error(G+"expected Uint8Array"+Q+", got "+H)}return $}function $Z($){if(typeof $!=="function"||typeof $.create!=="function")throw Error("Hash must wrapped by utils.createHasher");Y8($.outputLen),Y8($.blockLen)}function FW($,J=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(J&&$.finished)throw Error("Hash#digest() has already been called")}function zU($,J){IJ($,void 0,"digestInto() output");let Y=J.outputLen;if($.length<Y)throw Error('"digestInto() output" expected to be of length >='+Y)}function KG($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function X8(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}function wG($){return new DataView($.buffer,$.byteOffset,$.byteLength)}function jY($,J){return $<<32-J|$>>>J}function l0($,J){return $<<J|$>>>32-J>>>0}var f9$=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function g9$($){return $<<24&4278190080|$<<8&16711680|$>>>8&65280|$>>>24&255}function x9$($){for(let J=0;J<$.length;J++)$[J]=g9$($[J]);return $}var UG=f9$?($)=>$:x9$,y9$=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")();var UW={_0:48,_9:57,A:65,F:70,a:97,f:102};function yx($){if($>=UW._0&&$<=UW._9)return $-UW._0;if($>=UW.A&&$<=UW.F)return $-(UW.A-10);if($>=UW.a&&$<=UW.f)return $-(UW.a-10);return}function hx($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(y9$)return Uint8Array.fromHex($);let J=$.length,Y=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let X=new Uint8Array(Y);for(let W=0,Z=0;W<Y;W++,Z+=2){let G=yx($.charCodeAt(Z)),Q=yx($.charCodeAt(Z+1));if(G===void 0||Q===void 0){let H=$[Z]+$[Z+1];throw Error('hex string expected, got non-hex character "'+H+'" at index '+Z)}X[W]=G*16+Q}return X}var h9$=async()=>{};async function KU($,J,Y){let X=Date.now();for(let W=0;W<$;W++){Y(W);let Z=Date.now()-X;if(Z>=0&&Z<J)continue;await h9$(),X+=Z}}function m9$($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function TL($,J=""){if(typeof $==="string")return m9$($);return IJ($,void 0,J)}function wU($,J){if(J!==void 0&&{}.toString.call(J)!=="[object Object]")throw Error("options must be object or undefined");return Object.assign($,J)}function UU($,J={}){let Y=(W,Z)=>$(Z).update(W).digest(),X=$(void 0);return Y.outputLen=X.outputLen,Y.blockLen=X.blockLen,Y.create=(W)=>$(W),Object.assign(Y,J),Object.freeze(Y)}var FU=($)=>({oid:Uint8Array.from([6,9,96,134,72,1,101,3,4,2,$])});class RL{oHash;iHash;blockLen;outputLen;finished=!1;destroyed=!1;constructor($,J){if($Z($),IJ(J,void 0,"key"),this.iHash=$.create(),typeof this.iHash.update!=="function")throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let Y=this.blockLen,X=new Uint8Array(Y);X.set(J.length>Y?$.create().update(J).digest():J);for(let W=0;W<X.length;W++)X[W]^=54;this.iHash.update(X),this.oHash=$.create();for(let W=0;W<X.length;W++)X[W]^=106;this.oHash.update(X),X8(X)}update($){return FW(this),this.iHash.update($),this}digestInto($){FW(this),IJ($,this.outputLen,"output"),this.finished=!0,this.iHash.digestInto($),this.oHash.update($),this.oHash.digestInto($),this.destroy()}digest(){let $=new Uint8Array(this.oHash.outputLen);return this.digestInto($),$}_cloneInto($){$||=Object.create(Object.getPrototypeOf(this),{});let{oHash:J,iHash:Y,finished:X,destroyed:W,blockLen:Z,outputLen:G}=this;return $=$,$.finished=X,$.destroyed=W,$.blockLen=Z,$.outputLen=G,$.oHash=J._cloneInto($.oHash),$.iHash=Y._cloneInto($.iHash),$}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}var FG=($,J,Y)=>new RL($,J).update(Y).digest();FG.create=($,J)=>new RL($,J);function u9$($,J,Y){if($Z($),Y===void 0)Y=new Uint8Array($.outputLen);return FG($,Y,J)}var IL=Uint8Array.of(0),mx=Uint8Array.of();function d9$($,J,Y,X=32){$Z($),Y8(X,"length");let W=$.outputLen;if(X>255*W)throw Error("Length must be <= 255*HashLen");let Z=Math.ceil(X/W);if(Y===void 0)Y=mx;else IJ(Y,void 0,"info");let G=new Uint8Array(Z*W),Q=FG.create($,J),H=Q._cloneInto(),z=new Uint8Array(Q.outputLen);for(let K=0;K<Z;K++)IL[0]=K+1,H.update(K===0?mx:z).update(Y).update(IL).digestInto(z),G.set(z,W*K),Q._cloneInto(H);return Q.destroy(),H.destroy(),X8(z,IL),G.slice(0,X)}var kL=($,J,Y,X,W)=>d9$($,u9$($,J,Y),X,W);function ux($,J,Y){return $&J^~$&Y}function dx($,J,Y){return $&J^$&Y^J&Y}class DU{blockLen;outputLen;padOffset;isLE;buffer;view;finished=!1;length=0;pos=0;destroyed=!1;constructor($,J,Y,X){this.blockLen=$,this.outputLen=J,this.padOffset=Y,this.isLE=X,this.buffer=new Uint8Array($),this.view=wG(this.buffer)}update($){FW(this),IJ($);let{view:J,buffer:Y,blockLen:X}=this,W=$.length;for(let Z=0;Z<W;){let G=Math.min(X-this.pos,W-Z);if(G===X){let Q=wG($);for(;X<=W-Z;Z+=X)this.process(Q,Z);continue}if(Y.set($.subarray(Z,Z+G),this.pos),this.pos+=G,Z+=G,this.pos===X)this.process(J,0),this.pos=0}return this.length+=$.length,this.roundClean(),this}digestInto($){FW(this),zU($,this),this.finished=!0;let{buffer:J,view:Y,blockLen:X,isLE:W}=this,{pos:Z}=this;if(J[Z++]=128,X8(this.buffer.subarray(Z)),this.padOffset>X-Z)this.process(Y,0),Z=0;for(let K=Z;K<X;K++)J[K]=0;Y.setBigUint64(X-8,BigInt(this.length*8),W),this.process(Y,0);let G=wG($),Q=this.outputLen;if(Q%4)throw Error("_sha2: outputLen must be aligned to 32bit");let H=Q/4,z=this.get();if(H>z.length)throw Error("_sha2: outputLen bigger than state");for(let K=0;K<H;K++)G.setUint32(4*K,z[K],W)}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Y=$.slice(0,J);return this.destroy(),Y}_cloneInto($){$||=new this.constructor,$.set(...this.get());let{blockLen:J,buffer:Y,length:X,finished:W,destroyed:Z,pos:G}=this;if($.destroyed=Z,$.finished=W,$.length=X,$.pos=G,X%J)$.buffer.set(Y);return $}clone(){return this._cloneInto()}}var DW=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),MW=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),L8=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),q8=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var MU=BigInt(4294967295),cx=BigInt(32);function c9$($,J=!1){if(J)return{h:Number($&MU),l:Number($>>cx&MU)};return{h:Number($>>cx&MU)|0,l:Number($&MU)|0}}function VU($,J=!1){let Y=$.length,X=new Uint32Array(Y),W=new Uint32Array(Y);for(let Z=0;Z<Y;Z++){let{h:G,l:Q}=c9$($[Z],J);[X[Z],W[Z]]=[G,Q]}return[X,W]}var bL=($,J,Y)=>$>>>Y,vL=($,J,Y)=>$<<32-Y|J>>>Y,JZ=($,J,Y)=>$>>>Y|J<<32-Y,YZ=($,J,Y)=>$<<32-Y|J>>>Y,FH=($,J,Y)=>$<<64-Y|J>>>Y-32,DH=($,J,Y)=>$>>>Y-32|J<<64-Y;var px=($,J,Y)=>$<<Y|J>>>32-Y,lx=($,J,Y)=>J<<Y|$>>>32-Y,nx=($,J,Y)=>J<<Y-32|$>>>64-Y,ix=($,J,Y)=>$<<Y-32|J>>>64-Y;function MX($,J,Y,X){let W=(J>>>0)+(X>>>0);return{h:$+Y+(W/4294967296|0)|0,l:W|0}}var rx=($,J,Y)=>($>>>0)+(J>>>0)+(Y>>>0),ox=($,J,Y,X)=>J+Y+X+($/4294967296|0)|0,tx=($,J,Y,X)=>($>>>0)+(J>>>0)+(Y>>>0)+(X>>>0),ax=($,J,Y,X,W)=>J+Y+X+W+($/4294967296|0)|0,sx=($,J,Y,X,W)=>($>>>0)+(J>>>0)+(Y>>>0)+(X>>>0)+(W>>>0),ex=($,J,Y,X,W,Z)=>J+Y+X+W+Z+($/4294967296|0)|0;var l9$=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),L9=new Uint32Array(64);class fL extends DU{constructor($){super(64,$,8,!1)}get(){let{A:$,B:J,C:Y,D:X,E:W,F:Z,G,H:Q}=this;return[$,J,Y,X,W,Z,G,Q]}set($,J,Y,X,W,Z,G,Q){this.A=$|0,this.B=J|0,this.C=Y|0,this.D=X|0,this.E=W|0,this.F=Z|0,this.G=G|0,this.H=Q|0}process($,J){for(let K=0;K<16;K++,J+=4)L9[K]=$.getUint32(J,!1);for(let K=16;K<64;K++){let w=L9[K-15],F=L9[K-2],U=jY(w,7)^jY(w,18)^w>>>3,V=jY(F,17)^jY(F,19)^F>>>10;L9[K]=V+L9[K-7]+U+L9[K-16]|0}let{A:Y,B:X,C:W,D:Z,E:G,F:Q,G:H,H:z}=this;for(let K=0;K<64;K++){let w=jY(G,6)^jY(G,11)^jY(G,25),F=z+w+ux(G,Q,H)+l9$[K]+L9[K]|0,V=(jY(Y,2)^jY(Y,13)^jY(Y,22))+dx(Y,X,W)|0;z=H,H=Q,Q=G,G=Z+F|0,Z=W,W=X,X=Y,Y=F+V|0}Y=Y+this.A|0,X=X+this.B|0,W=W+this.C|0,Z=Z+this.D|0,G=G+this.E|0,Q=Q+this.F|0,H=H+this.G|0,z=z+this.H|0,this.set(Y,X,W,Z,G,Q,H,z)}roundClean(){X8(L9)}destroy(){this.set(0,0,0,0,0,0,0,0),X8(this.buffer)}}class $y extends fL{A=DW[0]|0;B=DW[1]|0;C=DW[2]|0;D=DW[3]|0;E=DW[4]|0;F=DW[5]|0;G=DW[6]|0;H=DW[7]|0;constructor(){super(32)}}class n9$ extends fL{A=MW[0]|0;B=MW[1]|0;C=MW[2]|0;D=MW[3]|0;E=MW[4]|0;F=MW[5]|0;G=MW[6]|0;H=MW[7]|0;constructor(){super(28)}}var Jy=(()=>VU(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(($)=>BigInt($))))(),i9$=(()=>Jy[0])(),r9$=(()=>Jy[1])(),q9=new Uint32Array(80),B9=new Uint32Array(80);class MH extends DU{constructor($){super(128,$,16,!1)}get(){let{Ah:$,Al:J,Bh:Y,Bl:X,Ch:W,Cl:Z,Dh:G,Dl:Q,Eh:H,El:z,Fh:K,Fl:w,Gh:F,Gl:U,Hh:V,Hl:N}=this;return[$,J,Y,X,W,Z,G,Q,H,z,K,w,F,U,V,N]}set($,J,Y,X,W,Z,G,Q,H,z,K,w,F,U,V,N){this.Ah=$|0,this.Al=J|0,this.Bh=Y|0,this.Bl=X|0,this.Ch=W|0,this.Cl=Z|0,this.Dh=G|0,this.Dl=Q|0,this.Eh=H|0,this.El=z|0,this.Fh=K|0,this.Fl=w|0,this.Gh=F|0,this.Gl=U|0,this.Hh=V|0,this.Hl=N|0}process($,J){for(let L=0;L<16;L++,J+=4)q9[L]=$.getUint32(J),B9[L]=$.getUint32(J+=4);for(let L=16;L<80;L++){let g=q9[L-15]|0,k=B9[L-15]|0,I=JZ(g,k,1)^JZ(g,k,8)^bL(g,k,7),O=YZ(g,k,1)^YZ(g,k,8)^vL(g,k,7),b=q9[L-2]|0,D=B9[L-2]|0,_=JZ(b,D,19)^FH(b,D,61)^bL(b,D,6),q=YZ(b,D,19)^DH(b,D,61)^vL(b,D,6),S=tx(O,q,B9[L-7],B9[L-16]),j=ax(S,I,_,q9[L-7],q9[L-16]);q9[L]=j|0,B9[L]=S|0}let{Ah:Y,Al:X,Bh:W,Bl:Z,Ch:G,Cl:Q,Dh:H,Dl:z,Eh:K,El:w,Fh:F,Fl:U,Gh:V,Gl:N,Hh:P,Hl:B}=this;for(let L=0;L<80;L++){let g=JZ(K,w,14)^JZ(K,w,18)^FH(K,w,41),k=YZ(K,w,14)^YZ(K,w,18)^DH(K,w,41),I=K&F^~K&V,O=w&U^~w&N,b=sx(B,k,O,r9$[L],B9[L]),D=ex(b,P,g,I,i9$[L],q9[L]),_=b|0,q=JZ(Y,X,28)^FH(Y,X,34)^FH(Y,X,39),S=YZ(Y,X,28)^DH(Y,X,34)^DH(Y,X,39),j=Y&W^Y&G^W&G,E=X&Z^X&Q^Z&Q;P=V|0,B=N|0,V=F|0,N=U|0,F=K|0,U=w|0,{h:K,l:w}=MX(H|0,z|0,D|0,_|0),H=G|0,z=Q|0,G=W|0,Q=Z|0,W=Y|0,Z=X|0;let T=rx(_,S,E);Y=ox(T,D,q,j),X=T|0}({h:Y,l:X}=MX(this.Ah|0,this.Al|0,Y|0,X|0)),{h:W,l:Z}=MX(this.Bh|0,this.Bl|0,W|0,Z|0),{h:G,l:Q}=MX(this.Ch|0,this.Cl|0,G|0,Q|0),{h:H,l:z}=MX(this.Dh|0,this.Dl|0,H|0,z|0),{h:K,l:w}=MX(this.Eh|0,this.El|0,K|0,w|0),{h:F,l:U}=MX(this.Fh|0,this.Fl|0,F|0,U|0),{h:V,l:N}=MX(this.Gh|0,this.Gl|0,V|0,N|0),{h:P,l:B}=MX(this.Hh|0,this.Hl|0,P|0,B|0),this.set(Y,X,W,Z,G,Q,H,z,K,w,F,U,V,N,P,B)}roundClean(){X8(q9,B9)}destroy(){X8(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class o9$ extends MH{Ah=q8[0]|0;Al=q8[1]|0;Bh=q8[2]|0;Bl=q8[3]|0;Ch=q8[4]|0;Cl=q8[5]|0;Dh=q8[6]|0;Dl=q8[7]|0;Eh=q8[8]|0;El=q8[9]|0;Fh=q8[10]|0;Fl=q8[11]|0;Gh=q8[12]|0;Gl=q8[13]|0;Hh=q8[14]|0;Hl=q8[15]|0;constructor(){super(64)}}class t9$ extends MH{Ah=L8[0]|0;Al=L8[1]|0;Bh=L8[2]|0;Bl=L8[3]|0;Ch=L8[4]|0;Cl=L8[5]|0;Dh=L8[6]|0;Dl=L8[7]|0;Eh=L8[8]|0;El=L8[9]|0;Fh=L8[10]|0;Fl=L8[11]|0;Gh=L8[12]|0;Gl=L8[13]|0;Hh=L8[14]|0;Hl=L8[15]|0;constructor(){super(48)}}var g8=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),x8=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class a9$ extends MH{Ah=g8[0]|0;Al=g8[1]|0;Bh=g8[2]|0;Bl=g8[3]|0;Ch=g8[4]|0;Cl=g8[5]|0;Dh=g8[6]|0;Dl=g8[7]|0;Eh=g8[8]|0;El=g8[9]|0;Fh=g8[10]|0;Fl=g8[11]|0;Gh=g8[12]|0;Gl=g8[13]|0;Hh=g8[14]|0;Hl=g8[15]|0;constructor(){super(28)}}class s9$ extends MH{Ah=x8[0]|0;Al=x8[1]|0;Bh=x8[2]|0;Bl=x8[3]|0;Ch=x8[4]|0;Cl=x8[5]|0;Dh=x8[6]|0;Dl=x8[7]|0;Eh=x8[8]|0;El=x8[9]|0;Fh=x8[10]|0;Fl=x8[11]|0;Gh=x8[12]|0;Gl=x8[13]|0;Hh=x8[14]|0;Hl=x8[15]|0;constructor(){super(32)}}var DG=UU(()=>new $y,FU(1));var VH={};k4(VH,{encode:()=>t4,decode:()=>g4});var XZ=new TextEncoder,B8=new TextDecoder;function W8(...$){let J=$.reduce((W,{length:Z})=>W+Z,0),Y=new Uint8Array(J),X=0;for(let W of $)Y.set(W,X),X+=W.length;return Y}function gL($,J,Y){if(J<0||J>=4294967296)throw RangeError(`value must be >= 0 and <= 4294967295. Received ${J}`);$.set([J>>>24,J>>>16,J>>>8,J&255],Y)}function NU($){let J=Math.floor($/4294967296),Y=$%4294967296,X=new Uint8Array(8);return gL(X,J,0),gL(X,Y,4),X}function _U($){let J=new Uint8Array(4);return gL(J,$),J}function q6($){let J=new Uint8Array($.length);for(let Y=0;Y<$.length;Y++){let X=$.charCodeAt(Y);if(X>127)throw TypeError("non-ASCII string encountered in encode()");J[Y]=X}return J}function Yy($){if(Uint8Array.prototype.toBase64)return $.toBase64();let J=32768,Y=[];for(let X=0;X<$.length;X+=J)Y.push(String.fromCharCode.apply(null,$.subarray(X,X+J)));return btoa(Y.join(""))}function Xy($){if(Uint8Array.fromBase64)return Uint8Array.fromBase64($);let J=atob($),Y=new Uint8Array(J.length);for(let X=0;X<J.length;X++)Y[X]=J.charCodeAt(X);return Y}function g4($){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof $==="string"?$:B8.decode($),{alphabet:"base64url"});let J=$;if(J instanceof Uint8Array)J=B8.decode(J);J=J.replace(/-/g,"+").replace(/_/g,"/");try{return Xy(J)}catch{throw TypeError("The input to be decoded is not correctly encoded.")}}function t4($){let J=$;if(typeof J==="string")J=XZ.encode(J);if(Uint8Array.prototype.toBase64)return J.toBase64({alphabet:"base64url",omitPadding:!0});return Yy(J).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}class Z8 extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor($,J){super($,J);this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class y8 extends Z8{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor($,J,Y="unspecified",X="unspecified"){super($,{cause:{claim:Y,reason:X,payload:J}});this.claim=Y,this.reason=X,this.payload=J}}class MG extends Z8{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor($,J,Y="unspecified",X="unspecified"){super($,{cause:{claim:Y,reason:X,payload:J}});this.claim=Y,this.reason=X,this.payload=J}}class VG extends Z8{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"}class F0 extends Z8{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"}class NH extends Z8{static code="ERR_JWE_DECRYPTION_FAILED";code="ERR_JWE_DECRYPTION_FAILED";constructor($="decryption operation failed",J){super($,J)}}class k$ extends Z8{static code="ERR_JWE_INVALID";code="ERR_JWE_INVALID"}class S4 extends Z8{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"}class J1 extends Z8{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}class xL extends Z8{static code="ERR_JWK_INVALID";code="ERR_JWK_INVALID"}class LU extends Z8{static code="ERR_JWKS_INVALID";code="ERR_JWKS_INVALID"}class _H extends Z8{static code="ERR_JWKS_NO_MATCHING_KEY";code="ERR_JWKS_NO_MATCHING_KEY";constructor($="no applicable key found in the JSON Web Key Set",J){super($,J)}}class yL extends Z8{[Symbol.asyncIterator];static code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";constructor($="multiple matching keys found in the JSON Web Key Set",J){super($,J)}}class hL extends Z8{static code="ERR_JWKS_TIMEOUT";code="ERR_JWKS_TIMEOUT";constructor($="request timed out",J){super($,J)}}class mL extends Z8{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor($="signature verification failed",J){super($,J)}}function uL($){switch($){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new F0(`Unsupported JWE Algorithm: ${$}`)}}var Wy=($)=>crypto.getRandomValues(new Uint8Array(uL($)>>3));function qU($,J){if(J.length<<3!==uL($))throw new k$("Invalid Initialization Vector length")}function NG($,J){let Y=$.byteLength<<3;if(Y!==J)throw new k$(`Invalid Content Encryption Key length. Expected ${J} bits, got ${Y} bits`)}var G8=($,J="algorithm.name")=>TypeError(`CryptoKey does not support this operation, its ${J} must be ${$}`),VX=($,J)=>$.name===J;function BU($){return parseInt($.name.slice(4),10)}function e9$($){switch($){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}function Zy($,J){if(J&&!$.usages.includes(J))throw TypeError(`CryptoKey does not support this operation, its usages must include ${J}.`)}function Gy($,J,Y){switch(J){case"HS256":case"HS384":case"HS512":{if(!VX($.algorithm,"HMAC"))throw G8("HMAC");let X=parseInt(J.slice(2),10);if(BU($.algorithm.hash)!==X)throw G8(`SHA-${X}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!VX($.algorithm,"RSASSA-PKCS1-v1_5"))throw G8("RSASSA-PKCS1-v1_5");let X=parseInt(J.slice(2),10);if(BU($.algorithm.hash)!==X)throw G8(`SHA-${X}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!VX($.algorithm,"RSA-PSS"))throw G8("RSA-PSS");let X=parseInt(J.slice(2),10);if(BU($.algorithm.hash)!==X)throw G8(`SHA-${X}`,"algorithm.hash");break}case"Ed25519":case"EdDSA":{if(!VX($.algorithm,"Ed25519"))throw G8("Ed25519");break}case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":{if(!VX($.algorithm,J))throw G8(J);break}case"ES256":case"ES384":case"ES512":{if(!VX($.algorithm,"ECDSA"))throw G8("ECDSA");let X=e9$(J);if($.algorithm.namedCurve!==X)throw G8(X,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}Zy($,Y)}function q1($,J,Y){switch(J){case"A128GCM":case"A192GCM":case"A256GCM":{if(!VX($.algorithm,"AES-GCM"))throw G8("AES-GCM");let X=parseInt(J.slice(1,4),10);if($.algorithm.length!==X)throw G8(X,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!VX($.algorithm,"AES-KW"))throw G8("AES-KW");let X=parseInt(J.slice(1,4),10);if($.algorithm.length!==X)throw G8(X,"algorithm.length");break}case"ECDH":{switch($.algorithm.name){case"ECDH":case"X25519":break;default:throw G8("ECDH or X25519")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!VX($.algorithm,"PBKDF2"))throw G8("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!VX($.algorithm,"RSA-OAEP"))throw G8("RSA-OAEP");let X=parseInt(J.slice(9),10)||1;if(BU($.algorithm.hash)!==X)throw G8(`SHA-${X}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}Zy($,Y)}function Qy($,J,...Y){if(Y=Y.filter(Boolean),Y.length>2){let X=Y.pop();$+=`one of type ${Y.join(", ")}, or ${X}.`}else if(Y.length===2)$+=`one of type ${Y[0]} or ${Y[1]}.`;else $+=`of type ${Y[0]}.`;if(J==null)$+=` Received ${J}`;else if(typeof J==="function"&&J.name)$+=` Received function ${J.name}`;else if(typeof J==="object"&&J!=null){if(J.constructor?.name)$+=` Received an instance of ${J.constructor.name}`}return $}var kJ=($,...J)=>Qy("Key must be ",$,...J),dL=($,J,...Y)=>Qy(`Key for the ${$} algorithm must be `,J,...Y);function WZ($){if(!NX($))throw Error("CryptoKey instance expected")}var NX=($)=>{if($?.[Symbol.toStringTag]==="CryptoKey")return!0;try{return $ instanceof CryptoKey}catch{return!1}},LH=($)=>$?.[Symbol.toStringTag]==="KeyObject",qH=($)=>NX($)||LH($);async function $5$($,J){if(!($ instanceof Uint8Array))throw TypeError("First argument must be a buffer");if(!(J instanceof Uint8Array))throw TypeError("Second argument must be a buffer");let Y={name:"HMAC",hash:"SHA-256"},X=await crypto.subtle.generateKey(Y,!1,["sign"]),W=new Uint8Array(await crypto.subtle.sign(Y,X,$)),Z=new Uint8Array(await crypto.subtle.sign(Y,X,J)),G=0,Q=-1;while(++Q<32)G|=W[Q]^Z[Q];return G===0}async function J5$($,J,Y,X,W,Z){if(!(J instanceof Uint8Array))throw TypeError(kJ(J,"Uint8Array"));let G=parseInt($.slice(1,4),10),Q=await crypto.subtle.importKey("raw",J.subarray(G>>3),"AES-CBC",!1,["decrypt"]),H=await crypto.subtle.importKey("raw",J.subarray(0,G>>3),{hash:`SHA-${G<<1}`,name:"HMAC"},!1,["sign"]),z=W8(Z,X,Y,NU(Z.length<<3)),K=new Uint8Array((await crypto.subtle.sign("HMAC",H,z)).slice(0,G>>3)),w;try{w=await $5$(W,K)}catch{}if(!w)throw new NH;let F;try{F=new Uint8Array(await crypto.subtle.decrypt({iv:X,name:"AES-CBC"},Q,Y))}catch{}if(!F)throw new NH;return F}async function Y5$($,J,Y,X,W,Z){let G;if(J instanceof Uint8Array)G=await crypto.subtle.importKey("raw",J,"AES-GCM",!1,["decrypt"]);else q1(J,$,"decrypt"),G=J;try{return new Uint8Array(await crypto.subtle.decrypt({additionalData:Z,iv:X,name:"AES-GCM",tagLength:128},G,W8(Y,W)))}catch{throw new NH}}async function OU($,J,Y,X,W,Z){if(!NX(J)&&!(J instanceof Uint8Array))throw TypeError(kJ(J,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(!X)throw new k$("JWE Initialization Vector missing");if(!W)throw new k$("JWE Authentication Tag missing");switch(qU($,X),$){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":if(J instanceof Uint8Array)NG(J,parseInt($.slice(-3),10));return J5$($,J,Y,X,W,Z);case"A128GCM":case"A192GCM":case"A256GCM":if(J instanceof Uint8Array)NG(J,parseInt($.slice(1,4),10));return Y5$($,J,Y,X,W,Z);default:throw new F0("Unsupported JWE Content Encryption Algorithm")}}function O9(...$){let J=$.filter(Boolean);if(J.length===0||J.length===1)return!0;let Y;for(let X of J){let W=Object.keys(X);if(!Y||Y.size===0){Y=new Set(W);continue}for(let Z of W){if(Y.has(Z))return!1;Y.add(Z)}}return!0}var X5$=($)=>typeof $==="object"&&$!==null;function l4($){if(!X5$($)||Object.prototype.toString.call($)!=="[object Object]")return!1;if(Object.getPrototypeOf($)===null)return!0;let J=$;while(Object.getPrototypeOf(J)!==null)J=Object.getPrototypeOf(J);return Object.getPrototypeOf($)===J}function Hy($,J){if($.algorithm.length!==parseInt(J.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${J}`)}function zy($,J,Y){if($ instanceof Uint8Array)return crypto.subtle.importKey("raw",$,"AES-KW",!0,[Y]);return q1($,J,Y),$}async function BH($,J,Y){let X=await zy(J,$,"wrapKey");Hy(X,$);let W=await crypto.subtle.importKey("raw",Y,{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.wrapKey("raw",W,X,"AES-KW"))}async function OH($,J,Y){let X=await zy(J,$,"unwrapKey");Hy(X,$);let W=await crypto.subtle.unwrapKey("raw",Y,X,"AES-KW",{hash:"SHA-256",name:"HMAC"},!0,["sign"]);return new Uint8Array(await crypto.subtle.exportKey("raw",W))}async function PU($,J){let Y=`SHA-${$.slice(-3)}`;return new Uint8Array(await crypto.subtle.digest(Y,J))}function pL($){return W8(_U($.length),$)}async function W5$($,J,Y){let X=J>>3,W=32,Z=Math.ceil(X/32),G=new Uint8Array(Z*32);for(let Q=1;Q<=Z;Q++){let H=new Uint8Array(4+$.length+Y.length);H.set(_U(Q),0),H.set($,4),H.set(Y,4+$.length);let z=await PU("sha256",H);G.set(z,(Q-1)*32)}return G.slice(0,X)}async function SU($,J,Y,X,W=new Uint8Array,Z=new Uint8Array){q1($,"ECDH"),q1(J,"ECDH","deriveBits");let G=pL(q6(Y)),Q=pL(W),H=pL(Z),z=_U(X),K=new Uint8Array,w=W8(G,Q,H,z,K),F=new Uint8Array(await crypto.subtle.deriveBits({name:$.algorithm.name,public:$},J,Z5$($)));return W5$(F,X,w)}function Z5$($){if($.algorithm.name==="X25519")return 256;return Math.ceil(parseInt($.algorithm.namedCurve.slice(-3),10)/8)<<3}function AU($){switch($.algorithm.namedCurve){case"P-256":case"P-384":case"P-521":return!0;default:return $.algorithm.name==="X25519"}}function G5$($,J){if($ instanceof Uint8Array)return crypto.subtle.importKey("raw",$,"PBKDF2",!1,["deriveBits"]);return q1($,J,"deriveBits"),$}var Q5$=($,J)=>W8(q6($),Uint8Array.of(0),J);async function wy($,J,Y,X){if(!($ instanceof Uint8Array)||$.length<8)throw new k$("PBES2 Salt Input must be 8 or more octets");let W=Q5$(J,$),Z=parseInt(J.slice(13,16),10),G={hash:`SHA-${J.slice(8,11)}`,iterations:Y,name:"PBKDF2",salt:W},Q=await G5$(X,J);return new Uint8Array(await crypto.subtle.deriveBits(G,Q,Z))}async function Uy($,J,Y,X=2048,W=crypto.getRandomValues(new Uint8Array(16))){let Z=await wy(W,$,X,J);return{encryptedKey:await BH($.slice(-6),Z,Y),p2c:X,p2s:t4(W)}}async function Fy($,J,Y,X,W){let Z=await wy(W,$,X,J);return OH($.slice(-6),Z,Y)}function ZZ($,J){if($.startsWith("RS")||$.startsWith("PS")){let{modulusLength:Y}=J.algorithm;if(typeof Y!=="number"||Y<2048)throw TypeError(`${$} requires key modulusLength to be 2048 bits or larger`)}}var My=($)=>{switch($){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new F0(`alg ${$} is not supported either by JOSE or your javascript runtime`)}};async function Vy($,J,Y){return q1(J,$,"encrypt"),ZZ($,J),new Uint8Array(await crypto.subtle.encrypt(My($),J,Y))}async function Ny($,J,Y){return q1(J,$,"decrypt"),ZZ($,J),new Uint8Array(await crypto.subtle.decrypt(My($),J,Y))}function PH($){switch($){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new F0(`Unsupported JWE Algorithm: ${$}`)}}var P9=($)=>crypto.getRandomValues(new Uint8Array(PH($)>>3));function H5$($){let J,Y;switch($.kty){case"AKP":{switch($.alg){case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":J={name:$.alg},Y=$.priv?["sign"]:["verify"];break;default:throw new F0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"RSA":{switch($.alg){case"PS256":case"PS384":case"PS512":J={name:"RSA-PSS",hash:`SHA-${$.alg.slice(-3)}`},Y=$.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":J={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${$.alg.slice(-3)}`},Y=$.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":J={name:"RSA-OAEP",hash:`SHA-${parseInt($.alg.slice(-3),10)||1}`},Y=$.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new F0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch($.alg){case"ES256":J={name:"ECDSA",namedCurve:"P-256"},Y=$.d?["sign"]:["verify"];break;case"ES384":J={name:"ECDSA",namedCurve:"P-384"},Y=$.d?["sign"]:["verify"];break;case"ES512":J={name:"ECDSA",namedCurve:"P-521"},Y=$.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":J={name:"ECDH",namedCurve:$.crv},Y=$.d?["deriveBits"]:[];break;default:throw new F0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch($.alg){case"Ed25519":case"EdDSA":J={name:"Ed25519"},Y=$.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":J={name:$.crv},Y=$.d?["deriveBits"]:[];break;default:throw new F0('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new F0('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:J,keyUsages:Y}}async function _G($){if(!$.alg)throw TypeError('"alg" argument is required when "jwk.alg" is not present');let{algorithm:J,keyUsages:Y}=H5$($),X={...$};if(X.kty!=="AKP")delete X.alg;return delete X.use,crypto.subtle.importKey("jwk",X,J,$.ext??($.d||$.priv?!1:!0),$.key_ops??Y)}async function EY($,J,Y){if(!l4($))throw TypeError("JWK must be an object");let X;switch(J??=$.alg,X??=Y?.extractable??$.ext,$.kty){case"oct":if(typeof $.k!=="string"||!$.k)throw TypeError('missing "k" (Key Value) Parameter value');return g4($.k);case"RSA":if("oth"in $&&$.oth!==void 0)throw new F0('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');return _G({...$,alg:J,ext:X});case"AKP":{if(typeof $.alg!=="string"||!$.alg)throw TypeError('missing "alg" (Algorithm) Parameter value');if(J!==void 0&&J!==$.alg)throw TypeError("JWK alg and alg option value mismatch");return _G({...$,ext:X})}case"EC":case"OKP":return _G({...$,alg:J,ext:X});default:throw new F0('Unsupported "kty" (Key Type) Parameter value')}}async function z5$($,J,Y,X,W){if(!(Y instanceof Uint8Array))throw TypeError(kJ(Y,"Uint8Array"));let Z=parseInt($.slice(1,4),10),G=await crypto.subtle.importKey("raw",Y.subarray(Z>>3),"AES-CBC",!1,["encrypt"]),Q=await crypto.subtle.importKey("raw",Y.subarray(0,Z>>3),{hash:`SHA-${Z<<1}`,name:"HMAC"},!1,["sign"]),H=new Uint8Array(await crypto.subtle.encrypt({iv:X,name:"AES-CBC"},G,J)),z=W8(W,X,H,NU(W.length<<3)),K=new Uint8Array((await crypto.subtle.sign("HMAC",Q,z)).slice(0,Z>>3));return{ciphertext:H,tag:K,iv:X}}async function K5$($,J,Y,X,W){let Z;if(Y instanceof Uint8Array)Z=await crypto.subtle.importKey("raw",Y,"AES-GCM",!1,["encrypt"]);else q1(Y,$,"encrypt"),Z=Y;let G=new Uint8Array(await crypto.subtle.encrypt({additionalData:W,iv:X,name:"AES-GCM",tagLength:128},Z,J)),Q=G.slice(-16);return{ciphertext:G.slice(0,-16),tag:Q,iv:X}}async function jU($,J,Y,X,W){if(!NX(Y)&&!(Y instanceof Uint8Array))throw TypeError(kJ(Y,"CryptoKey","KeyObject","Uint8Array","JSON Web Key"));if(X)qU($,X);else X=Wy($);switch($){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":if(Y instanceof Uint8Array)NG(Y,parseInt($.slice(-3),10));return z5$($,J,Y,X,W);case"A128GCM":case"A192GCM":case"A256GCM":if(Y instanceof Uint8Array)NG(Y,parseInt($.slice(1,4),10));return K5$($,J,Y,X,W);default:throw new F0("Unsupported JWE Content Encryption Algorithm")}}async function Ly($,J,Y,X){let W=$.slice(0,7),Z=await jU(W,Y,J,X,new Uint8Array);return{encryptedKey:Z.ciphertext,iv:t4(Z.iv),tag:t4(Z.tag)}}async function qy($,J,Y,X,W){let Z=$.slice(0,7);return OU(Z,J,Y,X,W,new Uint8Array)}async function By($,J,Y,X,W){switch($){case"dir":{if(Y!==void 0)throw new k$("Encountered unexpected JWE Encrypted Key");return J}case"ECDH-ES":if(Y!==void 0)throw new k$("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!l4(X.epk))throw new k$('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(WZ(J),!AU(J))throw new F0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let Z=await EY(X.epk,$);WZ(Z);let G,Q;if(X.apu!==void 0){if(typeof X.apu!=="string")throw new k$('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{G=g4(X.apu)}catch{throw new k$("Failed to base64url decode the apu")}}if(X.apv!==void 0){if(typeof X.apv!=="string")throw new k$('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{Q=g4(X.apv)}catch{throw new k$("Failed to base64url decode the apv")}}let H=await SU(Z,J,$==="ECDH-ES"?X.enc:$,$==="ECDH-ES"?PH(X.enc):parseInt($.slice(-5,-2),10),G,Q);if($==="ECDH-ES")return H;if(Y===void 0)throw new k$("JWE Encrypted Key missing");return OH($.slice(-6),H,Y)}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(Y===void 0)throw new k$("JWE Encrypted Key missing");return WZ(J),Ny($,J,Y)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(Y===void 0)throw new k$("JWE Encrypted Key missing");if(typeof X.p2c!=="number")throw new k$('JOSE Header "p2c" (PBES2 Count) missing or invalid');let Z=W?.maxPBES2Count||1e4;if(X.p2c>Z)throw new k$('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof X.p2s!=="string")throw new k$('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let G;try{G=g4(X.p2s)}catch{throw new k$("Failed to base64url decode the p2s")}return Fy($,J,Y,X.p2c,G)}case"A128KW":case"A192KW":case"A256KW":{if(Y===void 0)throw new k$("JWE Encrypted Key missing");return OH($,J,Y)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(Y===void 0)throw new k$("JWE Encrypted Key missing");if(typeof X.iv!=="string")throw new k$('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof X.tag!=="string")throw new k$('JOSE Header "tag" (Authentication Tag) missing or invalid');let Z;try{Z=g4(X.iv)}catch{throw new k$("Failed to base64url decode the iv")}let G;try{G=g4(X.tag)}catch{throw new k$("Failed to base64url decode the tag")}return qy($,J,Y,Z,G)}default:throw new F0('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function S9($,J,Y,X,W){if(W.crit!==void 0&&X?.crit===void 0)throw new $('"crit" (Critical) Header Parameter MUST be integrity protected');if(!X||X.crit===void 0)return new Set;if(!Array.isArray(X.crit)||X.crit.length===0||X.crit.some((G)=>typeof G!=="string"||G.length===0))throw new $('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let Z;if(Y!==void 0)Z=new Map([...Object.entries(Y),...J.entries()]);else Z=J;for(let G of X.crit){if(!Z.has(G))throw new F0(`Extension Header Parameter "${G}" is not recognized`);if(W[G]===void 0)throw new $(`Extension Header Parameter "${G}" is missing`);if(Z.get(G)&&X[G]===void 0)throw new $(`Extension Header Parameter "${G}" MUST be integrity protected`)}return new Set(X.crit)}function SH($,J){if(J!==void 0&&(!Array.isArray(J)||J.some((Y)=>typeof Y!=="string")))throw TypeError(`"${$}" option must be an array of strings`);if(!J)return;return new Set(J)}var GZ=($)=>l4($)&&typeof $.kty==="string",Oy=($)=>$.kty!=="oct"&&($.kty==="AKP"&&typeof $.priv==="string"||typeof $.d==="string"),Py=($)=>$.kty!=="oct"&&$.d===void 0&&$.priv===void 0,Sy=($)=>$.kty==="oct"&&typeof $.k==="string";var LG,Ay=async($,J,Y,X=!1)=>{LG||=new WeakMap;let W=LG.get($);if(W?.[Y])return W[Y];let Z=await _G({...J,alg:Y});if(X)Object.freeze($);if(!W)LG.set($,{[Y]:Z});else W[Y]=Z;return Z},U5$=($,J)=>{LG||=new WeakMap;let Y=LG.get($);if(Y?.[J])return Y[J];let X=$.type==="public",W=X?!0:!1,Z;if($.asymmetricKeyType==="x25519"){switch(J){case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}Z=$.toCryptoKey($.asymmetricKeyType,W,X?[]:["deriveBits"])}if($.asymmetricKeyType==="ed25519"){if(J!=="EdDSA"&&J!=="Ed25519")throw TypeError("given KeyObject instance cannot be used for this algorithm");Z=$.toCryptoKey($.asymmetricKeyType,W,[X?"verify":"sign"])}switch($.asymmetricKeyType){case"ml-dsa-44":case"ml-dsa-65":case"ml-dsa-87":{if(J!==$.asymmetricKeyType.toUpperCase())throw TypeError("given KeyObject instance cannot be used for this algorithm");Z=$.toCryptoKey($.asymmetricKeyType,W,[X?"verify":"sign"])}}if($.asymmetricKeyType==="rsa"){let G;switch(J){case"RSA-OAEP":G="SHA-1";break;case"RS256":case"PS256":case"RSA-OAEP-256":G="SHA-256";break;case"RS384":case"PS384":case"RSA-OAEP-384":G="SHA-384";break;case"RS512":case"PS512":case"RSA-OAEP-512":G="SHA-512";break;default:throw TypeError("given KeyObject instance cannot be used for this algorithm")}if(J.startsWith("RSA-OAEP"))return $.toCryptoKey({name:"RSA-OAEP",hash:G},W,X?["encrypt"]:["decrypt"]);Z=$.toCryptoKey({name:J.startsWith("PS")?"RSA-PSS":"RSASSA-PKCS1-v1_5",hash:G},W,[X?"verify":"sign"])}if($.asymmetricKeyType==="ec"){let Q=new Map([["prime256v1","P-256"],["secp384r1","P-384"],["secp521r1","P-521"]]).get($.asymmetricKeyDetails?.namedCurve);if(!Q)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(J==="ES256"&&Q==="P-256")Z=$.toCryptoKey({name:"ECDSA",namedCurve:Q},W,[X?"verify":"sign"]);if(J==="ES384"&&Q==="P-384")Z=$.toCryptoKey({name:"ECDSA",namedCurve:Q},W,[X?"verify":"sign"]);if(J==="ES512"&&Q==="P-521")Z=$.toCryptoKey({name:"ECDSA",namedCurve:Q},W,[X?"verify":"sign"]);if(J.startsWith("ECDH-ES"))Z=$.toCryptoKey({name:"ECDH",namedCurve:Q},W,X?[]:["deriveBits"])}if(!Z)throw TypeError("given KeyObject instance cannot be used for this algorithm");if(!Y)LG.set($,{[J]:Z});else Y[J]=Z;return Z};async function _X($,J){if($ instanceof Uint8Array)return $;if(NX($))return $;if(LH($)){if($.type==="secret")return $.export();if("toCryptoKey"in $&&typeof $.toCryptoKey==="function")try{return U5$($,J)}catch(X){if(X instanceof TypeError)throw X}let Y=$.export({format:"jwk"});return Ay($,Y,J)}if(GZ($)){if($.k)return g4($.k);return Ay($,$,J,!0)}throw Error("unreachable")}var qG=($)=>$?.[Symbol.toStringTag],lL=($,J,Y)=>{if(J.use!==void 0){let X;switch(Y){case"sign":case"verify":X="sig";break;case"encrypt":case"decrypt":X="enc";break}if(J.use!==X)throw TypeError(`Invalid key for this operation, its "use" must be "${X}" when present`)}if(J.alg!==void 0&&J.alg!==$)throw TypeError(`Invalid key for this operation, its "alg" must be "${$}" when present`);if(Array.isArray(J.key_ops)){let X;switch(!0){case(Y==="sign"||Y==="verify"):case $==="dir":case $.includes("CBC-HS"):X=Y;break;case $.startsWith("PBES2"):X="deriveBits";break;case/^A\d{3}(?:GCM)?(?:KW)?$/.test($):if(!$.includes("GCM")&&$.endsWith("KW"))X=Y==="encrypt"?"wrapKey":"unwrapKey";else X=Y;break;case(Y==="encrypt"&&$.startsWith("RSA")):X="wrapKey";break;case Y==="decrypt":X=$.startsWith("RSA")?"unwrapKey":"deriveBits";break}if(X&&J.key_ops?.includes?.(X)===!1)throw TypeError(`Invalid key for this operation, its "key_ops" must include "${X}" when present`)}return!0},F5$=($,J,Y)=>{if(J instanceof Uint8Array)return;if(GZ(J)){if(Sy(J)&&lL($,J,Y))return;throw TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!qH(J))throw TypeError(dL($,J,"CryptoKey","KeyObject","JSON Web Key","Uint8Array"));if(J.type!=="secret")throw TypeError(`${qG(J)} instances for symmetric algorithms must be of type "secret"`)},D5$=($,J,Y)=>{if(GZ(J))switch(Y){case"decrypt":case"sign":if(Oy(J)&&lL($,J,Y))return;throw TypeError("JSON Web Key for this operation must be a private JWK");case"encrypt":case"verify":if(Py(J)&&lL($,J,Y))return;throw TypeError("JSON Web Key for this operation must be a public JWK")}if(!qH(J))throw TypeError(dL($,J,"CryptoKey","KeyObject","JSON Web Key"));if(J.type==="secret")throw TypeError(`${qG(J)} instances for asymmetric algorithms must not be of type "secret"`);if(J.type==="public")switch(Y){case"sign":throw TypeError(`${qG(J)} instances for asymmetric algorithm signing must be of type "private"`);case"decrypt":throw TypeError(`${qG(J)} instances for asymmetric algorithm decryption must be of type "private"`)}if(J.type==="private")switch(Y){case"verify":throw TypeError(`${qG(J)} instances for asymmetric algorithm verifying must be of type "public"`);case"encrypt":throw TypeError(`${qG(J)} instances for asymmetric algorithm encryption must be of type "public"`)}};function A9($,J,Y){switch($.substring(0,2)){case"A1":case"A2":case"di":case"HS":case"PB":F5$($,J,Y);break;default:D5$($,J,Y)}}async function jy($,J,Y){if(!l4($))throw new k$("Flattened JWE must be an object");if($.protected===void 0&&$.header===void 0&&$.unprotected===void 0)throw new k$("JOSE Header missing");if($.iv!==void 0&&typeof $.iv!=="string")throw new k$("JWE Initialization Vector incorrect type");if(typeof $.ciphertext!=="string")throw new k$("JWE Ciphertext missing or incorrect type");if($.tag!==void 0&&typeof $.tag!=="string")throw new k$("JWE Authentication Tag incorrect type");if($.protected!==void 0&&typeof $.protected!=="string")throw new k$("JWE Protected Header incorrect type");if($.encrypted_key!==void 0&&typeof $.encrypted_key!=="string")throw new k$("JWE Encrypted Key incorrect type");if($.aad!==void 0&&typeof $.aad!=="string")throw new k$("JWE AAD incorrect type");if($.header!==void 0&&!l4($.header))throw new k$("JWE Shared Unprotected Header incorrect type");if($.unprotected!==void 0&&!l4($.unprotected))throw new k$("JWE Per-Recipient Unprotected Header incorrect type");let X;if($.protected)try{let k=g4($.protected);X=JSON.parse(B8.decode(k))}catch{throw new k$("JWE Protected Header is invalid")}if(!O9(X,$.header,$.unprotected))throw new k$("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let W={...X,...$.header,...$.unprotected};if(S9(k$,new Map,Y?.crit,X,W),W.zip!==void 0)throw new F0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:Z,enc:G}=W;if(typeof Z!=="string"||!Z)throw new k$("missing JWE Algorithm (alg) in JWE Header");if(typeof G!=="string"||!G)throw new k$("missing JWE Encryption Algorithm (enc) in JWE Header");let Q=Y&&SH("keyManagementAlgorithms",Y.keyManagementAlgorithms),H=Y&&SH("contentEncryptionAlgorithms",Y.contentEncryptionAlgorithms);if(Q&&!Q.has(Z)||!Q&&Z.startsWith("PBES2"))throw new VG('"alg" (Algorithm) Header Parameter value not allowed');if(H&&!H.has(G))throw new VG('"enc" (Encryption Algorithm) Header Parameter value not allowed');let z;if($.encrypted_key!==void 0)try{z=g4($.encrypted_key)}catch{throw new k$("Failed to base64url decode the encrypted_key")}let K=!1;if(typeof J==="function")J=await J(X,$),K=!0;A9(Z==="dir"?G:Z,J,"decrypt");let w=await _X(J,Z),F;try{F=await By(Z,w,z,W,Y)}catch(k){if(k instanceof TypeError||k instanceof k$||k instanceof F0)throw k;F=P9(G)}let U,V;if($.iv!==void 0)try{U=g4($.iv)}catch{throw new k$("Failed to base64url decode the iv")}if($.tag!==void 0)try{V=g4($.tag)}catch{throw new k$("Failed to base64url decode the tag")}let N=$.protected!==void 0?q6($.protected):new Uint8Array,P;if($.aad!==void 0)P=W8(N,q6("."),q6($.aad));else P=N;let B;try{B=g4($.ciphertext)}catch{throw new k$("Failed to base64url decode the ciphertext")}let g={plaintext:await OU(G,F,B,U,V,P)};if($.protected!==void 0)g.protectedHeader=X;if($.aad!==void 0)try{g.additionalAuthenticatedData=g4($.aad)}catch{throw new k$("Failed to base64url decode the aad")}if($.unprotected!==void 0)g.sharedUnprotectedHeader=$.unprotected;if($.header!==void 0)g.unprotectedHeader=$.header;if(K)return{...g,key:w};return g}async function Ey($,J,Y){if($ instanceof Uint8Array)$=B8.decode($);if(typeof $!=="string")throw new k$("Compact JWE must be a string or Uint8Array");let{0:X,1:W,2:Z,3:G,4:Q,length:H}=$.split(".");if(H!==5)throw new k$("Invalid Compact JWE");let z=await jy({ciphertext:G,iv:Z||void 0,protected:X,tag:Q||void 0,encrypted_key:W||void 0},J,Y),K={plaintext:z.plaintext,protectedHeader:z.protectedHeader};if(typeof J==="function")return{...K,key:z.key};return K}var Cy=Symbol();async function Ty($){if(LH($))if($.type==="secret")$=$.export();else return $.export({format:"jwk"});if($ instanceof Uint8Array)return{kty:"oct",k:t4($)};if(!NX($))throw TypeError(kJ($,"CryptoKey","KeyObject","Uint8Array"));if(!$.extractable)throw TypeError("non-extractable CryptoKey cannot be exported as a JWK");let{ext:J,key_ops:Y,alg:X,use:W,...Z}=await crypto.subtle.exportKey("jwk",$);if(Z.kty==="AKP")Z.alg=X;return Z}async function EU($){return Ty($)}async function Ry($,J,Y,X,W={}){let Z,G,Q;switch($){case"dir":{Q=Y;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(WZ(Y),!AU(Y))throw new F0("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:H,apv:z}=W,K;if(W.epk)K=await _X(W.epk,$);else K=(await crypto.subtle.generateKey(Y.algorithm,!0,["deriveBits"])).privateKey;let{x:w,y:F,crv:U,kty:V}=await EU(K),N=await SU(Y,K,$==="ECDH-ES"?J:$,$==="ECDH-ES"?PH(J):parseInt($.slice(-5,-2),10),H,z);if(G={epk:{x:w,crv:U,kty:V}},V==="EC")G.epk.y=F;if(H)G.apu=t4(H);if(z)G.apv=t4(z);if($==="ECDH-ES"){Q=N;break}Q=X||P9(J);let P=$.slice(-6);Z=await BH(P,N,Q);break}case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{Q=X||P9(J),WZ(Y),Z=await Vy($,Y,Q);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{Q=X||P9(J);let{p2c:H,p2s:z}=W;({encryptedKey:Z,...G}=await Uy($,Y,Q,H,z));break}case"A128KW":case"A192KW":case"A256KW":{Q=X||P9(J),Z=await BH($,Y,Q);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{Q=X||P9(J);let{iv:H}=W;({encryptedKey:Z,...G}=await Ly($,Y,Q,H));break}default:throw new F0('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:Q,encryptedKey:Z,parameters:G}}class nL{#$;#J;#Y;#X;#W;#Q;#G;#Z;constructor($){if(!($ instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this.#$=$}setKeyManagementParameters($){if(this.#Z)throw TypeError("setKeyManagementParameters can only be called once");return this.#Z=$,this}setProtectedHeader($){if(this.#J)throw TypeError("setProtectedHeader can only be called once");return this.#J=$,this}setSharedUnprotectedHeader($){if(this.#Y)throw TypeError("setSharedUnprotectedHeader can only be called once");return this.#Y=$,this}setUnprotectedHeader($){if(this.#X)throw TypeError("setUnprotectedHeader can only be called once");return this.#X=$,this}setAdditionalAuthenticatedData($){return this.#W=$,this}setContentEncryptionKey($){if(this.#Q)throw TypeError("setContentEncryptionKey can only be called once");return this.#Q=$,this}setInitializationVector($){if(this.#G)throw TypeError("setInitializationVector can only be called once");return this.#G=$,this}async encrypt($,J){if(!this.#J&&!this.#X&&!this.#Y)throw new k$("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!O9(this.#J,this.#X,this.#Y))throw new k$("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let Y={...this.#J,...this.#X,...this.#Y};if(S9(k$,new Map,J?.crit,this.#J,Y),Y.zip!==void 0)throw new F0('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');let{alg:X,enc:W}=Y;if(typeof X!=="string"||!X)throw new k$('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof W!=="string"||!W)throw new k$('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let Z;if(this.#Q&&(X==="dir"||X==="ECDH-ES"))throw TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${X}`);A9(X==="dir"?W:X,$,"encrypt");let G;{let N,P=await _X($,X);if({cek:G,encryptedKey:Z,parameters:N}=await Ry(X,W,P,this.#Q,this.#Z),N)if(J&&Cy in J)if(!this.#X)this.setUnprotectedHeader(N);else this.#X={...this.#X,...N};else if(!this.#J)this.setProtectedHeader(N);else this.#J={...this.#J,...N}}let Q,H,z,K;if(this.#J)H=t4(JSON.stringify(this.#J)),z=q6(H);else H="",z=new Uint8Array;if(this.#W){K=t4(this.#W);let N=q6(K);Q=W8(z,q6("."),N)}else Q=z;let{ciphertext:w,tag:F,iv:U}=await jU(W,this.#$,G,this.#G,Q),V={ciphertext:t4(w)};if(U)V.iv=t4(U);if(F)V.tag=t4(F);if(Z)V.encrypted_key=t4(Z);if(K)V.aad=K;if(this.#J)V.protected=H;if(this.#Y)V.unprotected=this.#Y;if(this.#X)V.header=this.#X;return V}}function CU($,J){let Y=`SHA-${$.slice(-3)}`;switch($){case"HS256":case"HS384":case"HS512":return{hash:Y,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:Y,name:"RSA-PSS",saltLength:parseInt($.slice(-3),10)>>3};case"RS256":case"RS384":case"RS512":return{hash:Y,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:Y,name:"ECDSA",namedCurve:J.namedCurve};case"Ed25519":case"EdDSA":return{name:"Ed25519"};case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return{name:$};default:throw new F0(`alg ${$} is not supported either by JOSE or your javascript runtime`)}}async function TU($,J,Y){if(J instanceof Uint8Array){if(!$.startsWith("HS"))throw TypeError(kJ(J,"CryptoKey","KeyObject","JSON Web Key"));return crypto.subtle.importKey("raw",J,{hash:`SHA-${$.slice(-3)}`,name:"HMAC"},!1,[Y])}return Gy(J,$,Y),J}async function Iy($,J,Y,X){let W=await TU($,J,"verify");ZZ($,W);let Z=CU($,W.algorithm);try{return await crypto.subtle.verify(Z,W,Y,X)}catch{return!1}}async function ky($,J,Y){if(!l4($))throw new S4("Flattened JWS must be an object");if($.protected===void 0&&$.header===void 0)throw new S4('Flattened JWS must have either of the "protected" or "header" members');if($.protected!==void 0&&typeof $.protected!=="string")throw new S4("JWS Protected Header incorrect type");if($.payload===void 0)throw new S4("JWS Payload missing");if(typeof $.signature!=="string")throw new S4("JWS Signature missing or incorrect type");if($.header!==void 0&&!l4($.header))throw new S4("JWS Unprotected Header incorrect type");let X={};if($.protected)try{let P=g4($.protected);X=JSON.parse(B8.decode(P))}catch{throw new S4("JWS Protected Header is invalid")}if(!O9(X,$.header))throw new S4("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let W={...X,...$.header},Z=S9(S4,new Map([["b64",!0]]),Y?.crit,X,W),G=!0;if(Z.has("b64")){if(G=X.b64,typeof G!=="boolean")throw new S4('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:Q}=W;if(typeof Q!=="string"||!Q)throw new S4('JWS "alg" (Algorithm) Header Parameter missing or invalid');let H=Y&&SH("algorithms",Y.algorithms);if(H&&!H.has(Q))throw new VG('"alg" (Algorithm) Header Parameter value not allowed');if(G){if(typeof $.payload!=="string")throw new S4("JWS Payload must be a string")}else if(typeof $.payload!=="string"&&!($.payload instanceof Uint8Array))throw new S4("JWS Payload must be a string or an Uint8Array instance");let z=!1;if(typeof J==="function")J=await J(X,$),z=!0;A9(Q,J,"verify");let K=W8($.protected!==void 0?q6($.protected):new Uint8Array,q6("."),typeof $.payload==="string"?G?q6($.payload):XZ.encode($.payload):$.payload),w;try{w=g4($.signature)}catch{throw new S4("Failed to base64url decode the signature")}let F=await _X(J,Q);if(!await Iy(Q,F,w,K))throw new mL;let V;if(G)try{V=g4($.payload)}catch{throw new S4("Failed to base64url decode the payload")}else if(typeof $.payload==="string")V=XZ.encode($.payload);else V=$.payload;let N={payload:V};if($.protected!==void 0)N.protectedHeader=X;if($.header!==void 0)N.unprotectedHeader=$.header;if(z)return{...N,key:F};return N}async function by($,J,Y){if($ instanceof Uint8Array)$=B8.decode($);if(typeof $!=="string")throw new S4("Compact JWS must be a string or Uint8Array");let{0:X,1:W,2:Z,length:G}=$.split(".");if(G!==3)throw new S4("Invalid Compact JWS");let Q=await ky({payload:W,protected:X,signature:Z},J,Y),H={payload:Q.payload,protectedHeader:Q.protectedHeader};if(typeof J==="function")return{...H,key:Q.key};return H}var j9=($)=>Math.floor($.getTime()/1000),fy=60,gy=fy*60,iL=gy*24,M5$=iL*7,V5$=iL*365.25,N5$=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;function AH($){let J=N5$.exec($);if(!J||J[4]&&J[1])throw TypeError("Invalid time period format");let Y=parseFloat(J[2]),X=J[3].toLowerCase(),W;switch(X){case"sec":case"secs":case"second":case"seconds":case"s":W=Math.round(Y);break;case"minute":case"minutes":case"min":case"mins":case"m":W=Math.round(Y*fy);break;case"hour":case"hours":case"hr":case"hrs":case"h":W=Math.round(Y*gy);break;case"day":case"days":case"d":W=Math.round(Y*iL);break;case"week":case"weeks":case"w":W=Math.round(Y*M5$);break;default:W=Math.round(Y*V5$);break}if(J[1]==="-"||J[4]==="ago")return-W;return W}function QZ($,J){if(!Number.isFinite(J))throw TypeError(`Invalid ${$} input`);return J}var vy=($)=>{if($.includes("/"))return $.toLowerCase();return`application/${$.toLowerCase()}`},_5$=($,J)=>{if(typeof $==="string")return J.includes($);if(Array.isArray($))return J.some(Set.prototype.has.bind(new Set($)));return!1};function RU($,J,Y={}){let X;try{X=JSON.parse(B8.decode(J))}catch{}if(!l4(X))throw new J1("JWT Claims Set must be a top-level JSON object");let{typ:W}=Y;if(W&&(typeof $.typ!=="string"||vy($.typ)!==vy(W)))throw new y8('unexpected "typ" JWT header value',X,"typ","check_failed");let{requiredClaims:Z=[],issuer:G,subject:Q,audience:H,maxTokenAge:z}=Y,K=[...Z];if(z!==void 0)K.push("iat");if(H!==void 0)K.push("aud");if(Q!==void 0)K.push("sub");if(G!==void 0)K.push("iss");for(let V of new Set(K.reverse()))if(!(V in X))throw new y8(`missing required "${V}" claim`,X,V,"missing");if(G&&!(Array.isArray(G)?G:[G]).includes(X.iss))throw new y8('unexpected "iss" claim value',X,"iss","check_failed");if(Q&&X.sub!==Q)throw new y8('unexpected "sub" claim value',X,"sub","check_failed");if(H&&!_5$(X.aud,typeof H==="string"?[H]:H))throw new y8('unexpected "aud" claim value',X,"aud","check_failed");let w;switch(typeof Y.clockTolerance){case"string":w=AH(Y.clockTolerance);break;case"number":w=Y.clockTolerance;break;case"undefined":w=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:F}=Y,U=j9(F||new Date);if((X.iat!==void 0||z)&&typeof X.iat!=="number")throw new y8('"iat" claim must be a number',X,"iat","invalid");if(X.nbf!==void 0){if(typeof X.nbf!=="number")throw new y8('"nbf" claim must be a number',X,"nbf","invalid");if(X.nbf>U+w)throw new y8('"nbf" claim timestamp check failed',X,"nbf","check_failed")}if(X.exp!==void 0){if(typeof X.exp!=="number")throw new y8('"exp" claim must be a number',X,"exp","invalid");if(X.exp<=U-w)throw new MG('"exp" claim timestamp check failed',X,"exp","check_failed")}if(z){let V=U-X.iat,N=typeof z==="number"?z:AH(z);if(V-w>N)throw new MG('"iat" claim timestamp check failed (too far in the past)',X,"iat","check_failed");if(V<0-w)throw new y8('"iat" claim timestamp check failed (it should be in the past)',X,"iat","check_failed")}return X}class jH{#$;constructor($){if(!l4($))throw TypeError("JWT Claims Set MUST be an object");this.#$=structuredClone($)}data(){return XZ.encode(JSON.stringify(this.#$))}get iss(){return this.#$.iss}set iss($){this.#$.iss=$}get sub(){return this.#$.sub}set sub($){this.#$.sub=$}get aud(){return this.#$.aud}set aud($){this.#$.aud=$}set jti($){this.#$.jti=$}set nbf($){if(typeof $==="number")this.#$.nbf=QZ("setNotBefore",$);else if($ instanceof Date)this.#$.nbf=QZ("setNotBefore",j9($));else this.#$.nbf=j9(new Date)+AH($)}set exp($){if(typeof $==="number")this.#$.exp=QZ("setExpirationTime",$);else if($ instanceof Date)this.#$.exp=QZ("setExpirationTime",j9($));else this.#$.exp=j9(new Date)+AH($)}set iat($){if($===void 0)this.#$.iat=j9(new Date);else if($ instanceof Date)this.#$.iat=QZ("setIssuedAt",j9($));else if(typeof $==="string")this.#$.iat=QZ("setIssuedAt",j9(new Date)+AH($));else this.#$.iat=QZ("setIssuedAt",$)}}async function e1($,J,Y){let X=await by($,J,Y);if(X.protectedHeader.crit?.includes("b64")&&X.protectedHeader.b64===!1)throw new J1("JWTs MUST NOT use unencoded payload");let Z={payload:RU(X.protectedHeader,X.payload,Y),protectedHeader:X.protectedHeader};if(typeof J==="function")return{...Z,key:X.key};return Z}async function rL($,J,Y){let X=await Ey($,J,Y),W=RU(X.protectedHeader,X.plaintext,Y),{protectedHeader:Z}=X;if(Z.iss!==void 0&&Z.iss!==W.iss)throw new y8('replicated "iss" claim header parameter mismatch',W,"iss","mismatch");if(Z.sub!==void 0&&Z.sub!==W.sub)throw new y8('replicated "sub" claim header parameter mismatch',W,"sub","mismatch");if(Z.aud!==void 0&&JSON.stringify(Z.aud)!==JSON.stringify(W.aud))throw new y8('replicated "aud" claim header parameter mismatch',W,"aud","mismatch");let G={payload:W,protectedHeader:Z};if(typeof J==="function")return{...G,key:X.key};return G}class oL{#$;constructor($){this.#$=new nL($)}setContentEncryptionKey($){return this.#$.setContentEncryptionKey($),this}setInitializationVector($){return this.#$.setInitializationVector($),this}setProtectedHeader($){return this.#$.setProtectedHeader($),this}setKeyManagementParameters($){return this.#$.setKeyManagementParameters($),this}async encrypt($,J){let Y=await this.#$.encrypt($,J);return[Y.protected,Y.encrypted_key,Y.iv,Y.ciphertext,Y.tag].join(".")}}async function xy($,J,Y){let X=await TU($,J,"sign");ZZ($,X);let W=await crypto.subtle.sign(CU($,X.algorithm),X,Y);return new Uint8Array(W)}class tL{#$;#J;#Y;constructor($){if(!($ instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this.#$=$}setProtectedHeader($){if(this.#J)throw TypeError("setProtectedHeader can only be called once");return this.#J=$,this}setUnprotectedHeader($){if(this.#Y)throw TypeError("setUnprotectedHeader can only be called once");return this.#Y=$,this}async sign($,J){if(!this.#J&&!this.#Y)throw new S4("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!O9(this.#J,this.#Y))throw new S4("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let Y={...this.#J,...this.#Y},X=S9(S4,new Map([["b64",!0]]),J?.crit,this.#J,Y),W=!0;if(X.has("b64")){if(W=this.#J.b64,typeof W!=="boolean")throw new S4('The "b64" (base64url-encode payload) Header Parameter must be a boolean')}let{alg:Z}=Y;if(typeof Z!=="string"||!Z)throw new S4('JWS "alg" (Algorithm) Header Parameter missing or invalid');A9(Z,$,"sign");let G,Q;if(W)G=t4(this.#$),Q=q6(G);else Q=this.#$,G="";let H,z;if(this.#J)H=t4(JSON.stringify(this.#J)),z=q6(H);else H="",z=new Uint8Array;let K=W8(z,q6("."),Q),w=await _X($,Z),F=await xy(Z,w,K),U={signature:t4(F),payload:G};if(this.#Y)U.header=this.#Y;if(this.#J)U.protected=H;return U}}class aL{#$;constructor($){this.#$=new tL($)}setProtectedHeader($){return this.#$.setProtectedHeader($),this}async sign($,J){let Y=await this.#$.sign($,J);if(Y.payload===void 0)throw TypeError("use the flattened module for creating JWS with b64: false");return`${Y.protected}.${Y.payload}.${Y.signature}`}}class IU{#$;#J;constructor($={}){this.#J=new jH($)}setIssuer($){return this.#J.iss=$,this}setSubject($){return this.#J.sub=$,this}setAudience($){return this.#J.aud=$,this}setJti($){return this.#J.jti=$,this}setNotBefore($){return this.#J.nbf=$,this}setExpirationTime($){return this.#J.exp=$,this}setIssuedAt($){return this.#J.iat=$,this}setProtectedHeader($){return this.#$=$,this}async sign($,J){let Y=new aL(this.#J.data());if(Y.setProtectedHeader(this.#$),Array.isArray(this.#$?.crit)&&this.#$.crit.includes("b64")&&this.#$.b64===!1)throw new J1("JWTs MUST NOT use unencoded payload");return Y.sign($,J)}}class kU{#$;#J;#Y;#X;#W;#Q;#G;#Z;constructor($={}){this.#Z=new jH($)}setIssuer($){return this.#Z.iss=$,this}setSubject($){return this.#Z.sub=$,this}setAudience($){return this.#Z.aud=$,this}setJti($){return this.#Z.jti=$,this}setNotBefore($){return this.#Z.nbf=$,this}setExpirationTime($){return this.#Z.exp=$,this}setIssuedAt($){return this.#Z.iat=$,this}setProtectedHeader($){if(this.#X)throw TypeError("setProtectedHeader can only be called once");return this.#X=$,this}setKeyManagementParameters($){if(this.#Y)throw TypeError("setKeyManagementParameters can only be called once");return this.#Y=$,this}setContentEncryptionKey($){if(this.#$)throw TypeError("setContentEncryptionKey can only be called once");return this.#$=$,this}setInitializationVector($){if(this.#J)throw TypeError("setInitializationVector can only be called once");return this.#J=$,this}replicateIssuerAsHeader(){return this.#W=!0,this}replicateSubjectAsHeader(){return this.#Q=!0,this}replicateAudienceAsHeader(){return this.#G=!0,this}async encrypt($,J){let Y=new oL(this.#Z.data());if(this.#X&&(this.#W||this.#Q||this.#G))this.#X={...this.#X,iss:this.#W?this.#Z.iss:void 0,sub:this.#Q?this.#Z.sub:void 0,aud:this.#G?this.#Z.aud:void 0};if(Y.setProtectedHeader(this.#X),this.#J)Y.setInitializationVector(this.#J);if(this.#$)Y.setContentEncryptionKey(this.#$);if(this.#Y)Y.setKeyManagementParameters(this.#Y);return Y.encrypt($,J)}}var LX=($,J)=>{if(typeof $!=="string"||!$)throw new xL(`${J} missing or invalid`)};async function bU($,J){let Y;if(GZ($))Y=$;else if(qH($))Y=await EU($);else throw TypeError(kJ($,"CryptoKey","KeyObject","JSON Web Key"));if(J??="sha256",J!=="sha256"&&J!=="sha384"&&J!=="sha512")throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let X;switch(Y.kty){case"AKP":LX(Y.alg,'"alg" (Algorithm) Parameter'),LX(Y.pub,'"pub" (Public key) Parameter'),X={alg:Y.alg,kty:Y.kty,pub:Y.pub};break;case"EC":LX(Y.crv,'"crv" (Curve) Parameter'),LX(Y.x,'"x" (X Coordinate) Parameter'),LX(Y.y,'"y" (Y Coordinate) Parameter'),X={crv:Y.crv,kty:Y.kty,x:Y.x,y:Y.y};break;case"OKP":LX(Y.crv,'"crv" (Subtype of Key Pair) Parameter'),LX(Y.x,'"x" (Public Key) Parameter'),X={crv:Y.crv,kty:Y.kty,x:Y.x};break;case"RSA":LX(Y.e,'"e" (Exponent) Parameter'),LX(Y.n,'"n" (Modulus) Parameter'),X={e:Y.e,kty:Y.kty,n:Y.n};break;case"oct":LX(Y.k,'"k" (Key Value) Parameter'),X={k:Y.k,kty:Y.kty};break;default:throw new F0('"kty" (Key Type) Parameter missing or unsupported')}let W=q6(JSON.stringify(X));return t4(await PU(J,W))}function L5$($){switch(typeof $==="string"&&$.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";case"ML":return"AKP";default:throw new F0('Unsupported "alg" value for a JSON Web Key Set')}}function q5$($){return $&&typeof $==="object"&&Array.isArray($.keys)&&$.keys.every(B5$)}function B5$($){return l4($)}class hy{#$;#J=new WeakMap;constructor($){if(!q5$($))throw new LU("JSON Web Key Set malformed");this.#$=structuredClone($)}jwks(){return this.#$}async getKey($,J){let{alg:Y,kid:X}={...$,...J?.header},W=L5$(Y),Z=this.#$.keys.filter((H)=>{let z=W===H.kty;if(z&&typeof X==="string")z=X===H.kid;if(z&&(typeof H.alg==="string"||W==="AKP"))z=Y===H.alg;if(z&&typeof H.use==="string")z=H.use==="sig";if(z&&Array.isArray(H.key_ops))z=H.key_ops.includes("verify");if(z)switch(Y){case"ES256":z=H.crv==="P-256";break;case"ES384":z=H.crv==="P-384";break;case"ES512":z=H.crv==="P-521";break;case"Ed25519":case"EdDSA":z=H.crv==="Ed25519";break}return z}),{0:G,length:Q}=Z;if(Q===0)throw new _H;if(Q!==1){let H=new yL,z=this.#J;throw H[Symbol.asyncIterator]=async function*(){for(let K of Z)try{yield await yy(z,K,Y)}catch{}},H}return yy(this.#J,G,Y)}}async function yy($,J,Y){let X=$.get(J)||$.set(J,{}).get(J);if(X[Y]===void 0){let W=await EY({...J,ext:!0},Y);if(W instanceof Uint8Array||W.type!=="public")throw new LU("JSON Web Key Set members must be public keys");X[Y]=W}return X[Y]}function sL($){let J=new hy($),Y=async(X,W)=>J.getKey(X,W);return Object.defineProperties(Y,{jwks:{value:()=>structuredClone(J.jwks()),enumerable:!1,configurable:!1,writable:!1}}),Y}function O5$(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var eL;if(typeof navigator>"u"||!navigator.userAgent?.startsWith?.("Mozilla/5.0 "))eL="jose/v6.1.3";var my=Symbol();async function P5$($,J,Y,X=fetch){let W=await X($,{method:"GET",signal:Y,redirect:"manual",headers:J}).catch((Z)=>{if(Z.name==="TimeoutError")throw new hL;throw Z});if(W.status!==200)throw new Z8("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await W.json()}catch{throw new Z8("Failed to parse the JSON Web Key Set HTTP response as JSON")}}var vU=Symbol();function S5$($,J){if(typeof $!=="object"||$===null)return!1;if(!("uat"in $)||typeof $.uat!=="number"||Date.now()-$.uat>=J)return!1;if(!("jwks"in $)||!l4($.jwks)||!Array.isArray($.jwks.keys)||!Array.prototype.every.call($.jwks.keys,l4))return!1;return!0}class uy{#$;#J;#Y;#X;#W;#Q;#G;#Z;#H;#z;constructor($,J){if(!($ instanceof URL))throw TypeError("url must be an instance of URL");if(this.#$=new URL($.href),this.#J=typeof J?.timeoutDuration==="number"?J?.timeoutDuration:5000,this.#Y=typeof J?.cooldownDuration==="number"?J?.cooldownDuration:30000,this.#X=typeof J?.cacheMaxAge==="number"?J?.cacheMaxAge:600000,this.#G=new Headers(J?.headers),eL&&!this.#G.has("User-Agent"))this.#G.set("User-Agent",eL);if(!this.#G.has("accept"))this.#G.set("accept","application/json"),this.#G.append("accept","application/jwk-set+json");if(this.#Z=J?.[my],J?.[vU]!==void 0){if(this.#z=J?.[vU],S5$(J?.[vU],this.#X))this.#W=this.#z.uat,this.#H=sL(this.#z.jwks)}}pendingFetch(){return!!this.#Q}coolingDown(){return typeof this.#W==="number"?Date.now()<this.#W+this.#Y:!1}fresh(){return typeof this.#W==="number"?Date.now()<this.#W+this.#X:!1}jwks(){return this.#H?.jwks()}async getKey($,J){if(!this.#H||!this.fresh())await this.reload();try{return await this.#H($,J)}catch(Y){if(Y instanceof _H){if(this.coolingDown()===!1)return await this.reload(),this.#H($,J)}throw Y}}async reload(){if(this.#Q&&O5$())this.#Q=void 0;this.#Q||=P5$(this.#$.href,this.#G,AbortSignal.timeout(this.#J),this.#Z).then(($)=>{if(this.#H=sL($),this.#z)this.#z.uat=Date.now(),this.#z.jwks=$;this.#W=Date.now(),this.#Q=void 0}).catch(($)=>{throw this.#Q=void 0,$}),await this.#Q}}function $q($,J){let Y=new uy($,J),X=async(W,Z)=>Y.getKey(W,Z);return Object.defineProperties(X,{coolingDown:{get:()=>Y.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>Y.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>Y.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>Y.pendingFetch(),enumerable:!0,configurable:!1},jwks:{value:()=>Y.jwks(),enumerable:!0,configurable:!1,writable:!1}}),X}function HZ($){let J;if(typeof $==="string"){let Y=$.split(".");if(Y.length===3||Y.length===5)[J]=Y}else if(typeof $==="object"&&$)if("protected"in $)J=$.protected;else throw TypeError("Token does not contain a Protected Header");try{if(typeof J!=="string"||!J)throw Error();let Y=JSON.parse(B8.decode(g4(J)));if(!l4(Y))throw Error();return Y}catch{throw TypeError("Invalid Token or Protected Header formatting")}}function p6($){if(typeof $!=="string")throw new J1("JWTs must use Compact JWS serialization, JWT must be a string");let{1:J,length:Y}=$.split(".");if(Y===5)throw new J1("Only JWTs using Compact JWS serialization can be decoded");if(Y!==3)throw new J1("Invalid JWT");if(!J)throw new J1("JWTs must contain a payload");let X;try{X=g4(J)}catch{throw new J1("Failed to base64url decode the payload")}let W;try{W=JSON.parse(B8.decode(X))}catch{throw new J1("Failed to parse the decoded payload as JSON")}if(!l4(W))throw new J1("Invalid JWT Claims Set");return W}async function EH($,J,Y=3600){return await new IU($).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1000)+Y).sign(new TextEncoder().encode(J))}async function fU($,J){try{return(await e1($,new TextEncoder().encode(J))).payload}catch{return null}}var dy=new Uint8Array([66,101,116,116,101,114,65,117,116,104,46,106,115,32,71,101,110,101,114,97,116,101,100,32,69,110,99,114,121,112,116,105,111,110,32,75,101,121]),A5$=()=>Date.now()/1000|0,cy="dir",py="A256CBC-HS512";async function CH($,J,Y,X=3600){let W=kL(DG,new TextEncoder().encode(J),new TextEncoder().encode(Y),dy,64),Z=await bU({kty:"oct",k:VH.encode(W)},"sha256");return await new kU($).setProtectedHeader({alg:cy,enc:py,kid:Z}).setIssuedAt().setExpirationTime(A5$()+X).setJti(crypto.randomUUID()).encrypt(W)}async function BG($,J,Y){if(!$)return null;try{let{payload:X}=await rL($,async({kid:W})=>{let Z=kL(DG,new TextEncoder().encode(J),new TextEncoder().encode(Y),dy,64);if(W===void 0)return Z;if(W===await bU({kty:"oct",k:VH.encode(Z)},"sha256"))return Z;throw Error("no matching decryption secret")},{clockTolerance:15,keyManagementAlgorithms:[cy],contentEncryptionAlgorithms:[py,"A256GCM"]});return X}catch{return null}}$0();var tG={encode:($)=>{if(typeof $==="string")$=new TextEncoder().encode($);if($.byteLength===0)return"";let J=new Uint8Array($),Y="";for(let X of J)Y+=X.toString(16).padStart(2,"0");return Y},decode:($)=>{if(!$)return"";if(typeof $==="string"){if($.length%2!==0)throw Error("Invalid hexadecimal string");if(!new RegExp("^[0123456789abcdef]+$").test($))throw Error("Invalid hexadecimal string");let J=new Uint8Array($.length/2);for(let Y=0;Y<$.length;Y+=2)J[Y/2]=parseInt($.slice(Y,Y+2),16);return new TextDecoder().decode(J)}return new TextDecoder().decode($)}};function NG$($,J,Y,X){$Z($);let W=wU({dkLen:32,asyncTick:10},X),{c:Z,dkLen:G,asyncTick:Q}=W;if(Y8(Z,"c"),Y8(G,"dkLen"),Y8(Q,"asyncTick"),Z<1)throw Error("iterations (c) must be >= 1");let H=TL(J,"password"),z=TL(Y,"salt"),K=new Uint8Array(G),w=FG.create($,H),F=w._cloneInto().update(z);return{c:Z,dkLen:G,asyncTick:Q,DK:K,PRF:w,PRFSalt:F}}function _G$($,J,Y,X,W){if($.destroy(),J.destroy(),X)X.destroy();return X8(W),Y}function Zj($,J,Y,X){let{c:W,dkLen:Z,DK:G,PRF:Q,PRFSalt:H}=NG$($,J,Y,X),z,K=new Uint8Array(4),w=wG(K),F=new Uint8Array(Q.outputLen);for(let U=1,V=0;V<Z;U++,V+=Q.outputLen){let N=G.subarray(V,V+Q.outputLen);w.setInt32(0,U,!1),(z=H._cloneInto(z)).update(K).digestInto(F),N.set(F.subarray(0,N.length));for(let P=1;P<W;P++){Q._cloneInto(z).update(F).digestInto(F);for(let B=0;B<N.length;B++)N[B]^=F[B]}}return _G$(Q,H,G,z,F)}function xm($,J,Y,X,W,Z){let G=$[J++]^Y[X++],Q=$[J++]^Y[X++],H=$[J++]^Y[X++],z=$[J++]^Y[X++],K=$[J++]^Y[X++],w=$[J++]^Y[X++],F=$[J++]^Y[X++],U=$[J++]^Y[X++],V=$[J++]^Y[X++],N=$[J++]^Y[X++],P=$[J++]^Y[X++],B=$[J++]^Y[X++],L=$[J++]^Y[X++],g=$[J++]^Y[X++],k=$[J++]^Y[X++],I=$[J++]^Y[X++],O=G,b=Q,D=H,_=z,q=K,S=w,j=F,E=U,T=V,R=N,v=P,h=B,y=L,o=g,G$=k,Z$=I;for(let _$=0;_$<8;_$+=2)q^=l0(O+y|0,7),T^=l0(q+O|0,9),y^=l0(T+q|0,13),O^=l0(y+T|0,18),R^=l0(S+b|0,7),o^=l0(R+S|0,9),b^=l0(o+R|0,13),S^=l0(b+o|0,18),G$^=l0(v+j|0,7),D^=l0(G$+v|0,9),j^=l0(D+G$|0,13),v^=l0(j+D|0,18),_^=l0(Z$+h|0,7),E^=l0(_+Z$|0,9),h^=l0(E+_|0,13),Z$^=l0(h+E|0,18),b^=l0(O+_|0,7),D^=l0(b+O|0,9),_^=l0(D+b|0,13),O^=l0(_+D|0,18),j^=l0(S+q|0,7),E^=l0(j+S|0,9),q^=l0(E+j|0,13),S^=l0(q+E|0,18),h^=l0(v+R|0,7),T^=l0(h+v|0,9),R^=l0(T+h|0,13),v^=l0(R+T|0,18),y^=l0(Z$+G$|0,7),o^=l0(y+Z$|0,9),G$^=l0(o+y|0,13),Z$^=l0(G$+o|0,18);W[Z++]=G+O|0,W[Z++]=Q+b|0,W[Z++]=H+D|0,W[Z++]=z+_|0,W[Z++]=K+q|0,W[Z++]=w+S|0,W[Z++]=F+j|0,W[Z++]=U+E|0,W[Z++]=V+T|0,W[Z++]=N+R|0,W[Z++]=P+v|0,W[Z++]=B+h|0,W[Z++]=L+y|0,W[Z++]=g+o|0,W[Z++]=k+G$|0,W[Z++]=I+Z$|0}function Gj($,J,Y,X,W){let Z=X+0,G=X+16*W;for(let Q=0;Q<16;Q++)Y[G+Q]=$[J+(2*W-1)*16+Q];for(let Q=0;Q<W;Q++,Z+=16,J+=16){if(xm(Y,G,$,J,Y,Z),Q>0)G+=16;xm(Y,Z,$,J+=16,Y,G)}}function LG$($,J,Y){let X=wU({dkLen:32,asyncTick:10,maxmem:1073742848},Y),{N:W,r:Z,p:G,dkLen:Q,asyncTick:H,maxmem:z,onProgress:K}=X;if(Y8(W,"N"),Y8(Z,"r"),Y8(G,"p"),Y8(Q,"dkLen"),Y8(H,"asyncTick"),Y8(z,"maxmem"),K!==void 0&&typeof K!=="function")throw Error("progressCb must be a function");let w=128*Z,F=w/4,U=Math.pow(2,32);if(W<=1||(W&W-1)!==0||W>U)throw Error('"N" expected a power of 2, and 2^1 <= N <= 2^32');if(G<1||G>(U-1)*32/w)throw Error('"p" expected integer 1..((2^32 - 1) * 32) / (128 * r)');if(Q<1||Q>(U-1)*32)throw Error('"dkLen" expected integer 1..(2^32 - 1) * 32');if(w*(W+G)>z)throw Error('"maxmem" limit was hit, expected 128*r*(N+p) <= "maxmem"='+z);let N=Zj(DG,$,J,{c:1,dkLen:w*G}),P=KG(N),B=KG(new Uint8Array(w*W)),L=KG(new Uint8Array(w)),g=()=>{};if(K){let k=2*W*G,I=Math.max(Math.floor(k/1e4),1),O=0;g=()=>{if(O++,K&&(!(O%I)||O===k))K(O/k)}}return{N:W,r:Z,p:G,dkLen:Q,blockSize32:F,V:B,B32:P,B:N,tmp:L,blockMixCb:g,asyncTick:H}}function qG$($,J,Y,X,W){let Z=Zj(DG,$,Y,{c:1,dkLen:J});return X8(Y,X,W),Z}async function ym($,J,Y){let{N:X,r:W,p:Z,dkLen:G,blockSize32:Q,V:H,B32:z,B:K,tmp:w,blockMixCb:F,asyncTick:U}=LG$($,J,Y);UG(z);for(let V=0;V<Z;V++){let N=Q*V;for(let B=0;B<Q;B++)H[B]=z[N+B];let P=0;await KU(X-1,U,()=>{Gj(H,P,H,P+=Q,W),F()}),Gj(H,(X-1)*Q,z,N,W),F(),await KU(X,U,()=>{let B=(z[N+Q-16]&X-1)>>>0;for(let L=0;L<Q;L++)w[L]=z[N+L]^H[B*Q+L];Gj(w,0,z,N,W),F()})}return UG(z),qG$($,G,K,H,w)}var aG={N:16384,r:16,p:1,dkLen:64};async function hm($,J){return await ym($.normalize("NFKC"),J,{N:aG.N,p:aG.p,r:aG.r,dkLen:aG.dkLen,maxmem:128*aG.N*aG.r*2})}var Qj=async($)=>{let J=tG.encode(crypto.getRandomValues(new Uint8Array(16))),Y=await hm($,J);return`${J}:${tG.encode(Y)}`},Hj=async({hash:$,password:J})=>{let[Y,X]=$.split(":");if(!Y||!X)throw new q$("Invalid password hash");return UH(await hm(J,Y),hx(X))};function fJ(){let $=typeof globalThis<"u"&&globalThis.crypto;if($&&typeof $.subtle==="object"&&$.subtle!=null)return $.subtle;throw Error("crypto.subtle must be defined")}function iD($){return $?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function mm($,J,Y){let X="",W=0,Z=0;for(let G of $){W=W<<8|G,Z+=8;while(Z>=6)Z-=6,X+=J[W>>Z&63]}if(Z>0)X+=J[W<<6-Z&63];if(Y){let G=(4-X.length%4)%4;X+="=".repeat(G)}return X}function um($,J){let Y=new Map;for(let G=0;G<J.length;G++)Y.set(J[G],G);let X=[],W=0,Z=0;for(let G of $){if(G==="=")break;let Q=Y.get(G);if(Q===void 0)throw Error(`Invalid Base64 character: ${G}`);if(W=W<<6|Q,Z+=6,Z>=8)Z-=8,X.push(W>>Z&255)}return Uint8Array.from(X)}var I6={encode($,J={}){let Y=iD(!1),X=typeof $==="string"?new TextEncoder().encode($):new Uint8Array($);return mm(X,Y,J.padding??!0)},decode($){if(typeof $!=="string")$=new TextDecoder().decode($);let J=$.includes("-")||$.includes("_"),Y=iD(J);return um($,Y)}},O8={encode($,J={}){let Y=iD(!0),X=typeof $==="string"?new TextEncoder().encode($):new Uint8Array($);return mm(X,Y,J.padding??!0)},decode($){let J=$.includes("-")||$.includes("_"),Y=iD(J);return um($,Y)}};function S1($,J){return{digest:async(Y)=>{let W=typeof Y==="string"?new TextEncoder().encode(Y):Y,Z=await fJ().digest($,W);if(J==="hex")return Array.from(new Uint8Array(Z)).map((H)=>H.toString(16).padStart(2,"0")).join("");if(J==="base64"||J==="base64url"||J==="base64urlnopad"){if(J.includes("url"))return O8.encode(Z,{padding:J!=="base64urlnopad"});return I6.encode(Z)}return Z}}}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function BG$($){return $ instanceof Uint8Array||ArrayBuffer.isView($)&&$.constructor.name==="Uint8Array"}function rD($){if(typeof $!=="boolean")throw Error(`boolean expected, not ${$}`)}function dz($){if(!Number.isSafeInteger($)||$<0)throw Error("positive integer expected, got "+$)}function P6($,J,Y=""){let X=BG$($),W=$?.length,Z=J!==void 0;if(!X||Z&&W!==J){let G=Y&&`"${Y}" `,Q=Z?` of length ${J}`:"",H=X?`length=${W}`:`type=${typeof $}`;throw Error(G+"expected Uint8Array"+Q+", got "+H)}return $}function zj($,J=!0){if($.destroyed)throw Error("Hash instance has been destroyed");if(J&&$.finished)throw Error("Hash#digest() has already been called")}function cm($,J){P6($,void 0,"output");let Y=J.outputLen;if($.length<Y)throw Error("digestInto() expects output buffer of length at least "+Y)}function AW($){return new Uint32Array($.buffer,$.byteOffset,Math.floor($.byteLength/4))}function jW(...$){for(let J=0;J<$.length;J++)$[J].fill(0)}function OG$($){return new DataView($.buffer,$.byteOffset,$.byteLength)}var PG$=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)(),pm=(()=>typeof Uint8Array.from([]).toHex==="function"&&typeof Uint8Array.fromHex==="function")(),SG$=Array.from({length:256},($,J)=>J.toString(16).padStart(2,"0"));function Kj($){if(P6($),pm)return $.toHex();let J="";for(let Y=0;Y<$.length;Y++)J+=SG$[$[Y]];return J}var SW={_0:48,_9:57,A:65,F:70,a:97,f:102};function dm($){if($>=SW._0&&$<=SW._9)return $-SW._0;if($>=SW.A&&$<=SW.F)return $-(SW.A-10);if($>=SW.a&&$<=SW.f)return $-(SW.a-10);return}function lm($){if(typeof $!=="string")throw Error("hex string expected, got "+typeof $);if(pm)return Uint8Array.fromHex($);let J=$.length,Y=J/2;if(J%2)throw Error("hex string expected, got unpadded hex of length "+J);let X=new Uint8Array(Y);for(let W=0,Z=0;W<Y;W++,Z+=2){let G=dm($.charCodeAt(Z)),Q=dm($.charCodeAt(Z+1));if(G===void 0||Q===void 0){let H=$[Z]+$[Z+1];throw Error('hex string expected, got non-hex character "'+H+'" at index '+Z)}X[W]=G*16+Q}return X}function nm($){if(typeof $!=="string")throw Error("string expected");return new Uint8Array(new TextEncoder().encode($))}function im(...$){let J=0;for(let X=0;X<$.length;X++){let W=$[X];P6(W),J+=W.length}let Y=new Uint8Array(J);for(let X=0,W=0;X<$.length;X++){let Z=$[X];Y.set(Z,W),W+=Z.length}return Y}function rm($,J){if(J==null||typeof J!=="object")throw Error("options must be defined");return Object.assign($,J)}function om($,J){if($.length!==J.length)return!1;let Y=0;for(let X=0;X<$.length;X++)Y|=$[X]^J[X];return Y===0}var wj=($,J)=>{function Y(X,...W){if(P6(X,void 0,"key"),!PG$)throw Error("Non little-endian hardware is not yet supported");if($.nonceLength!==void 0){let K=W[0];P6(K,$.varSizeNonce?void 0:$.nonceLength,"nonce")}let Z=$.tagLength;if(Z&&W[1]!==void 0)P6(W[1],void 0,"AAD");let G=J(X,...W),Q=(K,w)=>{if(w!==void 0){if(K!==2)throw Error("cipher output not supported");P6(w,void 0,"output")}},H=!1;return{encrypt(K,w){if(H)throw Error("cannot encrypt() twice with same key + nonce");return H=!0,P6(K),Q(G.encrypt.length,w),G.encrypt(K,w)},decrypt(K,w){if(P6(K),Z&&K.length<Z)throw Error('"ciphertext" expected length bigger than tagLength='+Z);return Q(G.decrypt.length,w),G.decrypt(K,w)}}}return Object.assign(Y,$),Y};function Uj($,J,Y=!0){if(J===void 0)return new Uint8Array($);if(J.length!==$)throw Error('"output" expected Uint8Array of length '+$+", got: "+J.length);if(Y&&!AG$(J))throw Error("invalid output, must be aligned");return J}function tm($,J,Y){rD(Y);let X=new Uint8Array(16),W=OG$(X);return W.setBigUint64(0,BigInt(J),Y),W.setBigUint64(8,BigInt($),Y),X}function AG$($){return $.byteOffset%4===0}function sG($){return Uint8Array.from($)}function am($=32){let J=typeof globalThis==="object"?globalThis.crypto:null;if(typeof J?.getRandomValues!=="function")throw Error("crypto.getRandomValues must be defined");return J.getRandomValues(new Uint8Array($))}function Fj($,J=am){let{nonceLength:Y}=$;dz(Y);let X=(W,Z)=>{let G=im(W,Z);return Z.fill(0),G};return(W,...Z)=>({encrypt(G){P6(G);let Q=J(Y),H=$(W,Q,...Z).encrypt(G);if(H instanceof Promise)return H.then((z)=>X(Q,z));return X(Q,H)},decrypt(G){P6(G);let Q=G.subarray(0,Y),H=G.subarray(Y);return $(W,Q,...Z).decrypt(H)}})}var em=($)=>Uint8Array.from($.split(""),(J)=>J.charCodeAt(0)),jG$=em("expand 16-byte k"),EG$=em("expand 32-byte k"),CG$=AW(jG$),TG$=AW(EG$);function T$($,J){return $<<J|$>>>32-J}function Dj($){return $.byteOffset%4===0}var oD=64,RG$=16,$u=4294967295,sm=Uint32Array.of();function IG$($,J,Y,X,W,Z,G,Q){let H=W.length,z=new Uint8Array(oD),K=AW(z),w=Dj(W)&&Dj(Z),F=w?AW(W):sm,U=w?AW(Z):sm;for(let V=0;V<H;G++){if($(J,Y,X,K,G,Q),G>=$u)throw Error("arx: counter overflow");let N=Math.min(oD,H-V);if(w&&N===oD){let P=V/4;if(V%4!==0)throw Error("arx: invalid block position");for(let B=0,L;B<RG$;B++)L=P+B,U[L]=F[L]^K[B];V+=oD;continue}for(let P=0,B;P<N;P++)B=V+P,Z[B]=W[B]^z[P];V+=N}}function Mj($,J){let{allowShortKeys:Y,extendNonceFn:X,counterLength:W,counterRight:Z,rounds:G}=rm({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},J);if(typeof $!=="function")throw Error("core must be a function");return dz(W),dz(G),rD(Z),rD(Y),(Q,H,z,K,w=0)=>{P6(Q,void 0,"key"),P6(H,void 0,"nonce"),P6(z,void 0,"data");let F=z.length;if(K===void 0)K=new Uint8Array(F);if(P6(K,void 0,"output"),dz(w),w<0||w>=$u)throw Error("arx: counter overflow");if(K.length<F)throw Error(`arx: output (${K.length}) is shorter than data (${F})`);let U=[],V=Q.length,N,P;if(V===32)U.push(N=sG(Q)),P=TG$;else if(V===16&&Y)N=new Uint8Array(32),N.set(Q),N.set(Q,16),P=CG$,U.push(N);else throw P6(Q,32,"arx key"),Error("invalid key size");if(!Dj(H))U.push(H=sG(H));let B=AW(N);if(X){if(H.length!==24)throw Error("arx: extended nonce must be 24 bytes");X(P,B,AW(H.subarray(0,16)),B),H=H.subarray(16)}let L=16-W;if(L!==H.length)throw Error(`arx: nonce must be ${L} or 16 bytes`);if(L!==12){let k=new Uint8Array(12);k.set(H,Z?0:12-H.length),H=k,U.push(H)}let g=AW(H);return IG$($,P,B,g,z,K,w,G),jW(...U),K}}function P8($,J){return $[J++]&255|($[J++]&255)<<8}class Ju{blockLen=16;outputLen=16;buffer=new Uint8Array(16);r=new Uint16Array(10);h=new Uint16Array(10);pad=new Uint16Array(8);pos=0;finished=!1;constructor($){$=sG(P6($,32,"key"));let J=P8($,0),Y=P8($,2),X=P8($,4),W=P8($,6),Z=P8($,8),G=P8($,10),Q=P8($,12),H=P8($,14);this.r[0]=J&8191,this.r[1]=(J>>>13|Y<<3)&8191,this.r[2]=(Y>>>10|X<<6)&7939,this.r[3]=(X>>>7|W<<9)&8191,this.r[4]=(W>>>4|Z<<12)&255,this.r[5]=Z>>>1&8190,this.r[6]=(Z>>>14|G<<2)&8191,this.r[7]=(G>>>11|Q<<5)&8065,this.r[8]=(Q>>>8|H<<8)&8191,this.r[9]=H>>>5&127;for(let z=0;z<8;z++)this.pad[z]=P8($,16+2*z)}process($,J,Y=!1){let X=Y?0:2048,{h:W,r:Z}=this,G=Z[0],Q=Z[1],H=Z[2],z=Z[3],K=Z[4],w=Z[5],F=Z[6],U=Z[7],V=Z[8],N=Z[9],P=P8($,J+0),B=P8($,J+2),L=P8($,J+4),g=P8($,J+6),k=P8($,J+8),I=P8($,J+10),O=P8($,J+12),b=P8($,J+14),D=W[0]+(P&8191),_=W[1]+((P>>>13|B<<3)&8191),q=W[2]+((B>>>10|L<<6)&8191),S=W[3]+((L>>>7|g<<9)&8191),j=W[4]+((g>>>4|k<<12)&8191),E=W[5]+(k>>>1&8191),T=W[6]+((k>>>14|I<<2)&8191),R=W[7]+((I>>>11|O<<5)&8191),v=W[8]+((O>>>8|b<<8)&8191),h=W[9]+(b>>>5|X),y=0,o=y+D*G+_*(5*N)+q*(5*V)+S*(5*U)+j*(5*F);y=o>>>13,o&=8191,o+=E*(5*w)+T*(5*K)+R*(5*z)+v*(5*H)+h*(5*Q),y+=o>>>13,o&=8191;let G$=y+D*Q+_*G+q*(5*N)+S*(5*V)+j*(5*U);y=G$>>>13,G$&=8191,G$+=E*(5*F)+T*(5*w)+R*(5*K)+v*(5*z)+h*(5*H),y+=G$>>>13,G$&=8191;let Z$=y+D*H+_*Q+q*G+S*(5*N)+j*(5*V);y=Z$>>>13,Z$&=8191,Z$+=E*(5*U)+T*(5*F)+R*(5*w)+v*(5*K)+h*(5*z),y+=Z$>>>13,Z$&=8191;let _$=y+D*z+_*H+q*Q+S*G+j*(5*N);y=_$>>>13,_$&=8191,_$+=E*(5*V)+T*(5*U)+R*(5*F)+v*(5*w)+h*(5*K),y+=_$>>>13,_$&=8191;let E$=y+D*K+_*z+q*H+S*Q+j*G;y=E$>>>13,E$&=8191,E$+=E*(5*N)+T*(5*V)+R*(5*U)+v*(5*F)+h*(5*w),y+=E$>>>13,E$&=8191;let d$=y+D*w+_*K+q*z+S*H+j*Q;y=d$>>>13,d$&=8191,d$+=E*G+T*(5*N)+R*(5*V)+v*(5*U)+h*(5*F),y+=d$>>>13,d$&=8191;let n$=y+D*F+_*w+q*K+S*z+j*H;y=n$>>>13,n$&=8191,n$+=E*Q+T*G+R*(5*N)+v*(5*V)+h*(5*U),y+=n$>>>13,n$&=8191;let J0=y+D*U+_*F+q*w+S*K+j*z;y=J0>>>13,J0&=8191,J0+=E*H+T*Q+R*G+v*(5*N)+h*(5*V),y+=J0>>>13,J0&=8191;let m0=y+D*V+_*U+q*F+S*w+j*K;y=m0>>>13,m0&=8191,m0+=E*z+T*H+R*Q+v*G+h*(5*N),y+=m0>>>13,m0&=8191;let T8=y+D*N+_*V+q*U+S*F+j*w;y=T8>>>13,T8&=8191,T8+=E*K+T*z+R*H+v*Q+h*G,y+=T8>>>13,T8&=8191,y=(y<<2)+y|0,y=y+o|0,o=y&8191,y=y>>>13,G$+=y,W[0]=o,W[1]=G$,W[2]=Z$,W[3]=_$,W[4]=E$,W[5]=d$,W[6]=n$,W[7]=J0,W[8]=m0,W[9]=T8}finalize(){let{h:$,pad:J}=this,Y=new Uint16Array(10),X=$[1]>>>13;$[1]&=8191;for(let G=2;G<10;G++)$[G]+=X,X=$[G]>>>13,$[G]&=8191;$[0]+=X*5,X=$[0]>>>13,$[0]&=8191,$[1]+=X,X=$[1]>>>13,$[1]&=8191,$[2]+=X,Y[0]=$[0]+5,X=Y[0]>>>13,Y[0]&=8191;for(let G=1;G<10;G++)Y[G]=$[G]+X,X=Y[G]>>>13,Y[G]&=8191;Y[9]-=8192;let W=(X^1)-1;for(let G=0;G<10;G++)Y[G]&=W;W=~W;for(let G=0;G<10;G++)$[G]=$[G]&W|Y[G];$[0]=($[0]|$[1]<<13)&65535,$[1]=($[1]>>>3|$[2]<<10)&65535,$[2]=($[2]>>>6|$[3]<<7)&65535,$[3]=($[3]>>>9|$[4]<<4)&65535,$[4]=($[4]>>>12|$[5]<<1|$[6]<<14)&65535,$[5]=($[6]>>>2|$[7]<<11)&65535,$[6]=($[7]>>>5|$[8]<<8)&65535,$[7]=($[8]>>>8|$[9]<<5)&65535;let Z=$[0]+J[0];$[0]=Z&65535;for(let G=1;G<8;G++)Z=($[G]+J[G]|0)+(Z>>>16)|0,$[G]=Z&65535;jW(Y)}update($){zj(this),P6($),$=sG($);let{buffer:J,blockLen:Y}=this,X=$.length;for(let W=0;W<X;){let Z=Math.min(Y-this.pos,X-W);if(Z===Y){for(;Y<=X-W;W+=Y)this.process($,W);continue}if(J.set($.subarray(W,W+Z),this.pos),this.pos+=Z,W+=Z,this.pos===Y)this.process(J,0,!1),this.pos=0}return this}destroy(){jW(this.h,this.r,this.buffer,this.pad)}digestInto($){zj(this),cm($,this),this.finished=!0;let{buffer:J,h:Y}=this,{pos:X}=this;if(X){J[X++]=1;for(;X<16;X++)J[X]=0;this.process(J,0,!0)}this.finalize();let W=0;for(let Z=0;Z<8;Z++)$[W++]=Y[Z]>>>0,$[W++]=Y[Z]>>>8;return $}digest(){let{buffer:$,outputLen:J}=this;this.digestInto($);let Y=$.slice(0,J);return this.destroy(),Y}}function kG$($){let J=(X,W)=>$(W).update(X).digest(),Y=$(new Uint8Array(32));return J.outputLen=Y.outputLen,J.blockLen=Y.blockLen,J.create=(X)=>$(X),J}var Yu=(()=>kG$(($)=>new Ju($)))();function Zu($,J,Y,X,W,Z=20){let G=$[0],Q=$[1],H=$[2],z=$[3],K=J[0],w=J[1],F=J[2],U=J[3],V=J[4],N=J[5],P=J[6],B=J[7],L=W,g=Y[0],k=Y[1],I=Y[2],O=G,b=Q,D=H,_=z,q=K,S=w,j=F,E=U,T=V,R=N,v=P,h=B,y=L,o=g,G$=k,Z$=I;for(let E$=0;E$<Z;E$+=2)O=O+q|0,y=T$(y^O,16),T=T+y|0,q=T$(q^T,12),O=O+q|0,y=T$(y^O,8),T=T+y|0,q=T$(q^T,7),b=b+S|0,o=T$(o^b,16),R=R+o|0,S=T$(S^R,12),b=b+S|0,o=T$(o^b,8),R=R+o|0,S=T$(S^R,7),D=D+j|0,G$=T$(G$^D,16),v=v+G$|0,j=T$(j^v,12),D=D+j|0,G$=T$(G$^D,8),v=v+G$|0,j=T$(j^v,7),_=_+E|0,Z$=T$(Z$^_,16),h=h+Z$|0,E=T$(E^h,12),_=_+E|0,Z$=T$(Z$^_,8),h=h+Z$|0,E=T$(E^h,7),O=O+S|0,Z$=T$(Z$^O,16),v=v+Z$|0,S=T$(S^v,12),O=O+S|0,Z$=T$(Z$^O,8),v=v+Z$|0,S=T$(S^v,7),b=b+j|0,y=T$(y^b,16),h=h+y|0,j=T$(j^h,12),b=b+j|0,y=T$(y^b,8),h=h+y|0,j=T$(j^h,7),D=D+E|0,o=T$(o^D,16),T=T+o|0,E=T$(E^T,12),D=D+E|0,o=T$(o^D,8),T=T+o|0,E=T$(E^T,7),_=_+q|0,G$=T$(G$^_,16),R=R+G$|0,q=T$(q^R,12),_=_+q|0,G$=T$(G$^_,8),R=R+G$|0,q=T$(q^R,7);let _$=0;X[_$++]=G+O|0,X[_$++]=Q+b|0,X[_$++]=H+D|0,X[_$++]=z+_|0,X[_$++]=K+q|0,X[_$++]=w+S|0,X[_$++]=F+j|0,X[_$++]=U+E|0,X[_$++]=V+T|0,X[_$++]=N+R|0,X[_$++]=P+v|0,X[_$++]=B+h|0,X[_$++]=L+y|0,X[_$++]=g+o|0,X[_$++]=k+G$|0,X[_$++]=I+Z$|0}function bG$($,J,Y,X){let W=$[0],Z=$[1],G=$[2],Q=$[3],H=J[0],z=J[1],K=J[2],w=J[3],F=J[4],U=J[5],V=J[6],N=J[7],P=Y[0],B=Y[1],L=Y[2],g=Y[3];for(let I=0;I<20;I+=2)W=W+H|0,P=T$(P^W,16),F=F+P|0,H=T$(H^F,12),W=W+H|0,P=T$(P^W,8),F=F+P|0,H=T$(H^F,7),Z=Z+z|0,B=T$(B^Z,16),U=U+B|0,z=T$(z^U,12),Z=Z+z|0,B=T$(B^Z,8),U=U+B|0,z=T$(z^U,7),G=G+K|0,L=T$(L^G,16),V=V+L|0,K=T$(K^V,12),G=G+K|0,L=T$(L^G,8),V=V+L|0,K=T$(K^V,7),Q=Q+w|0,g=T$(g^Q,16),N=N+g|0,w=T$(w^N,12),Q=Q+w|0,g=T$(g^Q,8),N=N+g|0,w=T$(w^N,7),W=W+z|0,g=T$(g^W,16),V=V+g|0,z=T$(z^V,12),W=W+z|0,g=T$(g^W,8),V=V+g|0,z=T$(z^V,7),Z=Z+K|0,P=T$(P^Z,16),N=N+P|0,K=T$(K^N,12),Z=Z+K|0,P=T$(P^Z,8),N=N+P|0,K=T$(K^N,7),G=G+w|0,B=T$(B^G,16),F=F+B|0,w=T$(w^F,12),G=G+w|0,B=T$(B^G,8),F=F+B|0,w=T$(w^F,7),Q=Q+H|0,L=T$(L^Q,16),U=U+L|0,H=T$(H^U,12),Q=Q+H|0,L=T$(L^Q,8),U=U+L|0,H=T$(H^U,7);let k=0;X[k++]=W,X[k++]=Z,X[k++]=G,X[k++]=Q,X[k++]=P,X[k++]=B,X[k++]=L,X[k++]=g}var vG$=Mj(Zu,{counterRight:!1,counterLength:4,allowShortKeys:!1}),fG$=Mj(Zu,{counterRight:!1,counterLength:8,extendNonceFn:bG$,allowShortKeys:!1});var gG$=new Uint8Array(16),Xu=($,J)=>{$.update(J);let Y=J.length%16;if(Y)$.update(gG$.subarray(Y))},xG$=new Uint8Array(32);function Wu($,J,Y,X,W){if(W!==void 0)P6(W,void 0,"AAD");let Z=$(J,Y,xG$),G=tm(X.length,W?W.length:0,!0),Q=Yu.create(Z);if(W)Xu(Q,W);Xu(Q,X),Q.update(G);let H=Q.digest();return jW(Z,G),H}var Gu=($)=>(J,Y,X)=>{return{encrypt(Z,G){let Q=Z.length;G=Uj(Q+16,G,!1),G.set(Z);let H=G.subarray(0,-16);$(J,Y,H,H,1);let z=Wu($,J,Y,H,X);return G.set(z,Q),jW(z),G},decrypt(Z,G){G=Uj(Z.length-16,G,!1);let Q=Z.subarray(0,-16),H=Z.subarray(-16),z=Wu($,J,Y,Q,X);if(!om(H,z))throw Error("invalid tag");return G.set(Z.subarray(0,-16)),$(J,Y,G,G,1),jW(z),G}}},pm$=wj({blockSize:64,nonceLength:12,tagLength:16},Gu(vG$)),Vj=wj({blockSize:64,nonceLength:24,tagLength:16},Gu(fG$));var bY=async({key:$,data:J})=>{let Y=await S1("SHA-256").digest($),X=nm(J);return Kj(Fj(Vj)(new Uint8Array(Y)).encrypt(X))},gJ=async({key:$,data:J})=>{let Y=await S1("SHA-256").digest($),X=lm(J),W=Fj(Vj)(new Uint8Array(Y));return new TextDecoder().decode(W.decrypt(X))};var x4=($,J="ms")=>{return new Date(Date.now()+(J==="sec"?$*1000:$))};Nj();var _j={};k4(_j,{verificationSchema:()=>wu,userSchema:()=>Ku,sessionSchema:()=>zu,rateLimitSchema:()=>Hu,getAuthTables:()=>A1,coreSchema:()=>jX,accountSchema:()=>Qu});y$();var jX=c({id:A(),createdAt:U4().default(()=>new Date),updatedAt:U4().default(()=>new Date)});y$();var Qu=jX.extend({providerId:A(),accountId:A(),userId:D0.string(),accessToken:A().nullish(),refreshToken:A().nullish(),idToken:A().nullish(),accessTokenExpiresAt:U4().nullish(),refreshTokenExpiresAt:U4().nullish(),scope:A().nullish(),password:A().nullish()});y$();var Hu=c({key:A(),count:H0(),lastRequest:H0()});y$();var zu=jX.extend({userId:D0.string(),expiresAt:U4(),token:A(),ipAddress:A().nullish(),userAgent:A().nullish()});y$();var Ku=jX.extend({email:A().transform(($)=>$.toLowerCase()),emailVerified:m$().default(!1),name:A(),image:A().nullish()});y$();var wu=jX.extend({value:A(),expiresAt:U4(),identifier:A()});function yG$(){let $=Object.getOwnPropertyDescriptor(Error,"stackTraceLimit");if($===void 0)return Object.isExtensible(Error);return Object.prototype.hasOwnProperty.call($,"writable")?$.writable:$.set!==void 0}function Uu($){let J=$.split(`
    at `);if(J.length<=1)return $;return J.splice(1,1),J.join(`
    at `)}function Fu($,J){class Y extends ${#$;constructor(...X){if(yG$()){let Z=Error.stackTraceLimit;Error.stackTraceLimit=0;super(...X);Error.stackTraceLimit=Z}else super(...X);let W=Error().stack;if(W)this.#$=Uu(W.replace(/^Error/,this.name))}get errorStack(){return this.#$}}return Object.defineProperty(Y.prototype,"constructor",{get(){return J},enumerable:!1,configurable:!0}),Y}var Du={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},Mu=class extends Error{constructor($="INTERNAL_SERVER_ERROR",J=void 0,Y={},X=typeof $==="number"?$:Du[$]){super(J?.message,J?.cause?{cause:J.cause}:void 0);this.status=$,this.body=J,this.headers=Y,this.statusCode=X,this.name="APIError",this.status=$,this.headers=Y,this.statusCode=X,this.body=J?{code:J?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...J}:void 0}},cz=class extends Mu{constructor($,J){super(400,{message:$,code:"VALIDATION_ERROR"});this.message=$,this.issues=J,this.issues=J}},tD=class extends Error{constructor($){super($);this.name="BetterCallError"}},x=Fu(Mu,Error);var hG$=/^application\/([a-z0-9.+-]*\+)?json/i;async function Vu($,J){let Y=$.headers.get("content-type")||"",X=Y.toLowerCase();if(!$.body)return;if(J&&J.length>0){if(!J.some((W)=>{let Z=X.split(";")[0].trim(),G=W.toLowerCase().trim();return Z===G||Z.includes(G)})){if(!X)throw new x(415,{message:`Content-Type is required. Allowed types: ${J.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"});throw new x(415,{message:`Content-Type "${Y}" is not allowed. Allowed types: ${J.join(", ")}`,code:"UNSUPPORTED_MEDIA_TYPE"})}}if(hG$.test(X))return await $.json();if(X.includes("application/x-www-form-urlencoded")){let W=await $.formData(),Z={};return W.forEach((G,Q)=>{Z[Q]=G.toString()}),Z}if(X.includes("multipart/form-data")){let W=await $.formData(),Z={};return W.forEach((G,Q)=>{Z[Q]=G}),Z}if(X.includes("text/plain"))return await $.text();if(X.includes("application/octet-stream"))return await $.arrayBuffer();if(X.includes("application/pdf")||X.includes("image/")||X.includes("video/"))return await $.blob();if(X.includes("application/stream")||$.body instanceof ReadableStream)return $.body;return await $.text()}function vZ($){return $ instanceof x||$?.name==="APIError"}function Nu($){try{return $.includes("%")?decodeURIComponent($):$}catch{return $}}async function _u($){try{return{data:await $,error:null}}catch(J){return{data:null,error:J}}}function aD($){return $ instanceof Request||Object.prototype.toString.call($)==="[object Request]"}function mG$($){if($===void 0)return!1;let J=typeof $;if(J==="string"||J==="number"||J==="boolean"||J===null)return!0;if(J!=="object")return!1;if(Array.isArray($))return!0;if($.buffer)return!1;return $.constructor&&$.constructor.name==="Object"||typeof $.toJSON==="function"}function uG$($,J,Y){let X=0,W=new WeakMap;return JSON.stringify($,(G,Q)=>{if(typeof Q==="bigint")return Q.toString();if(typeof Q==="object"&&Q!==null){if(W.has(Q))return`[Circular ref-${W.get(Q)}]`;W.set(Q,X++)}if(J)return J(G,Q);return Q},Y)}function dG$($){if(!$||typeof $!=="object")return!1;return"_flag"in $&&$._flag==="json"}function vY($,J){if($ instanceof Response){if(J?.headers instanceof Headers)J.headers.forEach((W,Z)=>{$.headers.set(Z,W)});return $}if(dG$($)){let{body:W,routerResponse:Z}=$;if(Z instanceof Response)return Z;let G=new Headers;if(Z?.headers){let Q=new Headers(Z.headers);for(let[H,z]of Q.entries())Q.set(H,z)}if($.headers)for(let[Q,H]of new Headers($.headers).entries())G.set(Q,H);if(J?.headers)for(let[Q,H]of new Headers(J.headers).entries())G.set(Q,H);return G.set("Content-Type","application/json"),new Response(JSON.stringify(W),{...Z,headers:G,status:$.status??J?.status??Z?.status,statusText:J?.statusText??Z?.statusText})}if(vZ($))return vY($.body,{status:J?.status??$.statusCode,statusText:$.status.toString(),headers:J?.headers||$.headers});let Y=$,X=new Headers(J?.headers);if(!$){if($===null)Y=JSON.stringify(null);X.set("content-type","application/json")}else if(typeof $==="string")Y=$,X.set("Content-Type","text/plain");else if($ instanceof ArrayBuffer||ArrayBuffer.isView($))Y=$,X.set("Content-Type","application/octet-stream");else if($ instanceof Blob)Y=$,X.set("Content-Type",$.type||"application/octet-stream");else if($ instanceof FormData)Y=$;else if($ instanceof URLSearchParams)Y=$,X.set("Content-Type","application/x-www-form-urlencoded");else if($ instanceof ReadableStream)Y=$,X.set("Content-Type","application/octet-stream");else if(mG$($))Y=uG$($),X.set("Content-Type","application/json");return new Response(Y,{...J,headers:X})}var Lj={name:"HMAC",hash:"SHA-256"},qj=async($)=>{let J=typeof $==="string"?new TextEncoder().encode($):$;return await fJ().importKey("raw",J,Lj,!1,["sign","verify"])},Lu=async($,J,Y)=>{try{let X=atob($),W=new Uint8Array(X.length);for(let Z=0,G=X.length;Z<G;Z++)W[Z]=X.charCodeAt(Z);return await fJ().verify(Lj,Y,W,new TextEncoder().encode(J))}catch(X){return!1}},cG$=async($,J)=>{let Y=await qj(J),X=await fJ().sign(Lj.name,Y,new TextEncoder().encode($));return btoa(String.fromCharCode(...new Uint8Array(X)))},qu=async($,J)=>{let Y=await cG$($,J);return $=`${$}.${Y}`,$=encodeURIComponent($),$};var sD=($,J)=>{let Y=$;if(J)if(J==="secure")Y="__Secure-"+$;else if(J==="host")Y="__Host-"+$;else return;return Y};function Bj($){if(typeof $!=="string")throw TypeError("argument str must be a string");let J=new Map,Y=0;while(Y<$.length){let X=$.indexOf("=",Y);if(X===-1)break;let W=$.indexOf(";",Y);if(W===-1)W=$.length;else if(W<X){Y=$.lastIndexOf(";",X-1)+1;continue}let Z=$.slice(Y,X).trim();if(!J.has(Z)){let G=$.slice(X+1,W).trim();if(G.codePointAt(0)===34)G=G.slice(1,-1);J.set(Z,Nu(G))}Y=W+1}return J}var Bu=($,J,Y={})=>{let X;if(Y?.prefix==="secure")X=`${`__Secure-${$}`}=${J}`;else if(Y?.prefix==="host")X=`${`__Host-${$}`}=${J}`;else X=`${$}=${J}`;if($.startsWith("__Secure-")&&!Y.secure)Y.secure=!0;if($.startsWith("__Host-")){if(!Y.secure)Y.secure=!0;if(Y.path!=="/")Y.path="/";if(Y.domain)Y.domain=void 0}if(Y&&typeof Y.maxAge==="number"&&Y.maxAge>=0){if(Y.maxAge>34560000)throw Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");X+=`; Max-Age=${Math.floor(Y.maxAge)}`}if(Y.domain&&Y.prefix!=="host")X+=`; Domain=${Y.domain}`;if(Y.path)X+=`; Path=${Y.path}`;if(Y.expires){if(Y.expires.getTime()-Date.now()>34560000000)throw Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");X+=`; Expires=${Y.expires.toUTCString()}`}if(Y.httpOnly)X+="; HttpOnly";if(Y.secure)X+="; Secure";if(Y.sameSite)X+=`; SameSite=${Y.sameSite.charAt(0).toUpperCase()+Y.sameSite.slice(1)}`;if(Y.partitioned){if(!Y.secure)Y.secure=!0;X+="; Partitioned"}return X},Oj=($,J,Y)=>{return J=encodeURIComponent(J),Bu($,J,Y)},pz=async($,J,Y,X)=>{return J=await qu(J,Y),Bu($,J,X)};async function Pu($,J={}){let Y={body:J.body,query:J.query};if($.body){let X=await $.body["~standard"].validate(J.body);if(X.issues)return{data:null,error:Ou(X.issues,"body")};Y.body=X.value}if($.query){let X=await $.query["~standard"].validate(J.query);if(X.issues)return{data:null,error:Ou(X.issues,"query")};Y.query=X.value}if($.requireHeaders&&!J.headers)return{data:null,error:{message:"Headers is required",issues:[]}};if($.requireRequest&&!J.request)return{data:null,error:{message:"Request is required",issues:[]}};return{data:Y,error:null}}function Ou($,J){return{message:$.map((Y)=>{return`[${Y.path?.length?`${J}.`+Y.path.map((X)=>typeof X==="object"?X.key:X).join("."):J}] ${Y.message}`}).join("; "),issues:$}}var lz=async($,{options:J,path:Y})=>{let X=new Headers,W=void 0,{data:Z,error:G}=await Pu(J,$);if(G)throw new cz(G.message,G.issues);let Q="headers"in $?$.headers instanceof Headers?$.headers:new Headers($.headers):("request"in $)&&aD($.request)?$.request.headers:null,H=Q?.get("cookie"),z=H?Bj(H):void 0,K={...$,body:Z.body,query:Z.query,path:$.path||Y||"virtual:",context:"context"in $&&$.context?$.context:{},returned:void 0,headers:$?.headers,request:$?.request,params:"params"in $?$.params:void 0,method:$.method??(Array.isArray(J.method)?J.method[0]:J.method==="*"?"GET":J.method),setHeader:(w,F)=>{X.set(w,F)},getHeader:(w)=>{if(!Q)return null;return Q.get(w)},getCookie:(w,F)=>{let U=sD(w,F);if(!U)return null;return z?.get(U)||null},getSignedCookie:async(w,F,U)=>{let V=sD(w,U);if(!V)return null;let N=z?.get(V);if(!N)return null;let P=N.lastIndexOf(".");if(P<1)return null;let B=N.substring(0,P),L=N.substring(P+1);if(L.length!==44||!L.endsWith("="))return null;return await Lu(L,B,await qj(F))?B:!1},setCookie:(w,F,U)=>{let V=Oj(w,F,U);return X.append("set-cookie",V),V},setSignedCookie:async(w,F,U,V)=>{let N=await pz(w,F,U,V);return X.append("set-cookie",N),N},redirect:(w)=>{return X.set("location",w),new x("FOUND",void 0,X)},error:(w,F,U)=>{return new x(w,F,U)},setStatus:(w)=>{W=w},json:(w,F)=>{if(!$.asResponse)return w;return{body:F?.body||w,routerResponse:F,_flag:"json"}},responseHeaders:X,get responseStatus(){return W}};for(let w of J.use||[]){let F=await w({...K,returnHeaders:!0,asResponse:!1});if(F.response)Object.assign(K.context,F.response);if(F.headers)F.headers.forEach((U,V)=>{K.responseHeaders.set(V,U)})}return K};function h9($,J,Y){let X=typeof $==="string"?$:void 0,W=typeof J==="object"?J:$,Z=typeof J==="function"?J:Y;if((W.method==="GET"||W.method==="HEAD")&&W.body)throw new tD("Body is not allowed with GET or HEAD methods");if(X&&/\/{2,}/.test(X))throw new tD("Path cannot contain consecutive slashes");let G=async(...Q)=>{let H=Q[0]||{},{data:z,error:K}=await _u(lz(H,{options:W,path:X}));if(K){if(!(K instanceof cz))throw K;if(W.onValidationError)await W.onValidationError({message:K.message,issues:K.issues});throw new x(400,{message:K.message,code:"VALIDATION_ERROR"})}let w=await Z(z).catch(async(V)=>{if(vZ(V)){let N=W.onAPIError;if(N)await N(V);if(H.asResponse)return V}throw V}),F=z.responseHeaders,U=z.responseStatus;return H.asResponse?vY(w,{headers:F,status:U}):H.returnHeaders?H.returnStatus?{headers:F,response:w,status:U}:{headers:F,response:w}:H.returnStatus?{response:w,status:U}:w};return G.options=W,G.path=X,G}h9.create=($)=>{return(J,Y,X)=>{return h9(J,{...Y,use:[...Y?.use||[],...$?.use||[]]},X)}};function m9($,J){let Y=async(X)=>{let W=X,Z=typeof $==="function"?$:J,G=await lz(W,{options:typeof $==="function"?{}:$,path:"/"});if(!Z)throw Error("handler must be defined");let Q=await Z(G),H=G.responseHeaders;return W.returnHeaders?{headers:H,response:Q}:Q};return Y.options=typeof $==="function"?{}:$,Y}m9.create=($)=>{function J(Y,X){if(typeof Y==="function")return m9({use:$?.use},Y);if(!X)throw Error("Middleware handler is required");return m9({...Y,method:"*",use:[...$?.use||[],...Y.use||[]]},X)}return J};y$();var Pj={};function ju($){switch($.constructor.name){case"ZodString":return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array";default:return"string"}}function Su($){let J=[];if($.metadata?.openapi?.parameters)return J.push(...$.metadata.openapi.parameters),J;if($.query instanceof kY)Object.entries($.query.shape).forEach(([Y,X])=>{if(X instanceof kY)J.push({name:Y,in:"query",schema:{type:ju(X),..."minLength"in X&&X.minLength?{minLength:X.minLength}:{},description:X.description}})});return J}function pG$($){if($.metadata?.openapi?.requestBody)return $.metadata.openapi.requestBody;if(!$.body)return;if($.body instanceof kY||$.body instanceof qW){let J=$.body.shape;if(!J)return;let Y={},X=[];return Object.entries(J).forEach(([W,Z])=>{if(Z instanceof kY){if(Y[W]={type:ju(Z),description:Z.description},!(Z instanceof qW))X.push(W)}}),{required:$.body instanceof qW?!1:$.body?!0:!1,content:{"application/json":{schema:{type:"object",properties:Y,required:X}}}}}}function Au($){return{"400":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},"401":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},"403":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},"404":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},"429":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},"500":{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...$}}async function Sj($,J){let Y={schemas:{}};return Object.entries($).forEach(([X,W])=>{let Z=W.options;if(!W.path||Z.metadata?.SERVER_ONLY)return;if(Z.method==="GET")Pj[W.path]={get:{tags:["Default",...Z.metadata?.openapi?.tags||[]],description:Z.metadata?.openapi?.description,operationId:Z.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:Su(Z),responses:Au(Z.metadata?.openapi?.responses)}};if(Z.method==="POST"){let G=pG$(Z);Pj[W.path]={post:{tags:["Default",...Z.metadata?.openapi?.tags||[]],description:Z.metadata?.openapi?.description,operationId:Z.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:Su(Z),...G?{requestBody:G}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:Au(Z.metadata?.openapi?.responses)}}}}),{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:Y,security:[{apiKeyCookie:[]}],servers:[{url:J?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:Pj}}var Aj=($,J)=>`<!doctype html>
<html>
  <head>
    <title>Scalar API Reference</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script
      id="api-reference"
      type="application/json">
    ${JSON.stringify($)}
    </script>
	 <script>
      var configuration = {
	  	favicon: ${J?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(J.logo)}`:void 0} ,
	   	theme: ${J?.theme||"saturn"},
        metaData: {
			title: ${J?.title||"Open API Reference"},
			description: ${J?.description||"Better Call Open API"},
		}
      }
      document.getElementById('api-reference').dataset.configuration =
        JSON.stringify(configuration)
    </script>
	  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>`;var eD=(()=>{let $=function(){};return $.prototype=Object.create(null),Object.freeze($.prototype),$})();function Cj(){return{root:{key:""},static:new eD}}function Tj($){let[J,...Y]=$.split("/");return Y[Y.length-1]===""?Y.slice(0,-1):Y}function Eu($,J){let Y=new eD;for(let[X,W]of J){let Z=X<0?$.slice(-(X+1)).join("/"):$[X];if(typeof W==="string")Y[W]=Z;else{let G=Z.match(W);if(G)for(let Q in G.groups)Y[Q]=G.groups[Q]}}return Y}function Rj($,J="",Y,X){if(J=J.toUpperCase(),Y.charCodeAt(0)!==47)Y=`/${Y}`;Y=Y.replace(/\\:/g,"%3A");let W=Tj(Y),Z=$.root,G=0,Q=[],H=[];for(let K=0;K<W.length;K++){let w=W[K];if(w.startsWith("**")){if(!Z.wildcard)Z.wildcard={key:"**"};Z=Z.wildcard,Q.push([-(K+1),w.split(":")[1]||"_",w.length===2]);break}if(w==="*"||w.includes(":")){if(!Z.param)Z.param={key:"*"};if(Z=Z.param,w==="*")Q.push([K,`_${G++}`,!0]);else if(w.includes(":",1)){let U=lG$(w);H[K]=U,Z.hasRegexParam=!0,Q.push([K,U,!1])}else Q.push([K,w.slice(1),!1]);continue}if(w==="\\*")w=W[K]="*";else if(w==="\\*\\*")w=W[K]="**";let F=Z.static?.[w];if(F)Z=F;else{let U={key:w};if(!Z.static)Z.static=new eD;Z.static[w]=U,Z=U}}let z=Q.length>0;if(!Z.methods)Z.methods=new eD;if(Z.methods[J]??=[],Z.methods[J].push({data:X||null,paramsRegexp:H,paramsMap:z?Q:void 0}),!z)$.static["/"+W.join("/")]=Z}function lG$($){let J=$.replace(/:(\w+)/g,(Y,X)=>`(?<${X}>[^/]+)`).replace(/\./g,"\\.");return new RegExp(`^${J}$`)}function Cu($,J="",Y,X){if(Y.charCodeAt(Y.length-1)===47)Y=Y.slice(0,-1);let W=$.static[Y];if(W&&W.methods){let Q=W.methods[J]||W.methods[""];if(Q!==void 0)return Q[0]}let Z=Tj(Y),G=jj($,$.root,J,Z,0)?.[0];if(G===void 0)return;if(X?.params===!1)return G;return{data:G.data,params:G.paramsMap?Eu(Z,G.paramsMap):void 0}}function jj($,J,Y,X,W){if(W===X.length){if(J.methods){let G=J.methods[Y]||J.methods[""];if(G)return G}if(J.param&&J.param.methods){let G=J.param.methods[Y]||J.param.methods[""];if(G){let Q=G[0].paramsMap;if(Q?.[Q?.length-1]?.[2])return G}}if(J.wildcard&&J.wildcard.methods){let G=J.wildcard.methods[Y]||J.wildcard.methods[""];if(G){let Q=G[0].paramsMap;if(Q?.[Q?.length-1]?.[2])return G}}return}let Z=X[W];if(J.static){let G=J.static[Z];if(G){let Q=jj($,G,Y,X,W+1);if(Q)return Q}}if(J.param){let G=jj($,J.param,Y,X,W+1);if(G){if(J.param.hasRegexParam){let Q=G.find((H)=>H.paramsRegexp[W]?.test(Z))||G.find((H)=>!H.paramsRegexp[W]);return Q?[Q]:void 0}return G}}if(J.wildcard&&J.wildcard.methods)return J.wildcard.methods[Y]||J.wildcard.methods[""]}function Tu($,J="",Y,X){if(Y.charCodeAt(Y.length-1)===47)Y=Y.slice(0,-1);let W=Tj(Y),Z=Ej($,$.root,J,W,0);if(X?.params===!1)return Z;return Z.map((G)=>{return{data:G.data,params:G.paramsMap?Eu(W,G.paramsMap):void 0}})}function Ej($,J,Y,X,W,Z=[]){let G=X[W];if(J.wildcard&&J.wildcard.methods){let H=J.wildcard.methods[Y]||J.wildcard.methods[""];if(H)Z.push(...H)}if(J.param){if(Ej($,J.param,Y,X,W+1,Z),W===X.length&&J.param.methods){let H=J.param.methods[Y]||J.param.methods[""];if(H){let z=H[0].paramsMap;if(z?.[z?.length-1]?.[2])Z.push(...H)}}}let Q=J.static?.[G];if(Q)Ej($,Q,Y,X,W+1,Z);if(W===X.length&&J.methods){let H=J.methods[Y]||J.methods[""];if(H)Z.push(...H)}return Z}var Ij=($,J)=>{if(!J?.openapi?.disabled){let Z={path:"/api/reference",...J?.openapi};$.openapi=h9(Z.path,{method:"GET"},async(G)=>{let Q=await Sj($);return new Response(Aj(Q,Z.scalar),{headers:{"Content-Type":"text/html"}})})}let Y=Cj(),X=Cj();for(let Z of Object.values($)){if(!Z.options||!Z.path)continue;if(Z.options?.metadata?.SERVER_ONLY)continue;let G=Array.isArray(Z.options?.method)?Z.options.method:[Z.options?.method];for(let Q of G)Rj(Y,Q,Z.path,Z)}if(J?.routerMiddleware?.length)for(let{path:Z,middleware:G}of J.routerMiddleware)Rj(X,"*",Z,G);let W=async(Z)=>{let G=new URL(Z.url),Q=G.pathname,H=J?.basePath&&J.basePath!=="/"?Q.split(J.basePath).reduce((F,U,V)=>{if(V!==0)if(V>1)F.push(`${J.basePath}${U}`);else F.push(U);return F},[]).join(""):G.pathname;if(!H?.length)return new Response(null,{status:404,statusText:"Not Found"});if(/\/{2,}/.test(H))return new Response(null,{status:404,statusText:"Not Found"});let z=Cu(Y,Z.method,H);if(H.endsWith("/")!==z?.data?.path?.endsWith("/")&&!J?.skipTrailingSlashes)return new Response(null,{status:404,statusText:"Not Found"});if(!z?.data)return new Response(null,{status:404,statusText:"Not Found"});let K={};G.searchParams.forEach((F,U)=>{if(U in K)if(Array.isArray(K[U]))K[U].push(F);else K[U]=[K[U],F];else K[U]=F});let w=z.data;try{let F=w.options.metadata?.allowedMediaTypes||J?.allowedMediaTypes,U={path:H,method:Z.method,headers:Z.headers,params:z.params?JSON.parse(JSON.stringify(z.params)):{},request:Z,body:w.options.disableBody?void 0:await Vu(w.options.cloneRequest?Z.clone():Z,F),query:K,_flag:"router",asResponse:!0,context:J?.routerContext},V=Tu(X,"*",H);if(V?.length)for(let{data:N,params:P}of V){let B=await N({...U,params:P,asResponse:!1});if(B instanceof Response)return B}return await w(U)}catch(F){if(J?.onError)try{let U=await J.onError(F);if(U instanceof Response)return vY(U)}catch(U){if(vZ(U))return vY(U);throw U}if(J?.throwError)throw F;if(vZ(F))return vY(F);return console.error("# SERVER_ERROR: ",F),new Response(null,{status:500,statusText:"Internal Server Error"})}};return{handler:async(Z)=>{let G=await J?.onRequest?.(Z);if(G instanceof Response)return G;let Q=await W(aD(G)?G:Z),H=await J?.onResponse?.(Q);if(H instanceof Response)return H;return Q},endpoints:$}};var kj=new WeakMap;function bj($,J){let Y=J.fields,X={};for(let W in $){let Z=Y[W];if(!Z){X[W]=$[W];continue}if(Z.returned===!1&&W!=="id")continue;X[W]=$[W]}return X}function fZ($,J,Y){let X=`${J}:${Y}`;if(!kj.has($))kj.set($,new Map);let W=kj.get($);if(W.has(X))return W.get(X);let Z=Y==="output"?A1($)[J]?.fields??{}:{},G=J==="user"||J==="session"||J==="account"?$[J]?.additionalFields:void 0,Q={...Z,...G??{}};for(let H of $.plugins||[])if(H.schema&&H.schema[J])Q={...Q,...H.schema[J].fields};return W.set(X,Q),Q}function o$($,J){return bj(J,{fields:fZ($,"user","output")})}function n6($,J){return bj(J,{fields:fZ($,"session","output")})}function $M($,J){let{accessToken:Y,refreshToken:X,idToken:W,accessTokenExpiresAt:Z,refreshTokenExpiresAt:G,password:Q,...H}=bj(J,{fields:fZ($,"account","output")});return H}function eG($,J){let Y=J.action||"create",X=J.fields,W=Object.assign(Object.create(null),null);for(let Z in X){if(Z in $){if(X[Z].input===!1){if(X[Z].defaultValue!==void 0){if(Y!=="update"){W[Z]=X[Z].defaultValue;continue}}if($[Z])throw new x("BAD_REQUEST",{message:`${Z} is not allowed to be set`});continue}if(X[Z].validator?.input&&$[Z]!==void 0){let G=X[Z].validator.input["~standard"].validate($[Z]);if(G instanceof Promise)throw new x("INTERNAL_SERVER_ERROR",{message:"Async validation is not supported for additional fields"});if("issues"in G&&G.issues)throw new x("BAD_REQUEST",{message:G.issues[0]?.message||"Validation Error"});W[Z]=G.value;continue}if(X[Z].transform?.input&&$[Z]!==void 0){W[Z]=X[Z].transform?.input($[Z]);continue}W[Z]=$[Z];continue}if(X[Z].defaultValue!==void 0&&Y==="create"){if(typeof X[Z].defaultValue==="function"){W[Z]=X[Z].defaultValue();continue}W[Z]=X[Z].defaultValue;continue}if(X[Z].required&&Y==="create")throw new x("BAD_REQUEST",{message:`${Z} is required`})}return W}function $2($,J={},Y){return eG(J,{fields:fZ($,"user","input"),action:Y})}function Ru($,J){let Y=fZ($,"user","input");return eG(J||{},{fields:Y})}function Iu($,J){return eG(J,{fields:fZ($,"account","input")})}function JM($,J){return eG(J,{fields:fZ($,"session","input")})}function j1($,J){if(!J)return $;for(let Y in J){let X=J[Y]?.modelName;if(X)$[Y].modelName=X;for(let W in $[Y].fields){let Z=J[Y]?.fields?.[W];if(!Z)continue;$[Y].fields[W].fieldName=Z}}return $}_0();y$();var gj=4096,fj=200,vj=gj-fj;function nG$($){let J=$.headers?.get("cookie");if(!J)return{};let Y={},X=J.split("; ");for(let W of X){let[Z,...G]=W.split("=");if(Z&&G.length>0)Y[Z]=G.join("=")}return Y}function ku($){let J=$.split("."),Y=J[J.length-1],X=parseInt(Y||"0",10);return isNaN(X)?0:X}function iG$($,J){let Y={},X=nG$(J);for(let[W,Z]of Object.entries(X))if(W.startsWith($))Y[W]=Z;return Y}function rG$($){return Object.keys($).sort((J,Y)=>{return ku(J)-ku(Y)}).map((J)=>$[J]).join("")}function oG$($,J,Y,X){let W=Math.ceil(J.value.length/vj);if(W===1)return Y[J.name]=J.value,[J];let Z=[];for(let G=0;G<W;G++){let Q=`${J.name}.${G}`,H=G*vj,z=J.value.substring(H,H+vj);Z.push({...J,name:Q,value:z}),Y[Q]=z}return X.debug(`CHUNKING_${$.toUpperCase()}_COOKIE`,{message:`${$} cookie exceeds allowed ${gj} bytes.`,emptyCookieSize:fj,valueSize:J.value.length,chunkCount:W,chunks:Z.map((G)=>G.value.length+fj)}),Z}function bu($,J){let Y={};for(let X in $)Y[X]={name:X,value:"",attributes:{...J,maxAge:0}};return Y}var vu=($)=>(J,Y,X)=>{let W=iG$(J,X),Z=X.context.logger;return{getValue(){return rG$(W)},hasChunks(){return Object.keys(W).length>0},chunk(G,Q){let H=bu(W,Y);for(let w in W)delete W[w];let z=H,K=oG$($,{name:J,value:G,attributes:{...Y,...Q}},W,Z);for(let w of K)z[w.name]=w;return Object.values(z)},clean(){let G=bu(W,Y);for(let Q in W)delete W[Q];return Object.values(G)},setCookies(G){for(let Q of G)X.setCookie(Q.name,Q.value,Q.attributes)}}},XM=vu("Session"),YM=vu("Account");function WM($,J){let Y=$.getCookie(J);if(Y)return Y;let X=[],W=$.headers?.get("cookie");if(!W)return null;let Z={},G=W.split("; ");for(let Q of G){let[H,...z]=Q.split("=");if(H&&z.length>0)Z[H]=z.join("=")}for(let[Q,H]of Object.entries(Z))if(Q.startsWith(J+".")){let z=Q.split(".").at(-1),K=parseInt(z||"0",10);if(!isNaN(K))X.push({index:K,value:H})}if(X.length>0)return X.sort((Q,H)=>Q.index-H.index),X.map((Q)=>Q.value).join("");return null}async function u9($,J){let Y=$.context.authCookies.accountData,X={maxAge:300,...Y.attributes},W=await CH(J,$.context.secret,"better-auth-account",X.maxAge);if(W.length>gj){let Z=YM(Y.name,X,$),G=Z.chunk(W,X);Z.setCookies(G)}else{let Z=YM(Y.name,X,$);if(Z.hasChunks()){let G=Z.clean();Z.setCookies(G)}$.setCookie(Y.name,W,X)}}async function J2($){let J=WM($,$.context.authCookies.accountData.name);if(J){let Y=o0(await BG(J,$.context.secret,"better-auth-account"));if(Y)return Y}return null}var fu=l6(c({disableCookieCache:D0.boolean().meta({description:"Disable cookie cache and fetch session from database"}).optional(),disableRefresh:D0.boolean().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));function Y2($){return!!$&&(typeof $==="object"||typeof $==="function")&&typeof $.then==="function"}var tG$=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)(?: (ago|from now))?$/i;function gu($){let J=tG$.exec($);if(!J||J[4]&&J[1])throw TypeError(`Invalid time string format: "${$}". Use formats like "7d", "30m", "1 hour", etc.`);let Y=parseFloat(J[2]),X=J[3].toLowerCase(),W;switch(X){case"years":case"year":case"yrs":case"yr":case"y":W=Y*31557600000;break;case"months":case"month":case"mo":W=Y*2592000000;break;case"weeks":case"week":case"w":W=Y*604800000;break;case"days":case"day":case"d":W=Y*86400000;break;case"hours":case"hour":case"hrs":case"hr":case"h":W=Y*3600000;break;case"minutes":case"minute":case"mins":case"min":case"m":W=Y*60000;break;case"seconds":case"second":case"secs":case"sec":case"s":W=Y*1000;break;default:throw TypeError(`Unknown time unit: "${X}"`)}if(J[1]==="-"||J[4]==="ago")return-W;return W}function xj($){return gu($)}function yj($){return Math.round(gu($)/1000)}var hj="__Secure-";function xu($){if(!$)return[];let J=[],Y="",X=0;while(X<$.length){let Z=$[X];if(Z===","){let G=Y.toLowerCase();if(G.includes("expires=")&&!G.includes("gmt"))Y+=Z,X++;else{let Q=Y.trim();if(Q)J.push(Q);if(Y="",X++,X<$.length&&$[X]===" ")X++}continue}Y+=Z,X++}let W=Y.trim();if(W)J.push(W);return J}function d9($){let J=new Map;return xu($).forEach((Y)=>{let[X,...W]=Y.split(";").map((z)=>z.trim()),[Z,...G]=(X||"").split("="),Q=G.join("=");if(!Z||Q===void 0)return;let H={value:Q};W.forEach((z)=>{let[K,...w]=z.split("="),F=w.join("="),U=K.trim().toLowerCase();switch(U){case"max-age":H["max-age"]=F?parseInt(F.trim(),10):void 0;break;case"expires":H.expires=F?new Date(F.trim()):void 0;break;case"domain":H.domain=F?F.trim():void 0;break;case"path":H.path=F?F.trim():void 0;break;case"secure":H.secure=!0;break;case"httponly":H.httponly=!0;break;case"samesite":H.samesite=F?F.trim().toLowerCase():void 0;break;default:H[U]=F?F.trim():!0;break}}),J.set(Z,H)}),J}n0();$0();_0();var mj=new Map,aG$=new TextEncoder,uj={decode:($,J="utf-8")=>{if(!mj.has(J))mj.set(J,new TextDecoder(J));return mj.get(J).decode($)},encode:aG$.encode};var EW=($="SHA-256",J="none")=>{let Y={importKey:async(X,W)=>{return fJ().importKey("raw",typeof X==="string"?new TextEncoder().encode(X):X,{name:"HMAC",hash:{name:$}},!1,[W])},sign:async(X,W)=>{if(typeof X==="string")X=await Y.importKey(X,"sign");let Z=await fJ().sign("HMAC",X,typeof W==="string"?new TextEncoder().encode(W):W);if(J==="hex")return tG.encode(Z);if(J==="base64"||J==="base64url"||J==="base64urlnopad")return O8.encode(Z,{padding:J!=="base64urlnopad"});return Z},verify:async(X,W,Z)=>{if(typeof X==="string")X=await Y.importKey(X,"verify");if(J==="hex")Z=tG.decode(Z);if(J==="base64"||J==="base64url"||J==="base64urlnopad")Z=await I6.decode(Z);return fJ().verify("HMAC",X,typeof Z==="string"?new TextEncoder().encode(Z):Z,typeof W==="string"?new TextEncoder().encode(W):W)}};return Y};function dj($){let J=($.advanced?.useSecureCookies!==void 0?$.advanced?.useSecureCookies:$.baseURL?$.baseURL.startsWith("https://")?!0:!1:BW)?hj:"",Y=!!$.advanced?.crossSubDomainCookies?.enabled,X=Y?$.advanced?.crossSubDomainCookies?.domain||($.baseURL?new URL($.baseURL).hostname:void 0):void 0;if(Y&&!X)throw new q$("baseURL is required when crossSubdomainCookies are enabled");function W(Z,G={}){let Q=$.advanced?.cookiePrefix||"better-auth",H=$.advanced?.cookies?.[Z]?.name||`${Q}.${Z}`,z=$.advanced?.cookies?.[Z]?.attributes;return{name:`${J}${H}`,attributes:{secure:!!J,sameSite:"lax",path:"/",httpOnly:!0,...Y?{domain:X}:{},...$.advanced?.defaultCookieAttributes,...G,...z}}}return W}function yu($){let J=dj($),Y=J("session_token",{maxAge:$.session?.expiresIn||yj("7d")}),X=J("session_data",{maxAge:$.session?.cookieCache?.maxAge||300}),W=J("account_data",{maxAge:$.session?.cookieCache?.maxAge||300}),Z=J("dont_remember");return{sessionToken:{name:Y.name,attributes:Y.attributes},sessionData:{name:X.name,attributes:X.attributes},dontRememberToken:{name:Z.name,attributes:Z.attributes},accountData:{name:W.name,attributes:W.attributes}}}async function nz($,J,Y){if(!$.context.options.session?.cookieCache?.enabled)return;let X=gU(J.session,$.context.options.session?.additionalFields),W=o$($.context.options,J.user),Z=$.context.options.session?.cookieCache?.version,G="1";if(Z){if(typeof Z==="string")G=Z;else if(typeof Z==="function"){let F=Z(J.session,J.user);G=Y2(F)?await F:F}}let Q={session:X,user:W,updatedAt:Date.now(),version:G},H={...$.context.authCookies.sessionData.attributes,maxAge:Y?void 0:$.context.authCookies.sessionData.attributes.maxAge},z=x4(H.maxAge||60,"sec").getTime(),K=$.context.options.session?.cookieCache?.strategy||"compact",w;if(K==="jwe")w=await CH(Q,$.context.secret,"better-auth-session",H.maxAge||300);else if(K==="jwt")w=await EH(Q,$.context.secret,H.maxAge||300);else w=O8.encode(JSON.stringify({session:Q,expiresAt:z,signature:await EW("SHA-256","base64urlnopad").sign($.context.secret,JSON.stringify({...Q,expiresAt:z}))}),{padding:!1});if(w.length>4093){let F=XM($.context.authCookies.sessionData.name,H,$),U=F.chunk(w,H);F.setCookies(U)}else{let F=XM($.context.authCookies.sessionData.name,H,$);if(F.hasChunks()){let U=F.clean();F.setCookies(U)}$.setCookie($.context.authCookies.sessionData.name,w,H)}if($.context.options.account?.storeAccountCookie){let F=await J2($);if(F)await u9($,F)}}async function U0($,J,Y,X){let W=await $.getSignedCookie($.context.authCookies.dontRememberToken.name,$.context.secret);Y=Y!==void 0?Y:!!W;let Z=$.context.authCookies.sessionToken.attributes,G=Y?void 0:$.context.sessionConfig.expiresIn;if(await $.setSignedCookie($.context.authCookies.sessionToken.name,J.session.token,$.context.secret,{...Z,maxAge:G,...X}),Y)await $.setSignedCookie($.context.authCookies.dontRememberToken.name,"true",$.context.secret,$.context.authCookies.dontRememberToken.attributes);await nz($,J,Y),$.context.setNewSession(J)}function k6($,J){$.setCookie(J.name,"",{...J.attributes,maxAge:0})}function WJ($,J){if(k6($,$.context.authCookies.sessionToken),k6($,$.context.authCookies.sessionData),$.context.options.account?.storeAccountCookie){k6($,$.context.authCookies.accountData);let W=YM($.context.authCookies.accountData.name,$.context.authCookies.accountData.attributes,$),Z=W.clean();W.setCookies(Z)}if($.context.oauthConfig.storeStateStrategy==="cookie")k6($,$.context.createAuthCookie("oauth_state"));let Y=XM($.context.authCookies.sessionData.name,$.context.authCookies.sessionData.attributes,$),X=Y.clean();if(Y.setCookies(X),!J)k6($,$.context.authCookies.dontRememberToken)}$0();y$();var hu=kz({callbackURL:A(),codeVerifier:A(),errorURL:A().optional(),newUserURL:A().optional(),expiresAt:H0(),link:c({email:A(),userId:D0.string()}).optional(),requestSignUp:m$().optional()}),c9=class extends q${code;details;constructor($,J){super($,J);this.code=J.code,this.details=J.details}};async function ZM($,J,Y){let X=K6(32);if($.context.oauthConfig.storeStateStrategy==="cookie"){let Q=await bY({key:$.context.secret,data:JSON.stringify(J)}),H=$.context.createAuthCookie(Y?.cookieName??"oauth_state",{maxAge:600});return $.setCookie(H.name,Q,H.attributes),{state:X,codeVerifier:J.codeVerifier}}let W=$.context.createAuthCookie(Y?.cookieName??"state",{maxAge:300});await $.setSignedCookie(W.name,X,$.context.secret,W.attributes);let Z=new Date;Z.setMinutes(Z.getMinutes()+10);let G=await $.context.internalAdapter.createVerificationValue({value:JSON.stringify(J),identifier:X,expiresAt:Z});if(!G)throw new c9("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database",{code:"state_generation_error"});return{state:G.identifier,codeVerifier:J.codeVerifier}}async function GM($,J,Y){let X=$.context.oauthConfig.storeStateStrategy,W;if(X==="cookie"){let Z=$.context.createAuthCookie(Y?.cookieName??"oauth_state"),G=$.getCookie(Z.name);if(!G)throw new c9("State mismatch: auth state cookie not found",{code:"state_mismatch",details:{state:J}});try{let Q=await gJ({key:$.context.secret,data:G});W=hu.parse(JSON.parse(Q))}catch(Q){throw new c9("State invalid: Failed to decrypt or parse auth state",{code:"state_invalid",details:{state:J},cause:Q})}k6($,Z)}else{let Z=await $.context.internalAdapter.findVerificationValue(J);if(!Z)throw new c9("State mismatch: verification not found",{code:"state_mismatch",details:{state:J}});W=hu.parse(JSON.parse(Z.value));let G=$.context.createAuthCookie(Y?.cookieName??"state"),Q=await $.getSignedCookie(G.name,$.context.secret);if(!$.context.oauthConfig.skipStateCookieCheck&&(!Q||Q!==J))throw new c9("State mismatch: State not persisted correctly",{code:"state_security_mismatch",details:{state:J}});k6($,G),await $.context.internalAdapter.deleteVerificationValue(Z.id)}if(W.expiresAt<Date.now())throw new c9("Invalid state: request expired",{code:"state_mismatch",details:{expiresAt:W.expiresAt}});return W}var iz=Symbol.for("better-auth:global"),rz=null,eG$={},cj="1.4.18";function gZ(){if(!globalThis[iz])globalThis[iz]={version:cj,epoch:1,context:eG$},rz=globalThis[iz];if(rz=globalThis[iz],rz.version!==cj)rz.version=cj,rz.epoch++;return globalThis[iz]}function pj(){return gZ().version}var $2$=import("node:async_hooks").then(($)=>$.AsyncLocalStorage).catch(($)=>{if("AsyncLocalStorage"in globalThis)return globalThis.AsyncLocalStorage;if(typeof window<"u")return null;throw console.warn("[better-auth] Warning: AsyncLocalStorage is not available in this environment. Some features may not work as expected."),console.warn("[better-auth] Please read more about this warning at https://better-auth.com/docs/installation#mount-handler"),console.warn("[better-auth] If you are using Cloudflare Workers, please see: https://developers.cloudflare.com/workers/configuration/compatibility-flags/#nodejs-compatibility-flag"),$});async function X2(){let $=await $2$;if($===null)throw Error("getAsyncLocalStorage is only available in server code");else return $}var mu=async()=>{let $=gZ();if(!$.context.endpointContextAsyncStorage){let J=await X2();$.context.endpointContextAsyncStorage=new J}return $.context.endpointContextAsyncStorage};async function xJ(){let $=(await mu()).getStore();if(!$)throw Error("No auth context found. Please make sure you are calling this function within a `runWithEndpointContext` callback.");return $}async function xZ($,J){return(await mu()).run($,J)}var nj=async()=>{let $=gZ();if(!$.context.requestStateAsyncStorage){let J=await X2();$.context.requestStateAsyncStorage=new J}return $.context.requestStateAsyncStorage};async function ij(){return(await nj()).getStore()!==void 0}async function lj(){let $=(await nj()).getStore();if(!$)throw Error("No request state found. Please make sure you are calling this function within a `runWithRequestState` callback.");return $}async function rj($,J){return(await nj()).run($,J)}function oj($){let J=Object.freeze({});return{get ref(){return J},async get(){let Y=await lj();if(!Y.has(J)){let X=await $();return Y.set(J,X),X}return Y.get(J)},async set(Y){(await lj()).set(J,Y)}}}var tj=async()=>{let $=gZ();if(!$.context.adapterAsyncStorage){let J=await X2();$.context.adapterAsyncStorage=new J}return $.context.adapterAsyncStorage};var V4=async($)=>{return tj().then((J)=>{return J.getStore()||$}).catch(()=>{return $})},aj=async($,J)=>{let Y=!0;return tj().then((X)=>{return Y=!0,X.run($,J)}).catch((X)=>{if(!Y)return J();throw X})},oz=async($,J)=>{let Y=!0;return tj().then((X)=>{return Y=!0,$.transaction(async(W)=>{return X.run(W,J)})}).catch((X)=>{if(!Y)return J();throw X})};var{get:uu,set:sj}=oj(()=>null);async function yZ($,J,Y){let X=$.body?.callbackURL||$.context.options.baseURL;if(!X)throw new x("BAD_REQUEST",{message:"callbackURL is required"});let W=K6(128),Z={...Y?Y:{},callbackURL:X,codeVerifier:W,errorURL:$.body?.errorCallbackURL,newUserURL:$.body?.newUserCallbackURL,link:J,expiresAt:Date.now()+600000,requestSignUp:$.body?.requestSignUp};await sj(Z);try{return ZM($,Z)}catch(G){throw $.context.logger.error("Failed to create verification",G),new x("INTERNAL_SERVER_ERROR",{message:"Unable to create verification",cause:G})}}async function tz($){let J=$.query.state||$.body.state,Y=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`,X;try{X=await GM($,J)}catch(W){if($.context.logger.error("Failed to parse state",W),W instanceof c9&&W.code==="state_security_mismatch")throw $.redirect(`${Y}?error=state_mismatch`);throw $.redirect(`${Y}?error=please_restart_the_process`)}if(!X.errorURL)X.errorURL=Y;if(X)await sj(X);return X}var ZJ={scope:"server"};_0();n0();_0();var J2$="127.0.0.1";function hZ($,J){if(J.advanced?.ipAddress?.disableIpTracking)return null;let Y="headers"in $?$.headers:$,X=J.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"];for(let W of X){let Z="get"in Y?Y.get(W):Y[W];if(typeof Z==="string"){let G=Z.split(",")[0].trim();if(eA(G))return $j(G,{ipv6Subnet:J.advanced?.ipAddress?.ipv6Subnet})}}if(OW()||kZ())return J2$;return null}n0();$0();function Y2$($){try{return(new URL($).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new q$(`Invalid base URL: ${$}. Please provide a valid base URL.`)}}function X2$($){try{let J=new URL($);if(J.protocol!=="http:"&&J.protocol!=="https:")throw new q$(`Invalid base URL: ${$}. URL must include 'http://' or 'https://'`)}catch(J){if(J instanceof q$)throw J;throw new q$(`Invalid base URL: ${$}. Please provide a valid base URL.`,{cause:J})}}function az($,J="/api/auth"){if(X2$($),Y2$($))return $;let Y=$.replace(/\/+$/,"");if(!J||J==="/")return Y;return J=J.startsWith("/")?J:`/${J}`,`${Y}${J}`}function du($,J){if(!$||$.trim()==="")return!1;if(J==="proto")return $==="http"||$==="https";if(J==="host"){if([/\.\./,/\0/,/[\s]/,/^[.]/,/[<>'"]/,/javascript:/i,/file:/i,/data:/i].some((Y)=>Y.test($)))return!1;return/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*(:[0-9]{1,5})?$/.test($)||/^(\d{1,3}\.){3}\d{1,3}(:[0-9]{1,5})?$/.test($)||/^\[[0-9a-fA-F:]+\](:[0-9]{1,5})?$/.test($)||/^localhost(:[0-9]{1,5})?$/i.test($)}return!1}function mZ($,J,Y,X,W){if($)return az($,J);if(X!==!1){let Q=A0.BETTER_AUTH_URL||A0.NEXT_PUBLIC_BETTER_AUTH_URL||A0.PUBLIC_BETTER_AUTH_URL||A0.NUXT_PUBLIC_BETTER_AUTH_URL||A0.NUXT_PUBLIC_AUTH_URL||(A0.BASE_URL!=="/"?A0.BASE_URL:void 0);if(Q)return az(Q,J)}let Z=Y?.headers.get("x-forwarded-host"),G=Y?.headers.get("x-forwarded-proto");if(Z&&G&&W){if(du(G,"proto")&&du(Z,"host"))try{return az(`${G}://${Z}`,J)}catch(Q){}}if(Y){let Q=CW(Y.url);if(!Q)throw new q$("Could not get origin from request. Please provide a valid base URL.");return az(Q,J)}if(typeof window<"u"&&window.location)return az(window.location.origin,J)}function CW($){try{let J=new URL($);return J.origin==="null"?null:J.origin}catch{return null}}function cu($){try{return new URL($).protocol}catch{return null}}function pu($){try{return new URL($).host}catch{return null}}function ej($){if($==="-"||$==="^"||$==="$"||$==="+"||$==="."||$==="("||$===")"||$==="|"||$==="["||$==="]"||$==="{"||$==="}"||$==="*"||$==="?"||$==="\\")return`\\${$}`;else return $}function W2$($){let J="";for(let Y=0;Y<$.length;Y++)J+=ej($[Y]);return J}function lu($,J=!0){if(Array.isArray($))return`(?:${$.map((z)=>`^${lu(z,J)}$`).join("|")})`;let Y="",X="",W=".";if(J===!0)Y="/",X="[/\\\\]",W="[^/\\\\]";else if(J)if(Y=J,X=W2$(Y),X.length>1)X=`(?:${X})`,W=`((?!${X}).)`;else W=`[^${X}]`;let Z=J?`${X}+?`:"",G=J?`${X}*?`:"",Q=J?$.split(Y):[$],H="";for(let z=0;z<Q.length;z++){let K=Q[z],w=Q[z+1],F="";if(!K&&z>0)continue;if(J)if(z===Q.length-1)F=G;else if(w!=="**")F=Z;else F="";if(J&&K==="**"){if(F)H+=z===0?"":F,H+=`(?:${W}*?${F})*?`;continue}for(let U=0;U<K.length;U++){let V=K[U];if(V==="\\"){if(U<K.length-1)H+=ej(K[U+1]),U++}else if(V==="?")H+=W;else if(V==="*")H+=`${W}*?`;else H+=ej(V)}H+=F}return H}function Z2$($,J){if(typeof J!=="string")throw TypeError(`Sample must be a string, but ${typeof J} given`);return $.test(J)}function sz($,J){if(typeof $!=="string"&&!Array.isArray($))throw TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof $} given`);if(typeof J==="string"||typeof J==="boolean")J={separator:J};if(arguments.length===2&&!(typeof J>"u"||typeof J==="object"&&J!==null&&!Array.isArray(J)))throw TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof J} given`);if(J=J||{},J.separator==="\\")throw Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let Y=lu($,J.separator),X=new RegExp(`^${Y}$`,J.flags),W=Z2$.bind(null,X);return W.options=J,W.pattern=$,W.regexp=X,W}var QM=($,J,Y)=>{if($.startsWith("/")){if(Y?.allowRelativePaths)return $.startsWith("/")&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/@]*(?:\?[\w\-.\+/=&%@]*)?$/.test($);return!1}if(J.includes("*")||J.includes("?")){if(J.includes("://"))return sz(J)(CW($)||$);let W=pu($);if(!W)return!1;return sz(J)(W)}let X=cu($);return X==="http:"||X==="https:"||!X?J===CW($):$.startsWith(J)};$0();_0();var HM=m9(async()=>{return{}}),j0=m9.create({use:[HM,m9(async()=>{return{}})]}),nu=[HM];function H$($,J,Y){let X=typeof $==="string"?$:void 0,W=typeof J==="object"?J:$,Z=typeof J==="function"?J:Y;if(X)return h9(X,{...W,use:[...W?.use||[],...nu]},async(G)=>xZ(G,()=>Z(G)));return h9({...W,use:[...W?.use||[],...nu]},async(G)=>xZ(G,()=>Z(G)))}function iu($){return $.context.skipOriginCheck===!0&&$.context.options.advanced?.disableCSRFCheck===void 0}var G2$=OG(function(){},"disableOriginCheck: true currently also disables CSRF checks. In a future version, disableOriginCheck will ONLY disable URL validation. To keep CSRF disabled, add disableCSRFCheck: true to your config."),JE=j0(async($)=>{if($.request?.method==="GET"||$.request?.method==="OPTIONS"||$.request?.method==="HEAD"||!$.request)return;if(await $E($),$.context.skipOriginCheck)return;let{body:J,query:Y}=$,X=J?.callbackURL||Y?.callbackURL,W=J?.redirectTo,Z=J?.errorCallbackURL,G=J?.newUserCallbackURL,Q=(H,z)=>{if(!H)return;if(!$.context.isTrustedOrigin(H,{allowRelativePaths:z!=="origin"}))throw $.context.logger.error(`Invalid ${z}: ${H}`),$.context.logger.info(`If it's a valid URL, please add ${H} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${$.context.trustedOrigins}`),new x("FORBIDDEN",{message:`Invalid ${z}`})};X&&Q(X,"callbackURL"),W&&Q(W,"redirectURL"),Z&&Q(Z,"errorCallbackURL"),G&&Q(G,"newUserCallbackURL")}),EX=($)=>j0(async(J)=>{if(!J.request)return;if(J.context.skipOriginCheck)return;let Y=$(J),X=(Z,G)=>{if(!Z)return;if(!J.context.isTrustedOrigin(Z,{allowRelativePaths:G!=="origin"}))throw J.context.logger.error(`Invalid ${G}: ${Z}`),J.context.logger.info(`If it's a valid URL, please add ${Z} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${J.context.trustedOrigins}`),new x("FORBIDDEN",{message:`Invalid ${G}`})},W=Array.isArray(Y)?Y:[Y];for(let Z of W)X(Z,"callbackURL")});async function $E($,J=!1){let Y=$.request?.headers;if(!Y||!$.request)return;let X=Y.get("origin")||Y.get("referer")||"",W=Y.has("cookie");if($.context.skipCSRFCheck)return;if(iu($)){$.context.options.advanced?.disableOriginCheck===!0&&G2$();return}let Z=$.context.skipOriginCheck;if(Array.isArray(Z))try{let Q=new URL($.context.baseURL).pathname,H=bZ($.request.url,Q);if(Z.some((z)=>H.startsWith(z)))return}catch{}if(!(J||W))return;if(!X||X==="null")throw new x("FORBIDDEN",{message:V$.MISSING_OR_NULL_ORIGIN});let G=Array.isArray($.context.options.trustedOrigins)?$.context.trustedOrigins:[...$.context.trustedOrigins,...(await $.context.options.trustedOrigins?.($.request))?.filter((Q)=>Boolean(Q))||[]];if(!G.some((Q)=>QM(X,Q)))throw $.context.logger.error(`Invalid origin: ${X}`),$.context.logger.info(`If it's a valid URL, please add ${X} to trustedOrigins in your auth config
`,`Current list of trustedOrigins: ${G}`),new x("FORBIDDEN",{message:"Invalid origin"})}var W2=j0(async($)=>{if(!$.request)return;await Q2$($)});async function Q2$($){let J=$.request;if(!J)return;if($.context.skipCSRFCheck)return;if(iu($))return;let Y=J.headers;if(Y.has("cookie"))return await $E($);let X=Y.get("Sec-Fetch-Site"),W=Y.get("Sec-Fetch-Mode"),Z=Y.get("Sec-Fetch-Dest");if(Boolean(X&&X.trim()||W&&W.trim()||Z&&Z.trim())){if(X==="cross-site"&&W==="navigate")throw $.context.logger.error("Blocked cross-site navigation login attempt (CSRF protection)",{secFetchSite:X,secFetchMode:W,secFetchDest:Z}),new x("FORBIDDEN",{message:V$.CROSS_SITE_NAVIGATION_LOGIN_BLOCKED});return await $E($,!0)}}_0();var YE=new Map;function H2$($,J,Y){let X=Date.now(),W=J*1000;return X-Y.lastRequest<W&&Y.count>=$}function z2$($){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":$.toString()}})}function K2$($,J){let Y=Date.now(),X=J*1000;return Math.ceil(($+X-Y)/1000)}function w2$($){let Y=$.adapter;return{get:async(X)=>{let W=(await Y.findMany({model:"rateLimit",where:[{field:"key",value:X}]}))[0];if(typeof W?.lastRequest==="bigint")W.lastRequest=Number(W.lastRequest);return W},set:async(X,W,Z)=>{try{if(Z)await Y.updateMany({model:"rateLimit",where:[{field:"key",value:X}],update:{count:W.count,lastRequest:W.lastRequest}});else await Y.create({model:"rateLimit",data:{key:X,count:W.count,lastRequest:W.lastRequest}})}catch(G){$.logger.error("Error setting rate limit",G)}}}}function U2$($,J){if($.options.rateLimit?.customStorage)return $.options.rateLimit.customStorage;let Y=$.rateLimit.storage;if(Y==="secondary-storage")return{get:async(X)=>{let W=await $.options.secondaryStorage?.get(X);return W?o0(W):null},set:async(X,W,Z)=>{let G=J?.window??$.options.rateLimit?.window??10;await $.options.secondaryStorage?.set?.(X,JSON.stringify(W),G)}};else if(Y==="memory")return{async get(X){let W=YE.get(X);if(!W)return null;if(Date.now()>=W.expiresAt)return YE.delete(X),null;return W.data},async set(X,W,Z){let G=J?.window??$.options.rateLimit?.window??10,Q=Date.now()+G*1000;YE.set(X,{data:W,expiresAt:Q})}};return w2$($)}async function ru($,J){if(!J.rateLimit.enabled)return;let Y=new URL(J.baseURL).pathname,X=bZ($.url,Y),W=J.rateLimit.window,Z=J.rateLimit.max,G=hZ($,J.options);if(!G)return;let Q=Jj(G,X),H=F2$().find((F)=>F.pathMatcher(X));if(H)W=H.window,Z=H.max;for(let F of J.options.plugins||[])if(F.rateLimit){let U=F.rateLimit.find((V)=>V.pathMatcher(X));if(U){W=U.window,Z=U.max;break}}if(J.rateLimit.customRules){let F=Object.keys(J.rateLimit.customRules).find((U)=>{if(U.includes("*"))return sz(U)(X);return U===X});if(F){let U=J.rateLimit.customRules[F],V=typeof U==="function"?await U($,{window:W,max:Z}):U;if(V)W=V.window,Z=V.max;if(V===!1)return}}let z=U2$(J,{window:W}),K=await z.get(Q),w=Date.now();if(!K)await z.set(Q,{key:Q,count:1,lastRequest:w});else{let F=w-K.lastRequest;if(H2$(Z,W,K))return z2$(K2$(K.lastRequest,W));else if(F>W*1000)await z.set(Q,{...K,count:1,lastRequest:w},!0);else await z.set(Q,{...K,count:K.count+1,lastRequest:w},!0)}}function F2$(){return[{pathMatcher($){return $.startsWith("/sign-in")||$.startsWith("/sign-up")||$.startsWith("/change-password")||$.startsWith("/change-email")},window:10,max:3}]}var{defineProperty:ez,getOwnPropertyDescriptor:D2$,getOwnPropertyNames:M2$}=Object,V2$=Object.prototype.hasOwnProperty,tu=($,J)=>{let Y={};for(var X in $)ez(Y,X,{get:$[X],enumerable:!0});if(J)ez(Y,Symbol.toStringTag,{value:"Module"});return Y},ou=($,J,Y,X)=>{if(J&&typeof J==="object"||typeof J==="function"){for(var W=M2$(J),Z=0,G=W.length,Q;Z<G;Z++)if(Q=W[Z],!V2$.call($,Q)&&Q!==Y)ez($,Q,{get:((H)=>J[H]).bind(null,Q),enumerable:!(X=D2$(J,Q))||X.enumerable})}return $},au=($,J,Y,X)=>{if(X)ez($,Symbol.toStringTag,{value:"Module"}),Y&&ez(Y,Symbol.toStringTag,{value:"Module"});ou($,J,"default"),Y&&ou(Y,J,"default")};n0();async function wM($,J){let Y;if(!$.database){let X=A1($),W=Object.keys(X).reduce((G,Q)=>{return G[Q]=[],G},{}),{memoryAdapter:Z}=await Promise.resolve().then(() => (Yd(),Jd));Y=Z(W)($)}else if(typeof $.database==="function")Y=$.database($);else Y=await J($);if(!Y.transaction)C$.warn("Adapter does not correctly implement transaction function, patching it automatically. Please update your adapter implementation."),Y.transaction=async(X)=>{return X(Y)};return Y}$0();async function kV($){return wM($,async(J)=>{let{createKyselyAdapter:Y}=await Promise.resolve().then(() => (ZR(),WR)),{kysely:X,databaseType:W,transaction:Z}=await Y(J);if(!X)throw new q$("Failed to initialize database adapter");let{kyselyAdapter:G}=await Promise.resolve().then(() => (ZR(),WR));return G(X,{type:W||"sqlite",debugLogs:J.database&&"debugLogs"in J.database?J.database.debugLogs:!1,transaction:Z})(J)})}var vp=($,J)=>{return{type:$,...J}};function fp($,J){let Y=J.id?{id:J.id}:{};for(let X in $){let W=$[X],Z=J[X];if(Z===void 0)continue;Y[W.fieldName||X]=Z}return Y}function gp($,J){if(!J)return null;let Y={id:J.id};for(let[X,W]of Object.entries($))Y[X]=J[W.fieldName||X];return Y}function bV($,J){let Y=J.hooks;async function X(H,z,K){let w=await xJ().catch(()=>null),F=H;for(let N of Y||[]){let P=N[z]?.create?.before;if(P){let B=await P(F,w);if(B===!1)return null;if(typeof B==="object"&&"data"in B)F={...F,...B.data}}}let U=K?await K.fn(F):null,V=!K||K.executeMainFn?await(await V4($)).create({model:z,data:F,forceAllowId:!0}):U;for(let N of Y||[]){let P=N[z]?.create?.after;if(P)await P(V,w)}return V}async function W(H,z,K,w){let F=await xJ().catch(()=>null),U=H;for(let P of Y||[]){let B=P[K]?.update?.before;if(B){let L=await B(H,F);if(L===!1)return null;if(typeof L==="object"&&"data"in L)U={...U,...L.data}}}let V=w?await w.fn(U):null,N=!w||w.executeMainFn?await(await V4($)).update({model:K,update:U,where:z}):V;for(let P of Y||[]){let B=P[K]?.update?.after;if(B)await B(N,F)}return N}async function Z(H,z,K,w){let F=await xJ().catch(()=>null),U=H;for(let P of Y||[]){let B=P[K]?.update?.before;if(B){let L=await B(H,F);if(L===!1)return null;if(typeof L==="object"&&"data"in L)U={...U,...L.data}}}let V=w?await w.fn(U):null,N=!w||w.executeMainFn?await(await V4($)).updateMany({model:K,update:U,where:z}):V;for(let P of Y||[]){let B=P[K]?.update?.after;if(B)await B(N,F)}return N}async function G(H,z,K){let w=await xJ().catch(()=>null),F=null;try{F=(await(await V4($)).findMany({model:z,where:H,limit:1}))[0]||null}catch{}if(F)for(let N of Y||[]){let P=N[z]?.delete?.before;if(P){if(await P(F,w)===!1)return null}}let U=K?await K.fn(H):null,V=!K||K.executeMainFn?await(await V4($)).delete({model:z,where:H}):U;if(F)for(let N of Y||[]){let P=N[z]?.delete?.after;if(P)await P(F,w)}return V}async function Q(H,z,K){let w=await xJ().catch(()=>null),F=[];try{F=await(await V4($)).findMany({model:z,where:H})}catch{}for(let N of F)for(let P of Y||[]){let B=P[z]?.delete?.before;if(B){if(await B(N,w)===!1)return null}}let U=K?await K.fn(H):null,V=!K||K.executeMainFn?await(await V4($)).deleteMany({model:z,where:H}):U;for(let N of F)for(let P of Y||[]){let B=P[z]?.delete?.after;if(B)await B(N,w)}return V}return{createWithHooks:X,updateWithHooks:W,updateManyWithHooks:Z,deleteWithHooks:G,deleteManyWithHooks:Q}}_0();var i2=($,J)=>{let{logger:Y,options:X}=J,W=X.secondaryStorage,Z=X.session?.expiresIn||604800,{createWithHooks:G,updateWithHooks:Q,updateManyWithHooks:H,deleteWithHooks:z,deleteManyWithHooks:K}=bV($,J);async function w(F){if(!W)return;let U=await W.get(`active-sessions-${F.id}`);if(!U)return;let V=Date.now(),N=(o0(U)||[]).filter((P)=>P.expiresAt>V);await Promise.all(N.map(async({token:P})=>{let B=await W.get(P);if(!B)return;let L=o0(B);if(!L)return;let g=Math.max(Math.floor(new Date(L.session.expiresAt).getTime()-V)/1000,0);await W.set(P,JSON.stringify({session:L.session,user:F}),Math.floor(g))}))}return{createOAuthUser:async(F,U)=>{return oz($,async()=>{let V=await G({createdAt:new Date,updatedAt:new Date,...F},"user",void 0);return{user:V,account:await G({...U,userId:V.id,createdAt:new Date,updatedAt:new Date},"account",void 0)}})},createUser:async(F)=>{return await G({createdAt:new Date,updatedAt:new Date,...F,email:F.email?.toLowerCase()},"user",void 0)},createAccount:async(F)=>{return await G({createdAt:new Date,updatedAt:new Date,...F},"account",void 0)},listSessions:async(F)=>{if(W){let U=await W.get(`active-sessions-${F}`);if(!U)return[];let V=o0(U)||[],N=Date.now(),P=new Set,B=[];for(let{token:L,expiresAt:g}of V){if(g<=N||P.has(L))continue;P.add(L);let k=await W.get(L);if(!k)continue;try{let I=typeof k==="string"?JSON.parse(k):k;if(!I?.session)continue;B.push(n6(J.options,{...I.session,expiresAt:new Date(I.session.expiresAt)}))}catch{continue}}return B}return await(await V4($)).findMany({model:"session",where:[{field:"userId",value:F}]})},listUsers:async(F,U,V,N)=>{return await(await V4($)).findMany({model:"user",limit:F,offset:U,sortBy:V,where:N})},countTotalUsers:async(F)=>{let U=await(await V4($)).count({model:"user",where:F});if(typeof U==="string")return parseInt(U);return U},deleteUser:async(F)=>{if(!W||X.session?.storeSessionInDatabase)await K([{field:"userId",value:F}],"session",void 0);await K([{field:"userId",value:F}],"account",void 0),await z([{field:"id",value:F}],"user",void 0)},createSession:async(F,U,V,N)=>{let P=await xJ().catch(()=>null),B=P?.headers||P?.request?.headers,{id:L,...g}=V||{},k=JM(P?.context.options??X,{}),I={ipAddress:P?.request||P?.headers?hZ(P?.request||P?.headers,P?.context.options)||"":"",userAgent:B?.get("user-agent")||"",...g,expiresAt:U?x4(86400,"sec"):x4(Z,"sec"),userId:F,token:T6(32),createdAt:new Date,updatedAt:new Date,...k,...N?g:{}};return await G(I,"session",W?{fn:async(O)=>{let b=await W.get(`active-sessions-${F}`),D=[],_=Date.now();if(b)D=o0(b)||[],D=D.filter((R)=>R.expiresAt>_&&R.token!==I.token);let q=[...D,{token:I.token,expiresAt:I.expiresAt.getTime()}].sort((R,v)=>R.expiresAt-v.expiresAt),S=q.at(-1)?.expiresAt??I.expiresAt.getTime(),j=Math.max(Math.floor((S-_)/1000),0);if(j>0)await W.set(`active-sessions-${F}`,JSON.stringify(q),j);let E=await $.findOne({model:"user",where:[{field:"id",value:F}]}),T=Math.max(Math.floor((I.expiresAt.getTime()-_)/1000),0);if(T>0)await W.set(I.token,JSON.stringify({session:O,user:E}),T);return O},executeMainFn:X.session?.storeSessionInDatabase}:void 0)},findSession:async(F)=>{if(W){let P=await W.get(F);if(!P&&!X.session?.storeSessionInDatabase)return null;if(P){let B=o0(P);if(!B)return null;return{session:n6(J.options,{...B.session,expiresAt:new Date(B.session.expiresAt),createdAt:new Date(B.session.createdAt),updatedAt:new Date(B.session.updatedAt)}),user:o$(J.options,{...B.user,createdAt:new Date(B.user.createdAt),updatedAt:new Date(B.user.updatedAt)})}}}let U=await(await V4($)).findOne({model:"session",where:[{value:F,field:"token"}],join:{user:!0}});if(!U)return null;let{user:V,...N}=U;if(!V)return null;return{session:n6(J.options,N),user:o$(J.options,V)}},findSessions:async(F)=>{if(W){let V=[];for(let N of F){let P=await W.get(N);if(P)try{let B=typeof P==="string"?JSON.parse(P):P;if(!B?.session)continue;let L={session:{...B.session,expiresAt:new Date(B.session.expiresAt)},user:{...B.user,createdAt:new Date(B.user.createdAt),updatedAt:new Date(B.user.updatedAt)}};V.push(L)}catch{continue}}return V}let U=await(await V4($)).findMany({model:"session",where:[{field:"token",value:F,operator:"in"}],join:{user:!0}});if(!U.length)return[];if(U.some((V)=>!V.user))return[];return U.map((V)=>{let{user:N,...P}=V;return{session:P,user:N}})},updateSession:async(F,U)=>{return await Q(U,[{field:"token",value:F}],"session",W?{async fn(V){let N=await W.get(F);if(!N)return null;let P=o0(N);if(!P)return null;let B={...P.session,...V,expiresAt:new Date(V.expiresAt??P.session.expiresAt),createdAt:new Date(P.session.createdAt),updatedAt:new Date(V.updatedAt??P.session.updatedAt)},L=n6(J.options,B),g=Date.now(),k=new Date(L.expiresAt).getTime(),I=Math.max(Math.floor((k-g)/1000),0);if(I>0){await W.set(F,JSON.stringify({session:L,user:P.user}),I);let O=`active-sessions-${L.userId}`,b=await W.get(O),D=(b?o0(b)||[]:[]).filter((q)=>q.token!==F&&q.expiresAt>g).concat([{token:F,expiresAt:k}]).sort((q,S)=>q.expiresAt-S.expiresAt),_=D.at(-1)?.expiresAt;if(_&&_>g)await W.set(O,JSON.stringify(D),Math.floor((_-g)/1000));else await W.delete(O)}return L},executeMainFn:X.session?.storeSessionInDatabase}:void 0)},deleteSession:async(F)=>{if(W){let U=await W.get(F);if(U){let{session:V}=o0(U)??{};if(!V){Y.error("Session not found in secondary storage");return}let N=V.userId,P=await W.get(`active-sessions-${N}`);if(P){let B=o0(P)||[],L=Date.now(),g=B.filter((I)=>I.expiresAt>L&&I.token!==F),k=g.sort((I,O)=>I.expiresAt-O.expiresAt).at(-1)?.expiresAt;if(g.length>0&&k&&k>Date.now())await W.set(`active-sessions-${N}`,JSON.stringify(g),Math.floor((k-L)/1000));else await W.delete(`active-sessions-${N}`)}else Y.error("Active sessions list not found in secondary storage")}if(await W.delete(F),!X.session?.storeSessionInDatabase||J.options.session?.preserveSessionInDatabase)return}await z([{field:"token",value:F}],"session",void 0)},deleteAccounts:async(F)=>{await K([{field:"userId",value:F}],"account",void 0)},deleteAccount:async(F)=>{await z([{field:"id",value:F}],"account",void 0)},deleteSessions:async(F)=>{if(W){if(typeof F==="string"){let U=await W.get(`active-sessions-${F}`),V=U?o0(U):[];if(!V)return;for(let N of V)await W.delete(N.token);await W.delete(`active-sessions-${F}`)}else for(let U of F)if(await W.get(U))await W.delete(U);if(!X.session?.storeSessionInDatabase||J.options.session?.preserveSessionInDatabase)return}await K([{field:Array.isArray(F)?"token":"userId",value:F,operator:Array.isArray(F)?"in":void 0}],"session",void 0)},findOAuthUser:async(F,U,V)=>{let N=await(await V4($)).findOne({model:"account",where:[{value:U,field:"accountId"},{value:V,field:"providerId"}],join:{user:!0}});if(N)if(N.user)return{user:N.user,linkedAccount:N,accounts:[N]};else{let P=await(await V4($)).findOne({model:"user",where:[{value:F.toLowerCase(),field:"email"}]});if(P)return{user:P,linkedAccount:N,accounts:[N]};return null}else{let P=await(await V4($)).findOne({model:"user",where:[{value:F.toLowerCase(),field:"email"}]});if(P)return{user:P,linkedAccount:null,accounts:await(await V4($)).findMany({model:"account",where:[{value:P.id,field:"userId"}]})||[]};else return null}},findUserByEmail:async(F,U)=>{let V=await(await V4($)).findOne({model:"user",where:[{value:F.toLowerCase(),field:"email"}],join:{...U?.includeAccounts?{account:!0}:{}}});if(!V)return null;let{account:N,...P}=V;return{user:P,accounts:N??[]}},findUserById:async(F)=>{if(!F)return null;return await(await V4($)).findOne({model:"user",where:[{field:"id",value:F}]})},linkAccount:async(F)=>{return await G({createdAt:new Date,updatedAt:new Date,...F},"account",void 0)},updateUser:async(F,U)=>{let V=await Q(U,[{field:"id",value:F}],"user",void 0);return await w(V),V},updateUserByEmail:async(F,U)=>{let V=await Q(U,[{field:"email",value:F.toLowerCase()}],"user",void 0);return await w(V),V},updatePassword:async(F,U)=>{await H({password:U},[{field:"userId",value:F},{field:"providerId",value:"credential"}],"account",void 0)},findAccounts:async(F)=>{return await(await V4($)).findMany({model:"account",where:[{field:"userId",value:F}]})},findAccount:async(F)=>{return await(await V4($)).findOne({model:"account",where:[{field:"accountId",value:F}]})},findAccountByProviderId:async(F,U)=>{return await(await V4($)).findOne({model:"account",where:[{field:"accountId",value:F},{field:"providerId",value:U}]})},findAccountByUserId:async(F)=>{return await(await V4($)).findMany({model:"account",where:[{field:"userId",value:F}]})},updateAccount:async(F,U)=>{return await Q(U,[{field:"id",value:F}],"account",void 0)},createVerificationValue:async(F)=>{return await G({createdAt:new Date,updatedAt:new Date,...F},"verification",void 0)},findVerificationValue:async(F)=>{let U=await(await V4($)).findMany({model:"verification",where:[{field:"identifier",value:F}],sortBy:{field:"createdAt",direction:"desc"},limit:1});if(!X.verification?.disableCleanup)await K([{field:"expiresAt",value:new Date,operator:"lt"}],"verification",void 0);return U[0]},deleteVerificationValue:async(F)=>{await z([{field:"id",value:F}],"verification",void 0)},deleteVerificationByIdentifier:async(F)=>{await z([{field:"identifier",value:F}],"verification",void 0)},updateVerificationValue:async(F,U)=>{return await Q(U,[{field:"id",value:F}],"verification",void 0)}}};y$();function Z7({fields:$,isClientSide:J}){let Y=Object.keys($).reduce((X,W)=>{let Z=$[W];if(!Z)return X;if(J&&Z.input===!1)return X;let G;if(Z.type==="json")G=iG?iG():W0();else if(Z.type==="string[]"||Z.type==="number[]")G=l$(Z.type==="string[]"?A():H0());else if(Array.isArray(Z.type))G=W0();else G=h$[Z.type]();if(Z?.required===!1)G=G.optional();if(!J&&Z?.returned===!1)return X;return{...X,[W]:G}},{});return c(Y)}function vV($){let J=(0,fV.getAuthTables)($),Y={};for(let X in J){let W=J[X],Z=W.fields,G={};if(Object.entries(Z).forEach(([Q,H])=>{if(G[H.fieldName||Q]=H,H.references){let z=J[H.references.model];if(z)G[H.fieldName||Q].references={...H.references,model:z.modelName,field:H.references.field}}}),Y[W.modelName]){Y[W.modelName].fields={...Y[W.modelName].fields,...G};continue}Y[W.modelName]={fields:G,order:W.order||1/0}}return Y}IV();n0();l2();WK();var hQ$={postgres:{string:["character varying","varchar","text","uuid"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamptz","timestamp","date"],json:["json","jsonb"]},mysql:{string:["varchar","text","uuid"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"],json:["json"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"],json:["TEXT"]},mssql:{string:["varchar","nvarchar","uniqueidentifier"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime2","date","datetime"],json:["varchar","nvarchar"]}};function GR($,J,Y){function X(Z){return Z.toLowerCase().split("(")[0].trim()}if(J==="string[]"||J==="number[]")return $.toLowerCase().includes("json");let W=hQ$[Y];return(Array.isArray(J)?W.string.map((Z)=>Z.toLowerCase()):W[J].map((Z)=>Z.toLowerCase())).includes(X($))}async function mQ$($){try{let J=await G0`SHOW search_path`.execute($);if(J.rows[0]?.search_path)return J.rows[0].search_path.split(",").map((Y)=>Y.trim()).map((Y)=>Y.replace(/^["']|["']$/g,"")).filter((Y)=>!Y.startsWith("$"))[0]||"public"}catch{}return"public"}async function gV($){let J=vV($),Y=PW($.logger),{kysely:X,databaseType:W}=await RV($);if(!W)Y.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),W="sqlite";if(!X)Y.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1);let Z="public";if(W==="postgres"){Z=await mQ$(X),Y.debug(`PostgreSQL migration: Using schema '${Z}' (from search_path)`);try{if(!(await G0`
				SELECT schema_name 
				FROM information_schema.schemata 
				WHERE schema_name = ${Z}
			`.execute(X)).rows[0])Y.warn(`Schema '${Z}' does not exist. Tables will be inspected from available schemas. Consider creating the schema first or checking your database configuration.`)}catch(k){Y.debug(`Could not verify schema existence: ${k instanceof Error?k.message:String(k)}`)}}let G=await X.introspection.getTables(),Q=G;if(W==="postgres")try{let k=await G0`
				SELECT table_name 
				FROM information_schema.tables 
				WHERE table_schema = ${Z}
				AND table_type = 'BASE TABLE'
			`.execute(X),I=new Set(k.rows.map((O)=>O.table_name));Q=G.filter((O)=>O.schema===Z&&I.has(O.name)),Y.debug(`Found ${Q.length} table(s) in schema '${Z}': ${Q.map((O)=>O.name).join(", ")||"(none)"}`)}catch(k){Y.warn(`Could not filter tables by schema. Using all discovered tables. Error: ${k instanceof Error?k.message:String(k)}`)}let H=[],z=[];for(let[k,I]of Object.entries(J)){let O=Q.find((D)=>D.name===k);if(!O){let D=H.findIndex((S)=>S.table===k),_={table:k,fields:I.fields,order:I.order||1/0},q=H.findIndex((S)=>(S.order||1/0)>_.order);if(q===-1)if(D===-1)H.push(_);else H[D].fields={...H[D].fields,...I.fields};else H.splice(q,0,_);continue}let b={};for(let[D,_]of Object.entries(I.fields)){let q=O.columns.find((S)=>S.name===D);if(!q){b[D]=_;continue}if(GR(q.dataType,_.type,W))continue;else Y.warn(`Field ${D} in table ${k} has a different type in the database. Expected ${_.type} but got ${q.dataType}.`)}if(Object.keys(b).length>0)z.push({table:k,fields:b,order:I.order||1/0})}let K=[],w=$.advanced?.database?.generateId==="uuid",F=$.advanced?.database?.useNumberId||$.advanced?.database?.generateId==="serial";function U(k,I){let O=k.type,b=W||"sqlite",D={string:{sqlite:"text",postgres:"text",mysql:k.unique?"varchar(255)":k.references?"varchar(36)":k.sortable?"varchar(255)":k.index?"varchar(255)":"text",mssql:k.unique||k.sortable?"varchar(255)":k.references?"varchar(36)":"varchar(8000)"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:k.bigint?"bigint":"integer",postgres:k.bigint?"bigint":"integer",mysql:k.bigint?"bigint":"integer",mssql:k.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamptz",mysql:"timestamp(3)",mssql:G0`datetime2(3)`},json:{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},id:{postgres:F?G0`integer GENERATED BY DEFAULT AS IDENTITY`:w?"uuid":"text",mysql:F?"integer":w?"varchar(36)":"varchar(36)",mssql:F?"integer":w?"varchar(36)":"varchar(36)",sqlite:F?"integer":"text"},foreignKeyId:{postgres:F?"integer":w?"uuid":"text",mysql:F?"integer":w?"varchar(36)":"varchar(36)",mssql:F?"integer":w?"varchar(36)":"varchar(36)",sqlite:F?"integer":"text"},"string[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"},"number[]":{sqlite:"text",postgres:"jsonb",mysql:"json",mssql:"varchar(8000)"}};if(I==="id"||k.references?.field==="id"){if(I==="id")return D.id[b];return D.foreignKeyId[b]}if(Array.isArray(O))return"text";if(!(O in D))throw Error(`Unsupported field type '${String(O)}' for field '${I}'. Allowed types are: string, number, boolean, date, string[], number[]. If you need to store structured data, store it as a JSON string (type: "string") or split it into primitive fields. See https://better-auth.com/docs/advanced/schema#additional-fields`);return D[O][b]}let V=XK({schema:A1($),usePlural:!1}),N=YK({schema:A1($),usePlural:!1});function P(k,I){try{return`${V(k)}.${N({model:k,field:I})}`}catch{return`${k}.${I}`}}if(z.length)for(let k of z)for(let[I,O]of Object.entries(k.fields)){let b=U(O,I),D=X.schema.alterTable(k.table);if(O.index){let q=X.schema.alterTable(k.table).addIndex(`${k.table}_${I}_idx`);K.push(q)}let _=D.addColumn(I,b,(q)=>{if(q=O.required!==!1?q.notNull():q,O.references)q=q.references(P(O.references.model,O.references.field)).onDelete(O.references.onDelete||"cascade");if(O.unique)q=q.unique();if(O.type==="date"&&typeof O.defaultValue==="function"&&(W==="postgres"||W==="mysql"||W==="mssql"))if(W==="mysql")q=q.defaultTo(G0`CURRENT_TIMESTAMP(3)`);else q=q.defaultTo(G0`CURRENT_TIMESTAMP`);return q});K.push(_)}let B=[];if($.advanced?.database?.useNumberId)Y.warn("`useNumberId` is deprecated. Please use `generateId` with `serial` instead.");if(H.length)for(let k of H){let I=U({type:F?"number":"string"},"id"),O=X.schema.createTable(k.table).addColumn("id",I,(b)=>{if(F){if(W==="postgres")return b.primaryKey().notNull();else if(W==="sqlite")return b.primaryKey().notNull();else if(W==="mssql")return b.identity().primaryKey().notNull();return b.autoIncrement().primaryKey().notNull()}if(w){if(W==="postgres")return b.primaryKey().defaultTo(G0`pg_catalog.gen_random_uuid()`).notNull();return b.primaryKey().notNull()}return b.primaryKey().notNull()});for(let[b,D]of Object.entries(k.fields)){let _=U(D,b);if(O=O.addColumn(b,_,(q)=>{if(q=D.required!==!1?q.notNull():q,D.references)q=q.references(P(D.references.model,D.references.field)).onDelete(D.references.onDelete||"cascade");if(D.unique)q=q.unique();if(D.type==="date"&&typeof D.defaultValue==="function"&&(W==="postgres"||W==="mysql"||W==="mssql"))if(W==="mysql")q=q.defaultTo(G0`CURRENT_TIMESTAMP(3)`);else q=q.defaultTo(G0`CURRENT_TIMESTAMP`);return q}),D.index){let q=X.schema.createIndex(`${k.table}_${b}_${D.unique?"uidx":"idx"}`).on(k.table).columns([b]);B.push(D.unique?q.unique():q)}}K.push(O)}if(B.length)for(let k of B)K.push(k);async function L(){for(let k of K)await k.execute()}async function g(){return K.map((k)=>k.compile().sql).join(`;

`)+";"}return{toBeCreated:H,toBeAdded:z,runMigrations:L,compileMigrations:g}}var fV=tu({convertFromDB:()=>gp,convertToDB:()=>fp,createFieldAttribute:()=>vp,createInternalAdapter:()=>i2,getAdapter:()=>kV,getBaseAdapter:()=>wM,getMigrations:()=>gV,getSchema:()=>vV,getWithHooks:()=>bV,matchType:()=>GR,mergeSchema:()=>j1,parseAccountInput:()=>Iu,parseAccountOutput:()=>$M,parseAdditionalUserInput:()=>Ru,parseInputData:()=>eG,parseSessionInput:()=>JM,parseSessionOutput:()=>n6,parseUserInput:()=>$2,parseUserOutput:()=>o$,toZodSchema:()=>Z7});au(fV,_j);$0();_0();y$();var oK=()=>H$("/get-session",{method:"GET",operationId:"getSession",query:fu,requireHeaders:!0,metadata:{openapi:{operationId:"getSession",description:"Get the current session",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",nullable:!0,properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},async($)=>{try{let J=await $.getSignedCookie($.context.authCookies.sessionToken.name,$.context.secret);if(!J)return null;let Y=WM($,$.context.authCookies.sessionData.name),X=null;if(Y){let K=$.context.options.session?.cookieCache?.strategy||"compact";if(K==="jwe"){let w=await BG(Y,$.context.secret,"better-auth-session");if(w&&w.session&&w.user)X={session:{session:w.session,user:w.user,updatedAt:w.updatedAt,version:w.version},expiresAt:w.exp?w.exp*1000:Date.now()};else return k6($,$.context.authCookies.sessionData),$.json(null)}else if(K==="jwt"){let w=await fU(Y,$.context.secret);if(w&&w.session&&w.user)X={session:{session:w.session,user:w.user,updatedAt:w.updatedAt,version:w.version},expiresAt:w.exp?w.exp*1000:Date.now()};else return k6($,$.context.authCookies.sessionData),$.json(null)}else{let w=o0(uj.decode(O8.decode(Y)));if(w)if(await EW("SHA-256","base64urlnopad").verify($.context.secret,JSON.stringify({...w.session,expiresAt:w.expiresAt}),w.signature))X=w;else return k6($,$.context.authCookies.sessionData),$.json(null)}}let W=await $.getSignedCookie($.context.authCookies.dontRememberToken.name,$.context.secret);if(X?.session&&$.context.options.session?.cookieCache?.enabled&&!$.query?.disableCookieCache){let K=X.session,w=$.context.options.session?.cookieCache?.version,F="1";if(w){if(typeof w==="string")F=w;else if(typeof w==="function"){let U=w(K.session,K.user);F=U instanceof Promise?await U:U}}if((K.version||"1")!==F)k6($,$.context.authCookies.sessionData);else{let U=new Date(K.session.expiresAt);if(X.expiresAt<Date.now()||U<new Date)k6($,$.context.authCookies.sessionData);else{let V=$.context.sessionConfig.cookieRefreshCache;if(V===!1){$.context.session=K;let B=n6($.context.options,{...K.session,expiresAt:new Date(K.session.expiresAt),createdAt:new Date(K.session.createdAt),updatedAt:new Date(K.session.updatedAt)}),L=o$($.context.options,{...K.user,createdAt:new Date(K.user.createdAt),updatedAt:new Date(K.user.updatedAt)});return $.json({session:B,user:L})}if(X.expiresAt-Date.now()<V.updateAge*1000){let B=x4($.context.options.session?.cookieCache?.maxAge||300,"sec"),L={session:{...K.session,expiresAt:B},user:K.user,updatedAt:Date.now()};await nz($,L,!1);let g=n6($.context.options,{...L.session,expiresAt:new Date(L.session.expiresAt),createdAt:new Date(L.session.createdAt),updatedAt:new Date(L.session.updatedAt)}),k=o$($.context.options,{...L.user,createdAt:new Date(L.user.createdAt),updatedAt:new Date(L.user.updatedAt)});return $.context.session={session:g,user:k},$.json({session:g,user:k})}let N=n6($.context.options,{...K.session,expiresAt:new Date(K.session.expiresAt),createdAt:new Date(K.session.createdAt),updatedAt:new Date(K.session.updatedAt)}),P=o$($.context.options,{...K.user,createdAt:new Date(K.user.createdAt),updatedAt:new Date(K.user.updatedAt)});return $.context.session={session:N,user:P},$.json({session:N,user:P})}}}let Z=await $.context.internalAdapter.findSession(J);if($.context.session=Z,!Z||Z.session.expiresAt<new Date){if(WJ($),Z)await $.context.internalAdapter.deleteSession(Z.session.token);return $.json(null)}if(W||$.query?.disableRefresh){let K=n6($.context.options,Z.session),w=o$($.context.options,Z.user);return $.json({session:K,user:w})}let G=$.context.sessionConfig.expiresIn,Q=$.context.sessionConfig.updateAge;if(Z.session.expiresAt.valueOf()-G*1000+Q*1000<=Date.now()&&(!$.query?.disableRefresh||!$.context.options.session?.disableSessionRefresh)){let K=await $.context.internalAdapter.updateSession(Z.session.token,{expiresAt:x4($.context.sessionConfig.expiresIn,"sec"),updatedAt:new Date});if(!K)return WJ($),$.json(null,{status:401});let w=(K.expiresAt.valueOf()-Date.now())/1000;await U0($,{session:K,user:Z.user},!1,{maxAge:w});let F=n6($.context.options,K),U=o$($.context.options,Z.user);return $.json({session:F,user:U})}await nz($,Z,!!W);let H=n6($.context.options,Z.session),z=o$($.context.options,Z.user);return $.json({session:H,user:z})}catch(J){throw $.context.logger.error("INTERNAL_SERVER_ERROR",J),new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_GET_SESSION})}}),M0=async($,J)=>{if($.context.session)return $.context.session;let Y=await oK()({...$,asResponse:!1,headers:$.headers,returnHeaders:!1,returnStatus:!1,query:{...J,...$.query}}).catch((X)=>{return null});return $.context.session=Y,Y},F6=j0(async($)=>{let J=await M0($);if(!J?.session)throw new x("UNAUTHORIZED");return{session:J}}),MJ=j0(async($)=>{let J=await M0($,{disableCookieCache:!0});if(!J?.session)throw new x("UNAUTHORIZED");return{session:J}}),QR=j0(async($)=>{let J=await M0($);if(!J?.session&&($.request||$.headers))throw new x("UNAUTHORIZED");return{session:J}}),xV=j0(async($)=>{let J=await M0($);if(!J?.session)throw new x("UNAUTHORIZED");if($.context.sessionConfig.freshAge===0)return{session:J};let Y=$.context.sessionConfig.freshAge,X=new Date(J.session.updatedAt||J.session.createdAt).getTime();if(!(Date.now()-X<Y*1000))throw new x("FORBIDDEN",{message:"Session is not fresh"});return{session:J}}),HR=()=>H$("/list-sessions",{method:"GET",operationId:"listUserSessions",use:[F6],requireHeaders:!0,metadata:{openapi:{operationId:"listUserSessions",description:"List all active sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},async($)=>{try{let J=(await $.context.internalAdapter.listSessions($.context.session.user.id)).filter((Y)=>{return Y.expiresAt>new Date});return $.json(J.map((Y)=>n6($.context.options,Y)))}catch(J){throw $.context.logger.error(J),$.error("INTERNAL_SERVER_ERROR")}}),zR=H$("/revoke-session",{method:"POST",body:c({token:A().meta({description:"The token to revoke"})}),use:[MJ],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},async($)=>{let J=$.body.token;if((await $.context.internalAdapter.findSession(J))?.session.userId===$.context.session.user.id)try{await $.context.internalAdapter.deleteSession(J)}catch(Y){throw $.context.logger.error(Y&&typeof Y==="object"&&"name"in Y?Y.name:"",Y),new x("INTERNAL_SERVER_ERROR")}return $.json({status:!0})}),KR=H$("/revoke-sessions",{method:"POST",use:[MJ],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},async($)=>{try{await $.context.internalAdapter.deleteSessions($.context.session.user.id)}catch(J){throw $.context.logger.error(J&&typeof J==="object"&&"name"in J?J.name:"",J),new x("INTERNAL_SERVER_ERROR")}return $.json({status:!0})}),wR=H$("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[MJ],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},async($)=>{let J=$.context.session;if(!J.user)throw new x("UNAUTHORIZED");let Y=(await $.context.internalAdapter.listSessions(J.user.id)).filter((X)=>{return X.expiresAt>new Date}).filter((X)=>X.token!==$.context.session.session.token);return await Promise.all(Y.map((X)=>$.context.internalAdapter.deleteSession(X.token))),$.json({status:!0})});function yV($,J){if(!$)return $;if(J.options.account?.encryptOAuthTokens)return gJ({key:J.secret,data:$});return $}function h6($,J){if(J.options.account?.encryptOAuthTokens&&$)return bY({key:J.secret,data:$});return $}$0();y$();function G7($){let J=(Y)=>{return new Date(new Date().getTime()+Y*1000)};return{tokenType:$.token_type,accessToken:$.access_token,refreshToken:$.refresh_token,accessTokenExpiresAt:$.expires_in?J($.expires_in):void 0,refreshTokenExpiresAt:$.refresh_token_expires_in?J($.refresh_token_expires_in):void 0,scopes:$?.scope?typeof $.scope==="string"?$.scope.split(" "):$.scope:[],idToken:$.id_token,raw:$}}async function tK($){let J=new TextEncoder().encode($),Y=await crypto.subtle.digest("SHA-256",J);return O8.encode(new Uint8Array(Y),{padding:!1})}async function v$({id:$,options:J,authorizationEndpoint:Y,state:X,codeVerifier:W,scopes:Z,claims:G,redirectURI:Q,duration:H,prompt:z,accessType:K,responseType:w,display:F,loginHint:U,hd:V,responseMode:N,additionalParams:P,scopeJoiner:B}){let L=new URL(J.authorizationEndpoint||Y);L.searchParams.set("response_type",w||"code");let g=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(L.searchParams.set("client_id",g),L.searchParams.set("state",X),Z)L.searchParams.set("scope",Z.join(B||" "));if(L.searchParams.set("redirect_uri",J.redirectURI||Q),H&&L.searchParams.set("duration",H),F&&L.searchParams.set("display",F),U&&L.searchParams.set("login_hint",U),z&&L.searchParams.set("prompt",z),V&&L.searchParams.set("hd",V),K&&L.searchParams.set("access_type",K),N&&L.searchParams.set("response_mode",N),W){let k=await tK(W);L.searchParams.set("code_challenge_method","S256"),L.searchParams.set("code_challenge",k)}if(G){let k=G.reduce((I,O)=>{return I[O]=null,I},{});L.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...k}}))}if(P)Object.entries(P).forEach(([k,I])=>{L.searchParams.set(k,I)});return L}var{defineProperty:uQ$,defineProperties:dQ$,getOwnPropertyDescriptors:cQ$,getOwnPropertySymbols:xp}=Object,pQ$=Object.prototype.hasOwnProperty,lQ$=Object.prototype.propertyIsEnumerable,yp=($,J,Y)=>(J in $)?uQ$($,J,{enumerable:!0,configurable:!0,writable:!0,value:Y}):$[J]=Y,Q7=($,J)=>{for(var Y in J||(J={}))if(pQ$.call(J,Y))yp($,Y,J[Y]);if(xp){for(var Y of xp(J))if(lQ$.call(J,Y))yp($,Y,J[Y])}return $},H7=($,J)=>dQ$($,cQ$(J)),nQ$=class extends Error{constructor($,J,Y){super(J||$.toString(),{cause:Y});this.status=$,this.statusText=J,this.error=Y,Error.captureStackTrace(this,this.constructor)}},iQ$=async($,J)=>{var Y,X,W,Z,G,Q;let H=J||{},z={onRequest:[J==null?void 0:J.onRequest],onResponse:[J==null?void 0:J.onResponse],onSuccess:[J==null?void 0:J.onSuccess],onError:[J==null?void 0:J.onError],onRetry:[J==null?void 0:J.onRetry]};if(!J||!(J==null?void 0:J.plugins))return{url:$,options:H,hooks:z};for(let K of(J==null?void 0:J.plugins)||[]){if(K.init){let w=await((Y=K.init)==null?void 0:Y.call(K,$.toString(),J));H=w.options||H,$=w.url}z.onRequest.push((X=K.hooks)==null?void 0:X.onRequest),z.onResponse.push((W=K.hooks)==null?void 0:W.onResponse),z.onSuccess.push((Z=K.hooks)==null?void 0:Z.onSuccess),z.onError.push((G=K.hooks)==null?void 0:G.onError),z.onRetry.push((Q=K.hooks)==null?void 0:Q.onRetry)}return{url:$,options:H,hooks:z}},hp=class{constructor($){this.options=$}shouldAttemptRetry($,J){if(this.options.shouldRetry)return Promise.resolve($<this.options.attempts&&this.options.shouldRetry(J));return Promise.resolve($<this.options.attempts)}getDelay(){return this.options.delay}},rQ$=class{constructor($){this.options=$}shouldAttemptRetry($,J){if(this.options.shouldRetry)return Promise.resolve($<this.options.attempts&&this.options.shouldRetry(J));return Promise.resolve($<this.options.attempts)}getDelay($){return Math.min(this.options.maxDelay,this.options.baseDelay*2**$)}};function oQ$($){if(typeof $==="number")return new hp({type:"linear",attempts:$,delay:1000});switch($.type){case"linear":return new hp($);case"exponential":return new rQ$($);default:throw Error("Invalid retry strategy")}}var tQ$=async($)=>{let J={},Y=async(X)=>typeof X==="function"?await X():X;if($==null?void 0:$.auth){if($.auth.type==="Bearer"){let X=await Y($.auth.token);if(!X)return J;J.authorization=`Bearer ${X}`}else if($.auth.type==="Basic"){let[X,W]=await Promise.all([Y($.auth.username),Y($.auth.password)]);if(!X||!W)return J;J.authorization=`Basic ${btoa(`${X}:${W}`)}`}else if($.auth.type==="Custom"){let[X,W]=await Promise.all([Y($.auth.prefix),Y($.auth.value)]);if(!W)return J;J.authorization=`${X!=null?X:""} ${W}`}}return J},aQ$=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function sQ$($){let J=$.headers.get("content-type"),Y=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!J)return"json";let X=J.split(";").shift()||"";if(aQ$.test(X))return"json";if(Y.has(X)||X.startsWith("text/"))return"text";return"blob"}function eQ$($){try{return JSON.parse($),!0}catch(J){return!1}}function UR($){if($===void 0)return!1;let J=typeof $;if(J==="string"||J==="number"||J==="boolean"||J===null)return!0;if(J!=="object")return!1;if(Array.isArray($))return!0;if($.buffer)return!1;return $.constructor&&$.constructor.name==="Object"||typeof $.toJSON==="function"}function mp($){try{return JSON.parse($)}catch(J){return $}}function up($){return typeof $==="function"}function $H$($){if($==null?void 0:$.customFetchImpl)return $.customFetchImpl;if(typeof globalThis<"u"&&up(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&up(window.fetch))return window.fetch;throw Error("No fetch implementation found")}async function JH$($){let J=new Headers($==null?void 0:$.headers),Y=await tQ$($);for(let[X,W]of Object.entries(Y||{}))J.set(X,W);if(!J.has("content-type")){let X=YH$($==null?void 0:$.body);if(X)J.set("content-type",X)}return J}function YH$($){if(UR($))return"application/json";return null}function XH$($){if(!($==null?void 0:$.body))return null;let J=new Headers($==null?void 0:$.headers);if(UR($.body)&&!J.has("content-type")){for(let[Y,X]of Object.entries($==null?void 0:$.body))if(X instanceof Date)$.body[Y]=X.toISOString();return JSON.stringify($.body)}if(J.has("content-type")&&J.get("content-type")==="application/x-www-form-urlencoded"){if(UR($.body))return new URLSearchParams($.body).toString();return $.body}return $.body}function WH$($,J){var Y;if(J==null?void 0:J.method)return J.method.toUpperCase();if($.startsWith("@")){let X=(Y=$.split("@")[1])==null?void 0:Y.split("/")[0];if(!dp.includes(X))return(J==null?void 0:J.body)?"POST":"GET";return X.toUpperCase()}return(J==null?void 0:J.body)?"POST":"GET"}function ZH$($,J){let Y;if(!($==null?void 0:$.signal)&&($==null?void 0:$.timeout))Y=setTimeout(()=>J==null?void 0:J.abort(),$==null?void 0:$.timeout);return{abortTimeout:Y,clearTimeout:()=>{if(Y)clearTimeout(Y)}}}var GH$=class $ extends Error{constructor(J,Y){super(Y||JSON.stringify(J,null,2));this.issues=J,Object.setPrototypeOf(this,$.prototype)}};async function QH$($,J){let Y=await $["~standard"].validate(J);if(Y.issues)throw new GH$(Y.issues);return Y.value}var dp=["get","post","put","patch","delete"];function HH$($,J){let{baseURL:Y,params:X,query:W}=J||{query:{},params:{},baseURL:""},Z=$.startsWith("http")?$.split("/").slice(0,3).join("/"):Y||"";if($.startsWith("@")){let w=$.toString().split("@")[1].split("/")[0];if(dp.includes(w))$=$.replace(`@${w}/`,"/")}if(!Z.endsWith("/"))Z+="/";let[G,Q]=$.replace(Z,"").split("?"),H=new URLSearchParams(Q);for(let[w,F]of Object.entries(W||{})){if(F==null)continue;let U;if(typeof F==="string")U=F;else if(Array.isArray(F)){for(let V of F)H.append(w,V);continue}else U=JSON.stringify(F);H.set(w,U)}if(X)if(Array.isArray(X)){let w=G.split("/").filter((F)=>F.startsWith(":"));for(let[F,U]of w.entries()){let V=X[F];G=G.replace(U,V)}}else for(let[w,F]of Object.entries(X))G=G.replace(`:${w}`,String(F));if(G=G.split("/").map(encodeURIComponent).join("/"),G.startsWith("/"))G=G.slice(1);let z=H.toString();if(z=z.length>0?`?${z}`.replace(/\+/g,"%20"):"",!Z.startsWith("http"))return`${Z}${G}${z}`;return new URL(`${G}${z}`,Z)}var U$=async($,J)=>{var Y,X,W,Z,G,Q,H,z;let{hooks:K,url:w,options:F}=await iQ$($,J),U=$H$(F),V=new AbortController,N=(Y=F.signal)!=null?Y:V.signal,P=HH$(w,F),B=XH$(F),L=await JH$(F),g=WH$(w,F),k=H7(Q7({},F),{url:P,headers:L,body:B,method:g,signal:N});for(let E of K.onRequest)if(E){let T=await E(k);if(typeof T==="object"&&T!==null)k=T}if("pipeTo"in k&&typeof k.pipeTo==="function"||typeof((X=J==null?void 0:J.body)==null?void 0:X.pipe)==="function"){if(!("duplex"in k))k.duplex="half"}let{clearTimeout:I}=ZH$(F,V),O=await U(k.url,k);I();let b={response:O,request:k};for(let E of K.onResponse)if(E){let T=await E(H7(Q7({},b),{response:((W=J==null?void 0:J.hookOptions)==null?void 0:W.cloneResponse)?O.clone():O}));if(T instanceof Response)O=T;else if(typeof T==="object"&&T!==null)O=T.response}if(O.ok){if(k.method==="HEAD")return{data:"",error:null};let T=sQ$(O),R={data:null,response:O,request:k};if(T==="json"||T==="text"){let v=await O.text(),h=(Z=k.jsonParser)!=null?Z:mp;R.data=await h(v)}else R.data=await O[T]();if(k==null?void 0:k.output){if(k.output&&!k.disableValidation)R.data=await QH$(k.output,R.data)}for(let v of K.onSuccess)if(v)await v(H7(Q7({},R),{response:((G=J==null?void 0:J.hookOptions)==null?void 0:G.cloneResponse)?O.clone():O}));if(J==null?void 0:J.throw)return R.data;return{data:R.data,error:null}}let D=(Q=J==null?void 0:J.jsonParser)!=null?Q:mp,_=await O.text(),q=eQ$(_),S=q?await D(_):null,j={response:O,responseText:_,request:k,error:H7(Q7({},S),{status:O.status,statusText:O.statusText})};for(let E of K.onError)if(E)await E(H7(Q7({},j),{response:((H=J==null?void 0:J.hookOptions)==null?void 0:H.cloneResponse)?O.clone():O}));if(J==null?void 0:J.retry){let E=oQ$(J.retry),T=(z=J.retryAttempt)!=null?z:0;if(await E.shouldAttemptRetry(T,O)){for(let v of K.onRetry)if(v)await v(b);let R=E.getDelay(T);return await new Promise((v)=>setTimeout(v,R)),await U$($,H7(Q7({},J),{retryAttempt:T+1}))}}if(J==null?void 0:J.throw)throw new nQ$(O.status,O.statusText,q?S:_);return{data:null,error:H7(Q7({},S),{status:O.status,statusText:O.statusText})}};function cp({refreshToken:$,options:J,authentication:Y,extraParams:X,resource:W}){let Z=new URLSearchParams,G={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(Z.set("grant_type","refresh_token"),Z.set("refresh_token",$),Y==="basic"){let Q=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(Q)G.authorization="Basic "+I6.encode(`${Q}:${J.clientSecret??""}`);else G.authorization="Basic "+I6.encode(`:${J.clientSecret??""}`)}else{let Q=Array.isArray(J.clientId)?J.clientId[0]:J.clientId;if(Z.set("client_id",Q),J.clientSecret)Z.set("client_secret",J.clientSecret)}if(W)if(typeof W==="string")Z.append("resource",W);else for(let Q of W)Z.append("resource",Q);if(X)for(let[Q,H]of Object.entries(X))Z.set(Q,H);return{body:Z,headers:G}}async function I$({refreshToken:$,options:J,tokenEndpoint:Y,authentication:X,extraParams:W}){let{body:Z,headers:G}=cp({refreshToken:$,options:J,authentication:X,extraParams:W}),{data:Q,error:H}=await U$(Y,{method:"POST",body:Z,headers:G});if(H)throw H;let z={accessToken:Q.access_token,refreshToken:Q.refresh_token,tokenType:Q.token_type,scopes:Q.scope?.split(" "),idToken:Q.id_token};if(Q.expires_in){let K=new Date;z.accessTokenExpiresAt=new Date(K.getTime()+Q.expires_in*1000)}return z}d8();n0();function hV({code:$,codeVerifier:J,redirectURI:Y,options:X,authentication:W,deviceId:Z,headers:G,additionalParams:Q={},resource:H}){let z=new URLSearchParams,K={"content-type":"application/x-www-form-urlencoded",accept:"application/json",...G};if(z.set("grant_type","authorization_code"),z.set("code",$),J&&z.set("code_verifier",J),X.clientKey&&z.set("client_key",X.clientKey),Z&&z.set("device_id",Z),z.set("redirect_uri",X.redirectURI||Y),H)if(typeof H==="string")z.append("resource",H);else for(let w of H)z.append("resource",w);if(W==="basic"){let w=Array.isArray(X.clientId)?X.clientId[0]:X.clientId;K.authorization=`Basic ${I6.encode(`${w}:${X.clientSecret??""}`)}`}else{let w=Array.isArray(X.clientId)?X.clientId[0]:X.clientId;if(z.set("client_id",w),X.clientSecret)z.set("client_secret",X.clientSecret)}for(let[w,F]of Object.entries(Q))if(!z.has(w))z.append(w,F);return{body:z,headers:K}}async function b$({code:$,codeVerifier:J,redirectURI:Y,options:X,tokenEndpoint:W,authentication:Z,deviceId:G,headers:Q,additionalParams:H={},resource:z}){let{body:K,headers:w}=hV({code:$,codeVerifier:J,redirectURI:Y,options:X,authentication:Z,deviceId:G,headers:Q,additionalParams:H,resource:z}),{data:F,error:U}=await U$(W,{method:"POST",body:K,headers:w});if(U)throw U;return G7(F)}var pp=($)=>{return{id:"apple",name:"Apple",async createAuthorizationURL({state:Y,scopes:X,redirectURI:W}){let Z=$.disableDefaultScope?[]:["email","name"];if($.scope)Z.push(...$.scope);if(X)Z.push(...X);return await v$({id:"apple",options:$,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:Z,state:Y,redirectURI:W,responseMode:"form_post",responseType:"code id_token"})},validateAuthorizationCode:async({code:Y,codeVerifier:X,redirectURI:W})=>{return b$({code:Y,codeVerifier:X,redirectURI:W,options:$,tokenEndpoint:"https://appleid.apple.com/auth/token"})},async verifyIdToken(Y,X){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Y,X);let{kid:W,alg:Z}=HZ(Y);if(!W||!Z)return!1;let{payload:G}=await e1(Y,await lp(W),{algorithms:[Z],issuer:"https://appleid.apple.com",audience:$.audience&&$.audience.length?$.audience:$.appBundleIdentifier?$.appBundleIdentifier:$.clientId,maxTokenAge:"1h"});if(["email_verified","is_private_email"].forEach((Q)=>{if(G[Q]!==void 0)G[Q]=Boolean(G[Q])}),X&&G.nonce!==X)return!1;return!!G},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return I$({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);if(!Y.idToken)return null;let X=p6(Y.idToken);if(!X)return null;let W;if(Y.user?.name)W=`${Y.user.name.firstName||""} ${Y.user.name.lastName||""}`.trim()||" ";else W=X.name||" ";let Z=typeof X.email_verified==="boolean"?X.email_verified:X.email_verified==="true",G={...X,name:W},Q=await $.mapProfileToUser?.(G);return{user:{id:X.sub,name:G.name,emailVerified:Z,email:X.email,...Q},data:G}},options:$}},lp=async($)=>{let{data:J}=await U$("https://appleid.apple.com/auth/keys");if(!J?.keys)throw new x("BAD_REQUEST",{message:"Keys not found"});let Y=J.keys.find((X)=>X.kid===$);if(!Y)throw Error(`JWK with kid ${$} not found`);return await EY(Y,Y.alg)};d8();n0();$0();var np=($)=>{return{id:"atlassian",name:"Atlassian",async createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){if(!$.clientId||!$.clientSecret)throw C$.error("Client Id and Secret are required for Atlassian"),new q$("CLIENT_ID_AND_SECRET_REQUIRED");if(!X)throw new q$("codeVerifier is required for Atlassian");let Z=$.disableDefaultScope?[]:["read:jira-user","offline_access"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return v$({id:"atlassian",options:$,authorizationEndpoint:"https://auth.atlassian.com/authorize",scopes:Z,state:J,codeVerifier:X,redirectURI:W,additionalParams:{audience:"api.atlassian.com"},prompt:$.prompt})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://auth.atlassian.com/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(!J.accessToken)return null;try{let{data:Y}=await U$("https://api.atlassian.com/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(!Y)return null;let X=await $.mapProfileToUser?.(Y);return{user:{id:Y.account_id,name:Y.name,email:Y.email,image:Y.picture,emailVerified:!1,...X},data:Y}}catch(Y){return C$.error("Failed to fetch user info from Figma:",Y),null}},options:$}};d8();n0();$0();var ip=($)=>{if(!$.domain||!$.region||!$.userPoolId)throw C$.error("Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options."),new q$("DOMAIN_AND_REGION_REQUIRED");let J=$.domain.replace(/^https?:\/\//,""),Y=`https://${J}/oauth2/authorize`,X=`https://${J}/oauth2/token`,W=`https://${J}/oauth2/userinfo`;return{id:"cognito",name:"Cognito",async createAuthorizationURL({state:Z,scopes:G,codeVerifier:Q,redirectURI:H}){if(!$.clientId)throw C$.error("ClientId is required for Amazon Cognito. Make sure to provide them in the options."),new q$("CLIENT_ID_AND_SECRET_REQUIRED");if($.requireClientSecret&&!$.clientSecret)throw C$.error("Client Secret is required when requireClientSecret is true. Make sure to provide it in the options."),new q$("CLIENT_SECRET_REQUIRED");let z=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)z.push(...$.scope);if(G)z.push(...G);let K=await v$({id:"cognito",options:{...$},authorizationEndpoint:Y,scopes:z,state:Z,codeVerifier:Q,redirectURI:H,prompt:$.prompt}),w=K.searchParams.get("scope");if(w){K.searchParams.delete("scope");let F=encodeURIComponent(w),U=K.toString(),V=U.includes("?")?"&":"?";return new URL(`${U}${V}scope=${F}`)}return K},validateAuthorizationCode:async({code:Z,codeVerifier:G,redirectURI:Q})=>{return b$({code:Z,codeVerifier:G,redirectURI:Q,options:$,tokenEndpoint:X})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{return I$({refreshToken:Z,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:X})},async verifyIdToken(Z,G){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Z,G);try{let{kid:Q,alg:H}=HZ(Z);if(!Q||!H)return!1;let z=await rp(Q,$.region,$.userPoolId),K=`https://cognito-idp.${$.region}.amazonaws.com/${$.userPoolId}`,{payload:w}=await e1(Z,z,{algorithms:[H],issuer:K,audience:$.clientId,maxTokenAge:"1h"});if(G&&w.nonce!==G)return!1;return!0}catch(Q){return C$.error("Failed to verify ID token:",Q),!1}},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);if(Z.idToken)try{let G=p6(Z.idToken);if(!G)return null;let Q=G.name||G.given_name||G.username||G.email,H={...G,name:Q},z=await $.mapProfileToUser?.(H);return{user:{id:G.sub,name:H.name,email:G.email,image:G.picture,emailVerified:G.email_verified,...z},data:H}}catch(G){C$.error("Failed to decode ID token:",G)}if(Z.accessToken)try{let{data:G}=await U$(W,{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(G){let Q=await $.mapProfileToUser?.(G);return{user:{id:G.sub,name:G.name||G.given_name||G.username,email:G.email,image:G.picture,emailVerified:G.email_verified,...Q},data:G}}}catch(G){C$.error("Failed to fetch user info from Cognito:",G)}return null},options:$}},rp=async($,J,Y)=>{let X=`https://cognito-idp.${J}.amazonaws.com/${Y}/.well-known/jwks.json`;try{let{data:W}=await U$(X);if(!W?.keys)throw new x("BAD_REQUEST",{message:"Keys not found"});let Z=W.keys.find((G)=>G.kid===$);if(!Z)throw Error(`JWK with kid ${$} not found`);return await EY(Z,Z.alg)}catch(W){throw C$.error("Failed to fetch Cognito public key:",W),W}};var op=($)=>{return{id:"discord",name:"Discord",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["identify","email"];if(Y)W.push(...Y);if($.scope)W.push(...$.scope);let Z=W.includes("bot")&&$.permissions!==void 0?`&permissions=${$.permissions}`:"";return new URL(`https://discord.com/api/oauth2/authorize?scope=${W.join("+")}&response_type=code&client_id=${$.clientId}&redirect_uri=${encodeURIComponent($.redirectURI||X)}&state=${J}&prompt=${$.prompt||"none"}${Z}`)},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://discord.com/api/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;if(Y.avatar===null)Y.image_url=`https://cdn.discordapp.com/embed/avatars/${Y.discriminator==="0"?Number(BigInt(Y.id)>>BigInt(22))%6:parseInt(Y.discriminator)%5}.png`;else{let Z=Y.avatar.startsWith("a_")?"gif":"png";Y.image_url=`https://cdn.discordapp.com/avatars/${Y.id}/${Y.avatar}.${Z}`}let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.global_name||Y.username||"",email:Y.email,emailVerified:Y.verified,image:Y.image_url,...W},data:Y}},options:$}};var tp=($)=>{return{id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:Y,scopes:X,codeVerifier:W,redirectURI:Z})=>{let G=$.disableDefaultScope?[]:["account_info.read"];if($.scope)G.push(...$.scope);if(X)G.push(...X);let Q={};if($.accessType)Q.token_access_type=$.accessType;return await v$({id:"dropbox",options:$,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:G,state:Y,redirectURI:Z,codeVerifier:W,additionalParams:Q})},validateAuthorizationCode:async({code:Y,codeVerifier:X,redirectURI:W})=>{return await b$({code:Y,codeVerifier:X,redirectURI:W,options:$,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return I$({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);let{data:X,error:W}=await U$("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${Y.accessToken}`}});if(W)return null;let Z=await $.mapProfileToUser?.(X);return{user:{id:X.account_id,name:X.name?.display_name,email:X.email,emailVerified:X.email_verified||!1,image:X.profile_photo_url,...Z},data:X}},options:$}};var ap=($)=>{return{id:"facebook",name:"Facebook",async createAuthorizationURL({state:J,scopes:Y,redirectURI:X,loginHint:W}){let Z=$.disableDefaultScope?[]:["email","public_profile"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return await v$({id:"facebook",options:$,authorizationEndpoint:"https://www.facebook.com/v24.0/dialog/oauth",scopes:Z,state:J,redirectURI:X,loginHint:W,additionalParams:$.configId?{config_id:$.configId}:{}})},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://graph.facebook.com/v24.0/oauth/access_token"})},async verifyIdToken(J,Y){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(J,Y);if(J.split(".").length===3)try{let{payload:X}=await e1(J,$q(new URL("https://limited.facebook.com/.well-known/oauth/openid/jwks/")),{algorithms:["RS256"],audience:$.clientId,issuer:"https://www.facebook.com"});if(Y&&X.nonce!==Y)return!1;return!!X}catch{return!1}return!0},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://graph.facebook.com/v24.0/oauth/access_token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(J.idToken&&J.idToken.split(".").length===3){let Z=p6(J.idToken),G={id:Z.sub,name:Z.name,email:Z.email,picture:{data:{url:Z.picture,height:100,width:100,is_silhouette:!1}}},Q=await $.mapProfileToUser?.({...G,email_verified:!1});return{user:{...G,emailVerified:!1,...Q},data:Z}}let{data:Y,error:X}=await U$("https://graph.facebook.com/me?fields="+["id","name","email","picture",...$?.fields||[]].join(","),{auth:{type:"Bearer",token:J.accessToken}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.name,email:Y.email,image:Y.picture.data.url,emailVerified:Y.email_verified,...W},data:Y}},options:$}};d8();n0();$0();var sp=($)=>{return{id:"figma",name:"Figma",async createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){if(!$.clientId||!$.clientSecret)throw C$.error("Client Id and Client Secret are required for Figma. Make sure to provide them in the options."),new q$("CLIENT_ID_AND_SECRET_REQUIRED");if(!X)throw new q$("codeVerifier is required for Figma");let Z=$.disableDefaultScope?[]:["current_user:read"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return await v$({id:"figma",options:$,authorizationEndpoint:"https://www.figma.com/oauth",scopes:Z,state:J,codeVerifier:X,redirectURI:W})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.figma.com/v1/oauth/token",authentication:"basic"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);try{let{data:Y}=await U$("https://api.figma.com/v1/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(!Y)return C$.error("Failed to fetch user from Figma"),null;let X=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.handle,email:Y.email,image:Y.img_url,emailVerified:!1,...X},data:Y}}catch(Y){return C$.error("Failed to fetch user info from Figma:",Y),null}},options:$}};d8();n0();var ep=($)=>{return{id:"github",name:"GitHub",createAuthorizationURL({state:Y,scopes:X,loginHint:W,codeVerifier:Z,redirectURI:G}){let Q=$.disableDefaultScope?[]:["read:user","user:email"];if($.scope)Q.push(...$.scope);if(X)Q.push(...X);return v$({id:"github",options:$,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:Q,state:Y,codeVerifier:Z,redirectURI:G,loginHint:W,prompt:$.prompt})},validateAuthorizationCode:async({code:Y,codeVerifier:X,redirectURI:W})=>{let{body:Z,headers:G}=hV({code:Y,codeVerifier:X,redirectURI:W,options:$}),{data:Q,error:H}=await U$("https://github.com/login/oauth/access_token",{method:"POST",body:Z,headers:G});if(H)return C$.error("GitHub OAuth token exchange failed:",H),null;if("error"in Q)return C$.error("GitHub OAuth token exchange failed:",Q),null;return G7(Q)},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return I$({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://github.com/login/oauth/access_token"})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);let{data:X,error:W}=await U$("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${Y.accessToken}`}});if(W)return null;let{data:Z}=await U$("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${Y.accessToken}`,"User-Agent":"better-auth"}});if(!X.email&&Z)X.email=(Z.find((H)=>H.primary)??Z[0])?.email;let G=Z?.find((H)=>H.email===X.email)?.verified??!1,Q=await $.mapProfileToUser?.(X);return{user:{id:X.id,name:X.name||X.login,email:X.email,image:X.avatar_url,emailVerified:G,...Q},data:X}},options:$}};var FR=($="")=>{return $.split("://").map((J)=>J.replace(/\/{2,}/g,"/")).join("://")},zH$=($)=>{let J=$||"https://gitlab.com";return{authorizationEndpoint:FR(`${J}/oauth/authorize`),tokenEndpoint:FR(`${J}/oauth/token`),userinfoEndpoint:FR(`${J}/api/v4/user`)}},$l=($)=>{let{authorizationEndpoint:J,tokenEndpoint:Y,userinfoEndpoint:X}=zH$($.issuer),W="gitlab";return{id:"gitlab",name:"Gitlab",createAuthorizationURL:async({state:Z,scopes:G,codeVerifier:Q,loginHint:H,redirectURI:z})=>{let K=$.disableDefaultScope?[]:["read_user"];if($.scope)K.push(...$.scope);if(G)K.push(...G);return await v$({id:"gitlab",options:$,authorizationEndpoint:J,scopes:K,state:Z,redirectURI:z,codeVerifier:Q,loginHint:H})},validateAuthorizationCode:async({code:Z,redirectURI:G,codeVerifier:Q})=>{return b$({code:Z,redirectURI:G,options:$,codeVerifier:Q,tokenEndpoint:Y})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{return I$({refreshToken:Z,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:Y})},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);let{data:G,error:Q}=await U$(X,{headers:{authorization:`Bearer ${Z.accessToken}`}});if(Q||G.state!=="active"||G.locked)return null;let H=await $.mapProfileToUser?.(G);return{user:{id:G.id,name:G.name??G.username,email:G.email,image:G.avatar_url,emailVerified:G.email_verified??!1,...H},data:G}},options:$}};d8();n0();$0();var Jl=($)=>{return{id:"google",name:"Google",async createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W,loginHint:Z,display:G}){if(!$.clientId||!$.clientSecret)throw C$.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new q$("CLIENT_ID_AND_SECRET_REQUIRED");if(!X)throw new q$("codeVerifier is required for Google");let Q=$.disableDefaultScope?[]:["email","profile","openid"];if($.scope)Q.push(...$.scope);if(Y)Q.push(...Y);return await v$({id:"google",options:$,authorizationEndpoint:"https://accounts.google.com/o/oauth2/v2/auth",scopes:Q,state:J,codeVerifier:X,redirectURI:W,prompt:$.prompt,accessType:$.accessType,display:G||$.display,loginHint:Z,hd:$.hd,additionalParams:{include_granted_scopes:"true"}})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://oauth2.googleapis.com/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://oauth2.googleapis.com/token"})},async verifyIdToken(J,Y){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(J,Y);let{kid:X,alg:W}=HZ(J);if(!X||!W)return!1;let{payload:Z}=await e1(J,await Yl(X),{algorithms:[W],issuer:["https://accounts.google.com","accounts.google.com"],audience:$.clientId,maxTokenAge:"1h"});if(Y&&Z.nonce!==Y)return!1;return!0},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(!J.idToken)return null;let Y=p6(J.idToken),X=await $.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.name,email:Y.email,image:Y.picture,emailVerified:Y.email_verified,...X},data:Y}},options:$}},Yl=async($)=>{let{data:J}=await U$("https://www.googleapis.com/oauth2/v3/certs");if(!J?.keys)throw new x("BAD_REQUEST",{message:"Keys not found"});let Y=J.keys.find((X)=>X.kid===$);if(!Y)throw Error(`JWK with kid ${$} not found`);return await EY(Y,Y.alg)};var Xl=($)=>{return{id:"huggingface",name:"Hugging Face",createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){let Z=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return v$({id:"huggingface",options:$,authorizationEndpoint:"https://huggingface.co/oauth/authorize",scopes:Z,state:J,codeVerifier:X,redirectURI:W})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://huggingface.co/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://huggingface.co/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://huggingface.co/oauth/userinfo",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.name||Y.preferred_username,email:Y.email,image:Y.picture,emailVerified:Y.email_verified??!1,...W},data:Y}},options:$}};var Wl=($)=>{return{id:"kakao",name:"Kakao",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["account_email","profile_image","profile_nickname"];if($.scope)W.push(...$.scope);if(Y)W.push(...Y);return v$({id:"kakao",options:$,authorizationEndpoint:"https://kauth.kakao.com/oauth/authorize",scopes:W,state:J,redirectURI:X})},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://kauth.kakao.com/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://kapi.kakao.com/v2/user/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(X||!Y)return null;let W=await $.mapProfileToUser?.(Y),Z=Y.kakao_account||{},G=Z.profile||{};return{user:{id:String(Y.id),name:G.nickname||Z.name||void 0,email:Z.email,image:G.profile_image_url||G.thumbnail_image_url,emailVerified:!!Z.is_email_valid&&!!Z.is_email_verified,...W},data:Y}},options:$}};var Zl=($)=>{return{id:"kick",name:"Kick",createAuthorizationURL({state:J,scopes:Y,redirectURI:X,codeVerifier:W}){let Z=$.disableDefaultScope?[]:["user:read"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return v$({id:"kick",redirectURI:X,options:$,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:Z,codeVerifier:W,state:J})},async validateAuthorizationCode({code:J,redirectURI:Y,codeVerifier:X}){return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:X})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://id.kick.com/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let W=Y.data[0],Z=await $.mapProfileToUser?.(W);return{user:{id:W.user_id,name:W.name,email:W.email,image:W.profile_picture,emailVerified:!1,...Z},data:W}},options:$}};var Gl=($)=>{return{id:"line",name:"LINE",async createAuthorizationURL({state:Z,scopes:G,codeVerifier:Q,redirectURI:H,loginHint:z}){let K=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)K.push(...$.scope);if(G)K.push(...G);return await v$({id:"line",options:$,authorizationEndpoint:"https://access.line.me/oauth2/v2.1/authorize",scopes:K,state:Z,codeVerifier:Q,redirectURI:H,loginHint:z})},validateAuthorizationCode:async({code:Z,codeVerifier:G,redirectURI:Q})=>{return b$({code:Z,codeVerifier:G,redirectURI:Q,options:$,tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{return I$({refreshToken:Z,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:"https://api.line.me/oauth2/v2.1/token"})},async verifyIdToken(Z,G){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Z,G);let Q=new URLSearchParams;if(Q.set("id_token",Z),Q.set("client_id",$.clientId),G)Q.set("nonce",G);let{data:H,error:z}=await U$("https://api.line.me/oauth2/v2.1/verify",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:Q});if(z||!H)return!1;if(H.aud!==$.clientId)return!1;if(H.nonce&&H.nonce!==G)return!1;return!0},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);let G=null;if(Z.idToken)try{G=p6(Z.idToken)}catch{}if(!G){let{data:w}=await U$("https://api.line.me/oauth2/v2.1/userinfo",{headers:{authorization:`Bearer ${Z.accessToken}`}});G=w||null}if(!G)return null;let Q=await $.mapProfileToUser?.(G),H=G.sub||G.userId,z=G.name||G.displayName,K=G.picture||G.pictureUrl||void 0;return{user:{id:H,name:z,email:G.email,image:K,emailVerified:!1,...Q},data:G}},options:$}};var Ql=($)=>{return{id:"linear",name:"Linear",createAuthorizationURL({state:Y,scopes:X,loginHint:W,redirectURI:Z}){let G=$.disableDefaultScope?[]:["read"];if($.scope)G.push(...$.scope);if(X)G.push(...X);return v$({id:"linear",options:$,authorizationEndpoint:"https://linear.app/oauth/authorize",scopes:G,state:Y,redirectURI:Z,loginHint:W})},validateAuthorizationCode:async({code:Y,redirectURI:X})=>{return b$({code:Y,redirectURI:X,options:$,tokenEndpoint:"https://api.linear.app/oauth/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return I$({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.linear.app/oauth/token"})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);let{data:X,error:W}=await U$("https://api.linear.app/graphql",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Y.accessToken}`},body:JSON.stringify({query:`
							query {
								viewer {
									id
									name
									email
									avatarUrl
									active
									createdAt
									updatedAt
								}
							}
						`})});if(W||!X?.data?.viewer)return null;let Z=X.data.viewer,G=await $.mapProfileToUser?.(Z);return{user:{id:X.data.viewer.id,name:X.data.viewer.name,email:X.data.viewer.email,image:X.data.viewer.avatarUrl,emailVerified:!1,...G},data:Z}},options:$}};var Hl=($)=>{return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:X,scopes:W,redirectURI:Z,loginHint:G})=>{let Q=$.disableDefaultScope?[]:["profile","email","openid"];if($.scope)Q.push(...$.scope);if(W)Q.push(...W);return await v$({id:"linkedin",options:$,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:Q,state:X,loginHint:G,redirectURI:Z})},validateAuthorizationCode:async({code:X,redirectURI:W})=>{return await b$({code:X,redirectURI:W,options:$,tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(X)=>{return I$({refreshToken:X,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://www.linkedin.com/oauth/v2/accessToken"})},async getUserInfo(X){if($.getUserInfo)return $.getUserInfo(X);let{data:W,error:Z}=await U$("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${X.accessToken}`}});if(Z)return null;let G=await $.mapProfileToUser?.(W);return{user:{id:W.sub,name:W.name,email:W.email,emailVerified:W.email_verified||!1,image:W.picture,...G},data:W}},options:$}};d8();n0();var zl=($)=>{let J=$.tenantId||"common",Y=$.authority||"https://login.microsoftonline.com",X=`${Y}/${J}/oauth2/v2.0/authorize`,W=`${Y}/${J}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(Z){let G=$.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];if($.scope)G.push(...$.scope);if(Z.scopes)G.push(...Z.scopes);return v$({id:"microsoft",options:$,authorizationEndpoint:X,state:Z.state,codeVerifier:Z.codeVerifier,scopes:G,redirectURI:Z.redirectURI,prompt:$.prompt,loginHint:Z.loginHint})},validateAuthorizationCode({code:Z,codeVerifier:G,redirectURI:Q}){return b$({code:Z,codeVerifier:G,redirectURI:Q,options:$,tokenEndpoint:W})},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);if(!Z.idToken)return null;let G=p6(Z.idToken),Q=$.profilePhotoSize||48;await U$(`https://graph.microsoft.com/v1.0/me/photos/${Q}x${Q}/$value`,{headers:{Authorization:`Bearer ${Z.accessToken}`},async onResponse(K){if($.disableProfilePhoto||!K.response.ok)return;try{let w=await K.response.clone().arrayBuffer();G.picture=`data:image/jpeg;base64, ${I6.encode(w)}`}catch(w){C$.error(w&&typeof w==="object"&&"name"in w?w.name:"",w)}}});let H=await $.mapProfileToUser?.(G),z=G.email_verified!==void 0?G.email_verified:G.email&&(G.verified_primary_email?.includes(G.email)||G.verified_secondary_email?.includes(G.email))?!0:!1;return{user:{id:G.sub,name:G.name,email:G.email,image:G.picture,emailVerified:z,...H},data:G}},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{let G=$.disableDefaultScope?[]:["openid","profile","email","User.Read","offline_access"];if($.scope)G.push(...$.scope);return I$({refreshToken:Z,options:{clientId:$.clientId,clientSecret:$.clientSecret},extraParams:{scope:G.join(" ")},tokenEndpoint:W})},options:$}};var Kl=($)=>{return{id:"naver",name:"Naver",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["profile","email"];if($.scope)W.push(...$.scope);if(Y)W.push(...Y);return v$({id:"naver",options:$,authorizationEndpoint:"https://nid.naver.com/oauth2.0/authorize",scopes:W,state:J,redirectURI:X})},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://nid.naver.com/oauth2.0/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://openapi.naver.com/v1/nid/me",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(X||!Y||Y.resultcode!=="00")return null;let W=await $.mapProfileToUser?.(Y),Z=Y.response||{};return{user:{id:Z.id,name:Z.name||Z.nickname,email:Z.email,image:Z.profile_image,emailVerified:!1,...W},data:Y}},options:$}};var wl=($)=>{return{id:"notion",name:"Notion",createAuthorizationURL({state:Y,scopes:X,loginHint:W,redirectURI:Z}){let G=$.disableDefaultScope?[]:[];if($.scope)G.push(...$.scope);if(X)G.push(...X);return v$({id:"notion",options:$,authorizationEndpoint:"https://api.notion.com/v1/oauth/authorize",scopes:G,state:Y,redirectURI:Z,loginHint:W,additionalParams:{owner:"user"}})},validateAuthorizationCode:async({code:Y,redirectURI:X})=>{return b$({code:Y,redirectURI:X,options:$,tokenEndpoint:"https://api.notion.com/v1/oauth/token",authentication:"basic"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Y)=>{return I$({refreshToken:Y,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.notion.com/v1/oauth/token"})},async getUserInfo(Y){if($.getUserInfo)return $.getUserInfo(Y);let{data:X,error:W}=await U$("https://api.notion.com/v1/users/me",{headers:{Authorization:`Bearer ${Y.accessToken}`,"Notion-Version":"2022-06-28"}});if(W||!X)return null;let Z=X.bot?.owner?.user;if(!Z)return null;let G=await $.mapProfileToUser?.(Z);return{user:{id:Z.id,name:Z.name||"Notion User",email:Z.person?.email||null,image:Z.avatar_url,emailVerified:!1,...G},data:Z}},options:$}};d8();n0();$0();var Ul=($)=>{let J=$.issuer||"https://idp.paybin.io",Y=`${J}/oauth2/authorize`,X=`${J}/oauth2/token`;return{id:"paybin",name:"Paybin",async createAuthorizationURL({state:W,scopes:Z,codeVerifier:G,redirectURI:Q,loginHint:H}){if(!$.clientId||!$.clientSecret)throw C$.error("Client Id and Client Secret is required for Paybin. Make sure to provide them in the options."),new q$("CLIENT_ID_AND_SECRET_REQUIRED");if(!G)throw new q$("codeVerifier is required for Paybin");let z=$.disableDefaultScope?[]:["openid","email","profile"];if($.scope)z.push(...$.scope);if(Z)z.push(...Z);return await v$({id:"paybin",options:$,authorizationEndpoint:Y,scopes:z,state:W,codeVerifier:G,redirectURI:Q,prompt:$.prompt,loginHint:H})},validateAuthorizationCode:async({code:W,codeVerifier:Z,redirectURI:G})=>{return b$({code:W,codeVerifier:Z,redirectURI:G,options:$,tokenEndpoint:X})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(W)=>{return I$({refreshToken:W,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:X})},async getUserInfo(W){if($.getUserInfo)return $.getUserInfo(W);if(!W.idToken)return null;let Z=p6(W.idToken),G=await $.mapProfileToUser?.(Z);return{user:{id:Z.sub,name:Z.name||Z.preferred_username||(Z.email?Z.email.split("@")[0]:"User")||"User",email:Z.email,image:Z.picture,emailVerified:Z.email_verified||!1,...G},data:Z}},options:$}};d8();n0();$0();var Fl=($)=>{let J=($.environment||"sandbox")==="sandbox",Y=J?"https://www.sandbox.paypal.com/signin/authorize":"https://www.paypal.com/signin/authorize",X=J?"https://api-m.sandbox.paypal.com/v1/oauth2/token":"https://api-m.paypal.com/v1/oauth2/token",W=J?"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo":"https://api-m.paypal.com/v1/identity/oauth2/userinfo";return{id:"paypal",name:"PayPal",async createAuthorizationURL({state:Z,codeVerifier:G,redirectURI:Q}){if(!$.clientId||!$.clientSecret)throw C$.error("Client Id and Client Secret is required for PayPal. Make sure to provide them in the options."),new q$("CLIENT_ID_AND_SECRET_REQUIRED");return await v$({id:"paypal",options:$,authorizationEndpoint:Y,scopes:[],state:Z,codeVerifier:G,redirectURI:Q,prompt:$.prompt})},validateAuthorizationCode:async({code:Z,redirectURI:G})=>{let Q=I6.encode(`${$.clientId}:${$.clientSecret}`);try{let H=await U$(X,{method:"POST",headers:{Authorization:`Basic ${Q}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:Z,redirect_uri:G}).toString()});if(!H.data)throw new q$("FAILED_TO_GET_ACCESS_TOKEN");let z=H.data;return{accessToken:z.access_token,refreshToken:z.refresh_token,accessTokenExpiresAt:z.expires_in?new Date(Date.now()+z.expires_in*1000):void 0,idToken:z.id_token}}catch(H){throw C$.error("PayPal token exchange failed:",H),new q$("FAILED_TO_GET_ACCESS_TOKEN")}},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{let G=I6.encode(`${$.clientId}:${$.clientSecret}`);try{let Q=await U$(X,{method:"POST",headers:{Authorization:`Basic ${G}`,Accept:"application/json","Accept-Language":"en_US","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:Z}).toString()});if(!Q.data)throw new q$("FAILED_TO_REFRESH_ACCESS_TOKEN");let H=Q.data;return{accessToken:H.access_token,refreshToken:H.refresh_token,accessTokenExpiresAt:H.expires_in?new Date(Date.now()+H.expires_in*1000):void 0}}catch(Q){throw C$.error("PayPal token refresh failed:",Q),new q$("FAILED_TO_REFRESH_ACCESS_TOKEN")}},async verifyIdToken(Z,G){if($.disableIdTokenSignIn)return!1;if($.verifyIdToken)return $.verifyIdToken(Z,G);try{return!!p6(Z).sub}catch(Q){return C$.error("Failed to verify PayPal ID token:",Q),!1}},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);if(!Z.accessToken)return C$.error("Access token is required to fetch PayPal user info"),null;try{let G=await U$(`${W}?schema=paypalv1.1`,{headers:{Authorization:`Bearer ${Z.accessToken}`,Accept:"application/json"}});if(!G.data)return C$.error("Failed to fetch user info from PayPal"),null;let Q=G.data,H=await $.mapProfileToUser?.(Q);return{user:{id:Q.user_id,name:Q.name,email:Q.email,image:Q.picture,emailVerified:Q.email_verified,...H},data:Q}}catch(G){return C$.error("Failed to fetch user info from PayPal:",G),null}},options:$}};var Dl=($)=>{return{id:"polar",name:"Polar",createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){let Z=$.disableDefaultScope?[]:["openid","profile","email"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return v$({id:"polar",options:$,authorizationEndpoint:"https://polar.sh/oauth2/authorize",scopes:Z,state:J,codeVerifier:X,redirectURI:W,prompt:$.prompt})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://api.polar.sh/v1/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://api.polar.sh/v1/oauth2/userinfo",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.public_name||Y.username,email:Y.email,image:Y.avatar_url,emailVerified:Y.email_verified??!1,...W},data:Y}},options:$}};var Ml=($)=>{return{id:"reddit",name:"Reddit",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["identity"];if($.scope)W.push(...$.scope);if(Y)W.push(...Y);return v$({id:"reddit",options:$,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:W,state:J,redirectURI:X,duration:$.duration})},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{let X=new URLSearchParams({grant_type:"authorization_code",code:J,redirect_uri:$.redirectURI||Y}),{data:W,error:Z}=await U$("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${I6.encode(`${$.clientId}:${$.clientSecret}`)}`},body:X.toString()});if(Z)throw Z;return G7(W)},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},authentication:"basic",tokenEndpoint:"https://www.reddit.com/api/v1/access_token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${J.accessToken}`,"User-Agent":"better-auth"}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.name,email:Y.oauth_client_id,emailVerified:Y.has_verified_email,image:Y.icon_img?.split("?")[0],...W},data:Y}},options:$}};var Vl=($)=>{return{id:"roblox",name:"Roblox",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["openid","profile"];if($.scope)W.push(...$.scope);if(Y)W.push(...Y);return new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${W.join("+")}&response_type=code&client_id=${$.clientId}&redirect_uri=${encodeURIComponent($.redirectURI||X)}&state=${J}&prompt=${$.prompt||"select_account consent"}`)},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:$.redirectURI||Y,options:$,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.nickname||Y.preferred_username||"",image:Y.picture,email:Y.preferred_username||null,emailVerified:!1,...W},data:{...Y}}},options:$}};d8();n0();$0();var Nl=($)=>{let J=($.environment??"production")==="sandbox",Y=$.loginUrl?`https://${$.loginUrl}/services/oauth2/authorize`:J?"https://test.salesforce.com/services/oauth2/authorize":"https://login.salesforce.com/services/oauth2/authorize",X=$.loginUrl?`https://${$.loginUrl}/services/oauth2/token`:J?"https://test.salesforce.com/services/oauth2/token":"https://login.salesforce.com/services/oauth2/token",W=$.loginUrl?`https://${$.loginUrl}/services/oauth2/userinfo`:J?"https://test.salesforce.com/services/oauth2/userinfo":"https://login.salesforce.com/services/oauth2/userinfo";return{id:"salesforce",name:"Salesforce",async createAuthorizationURL({state:Z,scopes:G,codeVerifier:Q,redirectURI:H}){if(!$.clientId||!$.clientSecret)throw C$.error("Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options."),new q$("CLIENT_ID_AND_SECRET_REQUIRED");if(!Q)throw new q$("codeVerifier is required for Salesforce");let z=$.disableDefaultScope?[]:["openid","email","profile"];if($.scope)z.push(...$.scope);if(G)z.push(...G);return v$({id:"salesforce",options:$,authorizationEndpoint:Y,scopes:z,state:Z,codeVerifier:Q,redirectURI:$.redirectURI||H})},validateAuthorizationCode:async({code:Z,codeVerifier:G,redirectURI:Q})=>{return b$({code:Z,codeVerifier:G,redirectURI:$.redirectURI||Q,options:$,tokenEndpoint:X})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(Z)=>{return I$({refreshToken:Z,options:{clientId:$.clientId,clientSecret:$.clientSecret},tokenEndpoint:X})},async getUserInfo(Z){if($.getUserInfo)return $.getUserInfo(Z);try{let{data:G}=await U$(W,{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(!G)return C$.error("Failed to fetch user info from Salesforce"),null;let Q=await $.mapProfileToUser?.(G);return{user:{id:G.user_id,name:G.name,email:G.email,image:G.photos?.picture||G.photos?.thumbnail,emailVerified:G.email_verified??!1,...Q},data:G}}catch(G){return C$.error("Failed to fetch user info from Salesforce:",G),null}},options:$}};var _l=($)=>{return{id:"slack",name:"Slack",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["openid","profile","email"];if(Y)W.push(...Y);if($.scope)W.push(...$.scope);let Z=new URL("https://slack.com/openid/connect/authorize");return Z.searchParams.set("scope",W.join(" ")),Z.searchParams.set("response_type","code"),Z.searchParams.set("client_id",$.clientId),Z.searchParams.set("redirect_uri",$.redirectURI||X),Z.searchParams.set("state",J),Z},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://slack.com/api/openid.connect.token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://slack.com/api/openid.connect.token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://slack.com/api/openid.connect.userInfo",{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y["https://slack.com/user_id"],name:Y.name||"",email:Y.email,emailVerified:Y.email_verified,image:Y.picture||Y["https://slack.com/user_image_512"],...W},data:Y}},options:$}};var Ll=($)=>{return{id:"spotify",name:"Spotify",createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){let Z=$.disableDefaultScope?[]:["user-read-email"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return v$({id:"spotify",options:$,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:Z,state:J,codeVerifier:X,redirectURI:W})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://accounts.spotify.com/api/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.id,name:Y.display_name,email:Y.email,image:Y.images[0]?.url,emailVerified:!1,...W},data:Y}},options:$}};var ql=($)=>{return{id:"tiktok",name:"TikTok",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["user.info.profile"];if($.scope)W.push(...$.scope);if(Y)W.push(...Y);return new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${W.join(",")}&response_type=code&client_key=${$.clientKey}&redirect_uri=${encodeURIComponent($.redirectURI||X)}&state=${J}`)},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:$.redirectURI||Y,options:{clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientSecret:$.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/",authentication:"post",extraParams:{client_key:$.clientKey}})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$(`https://open.tiktokapis.com/v2/user/info/?fields=${["open_id","avatar_large_url","display_name","username"].join(",")}`,{headers:{authorization:`Bearer ${J.accessToken}`}});if(X)return null;return{user:{email:Y.data.user.email||Y.data.user.username,id:Y.data.user.open_id,name:Y.data.user.display_name||Y.data.user.username,image:Y.data.user.avatar_large_url,emailVerified:!1},data:Y}},options:$}};d8();n0();var Bl=($)=>{return{id:"twitch",name:"Twitch",createAuthorizationURL({state:J,scopes:Y,redirectURI:X}){let W=$.disableDefaultScope?[]:["user:read:email","openid"];if($.scope)W.push(...$.scope);if(Y)W.push(...Y);return v$({id:"twitch",redirectURI:X,options:$,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:W,state:J,claims:$.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:J,redirectURI:Y})=>{return b$({code:J,redirectURI:Y,options:$,tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let Y=J.idToken;if(!Y)return C$.error("No idToken found in token"),null;let X=p6(Y),W=await $.mapProfileToUser?.(X);return{user:{id:X.sub,name:X.preferred_username,email:X.email,image:X.picture,emailVerified:X.email_verified,...W},data:X}},options:$}};var Ol=($)=>{return{id:"twitter",name:"Twitter",createAuthorizationURL(J){let Y=$.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];if($.scope)Y.push(...$.scope);if(J.scopes)Y.push(...J.scopes);return v$({id:"twitter",options:$,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:Y,state:J.state,codeVerifier:J.codeVerifier,redirectURI:J.redirectURI})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,authentication:"basic",redirectURI:X,options:$,tokenEndpoint:"https://api.x.com/2/oauth2/token"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},authentication:"basic",tokenEndpoint:"https://api.x.com/2/oauth2/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}});if(X)return null;let{data:W,error:Z}=await U$("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${J.accessToken}`}}),G=!1;if(!Z&&W?.data?.confirmed_email)Y.data.email=W.data.confirmed_email,G=!0;let Q=await $.mapProfileToUser?.(Y);return{user:{id:Y.data.id,name:Y.data.name,email:Y.data.email||Y.data.username||null,image:Y.data.profile_image_url,emailVerified:G,...Q},data:Y}},options:$}};$0();var Pl=($)=>{return{id:"vercel",name:"Vercel",createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){if(!X)throw new q$("codeVerifier is required for Vercel");let Z=void 0;if($.scope!==void 0||Y!==void 0){if(Z=[],$.scope)Z.push(...$.scope);if(Y)Z.push(...Y)}return v$({id:"vercel",options:$,authorizationEndpoint:"https://vercel.com/oauth/authorize",scopes:Z,state:J,codeVerifier:X,redirectURI:W})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X})=>{return b$({code:J,codeVerifier:Y,redirectURI:X,options:$,tokenEndpoint:"https://api.vercel.com/login/oauth/token"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);let{data:Y,error:X}=await U$("https://api.vercel.com/login/oauth/userinfo",{headers:{Authorization:`Bearer ${J.accessToken}`}});if(X||!Y)return null;let W=await $.mapProfileToUser?.(Y);return{user:{id:Y.sub,name:Y.name??Y.preferred_username,email:Y.email,image:Y.picture,emailVerified:Y.email_verified??!1,...W},data:Y}},options:$}};var Sl=($)=>{return{id:"vk",name:"VK",async createAuthorizationURL({state:J,scopes:Y,codeVerifier:X,redirectURI:W}){let Z=$.disableDefaultScope?[]:["email","phone"];if($.scope)Z.push(...$.scope);if(Y)Z.push(...Y);return v$({id:"vk",options:$,authorizationEndpoint:"https://id.vk.com/authorize",scopes:Z,state:J,redirectURI:W,codeVerifier:X})},validateAuthorizationCode:async({code:J,codeVerifier:Y,redirectURI:X,deviceId:W})=>{return b$({code:J,codeVerifier:Y,redirectURI:$.redirectURI||X,options:$,deviceId:W,tokenEndpoint:"https://id.vk.com/oauth2/auth"})},refreshAccessToken:$.refreshAccessToken?$.refreshAccessToken:async(J)=>{return I$({refreshToken:J,options:{clientId:$.clientId,clientKey:$.clientKey,clientSecret:$.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"})},async getUserInfo(J){if($.getUserInfo)return $.getUserInfo(J);if(!J.accessToken)return null;let Y=new URLSearchParams({access_token:J.accessToken,client_id:$.clientId}).toString(),{data:X,error:W}=await U$("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Y});if(W)return null;let Z=await $.mapProfileToUser?.(X);if(!X.user.email&&!Z?.email)return null;return{user:{id:X.user.user_id,first_name:X.user.first_name,last_name:X.user.last_name,email:X.user.email,image:X.user.avatar,emailVerified:!1,birthday:X.user.birthday,sex:X.user.sex,name:`${X.user.first_name} ${X.user.last_name}`,...Z},data:X}},options:$}};var Al=($)=>{let J={pkce:!0,...$};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:Y,redirectURI:X,codeVerifier:W})=>{let Z=new URLSearchParams({response_type:"code",redirect_uri:J.redirectURI?J.redirectURI:X,client_id:J.clientId,state:Y});if(J.pkce){let Q=await tK(W);Z.set("code_challenge_method","S256"),Z.set("code_challenge",Q)}let G=new URL("https://zoom.us/oauth/authorize");return G.search=Z.toString(),G},validateAuthorizationCode:async({code:Y,redirectURI:X,codeVerifier:W})=>{return b$({code:Y,redirectURI:J.redirectURI||X,codeVerifier:W,options:J,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"})},refreshAccessToken:J.refreshAccessToken?J.refreshAccessToken:async(Y)=>I$({refreshToken:Y,options:{clientId:J.clientId,clientKey:J.clientKey,clientSecret:J.clientSecret},tokenEndpoint:"https://zoom.us/oauth/token"}),async getUserInfo(Y){if(J.getUserInfo)return J.getUserInfo(Y);let{data:X,error:W}=await U$("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${Y.accessToken}`}});if(W)return null;let Z=await J.mapProfileToUser?.(X);return{user:{id:X.id,name:X.display_name,image:X.pic_url,email:X.email,emailVerified:Boolean(X.verified),...Z},data:{...X}}}}};y$();var DR={apple:pp,atlassian:np,cognito:ip,discord:op,facebook:ap,figma:sp,github:ep,microsoft:zl,google:Jl,huggingface:Xl,slack:_l,spotify:Ll,twitch:Bl,twitter:Ol,dropbox:tp,kick:Zl,linear:Ql,linkedin:Hl,gitlab:$l,tiktok:ql,reddit:Ml,roblox:Vl,salesforce:Nl,vk:Sl,zoom:Al,notion:wl,kakao:Wl,naver:Kl,line:Gl,paybin:Ul,paypal:Fl,polar:Dl,vercel:Pl},KH$=Object.keys(DR),mV=N0(KH$).or(A());var MR=H$("/list-accounts",{method:"GET",use:[F6],metadata:{openapi:{operationId:"listUserAccounts",description:"List all accounts linked to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},providerId:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"},accountId:{type:"string"},userId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","providerId","createdAt","updatedAt","accountId","userId","scopes"]}}}}}}}}},async($)=>{let J=$.context.session,Y=await $.context.internalAdapter.findAccounts(J.user.id);return $.json(Y.map((X)=>{let{scope:W,...Z}=$M($.context.options,X);return{...Z,scopes:W?.split(",")||[]}}))}),VR=H$("/link-social",{method:"POST",requireHeaders:!0,body:c({callbackURL:A().meta({description:"The URL to redirect to after the user has signed in"}).optional(),provider:mV,idToken:c({token:A(),nonce:A().optional(),accessToken:A().optional(),refreshToken:A().optional(),scopes:l$(A()).optional()}).optional(),requestSignUp:m$().optional(),scopes:l$(A()).meta({description:"Additional scopes to request from the provider"}).optional(),errorCallbackURL:A().meta({description:"The URL to redirect to if there is an error during the link process"}).optional(),disableRedirect:m$().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),additionalData:a$(A(),W0()).optional()}),use:[F6],metadata:{openapi:{description:"Link a social account to the user",operationId:"linkSocialAccount",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"},status:{type:"boolean"}},required:["redirect"]}}}}}}}},async($)=>{let J=$.context.session,Y=$.context.socialProviders.find((Z)=>Z.id===$.body.provider);if(!Y)throw $.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:$.body.provider}),new x("NOT_FOUND",{message:V$.PROVIDER_NOT_FOUND});if($.body.idToken){if(!Y.verifyIdToken)throw $.context.logger.error("Provider does not support id token verification",{provider:$.body.provider}),new x("NOT_FOUND",{message:V$.ID_TOKEN_NOT_SUPPORTED});let{token:Z,nonce:G}=$.body.idToken;if(!await Y.verifyIdToken(Z,G))throw $.context.logger.error("Invalid id token",{provider:$.body.provider}),new x("UNAUTHORIZED",{message:V$.INVALID_TOKEN});let Q=await Y.getUserInfo({idToken:Z,accessToken:$.body.idToken.accessToken,refreshToken:$.body.idToken.refreshToken});if(!Q||!Q?.user)throw $.context.logger.error("Failed to get user info",{provider:$.body.provider}),new x("UNAUTHORIZED",{message:V$.FAILED_TO_GET_USER_INFO});let H=String(Q.user.id);if(!Q.user.email)throw $.context.logger.error("User email not found",{provider:$.body.provider}),new x("UNAUTHORIZED",{message:V$.USER_EMAIL_NOT_FOUND});if((await $.context.internalAdapter.findAccounts(J.user.id)).find((z)=>z.providerId===Y.id&&z.accountId===H))return $.json({url:"",status:!0,redirect:!1});if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(Y.id)&&!Q.user.emailVerified||$.context.options.account?.accountLinking?.enabled===!1)throw new x("UNAUTHORIZED",{message:"Account not linked - linking not allowed"});if(Q.user.email!==J.user.email&&$.context.options.account?.accountLinking?.allowDifferentEmails!==!0)throw new x("UNAUTHORIZED",{message:"Account not linked - different emails not allowed"});try{await $.context.internalAdapter.createAccount({userId:J.user.id,providerId:Y.id,accountId:H,accessToken:$.body.idToken.accessToken,idToken:Z,refreshToken:$.body.idToken.refreshToken,scope:$.body.idToken.scopes?.join(",")})}catch{throw new x("EXPECTATION_FAILED",{message:"Account not linked - unable to create account"})}if($.context.options.account?.accountLinking?.updateUserInfoOnLink===!0)try{await $.context.internalAdapter.updateUser(J.user.id,{name:Q.user?.name,image:Q.user?.image})}catch(z){console.warn("Could not update user - "+z.toString())}return $.json({url:"",status:!0,redirect:!1})}let X=await yZ($,{userId:J.user.id,email:J.user.email},$.body.additionalData),W=await Y.createAuthorizationURL({state:X.state,codeVerifier:X.codeVerifier,redirectURI:`${$.context.baseURL}/callback/${Y.id}`,scopes:$.body.scopes});if(!$.body.disableRedirect)$.setHeader("Location",W.toString());return $.json({url:W.toString(),redirect:!$.body.disableRedirect})}),NR=H$("/unlink-account",{method:"POST",body:c({providerId:A(),accountId:A().optional()}),use:[xV],metadata:{openapi:{description:"Unlink an account",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async($)=>{let{providerId:J,accountId:Y}=$.body,X=await $.context.internalAdapter.findAccounts($.context.session.user.id);if(X.length===1&&!$.context.options.account?.accountLinking?.allowUnlinkingAll)throw new x("BAD_REQUEST",{message:V$.FAILED_TO_UNLINK_LAST_ACCOUNT});let W=X.find((Z)=>Y?Z.accountId===Y&&Z.providerId===J:Z.providerId===J);if(!W)throw new x("BAD_REQUEST",{message:V$.ACCOUNT_NOT_FOUND});return await $.context.internalAdapter.deleteAccount(W.id),$.json({status:!0})}),uV=H$("/get-access-token",{method:"POST",body:c({providerId:A().meta({description:"The provider ID for the OAuth provider"}),accountId:A().meta({description:"The account ID associated with the refresh token"}).optional(),userId:A().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Get a valid access token, doing a refresh if needed",responses:{200:{description:"A Valid access token",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async($)=>{let{providerId:J,accountId:Y,userId:X}=$.body||{},W=$.request,Z=await M0($);if(W&&!Z)throw $.error("UNAUTHORIZED");let G=Z?.user?.id||X;if(!G)throw $.error("UNAUTHORIZED");if(!$.context.socialProviders.find((K)=>K.id===J))throw new x("BAD_REQUEST",{message:`Provider ${J} is not supported.`});let Q=await J2($),H=void 0;if(Q&&J===Q.providerId&&(!Y||Q.id===Y))H=Q;else H=(await $.context.internalAdapter.findAccounts(G)).find((K)=>Y?K.id===Y&&K.providerId===J:K.providerId===J);if(!H)throw new x("BAD_REQUEST",{message:"Account not found"});let z=$.context.socialProviders.find((K)=>K.id===J);if(!z)throw new x("BAD_REQUEST",{message:`Provider ${J} not found.`});try{let K=null,w=H.accessTokenExpiresAt&&new Date(H.accessTokenExpiresAt).getTime()-Date.now()<5000;if(H.refreshToken&&w&&z.refreshAccessToken){let V=await yV(H.refreshToken,$.context);K=await z.refreshAccessToken(V);let N={accessToken:await h6(K.accessToken,$.context),accessTokenExpiresAt:K.accessTokenExpiresAt,refreshToken:await h6(K.refreshToken,$.context),refreshTokenExpiresAt:K.refreshTokenExpiresAt},P=null;if(H.id)P=await $.context.internalAdapter.updateAccount(H.id,N);if($.context.options.account?.storeAccountCookie)await u9($,{...H,...P??N})}let F=(()=>{if(K?.accessTokenExpiresAt){if(typeof K.accessTokenExpiresAt==="string")return new Date(K.accessTokenExpiresAt);return K.accessTokenExpiresAt}if(H.accessTokenExpiresAt){if(typeof H.accessTokenExpiresAt==="string")return new Date(H.accessTokenExpiresAt);return H.accessTokenExpiresAt}})(),U={accessToken:K?.accessToken??await yV(H.accessToken??"",$.context),accessTokenExpiresAt:F,scopes:H.scope?.split(",")??[],idToken:K?.idToken??H.idToken??void 0};return $.json(U)}catch(K){throw new x("BAD_REQUEST",{message:"Failed to get a valid access token",cause:K})}}),_R=H$("/refresh-token",{method:"POST",body:c({providerId:A().meta({description:"The provider ID for the OAuth provider"}),accountId:A().meta({description:"The account ID associated with the refresh token"}).optional(),userId:A().meta({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},async($)=>{let{providerId:J,accountId:Y,userId:X}=$.body,W=$.request,Z=await M0($);if(W&&!Z)throw $.error("UNAUTHORIZED");let G=Z?.user?.id||X;if(!G)throw new x("BAD_REQUEST",{message:"Either userId or session is required"});let Q=$.context.socialProviders.find((w)=>w.id===J);if(!Q)throw new x("BAD_REQUEST",{message:`Provider ${J} not found.`});if(!Q.refreshAccessToken)throw new x("BAD_REQUEST",{message:`Provider ${J} does not support token refreshing.`});let H=void 0,z=await J2($);if(z&&(!J||J===z?.providerId))H=z;else H=(await $.context.internalAdapter.findAccounts(G)).find((w)=>Y?w.id===Y&&w.providerId===J:w.providerId===J);if(!H)throw new x("BAD_REQUEST",{message:"Account not found"});let K=void 0;if(z&&J===z.providerId)K=z.refreshToken??void 0;else K=H.refreshToken??void 0;if(!K)throw new x("BAD_REQUEST",{message:"Refresh token not found"});try{let w=await yV(K,$.context),F=await Q.refreshAccessToken(w);if(H.id){let U={...H||{},accessToken:await h6(F.accessToken,$.context),refreshToken:await h6(F.refreshToken,$.context),accessTokenExpiresAt:F.accessTokenExpiresAt,refreshTokenExpiresAt:F.refreshTokenExpiresAt,scope:F.scopes?.join(",")||H.scope,idToken:F.idToken||H.idToken};await $.context.internalAdapter.updateAccount(H.id,U)}if(z&&J===z.providerId&&$.context.options.account?.storeAccountCookie)await u9($,{...z,accessToken:await h6(F.accessToken,$.context),refreshToken:await h6(F.refreshToken,$.context),accessTokenExpiresAt:F.accessTokenExpiresAt,refreshTokenExpiresAt:F.refreshTokenExpiresAt,scope:F.scopes?.join(",")||z.scope,idToken:F.idToken||z.idToken});return $.json({accessToken:F.accessToken,refreshToken:F.refreshToken,accessTokenExpiresAt:F.accessTokenExpiresAt,refreshTokenExpiresAt:F.refreshTokenExpiresAt,scope:F.scopes?.join(",")||H.scope,idToken:F.idToken||H.idToken,providerId:H.providerId,accountId:H.accountId})}catch(w){throw new x("BAD_REQUEST",{message:"Failed to refresh access token",cause:w})}}),wH$=l6(c({accountId:A().meta({description:"The provider given account id for which to get the account info"}).optional()})),LR=H$("/account-info",{method:"GET",use:[F6],metadata:{openapi:{description:"Get the account info provided by the provider",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string"},name:{type:"string"},email:{type:"string"},image:{type:"string"},emailVerified:{type:"boolean"}},required:["id","emailVerified"]},data:{type:"object",properties:{},additionalProperties:!0}},required:["user","data"],additionalProperties:!1}}}}}}},query:wH$},async($)=>{let J=$.query?.accountId,Y=void 0;if(!J){if($.context.options.account?.storeAccountCookie){let G=await J2($);if(G)Y=G}}else{let G=await $.context.internalAdapter.findAccount(J);if(G)Y=G}if(!Y||Y.userId!==$.context.session.user.id)throw new x("BAD_REQUEST",{message:"Account not found"});let X=$.context.socialProviders.find((G)=>G.id===Y.providerId);if(!X)throw new x("INTERNAL_SERVER_ERROR",{message:`Provider account provider is ${Y.providerId} but it is not configured`});let W=await uV({...$,method:"POST",body:{accountId:Y.id,providerId:Y.providerId},returnHeaders:!1,returnStatus:!1});if(!W.accessToken)throw new x("BAD_REQUEST",{message:"Access token not found"});let Z=await X.getUserInfo({...W,accessToken:W.accessToken});return $.json(Z)});$0();y$();async function C8($,J,Y,X=3600,W){return await EH({email:J.toLowerCase(),updateTo:Y,...W},$,X)}async function dV($,J){if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new x("BAD_REQUEST",{message:"Verification email isn't enabled"});let Y=await C8($.context.secret,J.email,void 0,$.context.options.emailVerification?.expiresIn),X=$.body.callbackURL?encodeURIComponent($.body.callbackURL):encodeURIComponent("/"),W=`${$.context.baseURL}/verify-email?token=${Y}&callbackURL=${X}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:J,url:W,token:Y},$.request))}var qR=H$("/send-verification-email",{method:"POST",operationId:"sendVerificationEmail",body:c({email:O6().meta({description:"The email to send the verification email to"}),callbackURL:A().meta({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{operationId:"sendVerificationEmail",description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},"400":{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},async($)=>{if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new x("BAD_REQUEST",{message:"Verification email isn't enabled"});let{email:J}=$.body,Y=await M0($);if(!Y){let X=await $.context.internalAdapter.findUserByEmail(J);if(!X)return await C8($.context.secret,J,void 0,$.context.options.emailVerification?.expiresIn),$.json({status:!0});return await dV($,X.user),$.json({status:!0})}if(Y?.user.email!==J)throw new x("BAD_REQUEST",{message:V$.EMAIL_MISMATCH});if(Y?.user.emailVerified)throw new x("BAD_REQUEST",{message:V$.EMAIL_ALREADY_VERIFIED});return await dV($,Y.user),$.json({status:!0})}),BR=H$("/verify-email",{method:"GET",operationId:"verifyEmail",query:c({token:A().meta({description:"The token to verify the email"}),callbackURL:A().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[EX(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the email was verified successfully"}},required:["user","status"]}}}}}}}},async($)=>{function J(Q){if($.query.callbackURL){if($.query.callbackURL.includes("?"))throw $.redirect(`${$.query.callbackURL}&error=${Q}`);throw $.redirect(`${$.query.callbackURL}?error=${Q}`)}throw new x("UNAUTHORIZED",{message:Q})}let{token:Y}=$.query,X;try{X=await e1(Y,new TextEncoder().encode($.context.secret),{algorithms:["HS256"]})}catch(Q){if(Q instanceof MG)return J("token_expired");return J("invalid_token")}let W=c({email:O6(),updateTo:A().optional(),requestType:A().optional()}).parse(X.payload),Z=await $.context.internalAdapter.findUserByEmail(W.email);if(!Z)return J("user_not_found");if(W.updateTo){let Q=await M0($);if(Q&&Q.user.email!==W.email)return J("unauthorized");switch(W.requestType){case"change-email-confirmation":{let H=await C8($.context.secret,W.email,W.updateTo,$.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),z=$.query.callbackURL?encodeURIComponent($.query.callbackURL):encodeURIComponent("/"),K=`${$.context.baseURL}/verify-email?token=${H}&callbackURL=${z}`;if($.context.options.emailVerification?.sendVerificationEmail)await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:{...Z.user,email:W.updateTo},url:K,token:H},$.request));if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0})}case"change-email-verification":{let H=Q;if(!H){let K=await $.context.internalAdapter.createSession(Z.user.id);if(!K)throw new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_CREATE_SESSION});H={session:K,user:Z.user}}if($.context.options.emailVerification?.onEmailVerification)await $.context.options.emailVerification.onEmailVerification(Z.user,$.request);let z=await $.context.internalAdapter.updateUserByEmail(W.email,{email:W.updateTo,emailVerified:!0});if($.context.options.emailVerification?.afterEmailVerification)await $.context.options.emailVerification.afterEmailVerification(z,$.request);if(await U0($,{session:H.session,user:{...H.user,email:W.updateTo,emailVerified:!0}}),$.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:o$($.context.options,z)})}default:{let H=Q;if(!H){let F=await $.context.internalAdapter.createSession(Z.user.id);if(!F)throw new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_CREATE_SESSION});H={session:F,user:Z.user}}let z=await $.context.internalAdapter.updateUserByEmail(W.email,{email:W.updateTo,emailVerified:!1}),K=await C8($.context.secret,W.updateTo),w=$.query.callbackURL?encodeURIComponent($.query.callbackURL):encodeURIComponent("/");if($.context.options.emailVerification?.sendVerificationEmail)await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:z,url:`${$.context.baseURL}/verify-email?token=${K}&callbackURL=${w}`,token:K},$.request));if(await U0($,{session:H.session,user:{...H.user,email:W.updateTo,emailVerified:!1}}),$.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:o$($.context.options,z)})}}}if(Z.user.emailVerified){if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:null})}if($.context.options.emailVerification?.beforeEmailVerification)await $.context.options.emailVerification.beforeEmailVerification(Z.user,$.request);if($.context.options.emailVerification?.onEmailVerification)await $.context.options.emailVerification.onEmailVerification(Z.user,$.request);let G=await $.context.internalAdapter.updateUserByEmail(W.email,{emailVerified:!0});if($.context.options.emailVerification?.afterEmailVerification)await $.context.options.emailVerification.afterEmailVerification(G,$.request);if($.context.options.emailVerification?.autoSignInAfterVerification){let Q=await M0($);if(!Q||Q.user.email!==W.email){let H=await $.context.internalAdapter.createSession(Z.user.id);if(!H)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await U0($,{session:H,user:{...Z.user,emailVerified:!0}})}else await U0($,{session:Q.session,user:{...Q.user,emailVerified:!0}})}if($.query.callbackURL)throw $.redirect($.query.callbackURL);return $.json({status:!0,user:null})});n0();async function aK($,J){let{userInfo:Y,account:X,callbackURL:W,disableSignUp:Z,overrideUserInfo:G}=J,Q=await $.context.internalAdapter.findOAuthUser(Y.email.toLowerCase(),X.accountId,X.providerId).catch((w)=>{C$.error(`Better auth was unable to query your database.
Error: `,w);let F=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;throw $.redirect(`${F}?error=internal_server_error`)}),H=Q?.user,z=!H;if(Q){let w=Q.linkedAccount??Q.accounts.find((F)=>F.providerId===X.providerId&&F.accountId===X.accountId);if(!w){let F=$.context.options.account?.accountLinking,U=$.context.options.account?.accountLinking?.trustedProviders;if(!(J.isTrustedProvider||U?.includes(X.providerId))&&!Y.emailVerified||F?.enabled===!1||F?.disableImplicitLinking===!0){if(kZ())C$.warn(`User already exist but account isn't linked to ${X.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`);return{error:"account not linked",data:null}}try{await $.context.internalAdapter.linkAccount({providerId:X.providerId,accountId:Y.id.toString(),userId:Q.user.id,accessToken:await h6(X.accessToken,$.context),refreshToken:await h6(X.refreshToken,$.context),idToken:X.idToken,accessTokenExpiresAt:X.accessTokenExpiresAt,refreshTokenExpiresAt:X.refreshTokenExpiresAt,scope:X.scope})}catch(V){return C$.error("Unable to link account",V),{error:"unable to link account",data:null}}if(Y.emailVerified&&!Q.user.emailVerified&&Y.email.toLowerCase()===Q.user.email)await $.context.internalAdapter.updateUser(Q.user.id,{emailVerified:!0})}else{let F=$.context.options.account?.updateAccountOnSignIn!==!1?Object.fromEntries(Object.entries({idToken:X.idToken,accessToken:await h6(X.accessToken,$.context),refreshToken:await h6(X.refreshToken,$.context),accessTokenExpiresAt:X.accessTokenExpiresAt,refreshTokenExpiresAt:X.refreshTokenExpiresAt,scope:X.scope}).filter(([U,V])=>V!==void 0)):{};if($.context.options.account?.storeAccountCookie)await u9($,{...w,...F});if(Object.keys(F).length>0)await $.context.internalAdapter.updateAccount(w.id,F);if(Y.emailVerified&&!Q.user.emailVerified&&Y.email.toLowerCase()===Q.user.email)await $.context.internalAdapter.updateUser(Q.user.id,{emailVerified:!0})}if(G){let{id:F,...U}=Y;H=await $.context.internalAdapter.updateUser(Q.user.id,{...U,email:Y.email.toLowerCase(),emailVerified:Y.email.toLowerCase()===Q.user.email?Q.user.emailVerified||Y.emailVerified:Y.emailVerified})}}else{if(Z)return{error:"signup disabled",data:null,isRegister:!1};try{let{id:w,...F}=Y,U={accessToken:await h6(X.accessToken,$.context),refreshToken:await h6(X.refreshToken,$.context),idToken:X.idToken,accessTokenExpiresAt:X.accessTokenExpiresAt,refreshTokenExpiresAt:X.refreshTokenExpiresAt,scope:X.scope,providerId:X.providerId,accountId:Y.id.toString()},{user:V,account:N}=await $.context.internalAdapter.createOAuthUser({...F,email:Y.email.toLowerCase()},U);if(H=V,$.context.options.account?.storeAccountCookie)await u9($,N);if(!Y.emailVerified&&H&&$.context.options.emailVerification?.sendOnSignUp&&$.context.options.emailVerification?.sendVerificationEmail){let P=await C8($.context.secret,H.email,void 0,$.context.options.emailVerification?.expiresIn),B=`${$.context.baseURL}/verify-email?token=${P}&callbackURL=${W}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:H,url:B,token:P},$.request))}}catch(w){if(C$.error(w),w instanceof x)return{error:w.message,data:null,isRegister:!1};return{error:"unable to create user",data:null,isRegister:!1}}}if(!H)return{error:"unable to create user",data:null,isRegister:!1};let K=await $.context.internalAdapter.createSession(H.id);if(!K)return{error:"unable to create session",data:null,isRegister:!1};return{data:{session:K,user:H},error:null,isRegister:z}}_0();y$();var z7=c({code:A().optional(),error:A().optional(),device_id:A().optional(),error_description:A().optional(),state:A().optional(),user:A().optional()}),OR=H$("/callback/:id",{method:["GET","POST"],operationId:"handleOAuthCallback",body:z7.optional(),query:z7.optional(),metadata:{...ZJ,allowedMediaTypes:["application/x-www-form-urlencoded","application/json"]}},async($)=>{let J,Y=$.context.options.onAPIError?.errorURL||`${$.context.baseURL}/error`;if($.method==="POST"){let _=$.body?z7.parse($.body):{},q=$.query?z7.parse($.query):{},S=z7.parse({..._,...q}),j=new URLSearchParams;for(let[T,R]of Object.entries(S))if(R!==void 0&&R!==null)j.set(T,String(R));let E=`${$.context.baseURL}/callback/${$.params.id}?${j.toString()}`;throw $.redirect(E)}try{if($.method==="GET")J=z7.parse($.query);else if($.method==="POST")J=z7.parse($.body);else throw Error("Unsupported method")}catch(_){throw $.context.logger.error("INVALID_CALLBACK_REQUEST",_),$.redirect(`${Y}?error=invalid_callback_request`)}let{code:X,error:W,state:Z,error_description:G,device_id:Q,user:H}=J;if(!Z){$.context.logger.error("State not found",W);let _=`${Y}${Y.includes("?")?"&":"?"}state=state_not_found`;throw $.redirect(_)}let{codeVerifier:z,callbackURL:K,link:w,errorURL:F,newUserURL:U,requestSignUp:V}=await tz($);function N(_,q){let S=F??Y,j=new URLSearchParams({error:_});if(q)j.set("error_description",q);let E=`${S}${S.includes("?")?"&":"?"}${j.toString()}`;throw $.redirect(E)}if(W)N(W,G);if(!X)throw $.context.logger.error("Code not found"),N("no_code");let P=$.context.socialProviders.find((_)=>_.id===$.params.id);if(!P)throw $.context.logger.error("Oauth provider with id",$.params.id,"not found"),N("oauth_provider_not_found");let B;try{B=await P.validateAuthorizationCode({code:X,codeVerifier:z,deviceId:Q,redirectURI:`${$.context.baseURL}/callback/${P.id}`})}catch(_){throw $.context.logger.error("",_),N("invalid_code")}if(!B)throw N("invalid_code");let L=H?o0(H):null,g=await P.getUserInfo({...B,user:L??void 0}).then((_)=>_?.user);if(!g)return $.context.logger.error("Unable to get user info"),N("unable_to_get_user_info");if(!K)throw $.context.logger.error("No callback URL found"),N("no_callback_url");if(w){if(!$.context.options.account?.accountLinking?.trustedProviders?.includes(P.id)&&!g.emailVerified||$.context.options.account?.accountLinking?.enabled===!1)return $.context.logger.error("Unable to link account - untrusted provider"),N("unable_to_link_account");if(g.email!==w.email&&$.context.options.account?.accountLinking?.allowDifferentEmails!==!0)return N("email_doesn't_match");let _=await $.context.internalAdapter.findAccount(String(g.id));if(_){if(_.userId.toString()!==w.userId.toString())return N("account_already_linked_to_different_user");let S=Object.fromEntries(Object.entries({accessToken:await h6(B.accessToken,$.context),refreshToken:await h6(B.refreshToken,$.context),idToken:B.idToken,accessTokenExpiresAt:B.accessTokenExpiresAt,refreshTokenExpiresAt:B.refreshTokenExpiresAt,scope:B.scopes?.join(",")}).filter(([j,E])=>E!==void 0));await $.context.internalAdapter.updateAccount(_.id,S)}else if(!await $.context.internalAdapter.createAccount({userId:w.userId,providerId:P.id,accountId:String(g.id),...B,accessToken:await h6(B.accessToken,$.context),refreshToken:await h6(B.refreshToken,$.context),scope:B.scopes?.join(",")}))return N("unable_to_link_account");let q;try{q=K.toString()}catch{q=K}throw $.redirect(q)}if(!g.email)return $.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),N("email_not_found");let k={providerId:P.id,accountId:String(g.id),...B,scope:B.scopes?.join(",")},I=await aK($,{userInfo:{...g,id:String(g.id),email:g.email,name:g.name||g.email},account:k,callbackURL:K,disableSignUp:P.disableImplicitSignUp&&!V||P.options?.disableSignUp,overrideUserInfo:P.options?.overrideUserInfoOnSignIn});if(I.error)return $.context.logger.error(I.error.split(" ").join("_")),N(I.error.split(" ").join("_"));let{session:O,user:b}=I.data;await U0($,{session:O,user:b});let D;try{D=(I.isRegister?U||K:K).toString()}catch{D=I.isRegister?U||K:K}throw $.redirect(D)});n0();function jl($){return $.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/&(?!amp;|lt;|gt;|quot;|#39;|#x[0-9a-fA-F]+;|#[0-9]+;)/g,"&amp;")}var UH$=($,J="Unknown",Y=null)=>{let X=$.onAPIError?.customizeDefaultErrorPage;return`<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Error</title>
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        font-family: ${X?.font?.defaultFamily||"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"};
        background: ${X?.colors?.background||"var(--background)"};
        color: var(--foreground);
        margin: 0;
      }
      :root,
      :host {
        --spacing: 0.25rem;
        --container-md: 28rem;
        --text-sm: ${X?.size?.textSm||"0.875rem"};
        --text-sm--line-height: calc(1.25 / 0.875);
        --text-2xl: ${X?.size?.text2xl||"1.5rem"};
        --text-2xl--line-height: calc(2 / 1.5);
        --text-4xl: ${X?.size?.text4xl||"2.25rem"};
        --text-4xl--line-height: calc(2.5 / 2.25);
        --text-6xl: ${X?.size?.text6xl||"3rem"};
        --text-6xl--line-height: 1;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;
        --default-transition-duration: 150ms;
        --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        --radius: ${X?.size?.radiusSm||"0.625rem"};
        --default-mono-font-family: ${X?.font?.monoFamily||"var(--font-geist-mono)"};
        --primary: ${X?.colors?.primary||"black"};
        --primary-foreground: ${X?.colors?.primaryForeground||"white"};
        --background: ${X?.colors?.background||"white"};
        --foreground: ${X?.colors?.foreground||"oklch(0.271 0 0)"};
        --border: ${X?.colors?.border||"oklch(0.89 0 0)"};
        --destructive: ${X?.colors?.destructive||"oklch(0.55 0.15 25.723)"};
        --muted-foreground: ${X?.colors?.mutedForeground||"oklch(0.545 0 0)"};
        --corner-border: ${X?.colors?.cornerBorder||"#404040"};
      }

      button, .btn {
        cursor: pointer;
        background: none;
        border: none;
        color: inherit;
        font: inherit;
        transition: all var(--default-transition-duration)
          var(--default-transition-timing-function);
      }
      button:hover, .btn:hover {
        opacity: 0.8;
      }

      @media (prefers-color-scheme: dark) {
        :root,
        :host {
          --primary: ${X?.colors?.primary||"white"};
          --primary-foreground: ${X?.colors?.primaryForeground||"black"};
          --background: ${X?.colors?.background||"oklch(0.15 0 0)"};
          --foreground: ${X?.colors?.foreground||"oklch(0.98 0 0)"};
          --border: ${X?.colors?.border||"oklch(0.27 0 0)"};
          --destructive: ${X?.colors?.destructive||"oklch(0.65 0.15 25.723)"};
          --muted-foreground: ${X?.colors?.mutedForeground||"oklch(0.65 0 0)"};
          --corner-border: ${X?.colors?.cornerBorder||"#a0a0a0"};
        }
      }
      @media (max-width: 640px) {
        :root, :host {
          --text-6xl: 2.5rem;
          --text-2xl: 1.25rem;
          --text-sm: 0.8125rem;
        }
      }
      @media (max-width: 480px) {
        :root, :host {
          --text-6xl: 2rem;
          --text-2xl: 1.125rem;
        }
      }
    </style>
  </head>
  <body style="width: 100vw; min-height: 100vh; overflow-x: hidden; overflow-y: auto;">
    <div
        style="
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            position: relative;
            width: 100%;
            min-height: 100vh;
            padding: 1rem;
        "
        >
${X?.disableBackgroundGrid?"":`
      <div
        style="
          position: absolute;
          inset: 0;
          background-image: linear-gradient(to right, ${X?.colors?.gridColor||"var(--border)"} 1px, transparent 1px),
            linear-gradient(to bottom, ${X?.colors?.gridColor||"var(--border)"} 1px, transparent 1px);
          background-size: 40px 40px;
          opacity: 0.6;
          pointer-events: none;
          width: 100vw;
          height: 100vh;
        "
      ></div>
      <div
        style="
          position: absolute;
          inset: 0;
          display: flex;
          align-items: center;
          justify-content: center;
          background: ${X?.colors?.background||"var(--background)"};
          mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          -webkit-mask-image: radial-gradient(ellipse at center, transparent 20%, black);
          pointer-events: none;
        "
      ></div>
`}

<div
  style="
    position: relative;
    z-index: 10;
    border: 2px solid var(--border);
    background: ${X?.colors?.cardBackground||"var(--background)"};
    padding: 1.5rem;
    max-width: 42rem;
    width: 100%;
  "
>
    ${X?.disableCornerDecorations?"":`
        <!-- Corner decorations -->
        <div
          style="
            position: absolute;
            top: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            top: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-top: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>
  
        <div
          style="
            position: absolute;
            bottom: -2px;
            left: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-left: 4px solid var(--corner-border);
          "
        ></div>
        <div
          style="
            position: absolute;
            bottom: -2px;
            right: -2px;
            width: 2rem;
            height: 2rem;
            border-bottom: 4px solid var(--corner-border);
            border-right: 4px solid var(--corner-border);
          "
        ></div>`}

        <div style="text-align: center; margin-bottom: 1.5rem;">
          <div style="margin-bottom: 1.5rem;">
            <div
              style="
                display: inline-block;
                border: 2px solid ${X?.disableTitleBorder?"transparent":X?.colors?.titleBorder||"var(--destructive)"};
                padding: 0.375rem 1rem;
              "
            >
              <h1
                style="
                  font-size: var(--text-6xl);
                  font-weight: var(--font-weight-semibold);
                  color: ${X?.colors?.titleColor||"var(--foreground)"};
                  letter-spacing: -0.02em;
                  margin: 0;
                "
              >
                ERROR
              </h1>
            </div>
            <div
              style="
                height: 2px;
                background-color: var(--border);
                width: calc(100% + 3rem);
                margin-left: -1.5rem;
                margin-top: 1.5rem;
              "
            ></div>
          </div>

          <h2
            style="
              font-size: var(--text-2xl);
              font-weight: var(--font-weight-semibold);
              color: var(--foreground);
              margin: 0 0 1rem;
            "
          >
            Something went wrong
          </h2>

          <div
            style="
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                border: 2px solid var(--border);
                background-color: var(--muted);
                padding: 0.375rem 0.75rem;
                margin: 0 0 1rem;
                flex-wrap: wrap;
                justify-content: center;
            "
            >
            <span
                style="
                font-size: 0.75rem;
                color: var(--muted-foreground);
                font-weight: var(--font-weight-semibold);
                "
            >
                CODE:
            </span>
            <span
                style="
                font-size: var(--text-sm);
                font-family: var(--default-mono-font-family, monospace);
                color: var(--foreground);
                word-break: break-all;
                "
            >
                ${jl(J)}
            </span>
            </div>

          <p
            style="
              color: var(--muted-foreground);
              max-width: 28rem;
              margin: 0 auto;
              font-size: var(--text-sm);
              line-height: 1.5;
              text-wrap: pretty;
            "
          >
            ${!Y?`We encountered an unexpected error. Please try again or return to the home page. If you're a developer, you can find more information about the error <a href='https://better-auth.com/docs/reference/errors/${encodeURIComponent(J)}' target='_blank' rel="noopener noreferrer" style='color: var(--foreground); text-decoration: underline;'>here</a>.`:Y}
          </p>
        </div>

        <div
          style="
            display: flex;
            gap: 0.75rem;
            margin-top: 1.5rem;
            justify-content: center;
            flex-wrap: wrap;
          "
        >
          <a
            href="/"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: var(--primary);
                color: var(--primary-foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Go Home
            </div>
          </a>
          <a
            href="https://better-auth.com/docs/reference/errors/${encodeURIComponent(J)}?askai=${encodeURIComponent(`What does the error code ${J} mean?`)}"
            target="_blank"
            rel="noopener noreferrer"
            style="
              text-decoration: none;
            "
          >
            <div
              style="
                border: 2px solid var(--border);
                background: transparent;
                color: var(--foreground);
                padding: 0.5rem 1rem;
                border-radius: 0;
                white-space: nowrap;
              "
              class="btn"
            >
              Ask AI
            </div>
          </a>
        </div>
      </div>
    </div>
  </body>
</html>`},PR=H$("/error",{method:"GET",metadata:{...ZJ,openapi:{description:"Displays an error page",responses:{"200":{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},async($)=>{let J=new URL($.request?.url||""),Y=J.searchParams.get("error")||"UNKNOWN",X=J.searchParams.get("error_description")||null,W=/^[\'A-Za-z0-9_-]+$/.test(Y||"")?Y:"UNKNOWN",Z=X?jl(X):null,G=new URLSearchParams;if(G.set("error",W),X)G.set("error_description",X);let Q=$.context.options,H=Q.onAPIError?.errorURL;if(H)return new Response(null,{status:302,headers:{Location:`${H}${H.includes("?")?"&":"?"}${G.toString()}`}});if(BW&&!Q.onAPIError?.customizeDefaultErrorPage)return new Response(null,{status:302,headers:{Location:`/?${G.toString()}`}});return new Response(UH$($.context.options,W,Z),{headers:{"Content-Type":"text/html"}})});var SR=H$("/ok",{method:"GET",metadata:{...ZJ,openapi:{description:"Check if the API is working",responses:{"200":{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},async($)=>{return $.json({ok:!0})});async function AR($,J){let Y=(await $.context.internalAdapter.findAccounts(J.userId))?.find((W)=>W.providerId==="credential"),X=Y?.password;if(!Y||!X)return!1;return await $.context.password.verify({hash:X,password:J.password})}async function El($,J){let Y=(await J.context.internalAdapter.findAccounts($))?.find((W)=>W.providerId==="credential"),X=Y?.password;if(!Y||!X||!J.body.password)throw new x("BAD_REQUEST",{message:"No password credential found"});if(!await J.context.password.verify({hash:X,password:J.body.password}))throw new x("BAD_REQUEST",{message:"Invalid password"});return!0}$0();y$();function Cl($,J,Y){let X=J?new URL(J,$.baseURL):new URL(`${$.baseURL}/error`);if(Y)Object.entries(Y).forEach(([W,Z])=>X.searchParams.set(W,Z));return X.href}function FH$($,J,Y){let X=new URL(J,$.baseURL);if(Y)Object.entries(Y).forEach(([W,Z])=>X.searchParams.set(W,Z));return X.href}var jR=H$("/request-password-reset",{method:"POST",body:c({email:O6().meta({description:"The email address of the user to send a password reset email to"}),redirectTo:A().meta({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{operationId:"requestPasswordReset",description:"Send a password reset email to the user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"},message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.emailAndPassword?.sendResetPassword)throw $.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new x("BAD_REQUEST",{message:"Reset password isn't enabled"});let{email:J,redirectTo:Y}=$.body,X=await $.context.internalAdapter.findUserByEmail(J,{includeAccounts:!0});if(!X)return T6(24),await $.context.internalAdapter.findVerificationValue("dummy-verification-token"),$.context.logger.error("Reset Password: User not found",{email:J}),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"});let W=x4($.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),Z=T6(24);await $.context.internalAdapter.createVerificationValue({value:X.user.id,identifier:`reset-password:${Z}`,expiresAt:W});let G=Y?encodeURIComponent(Y):"",Q=`${$.context.baseURL}/reset-password/${Z}?callbackURL=${G}`;return await $.context.runInBackgroundOrAwait($.context.options.emailAndPassword.sendResetPassword({user:X.user,url:Q,token:Z},$.request)),$.json({status:!0,message:"If this email exists in our system, check your email for the reset link"})}),ER=H$("/reset-password/:token",{method:"GET",operationId:"forgetPasswordCallback",query:c({callbackURL:A().meta({description:"The URL to redirect the user to reset their password"})}),use:[EX(($)=>$.query.callbackURL)],metadata:{openapi:{operationId:"resetPasswordCallback",description:"Redirects the user to the callback URL with the token",parameters:[{name:"token",in:"path",required:!0,description:"The token to reset the password",schema:{type:"string"}},{name:"callbackURL",in:"query",required:!0,description:"The URL to redirect the user to reset their password",schema:{type:"string"}}],responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},async($)=>{let{token:J}=$.params,{callbackURL:Y}=$.query;if(!J||!Y)throw $.redirect(Cl($.context,Y,{error:"INVALID_TOKEN"}));let X=await $.context.internalAdapter.findVerificationValue(`reset-password:${J}`);if(!X||X.expiresAt<new Date)throw $.redirect(Cl($.context,Y,{error:"INVALID_TOKEN"}));throw $.redirect(FH$($.context,Y,{token:J}))}),CR=H$("/reset-password",{method:"POST",operationId:"resetPassword",query:c({token:A().optional()}).optional(),body:c({newPassword:A().meta({description:"The new password to set"}),token:A().meta({description:"The token to reset the password"}).optional()}),metadata:{openapi:{operationId:"resetPassword",description:"Reset the password for a user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async($)=>{let J=$.body.token||$.query?.token;if(!J)throw new x("BAD_REQUEST",{message:V$.INVALID_TOKEN});let{newPassword:Y}=$.body,X=$.context.password?.config.minPasswordLength,W=$.context.password?.config.maxPasswordLength;if(Y.length<X)throw new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_SHORT});if(Y.length>W)throw new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_LONG});let Z=`reset-password:${J}`,G=await $.context.internalAdapter.findVerificationValue(Z);if(!G||G.expiresAt<new Date)throw new x("BAD_REQUEST",{message:V$.INVALID_TOKEN});let Q=G.value,H=await $.context.password.hash(Y);if(!(await $.context.internalAdapter.findAccounts(Q)).find((z)=>z.providerId==="credential"))await $.context.internalAdapter.createAccount({userId:Q,providerId:"credential",password:H,accountId:Q});else await $.context.internalAdapter.updatePassword(Q,H);if(await $.context.internalAdapter.deleteVerificationValue(G.id),$.context.options.emailAndPassword?.onPasswordReset){let z=await $.context.internalAdapter.findUserById(Q);if(z)await $.context.options.emailAndPassword.onPasswordReset({user:z},$.request)}if($.context.options.emailAndPassword?.revokeSessionsOnPasswordReset)await $.context.internalAdapter.deleteSessions(Q);return $.json({status:!0})}),TR=H$("/verify-password",{method:"POST",body:c({password:A().meta({description:"The password to verify"})}),metadata:{scope:"server",openapi:{operationId:"verifyPassword",description:"Verify the current user's password",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}},use:[MJ]},async($)=>{let{password:J}=$.body,Y=$.context.session;if(!await AR($,{password:J,userId:Y.user.id}))throw new x("BAD_REQUEST",{message:V$.INVALID_PASSWORD});return $.json({status:!0})});$0();y$();var DH$=c({callbackURL:A().meta({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:A().optional(),errorCallbackURL:A().meta({description:"Callback URL to redirect to if an error happens"}).optional(),provider:mV,disableRedirect:m$().meta({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:l6(c({token:A().meta({description:"ID token from the provider"}),nonce:A().meta({description:"Nonce used to generate the token"}).optional(),accessToken:A().meta({description:"Access token from the provider"}).optional(),refreshToken:A().meta({description:"Refresh token from the provider"}).optional(),expiresAt:H0().meta({description:"Expiry date of the token"}).optional()})),scopes:l$(A()).meta({description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:m$().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:A().meta({description:"The login hint to use for the authorization code request"}).optional(),additionalData:a$(A(),W0()).optional().meta({description:"Additional data to be passed through the OAuth flow"})}),RR=()=>H$("/sign-in/social",{method:"POST",operationId:"socialSignIn",body:DH$,metadata:{$Infer:{body:{},returned:{}},openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{token:{type:"string"},user:{type:"object",$ref:"#/components/schemas/User"},url:{type:"string"},redirect:{type:"boolean",enum:[!1]}},required:["redirect","token","user"]}}}}}}}},async($)=>{let J=$.context.socialProviders.find((Z)=>Z.id===$.body.provider);if(!J)throw $.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:$.body.provider}),new x("NOT_FOUND",{message:V$.PROVIDER_NOT_FOUND});if($.body.idToken){if(!J.verifyIdToken)throw $.context.logger.error("Provider does not support id token verification",{provider:$.body.provider}),new x("NOT_FOUND",{message:V$.ID_TOKEN_NOT_SUPPORTED});let{token:Z,nonce:G}=$.body.idToken;if(!await J.verifyIdToken(Z,G))throw $.context.logger.error("Invalid id token",{provider:$.body.provider}),new x("UNAUTHORIZED",{message:V$.INVALID_TOKEN});let Q=await J.getUserInfo({idToken:Z,accessToken:$.body.idToken.accessToken,refreshToken:$.body.idToken.refreshToken});if(!Q||!Q?.user)throw $.context.logger.error("Failed to get user info",{provider:$.body.provider}),new x("UNAUTHORIZED",{message:V$.FAILED_TO_GET_USER_INFO});if(!Q.user.email)throw $.context.logger.error("User email not found",{provider:$.body.provider}),new x("UNAUTHORIZED",{message:V$.USER_EMAIL_NOT_FOUND});let H=await aK($,{userInfo:{...Q.user,email:Q.user.email,id:String(Q.user.id),name:Q.user.name||"",image:Q.user.image,emailVerified:Q.user.emailVerified||!1},account:{providerId:J.id,accountId:String(Q.user.id),accessToken:$.body.idToken.accessToken},callbackURL:$.body.callbackURL,disableSignUp:J.disableImplicitSignUp&&!$.body.requestSignUp||J.disableSignUp});if(H.error)throw new x("UNAUTHORIZED",{message:H.error});return await U0($,H.data),$.json({redirect:!1,token:H.data.session.token,url:void 0,user:o$($.context.options,H.data.user)})}let{codeVerifier:Y,state:X}=await yZ($,void 0,$.body.additionalData),W=await J.createAuthorizationURL({state:X,codeVerifier:Y,redirectURI:`${$.context.baseURL}/callback/${J.id}`,scopes:$.body.scopes,loginHint:$.body.loginHint});if(!$.body.disableRedirect)$.setHeader("Location",W.toString());return $.json({url:W.toString(),redirect:!$.body.disableRedirect})}),IR=()=>H$("/sign-in/email",{method:"POST",operationId:"signInEmail",use:[W2],body:c({email:A().meta({description:"Email of the user"}),password:A().meta({description:"Password of the user"}),callbackURL:A().meta({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:m$().meta({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signInEmail",description:"Sign in with email and password",responses:{"200":{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"string",nullable:!0},user:{type:"object",$ref:"#/components/schemas/User"}},required:["redirect","token","user"]}}}}}}}},async($)=>{if(!$.context.options?.emailAndPassword?.enabled)throw $.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new x("BAD_REQUEST",{message:"Email and password is not enabled"});let{email:J,password:Y}=$.body;if(!O6().safeParse(J).success)throw new x("BAD_REQUEST",{message:V$.INVALID_EMAIL});let X=await $.context.internalAdapter.findUserByEmail(J,{includeAccounts:!0});if(!X)throw await $.context.password.hash(Y),$.context.logger.error("User not found",{email:J}),new x("UNAUTHORIZED",{message:V$.INVALID_EMAIL_OR_PASSWORD});let W=X.accounts.find((Q)=>Q.providerId==="credential");if(!W)throw await $.context.password.hash(Y),$.context.logger.error("Credential account not found",{email:J}),new x("UNAUTHORIZED",{message:V$.INVALID_EMAIL_OR_PASSWORD});let Z=W?.password;if(!Z)throw await $.context.password.hash(Y),$.context.logger.error("Password not found",{email:J}),new x("UNAUTHORIZED",{message:V$.INVALID_EMAIL_OR_PASSWORD});if(!await $.context.password.verify({hash:Z,password:Y}))throw $.context.logger.error("Invalid password"),new x("UNAUTHORIZED",{message:V$.INVALID_EMAIL_OR_PASSWORD});if($.context.options?.emailAndPassword?.requireEmailVerification&&!X.user.emailVerified){if(!$.context.options?.emailVerification?.sendVerificationEmail)throw new x("FORBIDDEN",{message:V$.EMAIL_NOT_VERIFIED});if($.context.options?.emailVerification?.sendOnSignIn){let Q=await C8($.context.secret,X.user.email,void 0,$.context.options.emailVerification?.expiresIn),H=$.body.callbackURL?encodeURIComponent($.body.callbackURL):encodeURIComponent("/"),z=`${$.context.baseURL}/verify-email?token=${Q}&callbackURL=${H}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:X.user,url:z,token:Q},$.request))}throw new x("FORBIDDEN",{message:V$.EMAIL_NOT_VERIFIED})}let G=await $.context.internalAdapter.createSession(X.user.id,$.body.rememberMe===!1);if(!G)throw $.context.logger.error("Failed to create session"),new x("UNAUTHORIZED",{message:V$.FAILED_TO_CREATE_SESSION});if(await U0($,{session:G,user:X.user},$.body.rememberMe===!1),$.body.callbackURL)$.setHeader("Location",$.body.callbackURL);return $.json({redirect:!!$.body.callbackURL,token:G.token,url:$.body.callbackURL,user:o$($.context.options,X.user)})});var kR=H$("/sign-out",{method:"POST",operationId:"signOut",requireHeaders:!0,metadata:{openapi:{operationId:"signOut",description:"Sign out the current user",responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async($)=>{let J=await $.getSignedCookie($.context.authCookies.sessionToken.name,$.context.secret);if(J)try{await $.context.internalAdapter.deleteSession(J)}catch(Y){$.context.logger.error("Failed to delete session from database",Y)}return WJ($),$.json({success:!0})});n0();$0();y$();var MH$=c({name:A(),email:O6(),password:A().nonempty(),image:A().optional(),callbackURL:A().optional(),rememberMe:m$().optional()}).and(a$(A(),W0())),bR=()=>H$("/sign-up/email",{method:"POST",operationId:"signUpWithEmailAndPassword",use:[W2],body:MH$,metadata:{allowedMediaTypes:["application/x-www-form-urlencoded","application/json"],$Infer:{body:{},returned:{}},openapi:{operationId:"signUpWithEmailAndPassword",description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},image:{type:"string",description:"The profile image URL of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"},rememberMe:{type:"boolean",description:"If this is false, the session will not be remembered. Default is `true`."}},required:["name","email","password"]}}}},responses:{"200":{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}},"422":{description:"Unprocessable Entity. User already exists or failed to create user.",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async($)=>{return oz($.context.adapter,async()=>{if(!$.context.options.emailAndPassword?.enabled||$.context.options.emailAndPassword?.disableSignUp)throw new x("BAD_REQUEST",{message:"Email and password sign up is not enabled"});let J=$.body,{name:Y,email:X,password:W,image:Z,callbackURL:G,rememberMe:Q,...H}=J;if(!O6().safeParse(X).success)throw new x("BAD_REQUEST",{message:V$.INVALID_EMAIL});if(!W||typeof W!=="string")throw new x("BAD_REQUEST",{message:V$.INVALID_PASSWORD});let z=$.context.password.config.minPasswordLength;if(W.length<z)throw $.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_SHORT});let K=$.context.password.config.maxPasswordLength;if(W.length>K)throw $.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_LONG});if((await $.context.internalAdapter.findUserByEmail(X))?.user)throw $.context.logger.info(`Sign-up attempt for existing email: ${X}`),new x("UNPROCESSABLE_ENTITY",{message:V$.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let w=await $.context.password.hash(W),F;try{let V=$2($.context.options,H,"create");if(F=await $.context.internalAdapter.createUser({email:X.toLowerCase(),name:Y,image:Z,...V,emailVerified:!1}),!F)throw new x("BAD_REQUEST",{message:V$.FAILED_TO_CREATE_USER})}catch(V){if(kZ())$.context.logger.error("Failed to create user",V);if(V instanceof x)throw V;throw $.context.logger?.error("Failed to create user",V),new x("UNPROCESSABLE_ENTITY",{message:V$.FAILED_TO_CREATE_USER})}if(!F)throw new x("UNPROCESSABLE_ENTITY",{message:V$.FAILED_TO_CREATE_USER});if(await $.context.internalAdapter.linkAccount({userId:F.id,providerId:"credential",accountId:F.id,password:w}),$.context.options.emailVerification?.sendOnSignUp??$.context.options.emailAndPassword.requireEmailVerification){let V=await C8($.context.secret,F.email,void 0,$.context.options.emailVerification?.expiresIn),N=J.callbackURL?encodeURIComponent(J.callbackURL):encodeURIComponent("/"),P=`${$.context.baseURL}/verify-email?token=${V}&callbackURL=${N}`;if($.context.options.emailVerification?.sendVerificationEmail)await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:F,url:P,token:V},$.request))}if($.context.options.emailAndPassword.autoSignIn===!1||$.context.options.emailAndPassword.requireEmailVerification)return $.json({token:null,user:o$($.context.options,F)});let U=await $.context.internalAdapter.createSession(F.id,Q===!1);if(!U)throw new x("BAD_REQUEST",{message:V$.FAILED_TO_CREATE_SESSION});return await U0($,{session:U,user:F},Q===!1),$.json({token:U.token,user:o$($.context.options,F)})})});$0();y$();var VH$=a$(A().meta({description:"Field name must be a string"}),W0()),vR=()=>H$("/update-user",{method:"POST",operationId:"updateUser",body:VH$,use:[F6],metadata:{$Infer:{body:{}},openapi:{operationId:"updateUser",description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user",nullable:!0}}}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"}}}}}}}}}},async($)=>{let J=$.body;if(typeof J!=="object"||Array.isArray(J))throw new x("BAD_REQUEST",{message:"Body must be an object"});if(J.email)throw new x("BAD_REQUEST",{message:V$.EMAIL_CAN_NOT_BE_UPDATED});let{name:Y,image:X,...W}=J,Z=$.context.session,G=$2($.context.options,W,"update");if(X===void 0&&Y===void 0&&Object.keys(G).length===0)throw new x("BAD_REQUEST",{message:"No fields to update"});let Q=await $.context.internalAdapter.updateUser(Z.user.id,{name:Y,image:X,...G})??{...Z.user,...Y!==void 0&&{name:Y},...X!==void 0&&{image:X},...G};return await U0($,{session:Z.session,user:Q}),$.json({status:!0})}),fR=H$("/change-password",{method:"POST",operationId:"changePassword",body:c({newPassword:A().meta({description:"The new password to set"}),currentPassword:A().meta({description:"The current password is required"}),revokeOtherSessions:m$().meta({description:"Must be a boolean value"}).optional()}),use:[MJ],metadata:{openapi:{operationId:"changePassword",description:"Change the password of the user",responses:{"200":{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},async($)=>{let{newPassword:J,currentPassword:Y,revokeOtherSessions:X}=$.body,W=$.context.session,Z=$.context.password.config.minPasswordLength;if(J.length<Z)throw $.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_SHORT});let G=$.context.password.config.maxPasswordLength;if(J.length>G)throw $.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_LONG});let Q=(await $.context.internalAdapter.findAccounts(W.user.id)).find((K)=>K.providerId==="credential"&&K.password);if(!Q||!Q.password)throw new x("BAD_REQUEST",{message:V$.CREDENTIAL_ACCOUNT_NOT_FOUND});let H=await $.context.password.hash(J);if(!await $.context.password.verify({hash:Q.password,password:Y}))throw new x("BAD_REQUEST",{message:V$.INVALID_PASSWORD});await $.context.internalAdapter.updateAccount(Q.id,{password:H});let z=null;if(X){await $.context.internalAdapter.deleteSessions(W.user.id);let K=await $.context.internalAdapter.createSession(W.user.id);if(!K)throw new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_GET_SESSION});await U0($,{session:K,user:W.user}),z=K.token}return $.json({token:z,user:o$($.context.options,W.user)})}),gR=H$({method:"POST",body:c({newPassword:A().meta({description:"The new password to set is required"})}),use:[MJ]},async($)=>{let{newPassword:J}=$.body,Y=$.context.session,X=$.context.password.config.minPasswordLength;if(J.length<X)throw $.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_SHORT});let W=$.context.password.config.maxPasswordLength;if(J.length>W)throw $.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_LONG});let Z=(await $.context.internalAdapter.findAccounts(Y.user.id)).find((Q)=>Q.providerId==="credential"&&Q.password),G=await $.context.password.hash(J);if(!Z)return await $.context.internalAdapter.linkAccount({userId:Y.user.id,providerId:"credential",accountId:Y.user.id,password:G}),$.json({status:!0});throw new x("BAD_REQUEST",{message:"user already has a password"})}),xR=H$("/delete-user",{method:"POST",use:[MJ],body:c({callbackURL:A().meta({description:"The callback URL to redirect to after the user is deleted"}).optional(),password:A().meta({description:"The password of the user is required to delete the user"}).optional(),token:A().meta({description:"The token to delete the user is required"}).optional()}),metadata:{openapi:{operationId:"deleteUser",description:"Delete the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{callbackURL:{type:"string",description:"The callback URL to redirect to after the user is deleted"},password:{type:"string",description:"The user's password. Required if session is not fresh"},token:{type:"string",description:"The deletion verification token"}}}}}},responses:{"200":{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},async($)=>{if(!$.context.options.user?.deleteUser?.enabled)throw $.context.logger.error("Delete user is disabled. Enable it in the options"),new x("NOT_FOUND");let J=$.context.session;if($.body.password){let W=(await $.context.internalAdapter.findAccounts(J.user.id)).find((Z)=>Z.providerId==="credential"&&Z.password);if(!W||!W.password)throw new x("BAD_REQUEST",{message:V$.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await $.context.password.verify({hash:W.password,password:$.body.password}))throw new x("BAD_REQUEST",{message:V$.INVALID_PASSWORD})}if($.body.token)return await cV({...$,query:{token:$.body.token}}),$.json({success:!0,message:"User deleted"});if($.context.options.user.deleteUser?.sendDeleteAccountVerification){let W=K6(32,"0-9","a-z");await $.context.internalAdapter.createVerificationValue({value:J.user.id,identifier:`delete-account-${W}`,expiresAt:new Date(Date.now()+($.context.options.user.deleteUser?.deleteTokenExpiresIn||86400)*1000)});let Z=`${$.context.baseURL}/delete-user/callback?token=${W}&callbackURL=${$.body.callbackURL||"/"}`;return await $.context.runInBackgroundOrAwait($.context.options.user.deleteUser.sendDeleteAccountVerification({user:J.user,url:Z,token:W},$.request)),$.json({success:!0,message:"Verification email sent"})}if(!$.body.password&&$.context.sessionConfig.freshAge!==0){let W=new Date(J.session.createdAt).getTime(),Z=$.context.sessionConfig.freshAge*1000;if(Date.now()-W>Z*1000)throw new x("BAD_REQUEST",{message:V$.SESSION_EXPIRED})}let Y=$.context.options.user.deleteUser?.beforeDelete;if(Y)await Y(J.user,$.request);await $.context.internalAdapter.deleteUser(J.user.id),await $.context.internalAdapter.deleteSessions(J.user.id),WJ($);let X=$.context.options.user.deleteUser?.afterDelete;if(X)await X(J.user,$.request);return $.json({success:!0,message:"User deleted"})}),cV=H$("/delete-user/callback",{method:"GET",query:c({token:A().meta({description:"The token to verify the deletion request"}),callbackURL:A().meta({description:"The URL to redirect to after deletion"}).optional()}),use:[EX(($)=>$.query.callbackURL)],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{"200":{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},async($)=>{if(!$.context.options.user?.deleteUser?.enabled)throw $.context.logger.error("Delete user is disabled. Enable it in the options"),new x("NOT_FOUND");let J=await M0($);if(!J)throw new x("NOT_FOUND",{message:V$.FAILED_TO_GET_USER_INFO});let Y=await $.context.internalAdapter.findVerificationValue(`delete-account-${$.query.token}`);if(!Y||Y.expiresAt<new Date)throw new x("NOT_FOUND",{message:V$.INVALID_TOKEN});if(Y.value!==J.user.id)throw new x("NOT_FOUND",{message:V$.INVALID_TOKEN});let X=$.context.options.user.deleteUser?.beforeDelete;if(X)await X(J.user,$.request);await $.context.internalAdapter.deleteUser(J.user.id),await $.context.internalAdapter.deleteSessions(J.user.id),await $.context.internalAdapter.deleteAccounts(J.user.id),await $.context.internalAdapter.deleteVerificationValue(Y.id),WJ($);let W=$.context.options.user.deleteUser?.afterDelete;if(W)await W(J.user,$.request);if($.query.callbackURL)throw $.redirect($.query.callbackURL||"/");return $.json({success:!0,message:"User deleted"})}),yR=H$("/change-email",{method:"POST",body:c({newEmail:O6().meta({description:"The new email address to set must be a valid email address"}),callbackURL:A().meta({description:"The URL to redirect to after email verification"}).optional()}),use:[MJ],metadata:{openapi:{operationId:"changeEmail",responses:{"200":{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",$ref:"#/components/schemas/User"},status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}},"422":{description:"Unprocessable Entity. Email already exists",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async($)=>{if(!$.context.options.user?.changeEmail?.enabled)throw $.context.logger.error("Change email is disabled."),new x("BAD_REQUEST",{message:"Change email is disabled"});let J=$.body.newEmail.toLowerCase();if(J===$.context.session.user.email)throw $.context.logger.error("Email is the same"),new x("BAD_REQUEST",{message:"Email is the same"});if(await $.context.internalAdapter.findUserByEmail(J))throw $.context.logger.error("Email already exists"),new x("UNPROCESSABLE_ENTITY",{message:V$.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});if($.context.session.user.emailVerified!==!0&&$.context.options.user.changeEmail.updateEmailWithoutVerification){if(await $.context.internalAdapter.updateUserByEmail($.context.session.user.email,{email:J}),await U0($,{session:$.context.session.session,user:{...$.context.session.user,email:J}}),$.context.options.emailVerification?.sendVerificationEmail){let W=await C8($.context.secret,J,void 0,$.context.options.emailVerification?.expiresIn),Z=`${$.context.baseURL}/verify-email?token=${W}&callbackURL=${$.body.callbackURL||"/"}`;await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:{...$.context.session.user,email:J},url:Z,token:W},$.request))}return $.json({status:!0})}if($.context.session.user.emailVerified&&($.context.options.user.changeEmail.sendChangeEmailConfirmation||$.context.options.user.changeEmail.sendChangeEmailVerification)){let W=await C8($.context.secret,$.context.session.user.email,J,$.context.options.emailVerification?.expiresIn,{requestType:"change-email-confirmation"}),Z=`${$.context.baseURL}/verify-email?token=${W}&callbackURL=${$.body.callbackURL||"/"}`,G=$.context.options.user.changeEmail.sendChangeEmailConfirmation||$.context.options.user.changeEmail.sendChangeEmailVerification;if(G)await $.context.runInBackgroundOrAwait(G({user:$.context.session.user,newEmail:J,url:Z,token:W},$.request));return $.json({status:!0})}if(!$.context.options.emailVerification?.sendVerificationEmail)throw $.context.logger.error("Verification email isn't enabled."),new x("BAD_REQUEST",{message:"Verification email isn't enabled"});let Y=await C8($.context.secret,$.context.session.user.email,J,$.context.options.emailVerification?.expiresIn,{requestType:"change-email-verification"}),X=`${$.context.baseURL}/verify-email?token=${Y}&callbackURL=${$.body.callbackURL||"/"}`;return await $.context.runInBackgroundOrAwait($.context.options.emailVerification.sendVerificationEmail({user:{...$.context.session.user,email:J},url:X,token:Y},$.request)),$.json({status:!0})});n0();function hR($){if($===null||typeof $!=="object")return!1;let J=Object.getPrototypeOf($);if(J!==null&&J!==Object.prototype&&Object.getPrototypeOf(J)!==null)return!1;if(Symbol.iterator in $)return!1;if(Symbol.toStringTag in $)return Object.prototype.toString.call($)==="[object Module]";return!0}function mR($,J,Y=".",X){if(!hR(J))return mR($,{},Y,X);let W=Object.assign({},J);for(let Z in $){if(Z==="__proto__"||Z==="constructor")continue;let G=$[Z];if(G===null||G===void 0)continue;if(X&&X(W,Z,G,Y))continue;if(Array.isArray(G)&&Array.isArray(W[Z]))W[Z]=[...G,...W[Z]];else if(hR(G)&&hR(W[Z]))W[Z]=mR(G,W[Z],(Y?`${Y}.`:"")+Z.toString(),X);else W[Z]=G}return W}function sK($){return(...J)=>J.reduce((Y,X)=>mR(Y,X,"",$),{})}var pV=sK(),jU0=sK(($,J,Y)=>{if($[J]!==void 0&&typeof Y==="function")return $[J]=Y($[J]),!0}),EU0=sK(($,J,Y)=>{if(Array.isArray($[J])&&typeof Y==="function")return $[J]=Y($[J]),!0});var Tl=sK(($,J,Y)=>{if(Array.isArray($[J])&&Array.isArray(Y))return $[J]=Y,!0}),uR=new WeakMap;function Rl($,J){let Y={};for(let[X,W]of Object.entries($))Y[X]=async(Z)=>{let G=async()=>{let Q=await J,H={...Z,context:{...Q,returned:void 0,responseHeaders:void 0,session:null},path:W.path,headers:Z?.headers?new Headers(Z?.headers):void 0};return xZ(H,async()=>{let{beforeHooks:z,afterHooks:K}=LH$(Q),w=await NH$(H,z);if("context"in w&&w.context&&typeof w.context==="object"){let{headers:V,...N}=w.context;if(V)V.forEach((P,B)=>{H.headers.set(B,P)});H=Tl(N,H)}else if(w)return Z?.asResponse?vY(w,{headers:Z?.headers}):Z?.returnHeaders?{headers:Z?.headers,response:w}:w;H.asResponse=!1,H.returnHeaders=!0,H.returnStatus=!0;let F=await xZ(H,()=>W(H)).catch((V)=>{if(V instanceof x)return{response:V,status:V.statusCode,headers:V.headers?new Headers(V.headers):null};throw V});if(F&&F instanceof Response)return F;H.context.returned=F.response,H.context.responseHeaders=F.headers;let U=await _H$(H,K);if(U.response)F.response=U.response;if(F.response instanceof x&&oG(Q.logger.level,"debug"))F.response.stack=F.response.errorStack;if(F.response instanceof x&&!Z?.asResponse)throw F.response;return Z?.asResponse?vY(F.response,{headers:F.headers,status:F.status}):Z?.returnHeaders?Z?.returnStatus?{headers:F.headers,response:F.response,status:F.status}:{headers:F.headers,response:F.response}:Z?.returnStatus?{response:F.response,status:F.status}:F.response})};if(await ij())return G();else return rj(new WeakMap,G)},Y[X].path=W.path,Y[X].options=W.options;return Y}async function NH$($,J){let Y={};for(let X of J){let W=!1;try{W=X.matcher($)}catch(Z){let G=uR.get(X.handler)??"unknown";throw $.context.logger.error(`An error occurred during ${G} hook matcher execution:`,Z),new x("INTERNAL_SERVER_ERROR",{message:"An error occurred during hook matcher execution. Check the logs for more details."})}if(W){let Z=await X.handler({...$,returnHeaders:!1}).catch((G)=>{if(G instanceof x&&oG($.context.logger.level,"debug"))G.stack=G.errorStack;throw G});if(Z&&typeof Z==="object"){if("context"in Z&&typeof Z.context==="object"){let{headers:G,...Q}=Z.context;if(G instanceof Headers)if(Y.headers)G.forEach((H,z)=>{Y.headers?.set(z,H)});else Y.headers=G;Y=Tl(Q,Y);continue}return Z}}}return{context:Y}}async function _H$($,J){for(let Y of J)if(Y.matcher($)){let X=await Y.handler($).catch((W)=>{if(W instanceof x){if(oG($.context.logger.level,"debug"))W.stack=W.errorStack;return{response:W,headers:W.headers?new Headers(W.headers):null}}throw W});if(X.headers)X.headers.forEach((W,Z)=>{if(!$.context.responseHeaders)$.context.responseHeaders=new Headers({[Z]:W});else if(Z.toLowerCase()==="set-cookie")$.context.responseHeaders.append(Z,W);else $.context.responseHeaders.set(Z,W)});if(X.response)$.context.returned=X.response}return{response:$.context.returned,headers:$.context.responseHeaders}}function LH$($){let J=$.options.plugins||[],Y=[],X=[],W=$.options.hooks?.before;if(W)uR.set(W,"user"),Y.push({matcher:()=>!0,handler:W});let Z=$.options.hooks?.after;if(Z)uR.set(Z,"user"),X.push({matcher:()=>!0,handler:Z});let G=J.filter((H)=>H.hooks?.before).map((H)=>H.hooks?.before).flat(),Q=J.filter((H)=>H.hooks?.after).map((H)=>H.hooks?.after).flat();if(G.length)Y.push(...G);if(Q.length)X.push(...Q);return{beforeHooks:Y,afterHooks:X}}n0();_0();function Il($,J){let Y=new Map;$.plugins?.forEach((W)=>{if(W.endpoints){for(let[Z,G]of Object.entries(W.endpoints))if(G&&"path"in G&&typeof G.path==="string"){let Q=G.path,H=[];if(G.options&&"method"in G.options){if(Array.isArray(G.options.method))H=G.options.method;else if(typeof G.options.method==="string")H=[G.options.method]}if(H.length===0)H=["*"];if(!Y.has(Q))Y.set(Q,[]);Y.get(Q).push({pluginId:W.id,endpointKey:Z,methods:H})}}});let X=[];for(let[W,Z]of Y.entries())if(Z.length>1){let G=new Map,Q=!1;for(let H of Z)for(let z of H.methods){if(!G.has(z))G.set(z,[]);if(G.get(z).push(H.pluginId),G.get(z).length>1)Q=!0;if(z==="*"&&Z.length>1)Q=!0;else if(z!=="*"&&G.has("*"))Q=!0}if(Q){let H=[...new Set(Z.map((K)=>K.pluginId))],z=[];for(let[K,w]of G.entries())if(w.length>1||K==="*"&&Z.length>1||K!=="*"&&G.has("*"))z.push(K);X.push({path:W,plugins:H,conflictingMethods:z})}}if(X.length>0){let W=X.map((Z)=>`  - "${Z.path}" [${Z.conflictingMethods.join(", ")}] used by plugins: ${Z.plugins.join(", ")}`).join(`
`);J.error(`Endpoint path conflicts detected! Multiple plugins are trying to use the same endpoint paths with conflicting HTTP methods:
${W}

To resolve this, you can:
	1. Use only one of the conflicting plugins
	2. Configure the plugins to use different paths (if supported)
	3. Ensure plugins use different HTTP methods for the same path
`)}}function lV($,J){let Y=J.plugins?.reduce((W,Z)=>{return{...W,...Z.endpoints}},{})??{},X=J.plugins?.map((W)=>W.middlewares?.map((Z)=>{let G=async(Q)=>{let H=await $;return Z.middleware({...Q,context:{...H,...Q.context}})};return G.options=Z.middleware.options,{path:Z.path,middleware:G}})).filter((W)=>W!==void 0).flat()||[];return{api:Rl({signInSocial:RR(),callbackOAuth:OR,getSession:oK(),signOut:kR,signUpEmail:bR(),signInEmail:IR(),resetPassword:CR,verifyPassword:TR,verifyEmail:BR,sendVerificationEmail:qR,changeEmail:yR,changePassword:fR,setPassword:gR,updateUser:vR(),deleteUser:xR,requestPasswordReset:jR,requestPasswordResetCallback:ER,listSessions:HR(),revokeSession:zR,revokeSessions:KR,revokeOtherSessions:wR,linkSocialAccount:VR,listUserAccounts:MR,deleteUserCallback:cV,unlinkAccount:NR,refreshToken:_R,getAccessToken:uV,accountInfo:LR,...Y,ok:SR,error:PR},$),middlewares:X}}var kl=($,J)=>{let{api:Y,middlewares:X}=lV($,J),W=new URL($.baseURL).pathname;return Ij(Y,{routerContext:$,openapi:{disabled:!0},basePath:W,routerMiddleware:[{path:"/**",middleware:JE},...X],allowedMediaTypes:["application/json"],skipTrailingSlashes:J.advanced?.skipTrailingSlashes??!1,async onRequest(Z){let G=$.options.disabledPaths||[],Q=bZ(Z.url,W);if(G.includes(Q))return new Response("Not Found",{status:404});let H=Z;for(let K of $.options.plugins||[])if(K.onRequest){let w=await K.onRequest(H,$);if(w&&"response"in w)return w.response;if(w&&"request"in w)H=w.request}let z=await ru(H,$);if(z)return z;return H},async onResponse(Z){for(let G of $.options.plugins||[])if(G.onResponse){let Q=await G.onResponse(Z,$);if(Q)return Q.response}return Z},onError(Z){if(Z instanceof x&&Z.status==="FOUND")return;if(J.onAPIError?.throw)throw Z;if(J.onAPIError?.onError){J.onAPIError.onError(Z,$);return}let G=J.logger?.level,Q=G==="error"||G==="warn"||G==="debug"?C$:void 0;if(J.logger?.disabled!==!0){if(Z&&typeof Z==="object"&&"message"in Z&&typeof Z.message==="string"){if(Z.message.includes("no column")||Z.message.includes("column")||Z.message.includes("relation")||Z.message.includes("table")||Z.message.includes("does not exist")){$.logger?.error(Z.message);return}}if(Z instanceof x){if(Z.status==="INTERNAL_SERVER_ERROR")$.logger.error(Z.status,Z);Q?.error(Z.message)}else $.logger?.error(Z&&typeof Z==="object"&&"name"in Z?Z.name:"",Z)}}})};IV();var dR="better-auth-secret-12345678901234567890";n0();async function bl($){let J=$.options,Y=J.plugins||[],X=$,W=[];for(let Z of Y)if(Z.init){let G=Z.init(X),Q;if(Y2(G))Q=await G;else Q=G;if(typeof Q==="object"){if(Q.options){let{databaseHooks:H,...z}=Q.options;if(H)W.push(H);J=pV(J,z)}if(Q.context)X={...X,...Q.context}}}return W.push(J.databaseHooks),X.internalAdapter=i2(X.adapter,{options:J,logger:X.logger,hooks:W.filter((Z)=>Z!==void 0),generateId:X.generateId}),X.options=J,{context:X}}function vl($){let J=[];if($.advanced?.crossSubDomainCookies?.enabled);return J}async function nV($,J){let Y=mZ($.baseURL,$.basePath,J),X=Y?[new URL(Y).origin]:[];if($.trustedOrigins){if(Array.isArray($.trustedOrigins))X.push(...$.trustedOrigins);if(typeof $.trustedOrigins==="function"){let Z=await $.trustedOrigins(J);X.push(...Z)}}let W=A0.BETTER_AUTH_TRUSTED_ORIGINS;if(W)X.push(...W.split(","));return X.filter((Z)=>Boolean(Z))}n0();$0();_0();n0();HU();function hl($,J){return{database:J?.database,adapter:J?.adapter,emailVerification:{sendVerificationEmail:!!$.emailVerification?.sendVerificationEmail,sendOnSignUp:!!$.emailVerification?.sendOnSignUp,sendOnSignIn:!!$.emailVerification?.sendOnSignIn,autoSignInAfterVerification:!!$.emailVerification?.autoSignInAfterVerification,expiresIn:$.emailVerification?.expiresIn,onEmailVerification:!!$.emailVerification?.onEmailVerification,afterEmailVerification:!!$.emailVerification?.afterEmailVerification},emailAndPassword:{enabled:!!$.emailAndPassword?.enabled,disableSignUp:!!$.emailAndPassword?.disableSignUp,requireEmailVerification:!!$.emailAndPassword?.requireEmailVerification,maxPasswordLength:$.emailAndPassword?.maxPasswordLength,minPasswordLength:$.emailAndPassword?.minPasswordLength,sendResetPassword:!!$.emailAndPassword?.sendResetPassword,resetPasswordTokenExpiresIn:$.emailAndPassword?.resetPasswordTokenExpiresIn,onPasswordReset:!!$.emailAndPassword?.onPasswordReset,password:{hash:!!$.emailAndPassword?.password?.hash,verify:!!$.emailAndPassword?.password?.verify},autoSignIn:!!$.emailAndPassword?.autoSignIn,revokeSessionsOnPasswordReset:!!$.emailAndPassword?.revokeSessionsOnPasswordReset},socialProviders:Object.keys($.socialProviders||{}).map((Y)=>{let X=$.socialProviders?.[Y];if(!X)return{};return{id:Y,mapProfileToUser:!!X.mapProfileToUser,disableDefaultScope:!!X.disableDefaultScope,disableIdTokenSignIn:!!X.disableIdTokenSignIn,disableImplicitSignUp:X.disableImplicitSignUp,disableSignUp:X.disableSignUp,getUserInfo:!!X.getUserInfo,overrideUserInfoOnSignIn:!!X.overrideUserInfoOnSignIn,prompt:X.prompt,verifyIdToken:!!X.verifyIdToken,scope:X.scope,refreshAccessToken:!!X.refreshAccessToken}}),plugins:$.plugins?.map((Y)=>Y.id.toString()),user:{modelName:$.user?.modelName,fields:$.user?.fields,additionalFields:$.user?.additionalFields,changeEmail:{enabled:$.user?.changeEmail?.enabled,sendChangeEmailVerification:!!$.user?.changeEmail?.sendChangeEmailVerification}},verification:{modelName:$.verification?.modelName,disableCleanup:$.verification?.disableCleanup,fields:$.verification?.fields},session:{modelName:$.session?.modelName,additionalFields:$.session?.additionalFields,cookieCache:{enabled:$.session?.cookieCache?.enabled,maxAge:$.session?.cookieCache?.maxAge,strategy:$.session?.cookieCache?.strategy},disableSessionRefresh:$.session?.disableSessionRefresh,expiresIn:$.session?.expiresIn,fields:$.session?.fields,freshAge:$.session?.freshAge,preserveSessionInDatabase:$.session?.preserveSessionInDatabase,storeSessionInDatabase:$.session?.storeSessionInDatabase,updateAge:$.session?.updateAge},account:{modelName:$.account?.modelName,fields:$.account?.fields,encryptOAuthTokens:$.account?.encryptOAuthTokens,updateAccountOnSignIn:$.account?.updateAccountOnSignIn,accountLinking:{enabled:$.account?.accountLinking?.enabled,trustedProviders:$.account?.accountLinking?.trustedProviders,updateUserInfoOnLink:$.account?.accountLinking?.updateUserInfoOnLink,allowUnlinkingAll:$.account?.accountLinking?.allowUnlinkingAll}},hooks:{after:!!$.hooks?.after,before:!!$.hooks?.before},secondaryStorage:!!$.secondaryStorage,advanced:{cookiePrefix:!!$.advanced?.cookiePrefix,cookies:!!$.advanced?.cookies,crossSubDomainCookies:{domain:!!$.advanced?.crossSubDomainCookies?.domain,enabled:$.advanced?.crossSubDomainCookies?.enabled,additionalCookies:$.advanced?.crossSubDomainCookies?.additionalCookies},database:{useNumberId:!!$.advanced?.database?.useNumberId||$.advanced?.database?.generateId==="serial",generateId:$.advanced?.database?.generateId,defaultFindManyLimit:$.advanced?.database?.defaultFindManyLimit},useSecureCookies:$.advanced?.useSecureCookies,ipAddress:{disableIpTracking:$.advanced?.ipAddress?.disableIpTracking,ipAddressHeaders:$.advanced?.ipAddress?.ipAddressHeaders},disableCSRFCheck:$.advanced?.disableCSRFCheck,cookieAttributes:{expires:$.advanced?.defaultCookieAttributes?.expires,secure:$.advanced?.defaultCookieAttributes?.secure,sameSite:$.advanced?.defaultCookieAttributes?.sameSite,domain:!!$.advanced?.defaultCookieAttributes?.domain,path:$.advanced?.defaultCookieAttributes?.path,httpOnly:$.advanced?.defaultCookieAttributes?.httpOnly}},trustedOrigins:$.trustedOrigins?.length,rateLimit:{storage:$.rateLimit?.storage,modelName:$.rateLimit?.modelName,window:$.rateLimit?.window,customStorage:!!$.rateLimit?.customStorage,enabled:$.rateLimit?.enabled,max:$.rateLimit?.max},onAPIError:{errorURL:$.onAPIError?.errorURL,onError:!!$.onAPIError?.onError,throw:$.onAPIError?.throw},logger:{disabled:$.logger?.disabled,level:$.logger?.level,log:!!$.logger?.log},databaseHooks:{user:{create:{after:!!$.databaseHooks?.user?.create?.after,before:!!$.databaseHooks?.user?.create?.before},update:{after:!!$.databaseHooks?.user?.update?.after,before:!!$.databaseHooks?.user?.update?.before}},session:{create:{after:!!$.databaseHooks?.session?.create?.after,before:!!$.databaseHooks?.session?.create?.before},update:{after:!!$.databaseHooks?.session?.update?.after,before:!!$.databaseHooks?.session?.update?.before}},account:{create:{after:!!$.databaseHooks?.account?.create?.after,before:!!$.databaseHooks?.account?.create?.before},update:{after:!!$.databaseHooks?.account?.update?.after,before:!!$.databaseHooks?.account?.update?.before}},verification:{create:{after:!!$.databaseHooks?.verification?.create?.after,before:!!$.databaseHooks?.verification?.create?.before},update:{after:!!$.databaseHooks?.verification?.update?.after,before:!!$.databaseHooks?.verification?.update?.before}}}}}var w5;async function ml(){if(w5)return w5;try{let $=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!$)return;let J=(Z)=>Function("mm","return import(mm)")(Z),[{default:Y},{default:X}]=await Promise.all([J("fs/promises"),J("path")]),W=await Y.readFile(X.join($,"package.json"),"utf-8");return w5=JSON.parse(W),w5}catch{}}async function ul($){if(w5)return w5.dependencies?.[$]||w5.devDependencies?.[$]||w5.peerDependencies?.[$];try{let J=typeof process<"u"&&typeof process.cwd==="function"?process.cwd():"";if(!J)throw Error("no-cwd");let Y=(Q)=>Function("mm","return import(mm)")(Q),[{default:X},{default:W}]=await Promise.all([Y("fs/promises"),Y("path")]),Z=W.join(J,"node_modules",$,"package.json"),G=await X.readFile(Z,"utf-8");return JSON.parse(G).version||await fl($)||void 0}catch{}return await fl($)}async function fl($){let J=await ml();if(!J)return;return{...J.dependencies,...J.devDependencies,...J.peerDependencies}[$]}async function qH$(){return(await ml())?.name}var BH$={pg:"postgresql",mysql:"mysql",mariadb:"mariadb",sqlite3:"sqlite","better-sqlite3":"sqlite","@prisma/client":"prisma",mongoose:"mongodb",mongodb:"mongodb","drizzle-orm":"drizzle"};async function OH$(){for(let[$,J]of Object.entries(BH$)){let Y=await ul($);if(Y)return{name:J,version:Y}}}var PH$={next:"next",nuxt:"nuxt","@remix-run/server-runtime":"remix",astro:"astro","@sveltejs/kit":"sveltekit","solid-start":"solid-start","tanstack-start":"tanstack-start",hono:"hono",express:"express",elysia:"elysia",expo:"expo"};async function SH$(){for(let[$,J]of Object.entries(PH$)){let Y=await ul($);if(Y)return{name:J,version:Y}}}function AH$(){let $=A0.npm_config_user_agent;if(!$)return;let J=$.split(" ")[0],Y=J.lastIndexOf("/"),X=J.substring(0,Y);return{name:X==="npminstall"?"cnpm":X,version:J.substring(Y+1)}}var r2=($)=>{return Function("mm","return import(mm)")($)};function K7(){let $=(...J)=>J.some((Y)=>Boolean(A0[Y]));if($("CF_PAGES","CF_PAGES_URL","CF_ACCOUNT_ID")||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers")return"cloudflare";if($("VERCEL","VERCEL_URL","VERCEL_ENV"))return"vercel";if($("NETLIFY","NETLIFY_URL"))return"netlify";if($("RENDER","RENDER_URL","RENDER_INTERNAL_HOSTNAME","RENDER_SERVICE_ID"))return"render";if($("AWS_LAMBDA_FUNCTION_NAME","AWS_EXECUTION_ENV","LAMBDA_TASK_ROOT"))return"aws";if($("GOOGLE_CLOUD_FUNCTION_NAME","GOOGLE_CLOUD_PROJECT","GCP_PROJECT","K_SERVICE"))return"gcp";if($("AZURE_FUNCTION_NAME","FUNCTIONS_WORKER_RUNTIME","WEBSITE_INSTANCE_ID","WEBSITE_SITE_NAME"))return"azure";if($("DENO_DEPLOYMENT_ID","DENO_REGION"))return"deno-deploy";if($("FLY_APP_NAME","FLY_REGION","FLY_ALLOC_ID"))return"fly-io";if($("RAILWAY_STATIC_URL","RAILWAY_ENVIRONMENT_NAME"))return"railway";if($("DYNO","HEROKU_APP_NAME"))return"heroku";if($("DO_DEPLOYMENT_ID","DO_APP_NAME","DIGITALOCEAN"))return"digitalocean";if($("KOYEB","KOYEB_DEPLOYMENT_ID","KOYEB_APP_NAME"))return"koyeb";return null}async function jH$(){try{if(K7()==="cloudflare")return"cloudflare";let $=await r2("os"),J=$.cpus();return{deploymentVendor:K7(),systemPlatform:$.platform(),systemRelease:$.release(),systemArchitecture:$.arch(),cpuCount:J.length,cpuModel:J.length?J[0].model:null,cpuSpeed:J.length?J[0].speed:null,memory:$.totalmem(),isWSL:await TH$(),isDocker:await dl(),isTTY:typeof process<"u"&&process.stdout?process.stdout.isTTY:null}}catch{return{systemPlatform:null,systemRelease:null,systemArchitecture:null,cpuCount:null,cpuModel:null,cpuSpeed:null,memory:null,isWSL:null,isDocker:null,isTTY:null}}}var cR;async function EH$(){if(K7()==="cloudflare")return!1;try{return(await r2("fs")).statSync("/.dockerenv"),!0}catch{return!1}}async function CH$(){if(K7()==="cloudflare")return!1;try{return(await r2("fs")).readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}async function dl(){if(K7()==="cloudflare")return!1;if(cR===void 0)cR=await EH$()||await CH$();return cR}async function TH$(){try{if(K7()==="cloudflare")return!1;if(typeof process>"u"||process?.platform!=="linux")return!1;let $=await r2("fs");if((await r2("os")).release().toLowerCase().includes("microsoft")){if(await gl())return!1;return!0}return $.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!await gl():!1}catch{return!1}}var pR,RH$=async()=>{if(K7()==="cloudflare")return!1;try{return(await r2("fs")).statSync("/run/.containerenv"),!0}catch{return!1}};async function gl(){if(pR===void 0)pR=await RH$()||await dl();return pR}function IH$(){return A0.CI!=="false"&&(("BUILD_ID"in A0)||("BUILD_NUMBER"in A0)||("CI"in A0)||("CI_APP_ID"in A0)||("CI_BUILD_ID"in A0)||("CI_BUILD_NUMBER"in A0)||("CI_NAME"in A0)||("CONTINUOUS_INTEGRATION"in A0)||("RUN_ID"in A0))}function kH$(){if(typeof Deno<"u")return{name:"deno",version:Deno?.version?.deno??null};if(typeof Bun<"u")return{name:"bun",version:Bun?.version??null};if(typeof process<"u"&&process?.versions?.node)return{name:"node",version:process.versions.node??null};return{name:"edge",version:null}}function bH$(){return r0("NODE_ENV")==="production"?"production":IH$()?"ci":OW()?"test":"development"}async function xl($){let J=await S1("SHA-256").digest($);return I6.encode(J)}var vH$=($)=>{return zG("a-z","A-Z","0-9")($||32)},K5=null;async function yl($){if(K5)return K5;let J=await qH$();if(J)return K5=await xl($?$+J:J),K5;if($)return K5=await xl($),K5;return K5=vH$(32),K5}var fH$=async function(){};async function lR($,J){let Y=$.telemetry?.debug||pD("BETTER_AUTH_TELEMETRY_DEBUG",!1),X=Yj.BETTER_AUTH_TELEMETRY_ENDPOINT;if(!X&&!J?.customTrack)return{publish:fH$};let W=async(H)=>{if(J?.customTrack)await J.customTrack(H).catch(C$.error);else if(X)if(Y)C$.info("telemetry event",JSON.stringify(H,null,2));else await U$(X,{method:"POST",body:H}).catch(C$.error)},G=await(async()=>{let H=$.telemetry?.enabled!==void 0?$.telemetry.enabled:!1;return(pD("BETTER_AUTH_TELEMETRY",!1)||H)&&(J?.skipTestCheck||!OW())})(),Q;if(G)Q=await yl($.baseURL),W({type:"init",payload:{config:hl($,J),runtime:kH$(),database:await OH$(),framework:await SH$(),environment:bH$(),systemInfo:await jH$(),packageManager:AH$()},anonymousId:Q});return{publish:async(H)=>{if(!G)return;if(!Q)Q=await yl($.baseURL);await W({type:H.type,payload:H.payload,anonymousId:Q})}}}function gH$($){let J=new Set($).size;if(J===0)return 0;return Math.log2(Math.pow(J,$.length))}function xH$($,J){let Y=$===dR;if(OW())return;if(Y&&BW)throw new q$("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config.");if(!$)throw new q$("BETTER_AUTH_SECRET is missing. Set it in your environment or pass `secret` to betterAuth({ secret }).");if($.length<32)J.warn("[better-auth] Warning: your BETTER_AUTH_SECRET should be at least 32 characters long for adequate security. Generate one with `npx @better-auth/cli secret` or `openssl rand -base64 32`.");if(gH$($)<120)J.warn("[better-auth] Warning: your BETTER_AUTH_SECRET appears low-entropy. Use a randomly generated secret for production.")}async function cl($,J,Y){if(!J.database)J=pV(J,{session:{cookieCache:{enabled:!0,strategy:"jwe",refreshCache:!0}},account:{storeStateStrategy:"cookie",storeAccountCookie:!0}});let X=J.plugins||[],W=vl(J),Z=PW(J.logger),G=mZ(J.baseURL,J.basePath);if(!G)Z.warn("[better-auth] Base URL could not be determined. Please set a valid base URL using the baseURL config option or the BETTER_AUTH_BASE_URL environment variable. Without this, callbacks and redirects may not work correctly.");if($.id==="memory"&&J.advanced?.database?.generateId===!1)Z.error(`[better-auth] Misconfiguration detected.
You are using the memory DB with generateId: false.
This will cause no id to be generated for any model.
Most of the features of Better Auth will not work correctly.`);let Q=J.secret||A0.BETTER_AUTH_SECRET||A0.AUTH_SECRET||dR;xH$(Q,Z),J={...J,secret:Q,baseURL:G?new URL(G).origin:"",basePath:J.basePath||"/api/auth",plugins:X.concat(W)},Il(J,Z);let H=yu(J),z=A1(J),K=Object.entries(J.socialProviders||{}).map(([P,B])=>{if(B==null)return null;if(B.enabled===!1)return null;if(!B.clientId)Z.warn(`Social provider ${P} is missing clientId or clientSecret`);let L=DR[P](B);return L.disableImplicitSignUp=B.disableImplicitSignUp,L}).filter((P)=>P!==null),w=({model:P,size:B})=>{if(typeof J.advanced?.generateId==="function")return J.advanced.generateId({model:P,size:B});let L=J?.advanced?.database?.generateId;if(typeof L==="function")return L({model:P,size:B});if(L==="uuid")return crypto.randomUUID();if(L==="serial"||L===!1)return!1;return T6(B)},{publish:F}=await lR(J,{adapter:$.id,database:typeof J.database==="function"?"adapter":Y(J.database)}),U=await nV(J),V=bl({appName:J.appName||"Better Auth",baseURL:G||"",version:pj(),socialProviders:K,options:J,oauthConfig:{storeStateStrategy:J.account?.storeStateStrategy||(J.database?"database":"cookie"),skipStateCookieCheck:!!J.account?.skipStateCookieCheck},tables:z,trustedOrigins:U,isTrustedOrigin(P,B){return this.trustedOrigins.some((L)=>QM(P,L,B))},sessionConfig:{updateAge:J.session?.updateAge!==void 0?J.session.updateAge:86400,expiresIn:J.session?.expiresIn||604800,freshAge:J.session?.freshAge===void 0?86400:J.session.freshAge,cookieRefreshCache:(()=>{let P=J.session?.cookieCache?.refreshCache,B=J.session?.cookieCache?.maxAge||300;if((!!J.database||!!J.secondaryStorage)&&P)return Z.warn("[better-auth] `session.cookieCache.refreshCache` is enabled while `database` or `secondaryStorage` is configured. `refreshCache` is meant for stateless (DB-less) setups. Disabling `refreshCache` — remove it from your config to silence this warning."),!1;if(P===!1||P===void 0)return!1;if(P===!0)return{enabled:!0,updateAge:Math.floor(B*0.2)};return{enabled:!0,updateAge:P.updateAge!==void 0?P.updateAge:Math.floor(B*0.2)}})()},secret:Q,rateLimit:{...J.rateLimit,enabled:J.rateLimit?.enabled??BW,window:J.rateLimit?.window||10,max:J.rateLimit?.max||100,storage:J.rateLimit?.storage||(J.secondaryStorage?"secondary-storage":"memory")},authCookies:H,logger:Z,generateId:w,session:null,secondaryStorage:J.secondaryStorage,password:{hash:J.emailAndPassword?.password?.hash||Qj,verify:J.emailAndPassword?.password?.verify||Hj,config:{minPasswordLength:J.emailAndPassword?.minPasswordLength||8,maxPasswordLength:J.emailAndPassword?.maxPasswordLength||128},checkPassword:El},setNewSession(P){this.newSession=P},newSession:null,adapter:$,internalAdapter:i2($,{options:J,logger:Z,hooks:J.databaseHooks?[J.databaseHooks]:[],generateId:w}),createAuthCookie:dj(J),async runMigrations(){throw new q$("runMigrations will be set by the specific init implementation")},publishTelemetry:F,skipCSRFCheck:!!J.advanced?.disableCSRFCheck,skipOriginCheck:J.advanced?.disableOriginCheck!==void 0?J.advanced.disableOriginCheck:OW()?!0:!1,runInBackground:J.advanced?.backgroundTasks?.handler??((P)=>{P.catch(()=>{})}),async runInBackgroundOrAwait(P){try{if(J.advanced?.backgroundTasks?.handler){if(P instanceof Promise)J.advanced.backgroundTasks.handler(P.catch((B)=>{Z.error("Failed to run background task:",B)}))}else await P}catch(B){Z.error("Failed to run background task:",B)}},getPlugin:(P)=>J.plugins.find((B)=>B.id===P)??null}),N;if(Y2(V))({context:N}=await V);else({context:N}=V);if(typeof N.options.emailVerification?.onEmailVerification==="function")N.options.emailVerification.onEmailVerification=OG(N.options.emailVerification.onEmailVerification,"Use `afterEmailVerification` instead. This will be removed in 1.5",N.logger);return N}$0();var pl=async($)=>{let J=await kV($),X=await cl(J,$,(W)=>n2(W)||"unknown");return X.runMigrations=async function(){if(!$.database||"updateMany"in $.database)throw new q$("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");let{runMigrations:W}=await gV($);await W()},X};$0();var ll=($,J)=>{let Y=J($),{api:X}=lV(Y,$);return{handler:async(W)=>{let Z=await Y,G=Z.options.basePath||"/api/auth";if(!Z.options.baseURL){let H=mZ(void 0,G,W,void 0,Z.options.advanced?.trustedProxyHeaders);if(H)Z.baseURL=H,Z.options.baseURL=CW(Z.baseURL)||void 0;else throw new q$("Could not get base URL from request. Please provide a valid base URL.")}Z.trustedOrigins=await nV(Z.options,W);let{handler:Q}=kl(Z,$);return aj(Z.adapter,()=>Q(W))},api:X,options:$,$context:Y,$ERROR_CODES:{...$.plugins?.reduce((W,Z)=>{if(Z.$ERROR_CODES)return{...W,...Z.$ERROR_CODES};return W},{}),...V$}}};var nR=($)=>{return ll($,pl)};n0();$0();_0();function q4($){let{msg:J="success",data:Y={}}=$||{};return{message:J,data:Y}}var yH$={validation:"ValidationError",api:"ApiError",service:"ServiceError",internal:"InternalServerError"};class iV extends Error{code;msg;status;data;name;constructor($){super($.msg);this.status=$.code??500,this.msg=$.msg??"",this.name=$.name,this.code=$.code??500,this.data=$.data,Error.captureStackTrace(this)}toResponse(){return q4({msg:this.message,data:this.data})}}class v6 extends iV{constructor($){let J={msg:"",data:[],code:500};if(!$)$=J;let{msg:Y=J.msg,data:X=J.data,code:W=J.code}=$;super({name:yH$.api,msg:Y,data:X,code:W})}}var NJ=q5(AI(),1),ZM0=NJ.default.Client,GM0=NJ.default.Pool,QM0=NJ.default.Connection,HM0=NJ.default.types,zM0=NJ.default.Query,KM0=NJ.default.DatabaseError,wM0=NJ.default.escapeIdentifier,UM0=NJ.default.escapeLiteral,FM0=NJ.default.Result,DM0=NJ.default.TypeOverrides,MM0=NJ.default.defaults,WQ=NJ.default;var m=Symbol.for("drizzle:entityKind");function X$($,J){if(!$||typeof $!=="object")return!1;if($ instanceof J)return!0;if(!Object.prototype.hasOwnProperty.call(J,m))throw Error(`Class "${J.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let Y=Object.getPrototypeOf($).constructor;if(Y)while(Y){if(m in Y&&Y[m]===J[m])return!0;Y=Object.getPrototypeOf(Y)}return!1}class _r{static[m]="ConsoleLogWriter";write($){console.log($)}}class CI{static[m]="DefaultLogger";writer;constructor($){this.writer=$?.writer??new _r}logQuery($,J){let Y=J.map((W)=>{try{return JSON.stringify(W)}catch{return String(W)}}),X=Y.length?` -- params: [${Y.join(", ")}]`:"";this.writer.write(`Query: ${$}${X}`)}}class TI{static[m]="NoopLogger";logQuery(){}}class z1{static[m]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch($){return this.then(void 0,$)}finally($){return this.then((J)=>{return $?.(),J},(J)=>{throw $?.(),J})}then($,J){return this.execute().then($,J)}}class B4{constructor($,J){this.table=$,this.config=J,this.name=J.name,this.keyAsName=J.keyAsName,this.notNull=J.notNull,this.default=J.default,this.defaultFn=J.defaultFn,this.onUpdateFn=J.onUpdateFn,this.hasDefault=J.hasDefault,this.primary=J.primaryKey,this.isUnique=J.isUnique,this.uniqueName=J.uniqueName,this.uniqueType=J.uniqueType,this.dataType=J.dataType,this.columnType=J.columnType,this.generated=J.generated,this.generatedIdentity=J.generatedIdentity}static[m]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue($){return $}mapToDriverValue($){return $}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class RI{static[m]="ColumnBuilder";config;constructor($,J,Y){this.config={name:$,keyAsName:$==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:J,columnType:Y,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default($){return this.config.default=$,this.config.hasDefault=!0,this}$defaultFn($){return this.config.defaultFn=$,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn($){return this.config.onUpdateFn=$,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName($){if(this.config.name!=="")return;this.config.name=$}}var $X=Symbol.for("drizzle:Name");class II{static[m]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor($,J){if(this.reference=()=>{let{name:Y,columns:X,foreignColumns:W}=$();return{name:Y,columns:X,foreignTable:W[0].table,foreignColumns:W}},J)this._onUpdate=J.onUpdate,this._onDelete=J.onDelete}onUpdate($){return this._onUpdate=$===void 0?"no action":$,this}onDelete($){return this._onDelete=$===void 0?"no action":$,this}build($){return new Lr($,this)}}class Lr{constructor($,J){this.table=$,this.reference=J.reference,this.onUpdate=J._onUpdate,this.onDelete=J._onDelete}static[m]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:$,columns:J,foreignColumns:Y}=this.reference(),X=J.map((G)=>G.name),W=Y.map((G)=>G.name),Z=[this.table[$X],...X,Y[0].table[$X],...W];return $??`${Z.join("_")}_fk`}}function QN($,...J){return $(...J)}function qr($,J){return`${$[$X]}_${J.join("_")}_unique`}function Br($,J,Y){for(let X=J;X<$.length;X++){let W=$[X];if(W==="\\"){X++;continue}if(W==='"')return[$.slice(J,X).replace(/\\/g,""),X+1];if(Y)continue;if(W===","||W==="}")return[$.slice(J,X).replace(/\\/g,""),X]}return[$.slice(J).replace(/\\/g,""),$.length]}function Or($,J=0){let Y=[],X=J,W=!1;while(X<$.length){let Z=$[X];if(Z===","){if(W||X===J)Y.push("");W=!0,X++;continue}if(W=!1,Z==="\\"){X+=2;continue}if(Z==='"'){let[H,z]=Br($,X+1,!0);Y.push(H),X=z;continue}if(Z==="}")return[Y,X+1];if(Z==="{"){let[H,z]=Or($,X+1);Y.push(H),X=z;continue}let[G,Q]=Br($,X,!1);Y.push(G),X=Q}return[Y,X]}function Pr($){let[J]=Or($,1);return J}function kI($){return`{${$.map((J)=>{if(Array.isArray(J))return kI(J);if(typeof J==="string")return`"${J.replace(/\\/g,"\\\\").replace(/"/g,"\\\"")}"`;return`${J}`}).join(",")}}`}class R$ extends RI{foreignKeyConfigs=[];static[m]="PgColumnBuilder";array($){return new Ar(this.config.name,this,$)}references($,J={}){return this.foreignKeyConfigs.push({ref:$,actions:J}),this}unique($,J){return this.config.isUnique=!0,this.config.uniqueName=$,this.config.uniqueType=J?.nulls,this}generatedAlwaysAs($){return this.config.generated={as:$,type:"always",mode:"stored"},this}buildForeignKeys($,J){return this.foreignKeyConfigs.map(({ref:Y,actions:X})=>{return QN((W,Z)=>{let G=new II(()=>{let Q=W();return{columns:[$],foreignColumns:[Q]}});if(Z.onUpdate)G.onUpdate(Z.onUpdate);if(Z.onDelete)G.onDelete(Z.onDelete);return G.build(J)},Y,X)})}buildExtraConfigColumn($){return new Sr($,this.config)}}class L$ extends B4{constructor($,J){if(!J.uniqueName)J.uniqueName=qr($,[J.name]);super($,J);this.table=$}static[m]="PgColumn"}class Sr extends L${static[m]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op($){return this.indexConfig.opClass=$,this}}class Hw{static[m]="IndexedColumn";constructor($,J,Y,X){this.name=$,this.keyAsName=J,this.type=Y,this.indexConfig=X}name;keyAsName;type;indexConfig}class Ar extends R${static[m]="PgArrayBuilder";constructor($,J,Y){super($,"array","PgArray");this.config.baseBuilder=J,this.config.size=Y}build($){let J=this.config.baseBuilder.build($);return new bI($,this.config,J)}}class bI extends L${constructor($,J,Y,X){super($,J);this.baseColumn=Y,this.range=X,this.size=J.size}size;static[m]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size==="number"?this.size:""}]`}mapFromDriverValue($){if(typeof $==="string")$=Pr($);return $.map((J)=>this.baseColumn.mapFromDriverValue(J))}mapToDriverValue($,J=!1){let Y=$.map((X)=>X===null?null:X$(this.baseColumn,bI)?this.baseColumn.mapToDriverValue(X,!0):this.baseColumn.mapToDriverValue(X));if(J)return Y;return kI(Y)}}class l3$ extends L${static[m]="PgEnumObjectColumn";enum;enumValues=this.config.enum.enumValues;constructor($,J){super($,J);this.enum=J.enum}getSQLType(){return this.enum.enumName}}var jr=Symbol.for("drizzle:isPgEnum");function Er($){return!!$&&typeof $==="function"&&jr in $&&$[jr]===!0}class n3$ extends L${static[m]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor($,J){super($,J);this.enum=J.enum}getSQLType(){return this.enum.enumName}}class Y6{static[m]="Subquery";constructor($,J,Y,X=!1,W=[]){this._={brand:"Subquery",sql:$,selectedFields:J,alias:Y,isWith:X,usedTables:W}}}class zw extends Y6{static[m]="WithSubquery"}var Cr="0.45.1";var vI,fI,R4={startActiveSpan($,J){if(!vI)return J();if(!fI)fI=vI.trace.getTracer("drizzle-orm",Cr);return QN((Y,X)=>X.startActiveSpan($,(W)=>{try{return J(W)}catch(Z){throw W.setStatus({code:Y.SpanStatusCode.ERROR,message:Z instanceof Error?Z.message:"Unknown error"}),Z}finally{W.end()}}),vI,fI)}};var y4=Symbol.for("drizzle:ViewBaseConfig");var F7=Symbol.for("drizzle:Schema"),HN=Symbol.for("drizzle:Columns"),Tr=Symbol.for("drizzle:ExtraConfigColumns"),gI=Symbol.for("drizzle:OriginalName"),xI=Symbol.for("drizzle:BaseName"),Kw=Symbol.for("drizzle:IsAlias"),Rr=Symbol.for("drizzle:ExtraConfigBuilder"),i3$=Symbol.for("drizzle:IsDrizzleTable");class O${static[m]="Table";static Symbol={Name:$X,Schema:F7,OriginalName:gI,Columns:HN,ExtraConfigColumns:Tr,BaseName:xI,IsAlias:Kw,ExtraConfigBuilder:Rr};[$X];[gI];[F7];[HN];[Tr];[xI];[Kw]=!1;[i3$]=!0;[Rr]=void 0;constructor($,J,Y){this[$X]=this[gI]=$,this[F7]=J,this[xI]=Y}}function x1($){return $[$X]}function D7($){return`${$[F7]??"public"}.${$[$X]}`}function yI($){return $!==null&&$!==void 0&&typeof $.getSQL==="function"}function r3$($){let J={sql:"",params:[]};for(let Y of $)if(J.sql+=Y.sql,J.params.push(...Y.params),Y.typings?.length){if(!J.typings)J.typings=[];J.typings.push(...Y.typings)}return J}class o6{static[m]="StringChunk";value;constructor($){this.value=Array.isArray($)?$:[$]}getSQL(){return new j$([this])}}class j${constructor($){this.queryChunks=$;for(let J of $)if(X$(J,O$)){let Y=J[O$.Symbol.Schema];this.usedTables.push(Y===void 0?J[O$.Symbol.Name]:Y+"."+J[O$.Symbol.Name])}}static[m]="SQL";decoder=kr;shouldInlineParams=!1;usedTables=[];append($){return this.queryChunks.push(...$.queryChunks),this}toQuery($){return R4.startActiveSpan("drizzle.buildSQL",(J)=>{let Y=this.buildQueryFromSourceParams(this.queryChunks,$);return J?.setAttributes({"drizzle.query.text":Y.sql,"drizzle.query.params":JSON.stringify(Y.params)}),Y})}buildQueryFromSourceParams($,J){let Y=Object.assign({},J,{inlineParams:J.inlineParams||this.shouldInlineParams,paramStartIndex:J.paramStartIndex||{value:0}}),{casing:X,escapeName:W,escapeParam:Z,prepareTyping:G,inlineParams:Q,paramStartIndex:H}=Y;return r3$($.map((z)=>{if(X$(z,o6))return{sql:z.value.join(""),params:[]};if(X$(z,zN))return{sql:W(z.value),params:[]};if(z===void 0)return{sql:"",params:[]};if(Array.isArray(z)){let K=[new o6("(")];for(let[w,F]of z.entries())if(K.push(F),w<z.length-1)K.push(new o6(", "));return K.push(new o6(")")),this.buildQueryFromSourceParams(K,Y)}if(X$(z,j$))return this.buildQueryFromSourceParams(z.queryChunks,{...Y,inlineParams:Q||z.shouldInlineParams});if(X$(z,O$)){let K=z[O$.Symbol.Schema],w=z[O$.Symbol.Name];return{sql:K===void 0||z[Kw]?W(w):W(K)+"."+W(w),params:[]}}if(X$(z,B4)){let K=X.getColumnCasing(z);if(J.invokeSource==="indexes")return{sql:W(K),params:[]};let w=z.table[O$.Symbol.Schema];return{sql:z.table[Kw]||w===void 0?W(z.table[O$.Symbol.Name])+"."+W(K):W(w)+"."+W(z.table[O$.Symbol.Name])+"."+W(K),params:[]}}if(X$(z,y1)){let K=z[y4].schema,w=z[y4].name;return{sql:K===void 0||z[y4].isAlias?W(w):W(K)+"."+W(w),params:[]}}if(X$(z,_J)){if(X$(z.value,D5))return{sql:Z(H.value++,z),params:[z],typings:["none"]};let K=z.value===null?null:z.encoder.mapToDriverValue(z.value);if(X$(K,j$))return this.buildQueryFromSourceParams([K],Y);if(Q)return{sql:this.mapInlineParam(K,Y),params:[]};let w=["none"];if(G)w=[G(z.encoder)];return{sql:Z(H.value++,K),params:[K],typings:w}}if(X$(z,D5))return{sql:Z(H.value++,z),params:[z],typings:["none"]};if(X$(z,j$.Aliased)&&z.fieldAlias!==void 0)return{sql:W(z.fieldAlias),params:[]};if(X$(z,Y6)){if(z._.isWith)return{sql:W(z._.alias),params:[]};return this.buildQueryFromSourceParams([new o6("("),z._.sql,new o6(") "),new zN(z._.alias)],Y)}if(Er(z)){if(z.schema)return{sql:W(z.schema)+"."+W(z.enumName),params:[]};return{sql:W(z.enumName),params:[]}}if(yI(z)){if(z.shouldOmitSQLParens?.())return this.buildQueryFromSourceParams([z.getSQL()],Y);return this.buildQueryFromSourceParams([new o6("("),z.getSQL(),new o6(")")],Y)}if(Q)return{sql:this.mapInlineParam(z,Y),params:[]};return{sql:Z(H.value++,z),params:[z],typings:["none"]}}))}mapInlineParam($,{escapeString:J}){if($===null)return"null";if(typeof $==="number"||typeof $==="boolean")return $.toString();if(typeof $==="string")return J($);if(typeof $==="object"){let Y=$.toString();if(Y==="[object Object]")return J(JSON.stringify($));return J(Y)}throw Error("Unexpected param value: "+$)}getSQL(){return this}as($){if($===void 0)return this;return new j$.Aliased(this,$)}mapWith($){return this.decoder=typeof $==="function"?{mapFromDriverValue:$}:$,this}inlineParams(){return this.shouldInlineParams=!0,this}if($){return $?this:void 0}}class zN{constructor($){this.value=$}static[m]="Name";brand;getSQL(){return new j$([this])}}function Ir($){return typeof $==="object"&&$!==null&&"mapToDriverValue"in $&&typeof $.mapToDriverValue==="function"}var kr={mapFromDriverValue:($)=>$},br={mapToDriverValue:($)=>$},HV0={...kr,...br};class _J{constructor($,J=br){this.value=$,this.encoder=J}static[m]="Param";brand;getSQL(){return new j$([this])}}function d($,...J){let Y=[];if(J.length>0||$.length>0&&$[0]!=="")Y.push(new o6($[0]));for(let[X,W]of J.entries())Y.push(W,new o6($[X+1]));return new j$(Y)}(($)=>{function J(){return new j$([])}$.empty=J;function Y(H){return new j$(H)}$.fromList=Y;function X(H){return new j$([new o6(H)])}$.raw=X;function W(H,z){let K=[];for(let[w,F]of H.entries()){if(w>0&&z!==void 0)K.push(z);K.push(F)}return new j$(K)}$.join=W;function Z(H){return new zN(H)}$.identifier=Z;function G(H){return new D5(H)}$.placeholder=G;function Q(H,z){return new _J(H,z)}$.param=Q})(d||(d={}));(($)=>{class J{constructor(Y,X){this.sql=Y,this.fieldAlias=X}static[m]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new J(this.sql,this.fieldAlias)}}$.Aliased=J})(j$||(j$={}));class D5{constructor($){this.name=$}static[m]="Placeholder";getSQL(){return new j$([this])}}function hI($,J){return $.map((Y)=>{if(X$(Y,D5)){if(!(Y.name in J))throw Error(`No value for placeholder "${Y.name}" was provided`);return J[Y.name]}if(X$(Y,_J)&&X$(Y.value,D5)){if(!(Y.value.name in J))throw Error(`No value for placeholder "${Y.value.name}" was provided`);return Y.encoder.mapToDriverValue(J[Y.value.name])}return Y})}var o3$=Symbol.for("drizzle:IsDrizzleView");class y1{static[m]="View";[y4];[o3$]=!0;constructor({name:$,schema:J,selectedFields:Y,query:X}){this[y4]={name:$,originalName:$,schema:J,selectedFields:Y,query:X,isExisting:!X,isAlias:!1}}getSQL(){return new j$([this])}}B4.prototype.getSQL=function(){return new j$([this])};O$.prototype.getSQL=function(){return new j$([this])};Y6.prototype.getSQL=function(){return new j$([this])};class ZQ{constructor($){this.table=$}static[m]="ColumnAliasProxyHandler";get($,J){if(J==="table")return this.table;return $[J]}}class ww{constructor($,J){this.alias=$,this.replaceOriginalName=J}static[m]="TableAliasProxyHandler";get($,J){if(J===O$.Symbol.IsAlias)return!0;if(J===O$.Symbol.Name)return this.alias;if(this.replaceOriginalName&&J===O$.Symbol.OriginalName)return this.alias;if(J===y4)return{...$[y4],name:this.alias,isAlias:!0};if(J===O$.Symbol.Columns){let X=$[O$.Symbol.Columns];if(!X)return X;let W={};return Object.keys(X).map((Z)=>{W[Z]=new Proxy(X[Z],new ZQ(new Proxy($,this)))}),W}let Y=$[J];if(X$(Y,B4))return new Proxy(Y,new ZQ(new Proxy($,this)));return Y}}function KN($,J){return new Proxy($,new ww(J,!1))}function yX($,J){return new Proxy($,new ZQ(new Proxy($.table,new ww(J,!1))))}function mI($,J){return new j$.Aliased(Uw($.sql,J),$.fieldAlias)}function Uw($,J){return d.join($.queryChunks.map((Y)=>{if(X$(Y,B4))return yX(Y,J);if(X$(Y,j$))return Uw(Y,J);if(X$(Y,j$.Aliased))return mI(Y,J);return Y}))}class S6{static[m]="SelectionProxyHandler";config;constructor($){this.config={...$}}get($,J){if(J==="_")return{...$._,selectedFields:new Proxy($._.selectedFields,this)};if(J===y4)return{...$[y4],selectedFields:new Proxy($[y4].selectedFields,this)};if(typeof J==="symbol")return $[J];let X=(X$($,Y6)?$._.selectedFields:X$($,y1)?$[y4].selectedFields:$)[J];if(X$(X,j$.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!X.isSelectionField)return X.sql;let W=X.clone();return W.isSelectionField=!0,W}if(X$(X,j$)){if(this.config.sqlBehavior==="sql")return X;throw Error(`You tried to reference "${J}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}if(X$(X,B4)){if(this.config.alias)return new Proxy(X,new ZQ(new Proxy(X.table,new ww(this.config.alias,this.config.replaceOriginalName??!1))));return X}if(typeof X!=="object"||X===null)return X;return new Proxy(X,new S6(this.config))}}function vr($,J,Y){let X={},W=$.reduce((Z,{path:G,field:Q},H)=>{let z;if(X$(Q,B4))z=Q;else if(X$(Q,j$))z=Q.decoder;else if(X$(Q,Y6))z=Q._.sql.decoder;else z=Q.sql.decoder;let K=Z;for(let[w,F]of G.entries())if(w<G.length-1){if(!(F in K))K[F]={};K=K[F]}else{let U=J[H],V=K[F]=U===null?null:z.mapFromDriverValue(U);if(Y&&X$(Q,B4)&&G.length===2){let N=G[0];if(!(N in X))X[N]=V===null?x1(Q.table):!1;else if(typeof X[N]==="string"&&X[N]!==x1(Q.table))X[N]=!1}}return Z},{});if(Y&&Object.keys(X).length>0){for(let[Z,G]of Object.entries(X))if(typeof G==="string"&&!Y[G])W[Z]=null}return W}function iJ($,J){return Object.entries($).reduce((Y,[X,W])=>{if(typeof X!=="string")return Y;let Z=J?[...J,X]:[X];if(X$(W,B4)||X$(W,j$)||X$(W,j$.Aliased)||X$(W,Y6))Y.push({path:Z,field:W});else if(X$(W,O$))Y.push(...iJ(W[O$.Symbol.Columns],Z));else Y.push(...iJ(W,Z));return Y},[])}function Fw($,J){let Y=Object.keys($),X=Object.keys(J);if(Y.length!==X.length)return!1;for(let[W,Z]of Y.entries())if(Z!==X[W])return!1;return!0}function wN($,J){let Y=Object.entries(J).filter(([,X])=>X!==void 0).map(([X,W])=>{if(X$(W,j$)||X$(W,B4))return[X,W];else return[X,new _J(W,$[O$.Symbol.Columns][X])]});if(Y.length===0)throw Error("No values to set");return Object.fromEntries(Y)}function fr($,J){for(let Y of J)for(let X of Object.getOwnPropertyNames(Y.prototype)){if(X==="constructor")continue;Object.defineProperty($.prototype,X,Object.getOwnPropertyDescriptor(Y.prototype,X)||Object.create(null))}}function gr($){return $[O$.Symbol.Columns]}function iW($){return X$($,Y6)?$._.alias:X$($,y1)?$[y4].name:X$($,j$)?void 0:$[O$.Symbol.IsAlias]?$[O$.Symbol.Name]:$[O$.Symbol.BaseName]}function E0($,J){return{name:typeof $==="string"&&$.length>0?$:"",config:typeof $==="object"?$:J}}function xr($){if(typeof $!=="object"||$===null)return!1;if($.constructor.name!=="Object")return!1;if("logger"in $){let J=typeof $.logger;if(J!=="boolean"&&(J!=="object"||typeof $.logger.logQuery!=="function")&&J!=="undefined")return!1;return!0}if("schema"in $){let J=typeof $.schema;if(J!=="object"&&J!=="undefined")return!1;return!0}if("casing"in $){let J=typeof $.casing;if(J!=="string"&&J!=="undefined")return!1;return!0}if("mode"in $){if($.mode!=="default"||$.mode!=="planetscale"||$.mode!==void 0)return!1;return!0}if("connection"in $){let J=typeof $.connection;if(J!=="string"&&J!=="object"&&J!=="undefined")return!1;return!0}if("client"in $){let J=typeof $.client;if(J!=="object"&&J!=="function"&&J!=="undefined")return!1;return!0}if(Object.keys($).length===0)return!0;return!1}class M5 extends R${static[m]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity($){if($){let{name:J,...Y}=$;this.config.generatedIdentity={type:"always",sequenceName:J,sequenceOptions:Y}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity($){if($){let{name:J,...Y}=$;this.config.generatedIdentity={type:"byDefault",sequenceName:J,sequenceOptions:Y}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}class yr extends M5{static[m]="PgBigInt53Builder";constructor($){super($,"number","PgBigInt53")}build($){return new hr($,this.config)}}class hr extends L${static[m]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue($){if(typeof $==="number")return $;return Number($)}}class mr extends M5{static[m]="PgBigInt64Builder";constructor($){super($,"bigint","PgBigInt64")}build($){return new ur($,this.config)}}class ur extends L${static[m]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue($){return BigInt($)}}function dr($,J){let{name:Y,config:X}=E0($,J);if(X.mode==="number")return new yr(Y);return new mr(Y)}class cr extends R${static[m]="PgBigSerial53Builder";constructor($){super($,"number","PgBigSerial53");this.config.hasDefault=!0,this.config.notNull=!0}build($){return new pr($,this.config)}}class pr extends L${static[m]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue($){if(typeof $==="number")return $;return Number($)}}class lr extends R${static[m]="PgBigSerial64Builder";constructor($){super($,"bigint","PgBigSerial64");this.config.hasDefault=!0}build($){return new nr($,this.config)}}class nr extends L${static[m]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue($){return BigInt($)}}function ir($,J){let{name:Y,config:X}=E0($,J);if(X.mode==="number")return new cr(Y);return new lr(Y)}class rr extends R${static[m]="PgBooleanBuilder";constructor($){super($,"boolean","PgBoolean")}build($){return new or($,this.config)}}class or extends L${static[m]="PgBoolean";getSQLType(){return"boolean"}}function GQ($){return new rr($??"")}class tr extends R${static[m]="PgCharBuilder";constructor($,J){super($,"string","PgChar");this.config.length=J.length,this.config.enumValues=J.enum}build($){return new ar($,this.config)}}class ar extends L${static[m]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}function sr($,J={}){let{name:Y,config:X}=E0($,J);return new tr(Y,X)}class er extends R${static[m]="PgCidrBuilder";constructor($){super($,"string","PgCidr")}build($){return new $o($,this.config)}}class $o extends L${static[m]="PgCidr";getSQLType(){return"cidr"}}function Jo($){return new er($??"")}class Yo extends R${static[m]="PgCustomColumnBuilder";constructor($,J,Y){super($,"custom","PgCustomColumn");this.config.fieldConfig=J,this.config.customTypeParams=Y}build($){return new Xo($,this.config)}}class Xo extends L${static[m]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor($,J){super($,J);this.sqlName=J.customTypeParams.dataType(J.fieldConfig),this.mapTo=J.customTypeParams.toDriver,this.mapFrom=J.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue($){return typeof this.mapFrom==="function"?this.mapFrom($):$}mapToDriverValue($){return typeof this.mapTo==="function"?this.mapTo($):$}}function Wo($){return(J,Y)=>{let{name:X,config:W}=E0(J,Y);return new Yo(X,W,$)}}class rW extends R${static[m]="PgDateColumnBaseBuilder";defaultNow(){return this.default(d`now()`)}}class Zo extends rW{static[m]="PgDateBuilder";constructor($){super($,"date","PgDate")}build($){return new UN($,this.config)}}class UN extends L${static[m]="PgDate";getSQLType(){return"date"}mapFromDriverValue($){if(typeof $==="string")return new Date($);return $}mapToDriverValue($){return $.toISOString()}}class Go extends rW{static[m]="PgDateStringBuilder";constructor($){super($,"string","PgDateString")}build($){return new FN($,this.config)}}class FN extends L${static[m]="PgDateString";getSQLType(){return"date"}mapFromDriverValue($){if(typeof $==="string")return $;return $.toISOString().slice(0,-14)}}function Qo($,J){let{name:Y,config:X}=E0($,J);if(X?.mode==="date")return new Zo(Y);return new Go(Y)}class Ho extends R${static[m]="PgDoublePrecisionBuilder";constructor($){super($,"number","PgDoublePrecision")}build($){return new zo($,this.config)}}class zo extends L${static[m]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue($){if(typeof $==="string")return Number.parseFloat($);return $}}function Ko($){return new Ho($??"")}class wo extends R${static[m]="PgInetBuilder";constructor($){super($,"string","PgInet")}build($){return new Uo($,this.config)}}class Uo extends L${static[m]="PgInet";getSQLType(){return"inet"}}function Fo($){return new wo($??"")}class Do extends M5{static[m]="PgIntegerBuilder";constructor($){super($,"number","PgInteger")}build($){return new Mo($,this.config)}}class Mo extends L${static[m]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue($){if(typeof $==="string")return Number.parseInt($);return $}}function Vo($){return new Do($??"")}class No extends R${static[m]="PgIntervalBuilder";constructor($,J){super($,"string","PgInterval");this.config.intervalConfig=J}build($){return new _o($,this.config)}}class _o extends L${static[m]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let $=this.fields?` ${this.fields}`:"",J=this.precision?`(${this.precision})`:"";return`interval${$}${J}`}}function Lo($,J={}){let{name:Y,config:X}=E0($,J);return new No(Y,X)}class qo extends R${static[m]="PgJsonBuilder";constructor($){super($,"json","PgJson")}build($){return new DN($,this.config)}}class DN extends L${static[m]="PgJson";constructor($,J){super($,J)}getSQLType(){return"json"}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){if(typeof $==="string")try{return JSON.parse($)}catch{return $}return $}}function Bo($){return new qo($??"")}class Oo extends R${static[m]="PgJsonbBuilder";constructor($){super($,"json","PgJsonb")}build($){return new MN($,this.config)}}class MN extends L${static[m]="PgJsonb";constructor($,J){super($,J)}getSQLType(){return"jsonb"}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){if(typeof $==="string")try{return JSON.parse($)}catch{return $}return $}}function Po($){return new Oo($??"")}class So extends R${static[m]="PgLineBuilder";constructor($){super($,"array","PgLine")}build($){return new Ao($,this.config)}}class Ao extends L${static[m]="PgLine";getSQLType(){return"line"}mapFromDriverValue($){let[J,Y,X]=$.slice(1,-1).split(",");return[Number.parseFloat(J),Number.parseFloat(Y),Number.parseFloat(X)]}mapToDriverValue($){return`{${$[0]},${$[1]},${$[2]}}`}}class jo extends R${static[m]="PgLineABCBuilder";constructor($){super($,"json","PgLineABC")}build($){return new Eo($,this.config)}}class Eo extends L${static[m]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue($){let[J,Y,X]=$.slice(1,-1).split(",");return{a:Number.parseFloat(J),b:Number.parseFloat(Y),c:Number.parseFloat(X)}}mapToDriverValue($){return`{${$.a},${$.b},${$.c}}`}}function Co($,J){let{name:Y,config:X}=E0($,J);if(!X?.mode||X.mode==="tuple")return new So(Y);return new jo(Y)}class To extends R${static[m]="PgMacaddrBuilder";constructor($){super($,"string","PgMacaddr")}build($){return new Ro($,this.config)}}class Ro extends L${static[m]="PgMacaddr";getSQLType(){return"macaddr"}}function Io($){return new To($??"")}class ko extends R${static[m]="PgMacaddr8Builder";constructor($){super($,"string","PgMacaddr8")}build($){return new bo($,this.config)}}class bo extends L${static[m]="PgMacaddr8";getSQLType(){return"macaddr8"}}function vo($){return new ko($??"")}class fo extends R${static[m]="PgNumericBuilder";constructor($,J,Y){super($,"string","PgNumeric");this.config.precision=J,this.config.scale=Y}build($){return new VN($,this.config)}}class VN extends L${static[m]="PgNumeric";precision;scale;constructor($,J){super($,J);this.precision=J.precision,this.scale=J.scale}mapFromDriverValue($){if(typeof $==="string")return $;return String($)}getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}class go extends R${static[m]="PgNumericNumberBuilder";constructor($,J,Y){super($,"number","PgNumericNumber");this.config.precision=J,this.config.scale=Y}build($){return new xo($,this.config)}}class xo extends L${static[m]="PgNumericNumber";precision;scale;constructor($,J){super($,J);this.precision=J.precision,this.scale=J.scale}mapFromDriverValue($){if(typeof $==="number")return $;return Number($)}mapToDriverValue=String;getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}class yo extends R${static[m]="PgNumericBigIntBuilder";constructor($,J,Y){super($,"bigint","PgNumericBigInt");this.config.precision=J,this.config.scale=Y}build($){return new ho($,this.config)}}class ho extends L${static[m]="PgNumericBigInt";precision;scale;constructor($,J){super($,J);this.precision=J.precision,this.scale=J.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){if(this.precision!==void 0&&this.scale!==void 0)return`numeric(${this.precision}, ${this.scale})`;else if(this.precision===void 0)return"numeric";else return`numeric(${this.precision})`}}function mo($,J){let{name:Y,config:X}=E0($,J),W=X?.mode;return W==="number"?new go(Y,X?.precision,X?.scale):W==="bigint"?new yo(Y,X?.precision,X?.scale):new fo(Y,X?.precision,X?.scale)}class uo extends R${static[m]="PgPointTupleBuilder";constructor($){super($,"array","PgPointTuple")}build($){return new co($,this.config)}}class co extends L${static[m]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue($){if(typeof $==="string"){let[J,Y]=$.slice(1,-1).split(",");return[Number.parseFloat(J),Number.parseFloat(Y)]}return[$.x,$.y]}mapToDriverValue($){return`(${$[0]},${$[1]})`}}class po extends R${static[m]="PgPointObjectBuilder";constructor($){super($,"json","PgPointObject")}build($){return new lo($,this.config)}}class lo extends L${static[m]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue($){if(typeof $==="string"){let[J,Y]=$.slice(1,-1).split(",");return{x:Number.parseFloat(J),y:Number.parseFloat(Y)}}return $}mapToDriverValue($){return`(${$.x},${$.y})`}}function no($,J){let{name:Y,config:X}=E0($,J);if(!X?.mode||X.mode==="tuple")return new uo(Y);return new po(Y)}function t3$($){let J=[];for(let Y=0;Y<$.length;Y+=2)J.push(Number.parseInt($.slice(Y,Y+2),16));return new Uint8Array(J)}function io($,J){let Y=new ArrayBuffer(8),X=new DataView(Y);for(let W=0;W<8;W++)X.setUint8(W,$[J+W]);return X.getFloat64(0,!0)}function uI($){let J=t3$($),Y=0,X=J[Y];Y+=1;let W=new DataView(J.buffer),Z=W.getUint32(Y,X===1);Y+=4;let G;if(Z&536870912)G=W.getUint32(Y,X===1),Y+=4;if((Z&65535)===1){let Q=io(J,Y);Y+=8;let H=io(J,Y);return Y+=8,[Q,H]}throw Error("Unsupported geometry type")}class ro extends R${static[m]="PgGeometryBuilder";constructor($){super($,"array","PgGeometry")}build($){return new oo($,this.config)}}class oo extends L${static[m]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue($){return uI($)}mapToDriverValue($){return`point(${$[0]} ${$[1]})`}}class to extends R${static[m]="PgGeometryObjectBuilder";constructor($){super($,"json","PgGeometryObject")}build($){return new ao($,this.config)}}class ao extends L${static[m]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue($){let J=uI($);return{x:J[0],y:J[1]}}mapToDriverValue($){return`point(${$.x} ${$.y})`}}function so($,J){let{name:Y,config:X}=E0($,J);if(!X?.mode||X.mode==="tuple")return new ro(Y);return new to(Y)}class eo extends R${static[m]="PgRealBuilder";constructor($,J){super($,"number","PgReal");this.config.length=J}build($){return new $t($,this.config)}}class $t extends L${static[m]="PgReal";constructor($,J){super($,J)}getSQLType(){return"real"}mapFromDriverValue=($)=>{if(typeof $==="string")return Number.parseFloat($);return $}}function Jt($){return new eo($??"")}class Yt extends R${static[m]="PgSerialBuilder";constructor($){super($,"number","PgSerial");this.config.hasDefault=!0,this.config.notNull=!0}build($){return new Xt($,this.config)}}class Xt extends L${static[m]="PgSerial";getSQLType(){return"serial"}}function Wt($){return new Yt($??"")}class Zt extends M5{static[m]="PgSmallIntBuilder";constructor($){super($,"number","PgSmallInt")}build($){return new Gt($,this.config)}}class Gt extends L${static[m]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=($)=>{if(typeof $==="string")return Number($);return $}}function Qt($){return new Zt($??"")}class Ht extends R${static[m]="PgSmallSerialBuilder";constructor($){super($,"number","PgSmallSerial");this.config.hasDefault=!0,this.config.notNull=!0}build($){return new zt($,this.config)}}class zt extends L${static[m]="PgSmallSerial";getSQLType(){return"smallserial"}}function Kt($){return new Ht($??"")}class wt extends R${static[m]="PgTextBuilder";constructor($,J){super($,"string","PgText");this.config.enumValues=J.enum}build($){return new Ut($,this.config)}}class Ut extends L${static[m]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function F$($,J={}){let{name:Y,config:X}=E0($,J);return new wt(Y,X)}class Ft extends rW{constructor($,J,Y){super($,"string","PgTime");this.withTimezone=J,this.precision=Y,this.config.withTimezone=J,this.config.precision=Y}static[m]="PgTimeBuilder";build($){return new NN($,this.config)}}class NN extends L${static[m]="PgTime";withTimezone;precision;constructor($,J){super($,J);this.withTimezone=J.withTimezone,this.precision=J.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}function Dt($,J={}){let{name:Y,config:X}=E0($,J);return new Ft(Y,X.withTimezone??!1,X.precision)}class Mt extends rW{static[m]="PgTimestampBuilder";constructor($,J,Y){super($,"date","PgTimestamp");this.config.withTimezone=J,this.config.precision=Y}build($){return new _N($,this.config)}}class _N extends L${static[m]="PgTimestamp";withTimezone;precision;constructor($,J){super($,J);this.withTimezone=J.withTimezone,this.precision=J.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue($){if(typeof $==="string")return new Date(this.withTimezone?$:$+"+0000");return $}mapToDriverValue=($)=>{return $.toISOString()}}class Vt extends rW{static[m]="PgTimestampStringBuilder";constructor($,J,Y){super($,"string","PgTimestampString");this.config.withTimezone=J,this.config.precision=Y}build($){return new LN($,this.config)}}class LN extends L${static[m]="PgTimestampString";withTimezone;precision;constructor($,J){super($,J);this.withTimezone=J.withTimezone,this.precision=J.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue($){if(typeof $==="string")return $;let J=$.toISOString().slice(0,-1).replace("T"," ");if(this.withTimezone){let Y=$.getTimezoneOffset(),X=Y<=0?"+":"-";return`${J}${X}${Math.floor(Math.abs(Y)/60).toString().padStart(2,"0")}`}return J}}function k0($,J={}){let{name:Y,config:X}=E0($,J);if(X?.mode==="string")return new Vt(Y,X.withTimezone??!1,X.precision);return new Mt(Y,X?.withTimezone??!1,X?.precision)}class Nt extends R${static[m]="PgUUIDBuilder";constructor($){super($,"string","PgUUID")}defaultRandom(){return this.default(d`gen_random_uuid()`)}build($){return new qN($,this.config)}}class qN extends L${static[m]="PgUUID";getSQLType(){return"uuid"}}function _t($){return new Nt($??"")}class Lt extends R${static[m]="PgVarcharBuilder";constructor($,J){super($,"string","PgVarchar");this.config.length=J.length,this.config.enumValues=J.enum}build($){return new qt($,this.config)}}class qt extends L${static[m]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}function Bt($,J={}){let{name:Y,config:X}=E0($,J);return new Lt(Y,X)}class Ot extends R${static[m]="PgBinaryVectorBuilder";constructor($,J){super($,"string","PgBinaryVector");this.config.dimensions=J.dimensions}build($){return new Pt($,this.config)}}class Pt extends L${static[m]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function St($,J){let{name:Y,config:X}=E0($,J);return new Ot(Y,X)}class At extends R${static[m]="PgHalfVectorBuilder";constructor($,J){super($,"array","PgHalfVector");this.config.dimensions=J.dimensions}build($){return new jt($,this.config)}}class jt extends L${static[m]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){return $.slice(1,-1).split(",").map((J)=>Number.parseFloat(J))}}function Et($,J){let{name:Y,config:X}=E0($,J);return new At(Y,X)}class Ct extends R${static[m]="PgSparseVectorBuilder";constructor($,J){super($,"string","PgSparseVector");this.config.dimensions=J.dimensions}build($){return new Tt($,this.config)}}class Tt extends L${static[m]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function Rt($,J){let{name:Y,config:X}=E0($,J);return new Ct(Y,X)}class It extends R${static[m]="PgVectorBuilder";constructor($,J){super($,"array","PgVector");this.config.dimensions=J.dimensions}build($){return new kt($,this.config)}}class kt extends L${static[m]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue($){return JSON.stringify($)}mapFromDriverValue($){return $.slice(1,-1).split(",").map((J)=>Number.parseFloat(J))}}function bt($,J){let{name:Y,config:X}=E0($,J);return new It(Y,X)}function vt(){return{bigint:dr,bigserial:ir,boolean:GQ,char:sr,cidr:Jo,customType:Wo,date:Qo,doublePrecision:Ko,inet:Fo,integer:Vo,interval:Lo,json:Bo,jsonb:Po,line:Co,macaddr:Io,macaddr8:vo,numeric:mo,point:no,geometry:so,real:Jt,serial:Wt,smallint:Qt,smallserial:Kt,text:F$,time:Dt,timestamp:k0,uuid:_t,varchar:Bt,bit:St,halfvec:Et,sparsevec:Rt,vector:bt}}var dI=Symbol.for("drizzle:PgInlineForeignKeys"),ft=Symbol.for("drizzle:EnableRLS");class t6 extends O${static[m]="PgTable";static Symbol=Object.assign({},O$.Symbol,{InlineForeignKeys:dI,EnableRLS:ft});[dI]=[];[ft]=!1;[O$.Symbol.ExtraConfigBuilder]=void 0;[O$.Symbol.ExtraConfigColumns]={}}function a3$($,J,Y,X,W=$){let Z=new t6($,X,W),G=typeof J==="function"?J(vt()):J,Q=Object.fromEntries(Object.entries(G).map(([K,w])=>{let F=w;F.setName(K);let U=F.build(Z);return Z[dI].push(...F.buildForeignKeys(U,Z)),[K,U]})),H=Object.fromEntries(Object.entries(G).map(([K,w])=>{let F=w;F.setName(K);let U=F.buildExtraConfigColumn(Z);return[K,U]})),z=Object.assign(Z,Q);if(z[O$.Symbol.Columns]=Q,z[O$.Symbol.ExtraConfigColumns]=H,Y)z[t6.Symbol.ExtraConfigBuilder]=Y;return Object.assign(z,{enableRLS:()=>{return z[t6.Symbol.EnableRLS]=!0,z}})}var r8=($,J,Y)=>{return a3$($,J,Y,void 0)};class gt{constructor($,J){this.unique=$,this.name=J}static[m]="PgIndexBuilderOn";on(...$){return new BN($.map((J)=>{if(X$(J,j$))return J;J=J;let Y=new Hw(J.name,!!J.keyAsName,J.columnType,J.indexConfig);return J.indexConfig=JSON.parse(JSON.stringify(J.defaultConfig)),Y}),this.unique,!1,this.name)}onOnly(...$){return new BN($.map((J)=>{if(X$(J,j$))return J;J=J;let Y=new Hw(J.name,!!J.keyAsName,J.columnType,J.indexConfig);return J.indexConfig=J.defaultConfig,Y}),this.unique,!0,this.name)}using($,...J){return new BN(J.map((Y)=>{if(X$(Y,j$))return Y;Y=Y;let X=new Hw(Y.name,!!Y.keyAsName,Y.columnType,Y.indexConfig);return Y.indexConfig=JSON.parse(JSON.stringify(Y.defaultConfig)),X}),this.unique,!0,this.name,$)}}class BN{static[m]="PgIndexBuilder";config;constructor($,J,Y,X,W="btree"){this.config={name:X,columns:$,unique:J,only:Y,method:W}}concurrently(){return this.config.concurrently=!0,this}with($){return this.config.with=$,this}where($){return this.config.where=$,this}build($){return new xt(this.config,$)}}class xt{static[m]="PgIndex";config;constructor($,J){this.config={...$,table:J}}}function h1($){return new gt(!1,$)}class cI{static[m]="PgPrimaryKeyBuilder";columns;name;constructor($,J){this.columns=$,this.name=J}build($){return new yt($,this.columns,this.name)}}class yt{constructor($,J,Y){this.table=$,this.columns=J,this.name=Y}static[m]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[t6.Symbol.Name]}_${this.columns.map(($)=>$.name).join("_")}_pk`}}function s3$($){return($.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map((Y)=>Y.toLowerCase()).join("_")}function e3$($){return($.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((Y,X,W)=>{let Z=W===0?X.toLowerCase():`${X[0].toUpperCase()}${X.slice(1)}`;return Y+Z},"")}function $U$($){return $}class pI{static[m]="CasingCache";cache={};cachedTables={};convert;constructor($){this.convert=$==="snake_case"?s3$:$==="camelCase"?e3$:$U$}getColumnCasing($){if(!$.keyAsName)return $.name;let J=$.table[O$.Symbol.Schema]??"public",Y=$.table[O$.Symbol.OriginalName],X=`${J}.${Y}.${$.name}`;if(!this.cache[X])this.cacheTable($.table);return this.cache[X]}cacheTable($){let J=$[O$.Symbol.Schema]??"public",Y=$[O$.Symbol.OriginalName],X=`${J}.${Y}`;if(!this.cachedTables[X]){for(let W of Object.values($[O$.Symbol.Columns])){let Z=`${X}.${W.name}`;this.cache[Z]=this.convert(W.name)}this.cachedTables[X]=!0}}clearCache(){this.cache={},this.cachedTables={}}}class ON extends Error{static[m]="DrizzleError";constructor({message:$,cause:J}){super($);this.name="DrizzleError",this.cause=J}}class oW extends Error{constructor($,J,Y){super(`Failed query: ${$}
params: ${J}`);if(this.query=$,this.params=J,this.cause=Y,Error.captureStackTrace(this,oW),Y)this.cause=Y}}class lI extends ON{static[m]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}function m1($,J){if(Ir(J)&&!yI($)&&!X$($,_J)&&!X$($,D5)&&!X$($,B4)&&!X$($,O$)&&!X$($,y1))return new _J($,J);return $}var h0=($,J)=>{return d`${$} = ${m1(J,$)}`},QQ=($,J)=>{return d`${$} <> ${m1(J,$)}`};function M7(...$){let J=$.filter((Y)=>Y!==void 0);if(J.length===0)return;if(J.length===1)return new j$(J);return new j$([new o6("("),d.join(J,new o6(" and ")),new o6(")")])}function PN(...$){let J=$.filter((Y)=>Y!==void 0);if(J.length===0)return;if(J.length===1)return new j$(J);return new j$([new o6("("),d.join(J,new o6(" or ")),new o6(")")])}function ht($){return d`not ${$}`}var HQ=($,J)=>{return d`${$} > ${m1(J,$)}`},zQ=($,J)=>{return d`${$} >= ${m1(J,$)}`},KQ=($,J)=>{return d`${$} < ${m1(J,$)}`},wQ=($,J)=>{return d`${$} <= ${m1(J,$)}`};function UQ($,J){if(Array.isArray(J)){if(J.length===0)return d`false`;return d`${$} in ${J.map((Y)=>m1(Y,$))}`}return d`${$} in ${m1(J,$)}`}function FQ($,J){if(Array.isArray(J)){if(J.length===0)return d`true`;return d`${$} not in ${J.map((Y)=>m1(Y,$))}`}return d`${$} not in ${m1(J,$)}`}function mt($){return d`${$} is null`}function ut($){return d`${$} is not null`}function dt($){return d`exists ${$}`}function ct($){return d`not exists ${$}`}function pt($,J,Y){return d`${$} between ${m1(J,$)} and ${m1(Y,$)}`}function lt($,J,Y){return d`${$} not between ${m1(J,$)} and ${m1(Y,$)}`}function rJ($,J){return d`${$} like ${J}`}function nt($,J){return d`${$} not like ${J}`}function it($,J){return d`${$} ilike ${J}`}function rt($,J){return d`${$} not ilike ${J}`}function SN($){return d`${$} asc`}function DQ($){return d`${$} desc`}class nI{constructor($,J,Y){this.sourceTable=$,this.referencedTable=J,this.relationName=Y,this.referencedTableName=J[O$.Symbol.Name]}static[m]="Relation";referencedTableName;fieldName}class iI{constructor($,J){this.table=$,this.config=J}static[m]="Relations"}class V5 extends nI{constructor($,J,Y,X){super($,J,Y?.relationName);this.config=Y,this.isNullable=X}static[m]="One";withFieldName($){let J=new V5(this.sourceTable,this.referencedTable,this.config,this.isNullable);return J.fieldName=$,J}}class Dw extends nI{constructor($,J,Y){super($,J,Y?.relationName);this.config=Y}static[m]="Many";withFieldName($){let J=new Dw(this.sourceTable,this.referencedTable,this.config);return J.fieldName=$,J}}function ot(){return{and:M7,between:pt,eq:h0,exists:dt,gt:HQ,gte:zQ,ilike:it,inArray:UQ,isNull:mt,isNotNull:ut,like:rJ,lt:KQ,lte:wQ,ne:QQ,not:ht,notBetween:lt,notExists:ct,notLike:nt,notIlike:rt,notInArray:FQ,or:PN,sql:d}}function tt(){return{sql:d,asc:SN,desc:DQ}}function at($,J){if(Object.keys($).length===1&&"default"in $&&!X$($.default,O$))$=$.default;let Y={},X={},W={};for(let[Z,G]of Object.entries($))if(X$(G,O$)){let Q=D7(G),H=X[Q];Y[Q]=Z,W[Z]={tsName:Z,dbName:G[O$.Symbol.Name],schema:G[O$.Symbol.Schema],columns:G[O$.Symbol.Columns],relations:H?.relations??{},primaryKey:H?.primaryKey??[]};for(let K of Object.values(G[O$.Symbol.Columns]))if(K.primary)W[Z].primaryKey.push(K);let z=G[O$.Symbol.ExtraConfigBuilder]?.(G[O$.Symbol.ExtraConfigColumns]);if(z){for(let K of Object.values(z))if(X$(K,cI))W[Z].primaryKey.push(...K.columns)}}else if(X$(G,iI)){let Q=D7(G.table),H=Y[Q],z=G.config(J(G.table)),K;for(let[w,F]of Object.entries(z))if(H){let U=W[H];if(U.relations[w]=F,K)U.primaryKey.push(...K)}else{if(!(Q in X))X[Q]={relations:{},primaryKey:K};X[Q].relations[w]=F}}return{tables:W,tableNamesMap:Y}}function oJ($,J){return new iI($,(Y)=>Object.fromEntries(Object.entries(J(Y)).map(([X,W])=>[X,W.withFieldName(X)])))}function JU$($){return function(Y,X){return new V5($,Y,X,X?.fields.reduce((W,Z)=>W&&Z.notNull,!0)??!1)}}function YU$($){return function(Y,X){return new Dw($,Y,X)}}function st($,J,Y){if(X$(Y,V5)&&Y.config)return{fields:Y.config.fields,references:Y.config.references};let X=J[D7(Y.referencedTable)];if(!X)throw Error(`Table "${Y.referencedTable[O$.Symbol.Name]}" not found in schema`);let W=$[X];if(!W)throw Error(`Table "${X}" not found in schema`);let Z=Y.sourceTable,G=J[D7(Z)];if(!G)throw Error(`Table "${Z[O$.Symbol.Name]}" not found in schema`);let Q=[];for(let H of Object.values(W.relations))if(Y.relationName&&Y!==H&&H.relationName===Y.relationName||!Y.relationName&&H.referencedTable===Y.sourceTable)Q.push(H);if(Q.length>1)throw Y.relationName?Error(`There are multiple relations with name "${Y.relationName}" in table "${X}"`):Error(`There are multiple relations between "${X}" and "${Y.sourceTable[O$.Symbol.Name]}". Please specify relation name`);if(Q[0]&&X$(Q[0],V5)&&Q[0].config)return{fields:Q[0].config.references,references:Q[0].config.fields};throw Error(`There is not enough information to infer relation "${G}.${Y.fieldName}"`)}function et($){return{one:JU$($),many:YU$($)}}function AN($,J,Y,X,W=(Z)=>Z){let Z={};for(let[G,Q]of X.entries())if(Q.isJson){let H=J.relations[Q.tsKey],z=Y[G],K=typeof z==="string"?JSON.parse(z):z;Z[Q.tsKey]=X$(H,V5)?K&&AN($,$[Q.relationTableTsKey],K,Q.selection,W):K.map((w)=>AN($,$[Q.relationTableTsKey],w,Q.selection,W))}else{let H=W(Y[G]),z=Q.field,K;if(X$(z,B4))K=z;else if(X$(z,j$))K=z.decoder;else K=z.sql.decoder;Z[Q.tsKey]=H===null?null:K.mapFromDriverValue(H)}return Z}function $a($){return d`count(${$||d.raw("*")})`.mapWith(Number)}class Mw extends y1{static[m]="PgViewBase"}class V7{static[m]="PgDialect";casing;constructor($){this.casing=new pI($?.casing)}async migrate($,J,Y){let X=typeof Y==="string"?"__drizzle_migrations":Y.migrationsTable??"__drizzle_migrations",W=typeof Y==="string"?"drizzle":Y.migrationsSchema??"drizzle",Z=d`
			CREATE TABLE IF NOT EXISTS ${d.identifier(W)}.${d.identifier(X)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await J.execute(d`CREATE SCHEMA IF NOT EXISTS ${d.identifier(W)}`),await J.execute(Z);let Q=(await J.all(d`select id, hash, created_at from ${d.identifier(W)}.${d.identifier(X)} order by created_at desc limit 1`))[0];await J.transaction(async(H)=>{for await(let z of $)if(!Q||Number(Q.created_at)<z.folderMillis){for(let K of z.sql)await H.execute(d.raw(K));await H.execute(d`insert into ${d.identifier(W)}.${d.identifier(X)} ("hash", "created_at") values(${z.hash}, ${z.folderMillis})`)}})}escapeName($){return`"${$}"`}escapeParam($){return`$${$+1}`}escapeString($){return`'${$.replace(/'/g,"''")}'`}buildWithCTE($){if(!$?.length)return;let J=[d`with `];for(let[Y,X]of $.entries())if(J.push(d`${d.identifier(X._.alias)} as (${X._.sql})`),Y<$.length-1)J.push(d`, `);return J.push(d` `),d.join(J)}buildDeleteQuery({table:$,where:J,returning:Y,withList:X}){let W=this.buildWithCTE(X),Z=Y?d` returning ${this.buildSelection(Y,{isSingleTable:!0})}`:void 0,G=J?d` where ${J}`:void 0;return d`${W}delete from ${$}${G}${Z}`}buildUpdateSet($,J){let Y=$[O$.Symbol.Columns],X=Object.keys(Y).filter((Z)=>J[Z]!==void 0||Y[Z]?.onUpdateFn!==void 0),W=X.length;return d.join(X.flatMap((Z,G)=>{let Q=Y[Z],H=Q.onUpdateFn?.(),z=J[Z]??(X$(H,j$)?H:d.param(H,Q)),K=d`${d.identifier(this.casing.getColumnCasing(Q))} = ${z}`;if(G<W-1)return[K,d.raw(", ")];return[K]}))}buildUpdateQuery({table:$,set:J,where:Y,returning:X,withList:W,from:Z,joins:G}){let Q=this.buildWithCTE(W),H=$[t6.Symbol.Name],z=$[t6.Symbol.Schema],K=$[t6.Symbol.OriginalName],w=H===K?void 0:H,F=d`${z?d`${d.identifier(z)}.`:void 0}${d.identifier(K)}${w&&d` ${d.identifier(w)}`}`,U=this.buildUpdateSet($,J),V=Z&&d.join([d.raw(" from "),this.buildFromTable(Z)]),N=this.buildJoins(G),P=X?d` returning ${this.buildSelection(X,{isSingleTable:!Z})}`:void 0,B=Y?d` where ${Y}`:void 0;return d`${Q}update ${F} set ${U}${V}${N}${B}${P}`}buildSelection($,{isSingleTable:J=!1}={}){let Y=$.length,X=$.flatMap(({field:W},Z)=>{let G=[];if(X$(W,j$.Aliased)&&W.isSelectionField)G.push(d.identifier(W.fieldAlias));else if(X$(W,j$.Aliased)||X$(W,j$)){let Q=X$(W,j$.Aliased)?W.sql:W;if(J)G.push(new j$(Q.queryChunks.map((H)=>{if(X$(H,L$))return d.identifier(this.casing.getColumnCasing(H));return H})));else G.push(Q);if(X$(W,j$.Aliased))G.push(d` as ${d.identifier(W.fieldAlias)}`)}else if(X$(W,B4))if(J)G.push(d.identifier(this.casing.getColumnCasing(W)));else G.push(W);else if(X$(W,Y6)){let Q=Object.entries(W._.selectedFields);if(Q.length===1){let H=Q[0][1],z=X$(H,j$)?H.decoder:X$(H,B4)?{mapFromDriverValue:(K)=>H.mapFromDriverValue(K)}:H.sql.decoder;if(z)W._.sql.decoder=z}G.push(W)}if(Z<Y-1)G.push(d`, `);return G});return d.join(X)}buildJoins($){if(!$||$.length===0)return;let J=[];for(let[Y,X]of $.entries()){if(Y===0)J.push(d` `);let W=X.table,Z=X.lateral?d` lateral`:void 0,G=X.on?d` on ${X.on}`:void 0;if(X$(W,t6)){let Q=W[t6.Symbol.Name],H=W[t6.Symbol.Schema],z=W[t6.Symbol.OriginalName],K=Q===z?void 0:X.alias;J.push(d`${d.raw(X.joinType)} join${Z} ${H?d`${d.identifier(H)}.`:void 0}${d.identifier(z)}${K&&d` ${d.identifier(K)}`}${G}`)}else if(X$(W,y1)){let Q=W[y4].name,H=W[y4].schema,z=W[y4].originalName,K=Q===z?void 0:X.alias;J.push(d`${d.raw(X.joinType)} join${Z} ${H?d`${d.identifier(H)}.`:void 0}${d.identifier(z)}${K&&d` ${d.identifier(K)}`}${G}`)}else J.push(d`${d.raw(X.joinType)} join${Z} ${W}${G}`);if(Y<$.length-1)J.push(d` `)}return d.join(J)}buildFromTable($){if(X$($,O$)&&$[O$.Symbol.IsAlias]){let J=d`${d.identifier($[O$.Symbol.OriginalName])}`;if($[O$.Symbol.Schema])J=d`${d.identifier($[O$.Symbol.Schema])}.${J}`;return d`${J} ${d.identifier($[O$.Symbol.Name])}`}return $}buildSelectQuery({withList:$,fields:J,fieldsFlat:Y,where:X,having:W,table:Z,joins:G,orderBy:Q,groupBy:H,limit:z,offset:K,lockingClause:w,distinct:F,setOperators:U}){let V=Y??iJ(J);for(let E of V)if(X$(E.field,B4)&&x1(E.field.table)!==(X$(Z,Y6)?Z._.alias:X$(Z,Mw)?Z[y4].name:X$(Z,j$)?void 0:x1(Z))&&!((T)=>G?.some(({alias:R})=>R===(T[O$.Symbol.IsAlias]?x1(T):T[O$.Symbol.BaseName])))(E.field.table)){let T=x1(E.field.table);throw Error(`Your "${E.path.join("->")}" field references a column "${T}"."${E.field.name}", but the table "${T}" is not part of the query! Did you forget to join it?`)}let N=!G||G.length===0,P=this.buildWithCTE($),B;if(F)B=F===!0?d` distinct`:d` distinct on (${d.join(F.on,d`, `)})`;let L=this.buildSelection(V,{isSingleTable:N}),g=this.buildFromTable(Z),k=this.buildJoins(G),I=X?d` where ${X}`:void 0,O=W?d` having ${W}`:void 0,b;if(Q&&Q.length>0)b=d` order by ${d.join(Q,d`, `)}`;let D;if(H&&H.length>0)D=d` group by ${d.join(H,d`, `)}`;let _=typeof z==="object"||typeof z==="number"&&z>=0?d` limit ${z}`:void 0,q=K?d` offset ${K}`:void 0,S=d.empty();if(w){let E=d` for ${d.raw(w.strength)}`;if(w.config.of)E.append(d` of ${d.join(Array.isArray(w.config.of)?w.config.of:[w.config.of],d`, `)}`);if(w.config.noWait)E.append(d` nowait`);else if(w.config.skipLocked)E.append(d` skip locked`);S.append(E)}let j=d`${P}select${B} ${L} from ${g}${k}${I}${D}${O}${b}${_}${q}${S}`;if(U.length>0)return this.buildSetOperations(j,U);return j}buildSetOperations($,J){let[Y,...X]=J;if(!Y)throw Error("Cannot pass undefined values to any set operator");if(X.length===0)return this.buildSetOperationQuery({leftSelect:$,setOperator:Y});return this.buildSetOperations(this.buildSetOperationQuery({leftSelect:$,setOperator:Y}),X)}buildSetOperationQuery({leftSelect:$,setOperator:{type:J,isAll:Y,rightSelect:X,limit:W,orderBy:Z,offset:G}}){let Q=d`(${$.getSQL()}) `,H=d`(${X.getSQL()})`,z;if(Z&&Z.length>0){let U=[];for(let V of Z)if(X$(V,L$))U.push(d.identifier(V.name));else if(X$(V,j$)){for(let N=0;N<V.queryChunks.length;N++){let P=V.queryChunks[N];if(X$(P,L$))V.queryChunks[N]=d.identifier(P.name)}U.push(d`${V}`)}else U.push(d`${V}`);z=d` order by ${d.join(U,d`, `)} `}let K=typeof W==="object"||typeof W==="number"&&W>=0?d` limit ${W}`:void 0,w=d.raw(`${J} ${Y?"all ":""}`),F=G?d` offset ${G}`:void 0;return d`${Q}${w}${H}${z}${K}${F}`}buildInsertQuery({table:$,values:J,onConflict:Y,returning:X,withList:W,select:Z,overridingSystemValue_:G}){let Q=[],H=$[O$.Symbol.Columns],z=Object.entries(H).filter(([P,B])=>!B.shouldDisableInsert()),K=z.map(([,P])=>d.identifier(this.casing.getColumnCasing(P)));if(Z){let P=J;if(X$(P,j$))Q.push(P);else Q.push(P.getSQL())}else{let P=J;Q.push(d.raw("values "));for(let[B,L]of P.entries()){let g=[];for(let[k,I]of z){let O=L[k];if(O===void 0||X$(O,_J)&&O.value===void 0)if(I.defaultFn!==void 0){let b=I.defaultFn(),D=X$(b,j$)?b:d.param(b,I);g.push(D)}else if(!I.default&&I.onUpdateFn!==void 0){let b=I.onUpdateFn(),D=X$(b,j$)?b:d.param(b,I);g.push(D)}else g.push(d`default`);else g.push(O)}if(Q.push(g),B<P.length-1)Q.push(d`, `)}}let w=this.buildWithCTE(W),F=d.join(Q),U=X?d` returning ${this.buildSelection(X,{isSingleTable:!0})}`:void 0,V=Y?d` on conflict ${Y}`:void 0,N=G===!0?d`overriding system value `:void 0;return d`${w}insert into ${$} ${K} ${N}${F}${V}${U}`}buildRefreshMaterializedViewQuery({view:$,concurrently:J,withNoData:Y}){let X=J?d` concurrently`:void 0,W=Y?d` with no data`:void 0;return d`refresh materialized view${X} ${$}${W}`}prepareTyping($){if(X$($,MN)||X$($,DN))return"json";else if(X$($,VN))return"decimal";else if(X$($,NN))return"time";else if(X$($,_N)||X$($,LN))return"timestamp";else if(X$($,UN)||X$($,FN))return"date";else if(X$($,qN))return"uuid";else return"none"}sqlToQuery($,J){return $.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:J})}buildRelationalQueryWithoutPK({fullSchema:$,schema:J,tableNamesMap:Y,table:X,tableConfig:W,queryConfig:Z,tableAlias:G,nestedQueryRelation:Q,joinOn:H}){let z=[],K,w,F=[],U,V=[];if(Z===!0)z=Object.entries(W.columns).map(([B,L])=>({dbKey:L.name,tsKey:B,field:yX(L,G),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let P=Object.fromEntries(Object.entries(W.columns).map(([O,b])=>[O,yX(b,G)]));if(Z.where){let O=typeof Z.where==="function"?Z.where(P,ot()):Z.where;U=O&&Uw(O,G)}let B=[],L=[];if(Z.columns){let O=!1;for(let[b,D]of Object.entries(Z.columns)){if(D===void 0)continue;if(b in W.columns){if(!O&&D===!0)O=!0;L.push(b)}}if(L.length>0)L=O?L.filter((b)=>Z.columns?.[b]===!0):Object.keys(W.columns).filter((b)=>!L.includes(b))}else L=Object.keys(W.columns);for(let O of L){let b=W.columns[O];B.push({tsKey:O,value:b})}let g=[];if(Z.with)g=Object.entries(Z.with).filter((O)=>!!O[1]).map(([O,b])=>({tsKey:O,queryConfig:b,relation:W.relations[O]}));let k;if(Z.extras){k=typeof Z.extras==="function"?Z.extras(P,{sql:d}):Z.extras;for(let[O,b]of Object.entries(k))B.push({tsKey:O,value:mI(b,G)})}for(let{tsKey:O,value:b}of B)z.push({dbKey:X$(b,j$.Aliased)?b.fieldAlias:W.columns[O].name,tsKey:O,field:X$(b,B4)?yX(b,G):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let I=typeof Z.orderBy==="function"?Z.orderBy(P,tt()):Z.orderBy??[];if(!Array.isArray(I))I=[I];F=I.map((O)=>{if(X$(O,B4))return yX(O,G);return Uw(O,G)}),K=Z.limit,w=Z.offset;for(let{tsKey:O,queryConfig:b,relation:D}of g){let _=st(J,Y,D),q=D7(D.referencedTable),S=Y[q],j=`${G}_${O}`,E=M7(..._.fields.map((v,h)=>h0(yX(_.references[h],j),yX(v,G)))),T=this.buildRelationalQueryWithoutPK({fullSchema:$,schema:J,tableNamesMap:Y,table:$[S],tableConfig:J[S],queryConfig:X$(D,V5)?b===!0?{limit:1}:{...b,limit:1}:b,tableAlias:j,joinOn:E,nestedQueryRelation:D}),R=d`${d.identifier(j)}.${d.identifier("data")}`.as(O);V.push({on:d`true`,table:new Y6(T.sql,{},j),alias:j,joinType:"left",lateral:!0}),z.push({dbKey:O,tsKey:O,field:R,relationTableTsKey:S,isJson:!0,selection:T.selection})}}if(z.length===0)throw new ON({message:`No fields selected for table "${W.tsName}" ("${G}")`});let N;if(U=M7(H,U),Q){let P=d`json_build_array(${d.join(z.map(({field:g,tsKey:k,isJson:I})=>I?d`${d.identifier(`${G}_${k}`)}.${d.identifier("data")}`:X$(g,j$.Aliased)?g.sql:g),d`, `)})`;if(X$(Q,Dw))P=d`coalesce(json_agg(${P}${F.length>0?d` order by ${d.join(F,d`, `)}`:void 0}), '[]'::json)`;let B=[{dbKey:"data",tsKey:"data",field:P.as("data"),isJson:!0,relationTableTsKey:W.tsName,selection:z}];if(K!==void 0||w!==void 0||F.length>0)N=this.buildSelectQuery({table:KN(X,G),fields:{},fieldsFlat:[{path:[],field:d.raw("*")}],where:U,limit:K,offset:w,orderBy:F,setOperators:[]}),U=void 0,K=void 0,w=void 0,F=[];else N=KN(X,G);N=this.buildSelectQuery({table:X$(N,t6)?N:new Y6(N,{},G),fields:{},fieldsFlat:B.map(({field:g})=>({path:[],field:X$(g,B4)?yX(g,G):g})),joins:V,where:U,limit:K,offset:w,orderBy:F,setOperators:[]})}else N=this.buildSelectQuery({table:KN(X,G),fields:{},fieldsFlat:z.map(({field:P})=>({path:[],field:X$(P,B4)?yX(P,G):P})),joins:V,where:U,limit:K,offset:w,orderBy:F,setOperators:[]});return{tableTsKey:W.tsName,sql:N,selection:z}}}class rI{static[m]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}class K1{static[m]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor($){if(this.fields=$.fields,this.session=$.session,this.dialect=$.dialect,$.withList)this.withList=$.withList;this.distinct=$.distinct}authToken;setToken($){return this.authToken=$,this}from($){let J=!!this.fields,Y=$,X;if(this.fields)X=this.fields;else if(X$(Y,Y6))X=Object.fromEntries(Object.keys(Y._.selectedFields).map((W)=>[W,Y[W]]));else if(X$(Y,Mw))X=Y[y4].selectedFields;else if(X$(Y,j$))X={};else X=gr(Y);return new oI({table:Y,fields:X,isPartialSelect:J,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class Ja extends rI{static[m]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;cacheConfig=void 0;usedTables=new Set;constructor({table:$,fields:J,isPartialSelect:Y,session:X,dialect:W,withList:Z,distinct:G}){super();this.config={withList:Z,table:$,fields:{...J},distinct:G,setOperators:[]},this.isPartialSelect=Y,this.session=X,this.dialect=W,this._={selectedFields:J,config:this.config},this.tableName=iW($),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{};for(let Q of JX($))this.usedTables.add(Q)}getUsedTables(){return[...this.usedTables]}createJoin($,J){return(Y,X)=>{let W=this.tableName,Z=iW(Y);for(let G of JX(Y))this.usedTables.add(G);if(typeof Z==="string"&&this.config.joins?.some((G)=>G.alias===Z))throw Error(`Alias "${Z}" is already used in this query`);if(!this.isPartialSelect){if(Object.keys(this.joinsNotNullableMap).length===1&&typeof W==="string")this.config.fields={[W]:this.config.fields};if(typeof Z==="string"&&!X$(Y,j$)){let G=X$(Y,Y6)?Y._.selectedFields:X$(Y,y1)?Y[y4].selectedFields:Y[O$.Symbol.Columns];this.config.fields[Z]=G}}if(typeof X==="function")X=X(new Proxy(this.config.fields,new S6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));if(!this.config.joins)this.config.joins=[];if(this.config.joins.push({on:X,table:Y,joinType:$,alias:Z,lateral:J}),typeof Z==="string")switch($){case"left":{this.joinsNotNullableMap[Z]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([G])=>[G,!1])),this.joinsNotNullableMap[Z]=!0;break}case"cross":case"inner":{this.joinsNotNullableMap[Z]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([G])=>[G,!1])),this.joinsNotNullableMap[Z]=!1;break}}return this}}leftJoin=this.createJoin("left",!1);leftJoinLateral=this.createJoin("left",!0);rightJoin=this.createJoin("right",!1);innerJoin=this.createJoin("inner",!1);innerJoinLateral=this.createJoin("inner",!0);fullJoin=this.createJoin("full",!1);crossJoin=this.createJoin("cross",!1);crossJoinLateral=this.createJoin("cross",!0);createSetOperator($,J){return(Y)=>{let X=typeof Y==="function"?Y(XU$()):Y;if(!Fw(this.getSelectedFields(),X.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:$,isAll:J,rightSelect:X}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators($){return this.config.setOperators.push(...$),this}where($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new S6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.where=$,this}having($){if(typeof $==="function")$=$(new Proxy(this.config.fields,new S6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})));return this.config.having=$,this}groupBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new S6({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(J)?J:[J]}else this.config.groupBy=$;return this}orderBy(...$){if(typeof $[0]==="function"){let J=$[0](new Proxy(this.config.fields,new S6({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),Y=Array.isArray(J)?J:[J];if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=Y;else this.config.orderBy=Y}else{let J=$;if(this.config.setOperators.length>0)this.config.setOperators.at(-1).orderBy=J;else this.config.orderBy=J}return this}limit($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).limit=$;else this.config.limit=$;return this}offset($){if(this.config.setOperators.length>0)this.config.setOperators.at(-1).offset=$;else this.config.offset=$;return this}for($,J={}){return this.config.lockingClause={strength:$,config:J},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}as($){let J=[];if(J.push(...JX(this.config.table)),this.config.joins)for(let Y of this.config.joins)J.push(...JX(Y.table));return new Proxy(new Y6(this.getSQL(),this.config.fields,$,!1,[...new Set(J)]),new S6({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new S6({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}$withCache($){return this.cacheConfig=$===void 0?{config:{},enable:!0,autoInvalidate:!0}:$===!1?{enable:!1}:{enable:!0,autoInvalidate:!0,...$},this}}class oI extends Ja{static[m]="PgSelect";_prepare($){let{session:J,config:Y,dialect:X,joinsNotNullableMap:W,authToken:Z,cacheConfig:G,usedTables:Q}=this;if(!J)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let{fields:H}=Y;return R4.startActiveSpan("drizzle.prepareQuery",()=>{let z=iJ(H),K=J.prepareQuery(X.sqlToQuery(this.getSQL()),z,$,!0,void 0,{type:"select",tables:[...Q]},G);return K.joinsNotNullableMap=W,K.setToken(Z)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return R4.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})}}fr(oI,[z1]);function MQ($,J){return(Y,X,...W)=>{let Z=[X,...W].map((G)=>({type:$,isAll:J,rightSelect:G}));for(let G of Z)if(!Fw(Y.getSelectedFields(),G.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return Y.addSetOperators(Z)}}var XU$=()=>({union:WU$,unionAll:ZU$,intersect:GU$,intersectAll:QU$,except:HU$,exceptAll:zU$}),WU$=MQ("union",!1),ZU$=MQ("union",!0),GU$=MQ("intersect",!1),QU$=MQ("intersect",!0),HU$=MQ("except",!1),zU$=MQ("except",!0);class Vw{static[m]="PgQueryBuilder";dialect;dialectConfig;constructor($){this.dialect=X$($,V7)?$:void 0,this.dialectConfig=X$($,V7)?void 0:$}$with=($,J)=>{let Y=this;return{as:(W)=>{if(typeof W==="function")W=W(Y);return new Proxy(new zw(W.getSQL(),J??("getSelectedFields"in W?W.getSelectedFields()??{}:{}),$,!0),new S6({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};with(...$){let J=this;function Y(Z){return new K1({fields:Z??void 0,session:void 0,dialect:J.getDialect(),withList:$})}function X(Z){return new K1({fields:Z??void 0,session:void 0,dialect:J.getDialect(),distinct:!0})}function W(Z,G){return new K1({fields:G??void 0,session:void 0,dialect:J.getDialect(),distinct:{on:Z}})}return{select:Y,selectDistinct:X,selectDistinctOn:W}}select($){return new K1({fields:$??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct($){return new K1({fields:$??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn($,J){return new K1({fields:J??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:$}})}getDialect(){if(!this.dialect)this.dialect=new V7(this.dialectConfig);return this.dialect}}function JX($){if(X$($,t6))return[$[F7]?`${$[F7]}.${$[O$.Symbol.BaseName]}`:$[O$.Symbol.BaseName]];if(X$($,Y6))return $._.usedTables??[];if(X$($,j$))return $.usedTables??[];return[]}class jN extends z1{constructor($,J,Y,X){super();this.session=J,this.dialect=Y,this.config={table:$,withList:X}}static[m]="PgDelete";config;cacheConfig;where($){return this.config.where=$,this}returning($=this.config.table[O$.Symbol.Columns]){return this.config.returningFields=$,this.config.returning=iJ($),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){return R4.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,$,!0,void 0,{type:"delete",tables:JX(this.config.table)},this.cacheConfig)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return R4.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new S6({alias:x1(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class EN{constructor($,J,Y,X,W){this.table=$,this.session=J,this.dialect=Y,this.withList=X,this.overridingSystemValue_=W}static[m]="PgInsertBuilder";authToken;setToken($){return this.authToken=$,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values($){if($=Array.isArray($)?$:[$],$.length===0)throw Error("values() must be called with at least one value");let J=$.map((Y)=>{let X={},W=this.table[O$.Symbol.Columns];for(let Z of Object.keys(Y)){let G=Y[Z];X[Z]=X$(G,j$)?G:new _J(G,W[Z])}return X});return new tI(this.table,J,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select($){let J=typeof $==="function"?$(new Vw):$;if(!X$(J,j$)&&!Fw(this.table[HN],J._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new tI(this.table,J,this.session,this.dialect,this.withList,!0)}}class tI extends z1{constructor($,J,Y,X,W,Z,G){super();this.session=Y,this.dialect=X,this.config={table:$,values:J,withList:W,select:Z,overridingSystemValue_:G}}static[m]="PgInsert";config;cacheConfig;returning($=this.config.table[O$.Symbol.Columns]){return this.config.returningFields=$,this.config.returning=iJ($),this}onConflictDoNothing($={}){if($.target===void 0)this.config.onConflict=d`do nothing`;else{let J="";J=Array.isArray($.target)?$.target.map((X)=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(X))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing($.target));let Y=$.where?d` where ${$.where}`:void 0;this.config.onConflict=d`(${d.raw(J)})${Y} do nothing`}return this}onConflictDoUpdate($){if($.where&&($.targetWhere||$.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let J=$.where?d` where ${$.where}`:void 0,Y=$.targetWhere?d` where ${$.targetWhere}`:void 0,X=$.setWhere?d` where ${$.setWhere}`:void 0,W=this.dialect.buildUpdateSet(this.config.table,wN(this.config.table,$.set)),Z="";return Z=Array.isArray($.target)?$.target.map((G)=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(G))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing($.target)),this.config.onConflict=d`(${d.raw(Z)})${Y} do update set ${W}${J}${X}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){return R4.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,$,!0,void 0,{type:"insert",tables:JX(this.config.table)},this.cacheConfig)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return R4.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new S6({alias:x1(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class aI extends z1{constructor($,J,Y){super();this.session=J,this.dialect=Y,this.config={view:$}}static[m]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){return R4.startActiveSpan("drizzle.prepareQuery",()=>{return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,$,!0)})}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return R4.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute($,this.authToken)})}}class CN{constructor($,J,Y,X){this.table=$,this.session=J,this.dialect=Y,this.withList=X}static[m]="PgUpdateBuilder";authToken;setToken($){return this.authToken=$,this}set($){return new Ya(this.table,wN(this.table,$),this.session,this.dialect,this.withList).setToken(this.authToken)}}class Ya extends z1{constructor($,J,Y,X,W){super();this.session=Y,this.dialect=X,this.config={set:J,table:$,withList:W,joins:[]},this.tableName=iW($),this.joinsNotNullableMap=typeof this.tableName==="string"?{[this.tableName]:!0}:{}}static[m]="PgUpdate";config;tableName;joinsNotNullableMap;cacheConfig;from($){let J=$,Y=iW(J);if(typeof Y==="string")this.joinsNotNullableMap[Y]=!0;return this.config.from=J,this}getTableLikeFields($){if(X$($,t6))return $[O$.Symbol.Columns];else if(X$($,Y6))return $._.selectedFields;return $[y4].selectedFields}createJoin($){return(J,Y)=>{let X=iW(J);if(typeof X==="string"&&this.config.joins.some((W)=>W.alias===X))throw Error(`Alias "${X}" is already used in this query`);if(typeof Y==="function"){let W=this.config.from&&!X$(this.config.from,j$)?this.getTableLikeFields(this.config.from):void 0;Y=Y(new Proxy(this.config.table[O$.Symbol.Columns],new S6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),W&&new Proxy(W,new S6({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:Y,table:J,joinType:$,alias:X}),typeof X==="string")switch($){case"left":{this.joinsNotNullableMap[X]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([W])=>[W,!1])),this.joinsNotNullableMap[X]=!0;break}case"inner":{this.joinsNotNullableMap[X]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([W])=>[W,!1])),this.joinsNotNullableMap[X]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where($){return this.config.where=$,this}returning($){if(!$){if($=Object.assign({},this.config.table[O$.Symbol.Columns]),this.config.from){let J=iW(this.config.from);if(typeof J==="string"&&this.config.from&&!X$(this.config.from,j$)){let Y=this.getTableLikeFields(this.config.from);$[J]=Y}for(let Y of this.config.joins){let X=iW(Y.table);if(typeof X==="string"&&!X$(Y.table,j$)){let W=this.getTableLikeFields(Y.table);$[X]=W}}}}return this.config.returningFields=$,this.config.returning=iJ($),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:$,...J}=this.dialect.sqlToQuery(this.getSQL());return J}_prepare($){let J=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,$,!0,void 0,{type:"insert",tables:JX(this.config.table)},this.cacheConfig);return J.joinsNotNullableMap=this.joinsNotNullableMap,J}prepare($){return this._prepare($)}authToken;setToken($){return this.authToken=$,this}execute=($)=>{return this._prepare().execute($,this.authToken)};getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new S6({alias:x1(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}class Nw extends j${constructor($){super(Nw.buildEmbeddedCount($.source,$.filters).queryChunks);this.params=$,this.mapWith(Number),this.session=$.session,this.sql=Nw.buildCount($.source,$.filters)}sql;token;static[m]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount($,J){return d`(select count(*) from ${$}${d.raw(" where ").if(J)}${J})`}static buildCount($,J){return d`select count(*) as count from ${$}${d.raw(" where ").if(J)}${J};`}setToken($){return this.token=$,this}then($,J){return Promise.resolve(this.session.count(this.sql,this.token)).then($,J)}catch($){return this.then(void 0,$)}finally($){return this.then((J)=>{return $?.(),J},(J)=>{throw $?.(),J})}}class eI{constructor($,J,Y,X,W,Z,G){this.fullSchema=$,this.schema=J,this.tableNamesMap=Y,this.table=X,this.tableConfig=W,this.dialect=Z,this.session=G}static[m]="PgRelationalQueryBuilder";findMany($){return new sI(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?$:{},"many")}findFirst($){return new sI(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,$?{...$,limit:1}:{limit:1},"first")}}class sI extends z1{constructor($,J,Y,X,W,Z,G,Q,H){super();this.fullSchema=$,this.schema=J,this.tableNamesMap=Y,this.table=X,this.tableConfig=W,this.dialect=Z,this.session=G,this.config=Q,this.mode=H}static[m]="PgRelationalQuery";_prepare($){return R4.startActiveSpan("drizzle.prepareQuery",()=>{let{query:J,builtQuery:Y}=this._toSQL();return this.session.prepareQuery(Y,void 0,$,!0,(X,W)=>{let Z=X.map((G)=>AN(this.schema,this.tableConfig,G,J.selection,W));if(this.mode==="first")return Z[0];return Z})})}prepare($){return this._prepare($)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let $=this._getQuery(),J=this.dialect.sqlToQuery($.sql);return{query:$,builtQuery:J}}toSQL(){return this._toSQL().builtQuery}authToken;setToken($){return this.authToken=$,this}execute(){return R4.startActiveSpan("drizzle.operation",()=>{return this._prepare().execute(void 0,this.authToken)})}}class $k extends z1{constructor($,J,Y,X){super();this.execute=$,this.sql=J,this.query=Y,this.mapBatchResult=X}static[m]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult($,J){return J?this.mapBatchResult($):$}_prepare(){return this}isResponseInArrayMode(){return!1}}class _w{constructor($,J,Y){if(this.dialect=$,this.session=J,this._=Y?{schema:Y.schema,fullSchema:Y.fullSchema,tableNamesMap:Y.tableNamesMap,session:J}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:J},this.query={},this._.schema)for(let[X,W]of Object.entries(this._.schema))this.query[X]=new eI(Y.fullSchema,this._.schema,this._.tableNamesMap,Y.fullSchema[X],W,$,J);this.$cache={invalidate:async(X)=>{}}}static[m]="PgDatabase";query;$with=($,J)=>{let Y=this;return{as:(W)=>{if(typeof W==="function")W=W(new Vw(Y.dialect));return new Proxy(new zw(W.getSQL(),J??("getSelectedFields"in W?W.getSelectedFields()??{}:{}),$,!0),new S6({alias:$,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}}};$count($,J){return new Nw({source:$,filters:J,session:this.session})}$cache;with(...$){let J=this;function Y(H){return new K1({fields:H??void 0,session:J.session,dialect:J.dialect,withList:$})}function X(H){return new K1({fields:H??void 0,session:J.session,dialect:J.dialect,withList:$,distinct:!0})}function W(H,z){return new K1({fields:z??void 0,session:J.session,dialect:J.dialect,withList:$,distinct:{on:H}})}function Z(H){return new CN(H,J.session,J.dialect,$)}function G(H){return new EN(H,J.session,J.dialect,$)}function Q(H){return new jN(H,J.session,J.dialect,$)}return{select:Y,selectDistinct:X,selectDistinctOn:W,update:Z,insert:G,delete:Q}}select($){return new K1({fields:$??void 0,session:this.session,dialect:this.dialect})}selectDistinct($){return new K1({fields:$??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn($,J){return new K1({fields:J??void 0,session:this.session,dialect:this.dialect,distinct:{on:$}})}update($){return new CN($,this.session,this.dialect)}insert($){return new EN($,this.session,this.dialect)}delete($){return new jN($,this.session,this.dialect)}refreshMaterializedView($){return new aI($,this.session,this.dialect)}authToken;execute($){let J=typeof $==="string"?d.raw($):$.getSQL(),Y=this.dialect.sqlToQuery(J),X=this.session.prepareQuery(Y,void 0,void 0,!1);return new $k(()=>X.execute(void 0,this.authToken),J,Y,(W)=>X.mapResult(W,!0))}transaction($,J){return this.session.transaction($,J)}}class Xa{static[m]="Cache"}class Lw extends Xa{strategy(){return"all"}static[m]="NoopCache";async get($){return}async put($,J,Y,X){}async onMutate($){}}async function Jk($,J){let Y=`${$}-${JSON.stringify(J)}`,W=new TextEncoder().encode(Y),Z=await crypto.subtle.digest("SHA-256",W);return[...new Uint8Array(Z)].map((H)=>H.toString(16).padStart(2,"0")).join("")}class Yk{constructor($,J,Y,X){if(this.query=$,this.cache=J,this.queryMetadata=Y,this.cacheConfig=X,J&&J.strategy()==="all"&&X===void 0)this.cacheConfig={enable:!0,autoInvalidate:!0};if(!this.cacheConfig?.enable)this.cacheConfig=void 0}authToken;getQuery(){return this.query}mapResult($,J){return $}setToken($){return this.authToken=$,this}static[m]="PgPreparedQuery";joinsNotNullableMap;async queryWithCache($,J,Y){if(this.cache===void 0||X$(this.cache,Lw)||this.queryMetadata===void 0)try{return await Y()}catch(X){throw new oW($,J,X)}if(this.cacheConfig&&!this.cacheConfig.enable)try{return await Y()}catch(X){throw new oW($,J,X)}if((this.queryMetadata.type==="insert"||this.queryMetadata.type==="update"||this.queryMetadata.type==="delete")&&this.queryMetadata.tables.length>0)try{let[X]=await Promise.all([Y(),this.cache.onMutate({tables:this.queryMetadata.tables})]);return X}catch(X){throw new oW($,J,X)}if(!this.cacheConfig)try{return await Y()}catch(X){throw new oW($,J,X)}if(this.queryMetadata.type==="select"){let X=await this.cache.get(this.cacheConfig.tag??await Jk($,J),this.queryMetadata.tables,this.cacheConfig.tag!==void 0,this.cacheConfig.autoInvalidate);if(X===void 0){let W;try{W=await Y()}catch(Z){throw new oW($,J,Z)}return await this.cache.put(this.cacheConfig.tag??await Jk($,J),W,this.cacheConfig.autoInvalidate?this.queryMetadata.tables:[],this.cacheConfig.tag!==void 0,this.cacheConfig.config),W}return X}try{return await Y()}catch(X){throw new oW($,J,X)}}}class Xk{constructor($){this.dialect=$}static[m]="PgSession";execute($,J){return R4.startActiveSpan("drizzle.operation",()=>{return R4.startActiveSpan("drizzle.prepareQuery",()=>{return this.prepareQuery(this.dialect.sqlToQuery($),void 0,void 0,!1)}).setToken(J).execute(void 0,J)})}all($){return this.prepareQuery(this.dialect.sqlToQuery($),void 0,void 0,!1).all()}async count($,J){let Y=await this.execute($,J);return Number(Y[0].count)}}class Wk extends _w{constructor($,J,Y,X=0){super($,J,Y);this.schema=Y,this.nestedIndex=X}static[m]="PgTransaction";rollback(){throw new lI}getTransactionConfigSQL($){let J=[];if($.isolationLevel)J.push(`isolation level ${$.isolationLevel}`);if($.accessMode)J.push($.accessMode);if(typeof $.deferrable==="boolean")J.push($.deferrable?"deferrable":"not deferrable");return d.raw(J.join(" "))}setTransaction($){return this.session.execute(d`set transaction ${this.getTransactionConfigSQL($)}`)}}var{Pool:KU$,types:hX}=WQ;class Wa extends Yk{constructor($,J,Y,X,W,Z,G,Q,H,z,K){super({sql:J,params:Y},W,Z,G);this.client=$,this.queryString=J,this.params=Y,this.logger=X,this.fields=Q,this._isResponseInArrayMode=z,this.customResultMapper=K,this.rawQueryConfig={name:H,text:J,types:{getTypeParser:(w,F)=>{if(w===hX.builtins.TIMESTAMPTZ)return(U)=>U;if(w===hX.builtins.TIMESTAMP)return(U)=>U;if(w===hX.builtins.DATE)return(U)=>U;if(w===hX.builtins.INTERVAL)return(U)=>U;if(w===1231)return(U)=>U;if(w===1115)return(U)=>U;if(w===1185)return(U)=>U;if(w===1187)return(U)=>U;if(w===1182)return(U)=>U;return hX.getTypeParser(w,F)}}},this.queryConfig={name:H,text:J,rowMode:"array",types:{getTypeParser:(w,F)=>{if(w===hX.builtins.TIMESTAMPTZ)return(U)=>U;if(w===hX.builtins.TIMESTAMP)return(U)=>U;if(w===hX.builtins.DATE)return(U)=>U;if(w===hX.builtins.INTERVAL)return(U)=>U;if(w===1231)return(U)=>U;if(w===1115)return(U)=>U;if(w===1185)return(U)=>U;if(w===1187)return(U)=>U;if(w===1182)return(U)=>U;return hX.getTypeParser(w,F)}}}}static[m]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute($={}){return R4.startActiveSpan("drizzle.execute",async()=>{let J=hI(this.params,$);this.logger.logQuery(this.rawQueryConfig.text,J);let{fields:Y,rawQueryConfig:X,client:W,queryConfig:Z,joinsNotNullableMap:G,customResultMapper:Q}=this;if(!Y&&!Q)return R4.startActiveSpan("drizzle.driver.execute",async(z)=>{return z?.setAttributes({"drizzle.query.name":X.name,"drizzle.query.text":X.text,"drizzle.query.params":JSON.stringify(J)}),this.queryWithCache(X.text,J,async()=>{return await W.query(X,J)})});let H=await R4.startActiveSpan("drizzle.driver.execute",(z)=>{return z?.setAttributes({"drizzle.query.name":Z.name,"drizzle.query.text":Z.text,"drizzle.query.params":JSON.stringify(J)}),this.queryWithCache(Z.text,J,async()=>{return await W.query(Z,J)})});return R4.startActiveSpan("drizzle.mapResponse",()=>{return Q?Q(H.rows):H.rows.map((z)=>vr(Y,z,G))})})}all($={}){return R4.startActiveSpan("drizzle.execute",()=>{let J=hI(this.params,$);return this.logger.logQuery(this.rawQueryConfig.text,J),R4.startActiveSpan("drizzle.driver.execute",(Y)=>{return Y?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(J)}),this.queryWithCache(this.rawQueryConfig.text,J,async()=>{return this.client.query(this.rawQueryConfig,J)}).then((X)=>X.rows)})})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class TN extends Xk{constructor($,J,Y,X={}){super(J);this.client=$,this.schema=Y,this.options=X,this.logger=X.logger??new TI,this.cache=X.cache??new Lw}static[m]="NodePgSession";logger;cache;prepareQuery($,J,Y,X,W,Z,G){return new Wa(this.client,$.sql,$.params,this.logger,this.cache,Z,G,J,Y,X,W)}async transaction($,J){let Y=this.client instanceof KU$||Object.getPrototypeOf(this.client).constructor.name.includes("Pool"),X=Y?new TN(await this.client.connect(),this.dialect,this.schema,this.options):this,W=new Zk(this.dialect,X,this.schema);await W.execute(d`begin${J?d` ${W.getTransactionConfigSQL(J)}`:void 0}`);try{let Z=await $(W);return await W.execute(d`commit`),Z}catch(Z){throw await W.execute(d`rollback`),Z}finally{if(Y)X.client.release()}}async count($){let J=await this.execute($);return Number(J.rows[0].count)}}class Zk extends Wk{static[m]="NodePgTransaction";async transaction($){let J=`sp${this.nestedIndex+1}`,Y=new Zk(this.dialect,this.session,this.schema,this.nestedIndex+1);await Y.execute(d.raw(`savepoint ${J}`));try{let X=await $(Y);return await Y.execute(d.raw(`release savepoint ${J}`)),X}catch(X){throw await Y.execute(d.raw(`rollback to savepoint ${J}`)),X}}}class Za{constructor($,J,Y={}){this.client=$,this.dialect=J,this.options=Y}static[m]="NodePgDriver";createSession($){return new TN(this.client,this.dialect,$,{logger:this.options.logger,cache:this.options.cache})}}class Ga extends _w{static[m]="NodePgDatabase"}function qw($,J={}){let Y=new V7({casing:J.casing}),X;if(J.logger===!0)X=new CI;else if(J.logger!==!1)X=J.logger;let W;if(J.schema){let H=at(J.schema,et);W={fullSchema:J.schema,schema:H.tables,tableNamesMap:H.tableNamesMap}}let G=new Za($,Y,{logger:X,cache:J.cache}).createSession(W),Q=new Ga(Y,G,W);if(Q.$client=$,Q.$cache=J.cache,Q.$cache)Q.$cache.invalidate=J.cache?.onMutate;return Q}function RN(...$){if(typeof $[0]==="string"){let J=new WQ.Pool({connectionString:$[0]});return qw(J,$[1])}if(xr($[0])){let{connection:J,client:Y,...X}=$[0];if(Y)return qw(Y,X);let W=typeof J==="string"?new WQ.Pool({connectionString:J}):new WQ.Pool(J);return qw(W,X)}return qw($[0],$[1])}(($)=>{function J(Y){return qw({},Y)}$.mock=J})(RN||(RN={}));y$();var W$=rG;var Qa=await W$.parseAsync(W$.object({DATABASE_URL:W$.string("required DATABASE_URL"),BETTER_AUTH_SECRET:W$.string("required BETTER_AUTH_SECRET"),BETTER_AUTH_URL:W$.string("required BETTER_AUTH_URL")}),process.env);var Fk={};k4(Fk,{verification:()=>Ba,userRelations:()=>Oa,user:()=>aW,teacherTable:()=>g$,teacherRoles:()=>IU$,teacherRelations:()=>kU$,studentTable:()=>_7,studentRelations:()=>RU$,sessionRelations:()=>Pa,session:()=>Pw,schoolTable:()=>D$,schoolRelations:()=>fU$,batchTable:()=>VQ,batchRelations:()=>vU$,batchAssignmentHistoryTable:()=>bU$,adminTable:()=>W4,accountRelations:()=>Sa,account:()=>Sw});var wU$=BigInt(0),Bw=BigInt(1),UU$=BigInt(2),FU$=BigInt(7),DU$=BigInt(256),MU$=BigInt(113),Ka=[],wa=[],Ua=[];for(let $=0,J=Bw,Y=1,X=0;$<24;$++){[Y,X]=[X,(2*Y+3*X)%5],Ka.push(2*(5*X+Y)),wa.push(($+1)*($+2)/2%64);let W=wU$;for(let Z=0;Z<7;Z++)if(J=(J<<Bw^(J>>FU$)*MU$)%DU$,J&UU$)W^=Bw<<(Bw<<BigInt(Z))-Bw;Ua.push(W)}var Fa=VU(Ua,!0),VU$=Fa[0],NU$=Fa[1],Ha=($,J,Y)=>Y>32?nx($,J,Y):px($,J,Y),za=($,J,Y)=>Y>32?ix($,J,Y):lx($,J,Y);function _U$($,J=24){let Y=new Uint32Array(10);for(let X=24-J;X<24;X++){for(let G=0;G<10;G++)Y[G]=$[G]^$[G+10]^$[G+20]^$[G+30]^$[G+40];for(let G=0;G<10;G+=2){let Q=(G+8)%10,H=(G+2)%10,z=Y[H],K=Y[H+1],w=Ha(z,K,1)^Y[Q],F=za(z,K,1)^Y[Q+1];for(let U=0;U<50;U+=10)$[G+U]^=w,$[G+U+1]^=F}let W=$[2],Z=$[3];for(let G=0;G<24;G++){let Q=wa[G],H=Ha(W,Z,Q),z=za(W,Z,Q),K=Ka[G];W=$[K],Z=$[K+1],$[K]=H,$[K+1]=z}for(let G=0;G<50;G+=10){for(let Q=0;Q<10;Q++)Y[Q]=$[G+Q];for(let Q=0;Q<10;Q++)$[G+Q]^=~Y[(Q+2)%10]&Y[(Q+4)%10]}$[0]^=VU$[X],$[1]^=NU$[X]}X8(Y)}class Gk{state;pos=0;posOut=0;finished=!1;state32;destroyed=!1;blockLen;suffix;outputLen;enableXOF=!1;rounds;constructor($,J,Y,X=!1,W=24){if(this.blockLen=$,this.suffix=J,this.outputLen=Y,this.enableXOF=X,this.rounds=W,Y8(Y,"outputLen"),!(0<$&&$<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=KG(this.state)}clone(){return this._cloneInto()}keccak(){UG(this.state32),_U$(this.state32,this.rounds),UG(this.state32),this.posOut=0,this.pos=0}update($){FW(this),IJ($);let{blockLen:J,state:Y}=this,X=$.length;for(let W=0;W<X;){let Z=Math.min(J-this.pos,X-W);for(let G=0;G<Z;G++)Y[this.pos++]^=$[W++];if(this.pos===J)this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:$,suffix:J,pos:Y,blockLen:X}=this;if($[Y]^=J,(J&128)!==0&&Y===X-1)this.keccak();$[X-1]^=128,this.keccak()}writeInto($){FW(this,!1),IJ($),this.finish();let J=this.state,{blockLen:Y}=this;for(let X=0,W=$.length;X<W;){if(this.posOut>=Y)this.keccak();let Z=Math.min(Y-this.posOut,W-X);$.set(J.subarray(this.posOut,this.posOut+Z),X),this.posOut+=Z,X+=Z}return $}xofInto($){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto($)}xof($){return Y8($),this.xofInto(new Uint8Array($))}digestInto($){if(zU($,this),this.finished)throw Error("digest() was already called");return this.writeInto($),this.destroy(),$}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,X8(this.state)}_cloneInto($){let{blockLen:J,suffix:Y,outputLen:X,rounds:W,enableXOF:Z}=this;return $||=new Gk(J,Y,X,Z,W),$.state32.set(this.state32),$.pos=this.pos,$.posOut=this.posOut,$.finished=this.finished,$.rounds=W,$.suffix=Y,$.outputLen=X,$.enableXOF=Z,$.destroyed=this.destroyed,$}}var LU$=($,J,Y,X={})=>UU(()=>new Gk(J,$,Y),X);var Da=LU$(6,72,64,FU(10));var qU$=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Qk=Math.ceil,aJ=Math.floor,u1="[BigNumber Error] ",Ma=u1+"Number primitive has more than 15 significant digits: ",YX=100000000000000,Q0=14,Hk=9007199254740991,zk=[1,10,100,1000,1e4,1e5,1e6,1e7,1e8,1e9,10000000000,100000000000,1000000000000,10000000000000],N5=1e7,D8=1e9;function Va($){var J,Y,X,W=L.prototype={constructor:L,toString:null,valueOf:null},Z=new L(1),G=20,Q=4,H=-7,z=21,K=-1e7,w=1e7,F=!1,U=1,V=0,N={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},P="0123456789abcdefghijklmnopqrstuvwxyz",B=!0;function L(D,_){var q,S,j,E,T,R,v,h,y=this;if(!(y instanceof L))return new L(D,_);if(_==null){if(D&&D._isBigNumber===!0){if(y.s=D.s,!D.c||D.e>w)y.c=y.e=null;else if(D.e<K)y.c=[y.e=0];else y.e=D.e,y.c=D.c.slice();return}if((R=typeof D=="number")&&D*0==0){if(y.s=1/D<0?(D=-D,-1):1,D===~~D){for(E=0,T=D;T>=10;T/=10,E++);if(E>w)y.c=y.e=null;else y.e=E,y.c=[D];return}h=String(D)}else{if(!qU$.test(h=String(D)))return X(y,h,R);y.s=h.charCodeAt(0)==45?(h=h.slice(1),-1):1}if((E=h.indexOf("."))>-1)h=h.replace(".","");if((T=h.search(/e/i))>0){if(E<0)E=T;E+=+h.slice(T+1),h=h.substring(0,T)}else if(E<0)E=h.length}else{if(V6(_,2,P.length,"Base"),_==10&&B)return y=new L(D),O(y,G+y.e+1,Q);if(h=String(D),R=typeof D=="number"){if(D*0!=0)return X(y,h,R,_);if(y.s=1/D<0?(h=h.slice(1),-1):1,L.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(Ma+D)}else y.s=h.charCodeAt(0)===45?(h=h.slice(1),-1):1;q=P.slice(0,_),E=T=0;for(v=h.length;T<v;T++)if(q.indexOf(S=h.charAt(T))<0){if(S=="."){if(T>E){E=v;continue}}else if(!j){if(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase())){j=!0,T=-1,E=0;continue}}return X(y,String(D),R,_)}if(R=!1,h=Y(h,_,10,y.s),(E=h.indexOf("."))>-1)h=h.replace(".","");else E=h.length}for(T=0;h.charCodeAt(T)===48;T++);for(v=h.length;h.charCodeAt(--v)===48;);if(h=h.slice(T,++v)){if(v-=T,R&&L.DEBUG&&v>15&&(D>Hk||D!==aJ(D)))throw Error(Ma+y.s*D);if((E=E-T-1)>w)y.c=y.e=null;else if(E<K)y.c=[y.e=0];else{if(y.e=E,y.c=[],T=(E+1)%Q0,E<0)T+=Q0;if(T<v){if(T)y.c.push(+h.slice(0,T));for(v-=Q0;T<v;)y.c.push(+h.slice(T,T+=Q0));T=Q0-(h=h.slice(T)).length}else T-=v;for(;T--;h+="0");y.c.push(+h)}}else y.c=[y.e=0]}L.clone=Va,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(D){var _,q;if(D!=null)if(typeof D=="object"){if(D.hasOwnProperty(_="DECIMAL_PLACES"))q=D[_],V6(q,0,D8,_),G=q;if(D.hasOwnProperty(_="ROUNDING_MODE"))q=D[_],V6(q,0,8,_),Q=q;if(D.hasOwnProperty(_="EXPONENTIAL_AT"))if(q=D[_],q&&q.pop)V6(q[0],-D8,0,_),V6(q[1],0,D8,_),H=q[0],z=q[1];else V6(q,-D8,D8,_),H=-(z=q<0?-q:q);if(D.hasOwnProperty(_="RANGE"))if(q=D[_],q&&q.pop)V6(q[0],-D8,-1,_),V6(q[1],1,D8,_),K=q[0],w=q[1];else if(V6(q,-D8,D8,_),q)K=-(w=q<0?-q:q);else throw Error(u1+_+" cannot be zero: "+q);if(D.hasOwnProperty(_="CRYPTO"))if(q=D[_],q===!!q)if(q)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))F=q;else throw F=!q,Error(u1+"crypto unavailable");else F=q;else throw Error(u1+_+" not true or false: "+q);if(D.hasOwnProperty(_="MODULO_MODE"))q=D[_],V6(q,0,9,_),U=q;if(D.hasOwnProperty(_="POW_PRECISION"))q=D[_],V6(q,0,D8,_),V=q;if(D.hasOwnProperty(_="FORMAT"))if(q=D[_],typeof q=="object")N=q;else throw Error(u1+_+" not an object: "+q);if(D.hasOwnProperty(_="ALPHABET"))if(q=D[_],typeof q=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(q))B=q.slice(0,10)=="0123456789",P=q;else throw Error(u1+_+" invalid: "+q)}else throw Error(u1+"Object expected: "+D);return{DECIMAL_PLACES:G,ROUNDING_MODE:Q,EXPONENTIAL_AT:[H,z],RANGE:[K,w],CRYPTO:F,MODULO_MODE:U,POW_PRECISION:V,FORMAT:N,ALPHABET:P}},L.isBigNumber=function(D){if(!D||D._isBigNumber!==!0)return!1;if(!L.DEBUG)return!0;var _,q,S=D.c,j=D.e,E=D.s;$:if({}.toString.call(S)=="[object Array]"){if((E===1||E===-1)&&j>=-D8&&j<=D8&&j===aJ(j)){if(S[0]===0){if(j===0&&S.length===1)return!0;break $}if(_=(j+1)%Q0,_<1)_+=Q0;if(String(S[0]).length==_){for(_=0;_<S.length;_++)if(q=S[_],q<0||q>=YX||q!==aJ(q))break $;if(q!==0)return!0}}}else if(S===null&&j===null&&(E===null||E===1||E===-1))return!0;throw Error(u1+"Invalid BigNumber: "+D)},L.maximum=L.max=function(){return k(arguments,-1)},L.minimum=L.min=function(){return k(arguments,1)},L.random=function(){var D=9007199254740992,_=Math.random()*D&2097151?function(){return aJ(Math.random()*D)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(q){var S,j,E,T,R,v=0,h=[],y=new L(Z);if(q==null)q=G;else V6(q,0,D8);if(T=Qk(q/Q0),F)if(crypto.getRandomValues){S=crypto.getRandomValues(new Uint32Array(T*=2));for(;v<T;)if(R=S[v]*131072+(S[v+1]>>>11),R>=9000000000000000)j=crypto.getRandomValues(new Uint32Array(2)),S[v]=j[0],S[v+1]=j[1];else h.push(R%100000000000000),v+=2;v=T/2}else if(crypto.randomBytes){S=crypto.randomBytes(T*=7);for(;v<T;)if(R=(S[v]&31)*281474976710656+S[v+1]*1099511627776+S[v+2]*4294967296+S[v+3]*16777216+(S[v+4]<<16)+(S[v+5]<<8)+S[v+6],R>=9000000000000000)crypto.randomBytes(7).copy(S,v);else h.push(R%100000000000000),v+=7;v=T/7}else throw F=!1,Error(u1+"crypto unavailable");if(!F){for(;v<T;)if(R=_(),R<9000000000000000)h[v++]=R%100000000000000}if(T=h[--v],q%=Q0,T&&q)R=zk[Q0-q],h[v]=aJ(T/R)*R;for(;h[v]===0;h.pop(),v--);if(v<0)h=[E=0];else{for(E=-1;h[0]===0;h.splice(0,1),E-=Q0);for(v=1,R=h[0];R>=10;R/=10,v++);if(v<Q0)E-=Q0-v}return y.e=E,y.c=h,y}}(),L.sum=function(){var D=1,_=arguments,q=new L(_[0]);for(;D<_.length;)q=q.plus(_[D++]);return q},Y=function(){var D="0123456789";function _(q,S,j,E){var T,R=[0],v,h=0,y=q.length;for(;h<y;){for(v=R.length;v--;R[v]*=S);R[0]+=E.indexOf(q.charAt(h++));for(T=0;T<R.length;T++)if(R[T]>j-1){if(R[T+1]==null)R[T+1]=0;R[T+1]+=R[T]/j|0,R[T]%=j}}return R.reverse()}return function(q,S,j,E,T){var R,v,h,y,o,G$,Z$,_$,E$=q.indexOf("."),d$=G,n$=Q;if(E$>=0)y=V,V=0,q=q.replace(".",""),_$=new L(S),G$=_$.pow(q.length-E$),V=y,_$.c=_(tW(tJ(G$.c),G$.e,"0"),10,j,D),_$.e=_$.c.length;Z$=_(q,S,j,T?(R=P,D):(R=D,P)),h=y=Z$.length;for(;Z$[--y]==0;Z$.pop());if(!Z$[0])return R.charAt(0);if(E$<0)--h;else G$.c=Z$,G$.e=h,G$.s=E,G$=J(G$,_$,d$,n$,j),Z$=G$.c,o=G$.r,h=G$.e;if(v=h+d$+1,E$=Z$[v],y=j/2,o=o||v<0||Z$[v+1]!=null,o=n$<4?(E$!=null||o)&&(n$==0||n$==(G$.s<0?3:2)):E$>y||E$==y&&(n$==4||o||n$==6&&Z$[v-1]&1||n$==(G$.s<0?8:7)),v<1||!Z$[0])q=o?tW(R.charAt(1),-d$,R.charAt(0)):R.charAt(0);else{if(Z$.length=v,o){for(--j;++Z$[--v]>j;)if(Z$[v]=0,!v)++h,Z$=[1].concat(Z$)}for(y=Z$.length;!Z$[--y];);for(E$=0,q="";E$<=y;q+=R.charAt(Z$[E$++]));q=tW(q,h,R.charAt(0))}return q}}(),J=function(){function D(S,j,E){var T,R,v,h,y=0,o=S.length,G$=j%N5,Z$=j/N5|0;for(S=S.slice();o--;)v=S[o]%N5,h=S[o]/N5|0,T=Z$*v+h*G$,R=G$*v+T%N5*N5+y,y=(R/E|0)+(T/N5|0)+Z$*h,S[o]=R%E;if(y)S=[y].concat(S);return S}function _(S,j,E,T){var R,v;if(E!=T)v=E>T?1:-1;else for(R=v=0;R<E;R++)if(S[R]!=j[R]){v=S[R]>j[R]?1:-1;break}return v}function q(S,j,E,T){var R=0;for(;E--;)S[E]-=R,R=S[E]<j[E]?1:0,S[E]=R*T+S[E]-j[E];for(;!S[0]&&S.length>1;S.splice(0,1));}return function(S,j,E,T,R){var v,h,y,o,G$,Z$,_$,E$,d$,n$,J0,m0,T8,XX,L5,u,a,f=S.s==j.s?1:-1,n=S.c,t=j.c;if(!n||!n[0]||!t||!t[0])return new L(!S.s||!j.s||(n?t&&n[0]==t[0]:!t)?NaN:n&&n[0]==0||!t?f*0:f/0);if(E$=new L(f),d$=E$.c=[],h=S.e-j.e,f=E+h+1,!R)R=YX,h=sJ(S.e/Q0)-sJ(j.e/Q0),f=f/Q0|0;for(y=0;t[y]==(n[y]||0);y++);if(t[y]>(n[y]||0))h--;if(f<0)d$.push(1),o=!0;else{if(XX=n.length,u=t.length,y=0,f+=2,G$=aJ(R/(t[0]+1)),G$>1)t=D(t,G$,R),n=D(n,G$,R),u=t.length,XX=n.length;T8=u,n$=n.slice(0,u),J0=n$.length;for(;J0<u;n$[J0++]=0);if(a=t.slice(),a=[0].concat(a),L5=t[0],t[1]>=R/2)L5++;do{if(G$=0,v=_(t,n$,u,J0),v<0){if(m0=n$[0],u!=J0)m0=m0*R+(n$[1]||0);if(G$=aJ(m0/L5),G$>1){if(G$>=R)G$=R-1;Z$=D(t,G$,R),_$=Z$.length,J0=n$.length;while(_(Z$,n$,_$,J0)==1)G$--,q(Z$,u<_$?a:t,_$,R),_$=Z$.length,v=1}else{if(G$==0)v=G$=1;Z$=t.slice(),_$=Z$.length}if(_$<J0)Z$=[0].concat(Z$);if(q(n$,Z$,J0,R),J0=n$.length,v==-1)while(_(t,n$,u,J0)<1)G$++,q(n$,u<J0?a:t,J0,R),J0=n$.length}else if(v===0)G$++,n$=[0];if(d$[y++]=G$,n$[0])n$[J0++]=n[T8]||0;else n$=[n[T8]],J0=1}while((T8++<XX||n$[0]!=null)&&f--);if(o=n$[0]!=null,!d$[0])d$.splice(0,1)}if(R==YX){for(y=1,f=d$[0];f>=10;f/=10,y++);O(E$,E+(E$.e=y+h*Q0-1)+1,T,o)}else E$.e=h,E$.r=+o;return E$}}();function g(D,_,q,S){var j,E,T,R,v;if(q==null)q=Q;else V6(q,0,8);if(!D.c)return D.toString();if(j=D.c[0],T=D.e,_==null)v=tJ(D.c),v=S==1||S==2&&(T<=H||T>=z)?kN(v,T):tW(v,T,"0");else if(D=O(new L(D),_,q),E=D.e,v=tJ(D.c),R=v.length,S==1||S==2&&(_<=E||E<=H)){for(;R<_;v+="0",R++);v=kN(v,E)}else if(_-=T+(S===2&&E>T),v=tW(v,E,"0"),E+1>R){if(--_>0)for(v+=".";_--;v+="0");}else if(_+=E-R,_>0){if(E+1==R)v+=".";for(;_--;v+="0");}return D.s<0&&j?"-"+v:v}function k(D,_){var q,S,j=1,E=new L(D[0]);for(;j<D.length;j++)if(S=new L(D[j]),!S.s||(q=N7(E,S))===_||q===0&&E.s===_)E=S;return E}function I(D,_,q){var S=1,j=_.length;for(;!_[--j];_.pop());for(j=_[0];j>=10;j/=10,S++);if((q=S+q*Q0-1)>w)D.c=D.e=null;else if(q<K)D.c=[D.e=0];else D.e=q,D.c=_;return D}X=function(){var D=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,q=/^\.([^.]+)$/,S=/^-?(Infinity|NaN)$/,j=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(E,T,R,v){var h,y=R?T:T.replace(j,"");if(S.test(y))E.s=isNaN(y)?null:y<0?-1:1;else{if(!R){if(y=y.replace(D,function(o,G$,Z$){return h=(Z$=Z$.toLowerCase())=="x"?16:Z$=="b"?2:8,!v||v==h?G$:o}),v)h=v,y=y.replace(_,"$1").replace(q,"0.$1");if(T!=y)return new L(y,h)}if(L.DEBUG)throw Error(u1+"Not a"+(v?" base "+v:"")+" number: "+T);E.s=null}E.c=E.e=null}}();function O(D,_,q,S){var j,E,T,R,v,h,y,o=D.c,G$=zk;if(o){$:{for(j=1,R=o[0];R>=10;R/=10,j++);if(E=_-j,E<0)E+=Q0,T=_,v=o[h=0],y=aJ(v/G$[j-T-1]%10);else if(h=Qk((E+1)/Q0),h>=o.length)if(S){for(;o.length<=h;o.push(0));v=y=0,j=1,E%=Q0,T=E-Q0+1}else break $;else{v=R=o[h];for(j=1;R>=10;R/=10,j++);E%=Q0,T=E-Q0+j,y=T<0?0:aJ(v/G$[j-T-1]%10)}if(S=S||_<0||o[h+1]!=null||(T<0?v:v%G$[j-T-1]),S=q<4?(y||S)&&(q==0||q==(D.s<0?3:2)):y>5||y==5&&(q==4||S||q==6&&(E>0?T>0?v/G$[j-T]:0:o[h-1])%10&1||q==(D.s<0?8:7)),_<1||!o[0]){if(o.length=0,S)_-=D.e+1,o[0]=G$[(Q0-_%Q0)%Q0],D.e=-_||0;else o[0]=D.e=0;return D}if(E==0)o.length=h,R=1,h--;else o.length=h+1,R=G$[Q0-E],o[h]=T>0?aJ(v/G$[j-T]%G$[T])*R:0;if(S)for(;;)if(h==0){for(E=1,T=o[0];T>=10;T/=10,E++);T=o[0]+=R;for(R=1;T>=10;T/=10,R++);if(E!=R){if(D.e++,o[0]==YX)o[0]=1}break}else{if(o[h]+=R,o[h]!=YX)break;o[h--]=0,R=1}for(E=o.length;o[--E]===0;o.pop());}if(D.e>w)D.c=D.e=null;else if(D.e<K)D.c=[D.e=0]}return D}function b(D){var _,q=D.e;if(q===null)return D.toString();return _=tJ(D.c),_=q<=H||q>=z?kN(_,q):tW(_,q,"0"),D.s<0?"-"+_:_}if(W.absoluteValue=W.abs=function(){var D=new L(this);if(D.s<0)D.s=1;return D},W.comparedTo=function(D,_){return N7(this,new L(D,_))},W.decimalPlaces=W.dp=function(D,_){var q,S,j,E=this;if(D!=null){if(V6(D,0,D8),_==null)_=Q;else V6(_,0,8);return O(new L(E),D+E.e+1,_)}if(!(q=E.c))return null;if(S=((j=q.length-1)-sJ(this.e/Q0))*Q0,j=q[j])for(;j%10==0;j/=10,S--);if(S<0)S=0;return S},W.dividedBy=W.div=function(D,_){return J(this,new L(D,_),G,Q)},W.dividedToIntegerBy=W.idiv=function(D,_){return J(this,new L(D,_),0,1)},W.exponentiatedBy=W.pow=function(D,_){var q,S,j,E,T,R,v,h,y,o=this;if(D=new L(D),D.c&&!D.isInteger())throw Error(u1+"Exponent not an integer: "+b(D));if(_!=null)_=new L(_);if(R=D.e>14,!o.c||!o.c[0]||o.c[0]==1&&!o.e&&o.c.length==1||!D.c||!D.c[0])return y=new L(Math.pow(+b(o),R?D.s*(2-IN(D)):+b(D))),_?y.mod(_):y;if(v=D.s<0,_){if(_.c?!_.c[0]:!_.s)return new L(NaN);if(S=!v&&o.isInteger()&&_.isInteger(),S)o=o.mod(_)}else if(D.e>9&&(o.e>0||o.e<-1||(o.e==0?o.c[0]>1||R&&o.c[1]>=240000000:o.c[0]<80000000000000||R&&o.c[0]<=99999750000000))){if(E=o.s<0&&IN(D)?-0:0,o.e>-1)E=1/E;return new L(v?1/E:E)}else if(V)E=Qk(V/Q0+2);if(R){if(q=new L(0.5),v)D.s=1;h=IN(D)}else j=Math.abs(+b(D)),h=j%2;y=new L(Z);for(;;){if(h){if(y=y.times(o),!y.c)break;if(E){if(y.c.length>E)y.c.length=E}else if(S)y=y.mod(_)}if(j){if(j=aJ(j/2),j===0)break;h=j%2}else if(D=D.times(q),O(D,D.e+1,1),D.e>14)h=IN(D);else{if(j=+b(D),j===0)break;h=j%2}if(o=o.times(o),E){if(o.c&&o.c.length>E)o.c.length=E}else if(S)o=o.mod(_)}if(S)return y;if(v)y=Z.div(y);return _?y.mod(_):E?O(y,V,Q,T):y},W.integerValue=function(D){var _=new L(this);if(D==null)D=Q;else V6(D,0,8);return O(_,_.e+1,D)},W.isEqualTo=W.eq=function(D,_){return N7(this,new L(D,_))===0},W.isFinite=function(){return!!this.c},W.isGreaterThan=W.gt=function(D,_){return N7(this,new L(D,_))>0},W.isGreaterThanOrEqualTo=W.gte=function(D,_){return(_=N7(this,new L(D,_)))===1||_===0},W.isInteger=function(){return!!this.c&&sJ(this.e/Q0)>this.c.length-2},W.isLessThan=W.lt=function(D,_){return N7(this,new L(D,_))<0},W.isLessThanOrEqualTo=W.lte=function(D,_){return(_=N7(this,new L(D,_)))===-1||_===0},W.isNaN=function(){return!this.s},W.isNegative=function(){return this.s<0},W.isPositive=function(){return this.s>0},W.isZero=function(){return!!this.c&&this.c[0]==0},W.minus=function(D,_){var q,S,j,E,T=this,R=T.s;if(D=new L(D,_),_=D.s,!R||!_)return new L(NaN);if(R!=_)return D.s=-_,T.plus(D);var v=T.e/Q0,h=D.e/Q0,y=T.c,o=D.c;if(!v||!h){if(!y||!o)return y?(D.s=-_,D):new L(o?T:NaN);if(!y[0]||!o[0])return o[0]?(D.s=-_,D):new L(y[0]?T:Q==3?-0:0)}if(v=sJ(v),h=sJ(h),y=y.slice(),R=v-h){if(E=R<0)R=-R,j=y;else h=v,j=o;j.reverse();for(_=R;_--;j.push(0));j.reverse()}else{S=(E=(R=y.length)<(_=o.length))?R:_;for(R=_=0;_<S;_++)if(y[_]!=o[_]){E=y[_]<o[_];break}}if(E)j=y,y=o,o=j,D.s=-D.s;if(_=(S=o.length)-(q=y.length),_>0)for(;_--;y[q++]=0);_=YX-1;for(;S>R;){if(y[--S]<o[S]){for(q=S;q&&!y[--q];y[q]=_);--y[q],y[S]+=YX}y[S]-=o[S]}for(;y[0]==0;y.splice(0,1),--h);if(!y[0])return D.s=Q==3?-1:1,D.c=[D.e=0],D;return I(D,y,h)},W.modulo=W.mod=function(D,_){var q,S,j=this;if(D=new L(D,_),!j.c||!D.s||D.c&&!D.c[0])return new L(NaN);else if(!D.c||j.c&&!j.c[0])return new L(j);if(U==9)S=D.s,D.s=1,q=J(j,D,0,3),D.s=S,q.s*=S;else q=J(j,D,0,U);if(D=j.minus(q.times(D)),!D.c[0]&&U==1)D.s=j.s;return D},W.multipliedBy=W.times=function(D,_){var q,S,j,E,T,R,v,h,y,o,G$,Z$,_$,E$,d$,n$=this,J0=n$.c,m0=(D=new L(D,_)).c;if(!J0||!m0||!J0[0]||!m0[0]){if(!n$.s||!D.s||J0&&!J0[0]&&!m0||m0&&!m0[0]&&!J0)D.c=D.e=D.s=null;else if(D.s*=n$.s,!J0||!m0)D.c=D.e=null;else D.c=[0],D.e=0;return D}if(S=sJ(n$.e/Q0)+sJ(D.e/Q0),D.s*=n$.s,v=J0.length,o=m0.length,v<o)_$=J0,J0=m0,m0=_$,j=v,v=o,o=j;for(j=v+o,_$=[];j--;_$.push(0));E$=YX,d$=N5;for(j=o;--j>=0;){q=0,G$=m0[j]%d$,Z$=m0[j]/d$|0;for(T=v,E=j+T;E>j;)h=J0[--T]%d$,y=J0[T]/d$|0,R=Z$*h+y*G$,h=G$*h+R%d$*d$+_$[E]+q,q=(h/E$|0)+(R/d$|0)+Z$*y,_$[E--]=h%E$;_$[E]=q}if(q)++S;else _$.splice(0,1);return I(D,_$,S)},W.negated=function(){var D=new L(this);return D.s=-D.s||null,D},W.plus=function(D,_){var q,S=this,j=S.s;if(D=new L(D,_),_=D.s,!j||!_)return new L(NaN);if(j!=_)return D.s=-_,S.minus(D);var E=S.e/Q0,T=D.e/Q0,R=S.c,v=D.c;if(!E||!T){if(!R||!v)return new L(j/0);if(!R[0]||!v[0])return v[0]?D:new L(R[0]?S:j*0)}if(E=sJ(E),T=sJ(T),R=R.slice(),j=E-T){if(j>0)T=E,q=v;else j=-j,q=R;q.reverse();for(;j--;q.push(0));q.reverse()}if(j=R.length,_=v.length,j-_<0)q=v,v=R,R=q,_=j;for(j=0;_;)j=(R[--_]=R[_]+v[_]+j)/YX|0,R[_]=YX===R[_]?0:R[_]%YX;if(j)R=[j].concat(R),++T;return I(D,R,T)},W.precision=W.sd=function(D,_){var q,S,j,E=this;if(D!=null&&D!==!!D){if(V6(D,1,D8),_==null)_=Q;else V6(_,0,8);return O(new L(E),D,_)}if(!(q=E.c))return null;if(j=q.length-1,S=j*Q0+1,j=q[j]){for(;j%10==0;j/=10,S--);for(j=q[0];j>=10;j/=10,S++);}if(D&&E.e+1>S)S=E.e+1;return S},W.shiftedBy=function(D){return V6(D,-Hk,Hk),this.times("1e"+D)},W.squareRoot=W.sqrt=function(){var D,_,q,S,j,E=this,T=E.c,R=E.s,v=E.e,h=G+4,y=new L("0.5");if(R!==1||!T||!T[0])return new L(!R||R<0&&(!T||T[0])?NaN:T?E:1/0);if(R=Math.sqrt(+b(E)),R==0||R==1/0){if(_=tJ(T),(_.length+v)%2==0)_+="0";if(R=Math.sqrt(+_),v=sJ((v+1)/2)-(v<0||v%2),R==1/0)_="5e"+v;else _=R.toExponential(),_=_.slice(0,_.indexOf("e")+1)+v;q=new L(_)}else q=new L(R+"");if(q.c[0]){if(v=q.e,R=v+h,R<3)R=0;for(;;)if(j=q,q=y.times(j.plus(J(E,j,h,1))),tJ(j.c).slice(0,R)===(_=tJ(q.c)).slice(0,R)){if(q.e<v)--R;if(_=_.slice(R-3,R+1),_=="9999"||!S&&_=="4999"){if(!S){if(O(j,j.e+G+2,0),j.times(j).eq(E)){q=j;break}}h+=4,R+=4,S=1}else{if(!+_||!+_.slice(1)&&_.charAt(0)=="5")O(q,q.e+G+2,1),D=!q.times(q).eq(E);break}}}return O(q,q.e+G+1,Q,D)},W.toExponential=function(D,_){if(D!=null)V6(D,0,D8),D++;return g(this,D,_,1)},W.toFixed=function(D,_){if(D!=null)V6(D,0,D8),D=D+this.e+1;return g(this,D,_)},W.toFormat=function(D,_,q){var S,j=this;if(q==null)if(D!=null&&_&&typeof _=="object")q=_,_=null;else if(D&&typeof D=="object")q=D,D=_=null;else q=N;else if(typeof q!="object")throw Error(u1+"Argument not an object: "+q);if(S=j.toFixed(D,_),j.c){var E,T=S.split("."),R=+q.groupSize,v=+q.secondaryGroupSize,h=q.groupSeparator||"",y=T[0],o=T[1],G$=j.s<0,Z$=G$?y.slice(1):y,_$=Z$.length;if(v)E=R,R=v,v=E,_$-=E;if(R>0&&_$>0){E=_$%R||R,y=Z$.substr(0,E);for(;E<_$;E+=R)y+=h+Z$.substr(E,R);if(v>0)y+=h+Z$.slice(E);if(G$)y="-"+y}S=o?y+(q.decimalSeparator||"")+((v=+q.fractionGroupSize)?o.replace(new RegExp("\\d{"+v+"}\\B","g"),"$&"+(q.fractionGroupSeparator||"")):o):y}return(q.prefix||"")+S+(q.suffix||"")},W.toFraction=function(D){var _,q,S,j,E,T,R,v,h,y,o,G$,Z$=this,_$=Z$.c;if(D!=null){if(R=new L(D),!R.isInteger()&&(R.c||R.s!==1)||R.lt(Z))throw Error(u1+"Argument "+(R.isInteger()?"out of range: ":"not an integer: ")+b(R))}if(!_$)return new L(Z$);_=new L(Z),h=q=new L(Z),S=v=new L(Z),G$=tJ(_$),E=_.e=G$.length-Z$.e-1,_.c[0]=zk[(T=E%Q0)<0?Q0+T:T],D=!D||R.comparedTo(_)>0?E>0?_:h:R,T=w,w=1/0,R=new L(G$),v.c[0]=0;for(;;){if(y=J(R,_,0,1),j=q.plus(y.times(S)),j.comparedTo(D)==1)break;q=S,S=j,h=v.plus(y.times(j=h)),v=j,_=R.minus(y.times(j=_)),R=j}return j=J(D.minus(q),S,0,1),v=v.plus(j.times(h)),q=q.plus(j.times(S)),v.s=h.s=Z$.s,E=E*2,o=J(h,S,E,Q).minus(Z$).abs().comparedTo(J(v,q,E,Q).minus(Z$).abs())<1?[h,S]:[v,q],w=T,o},W.toNumber=function(){return+b(this)},W.toPrecision=function(D,_){if(D!=null)V6(D,1,D8);return g(this,D,_,2)},W.toString=function(D){var _,q=this,S=q.s,j=q.e;if(j===null)if(S){if(_="Infinity",S<0)_="-"+_}else _="NaN";else{if(D==null)_=j<=H||j>=z?kN(tJ(q.c),j):tW(tJ(q.c),j,"0");else if(D===10&&B)q=O(new L(q),G+j+1,Q),_=tW(tJ(q.c),q.e,"0");else V6(D,2,P.length,"Base"),_=Y(tW(tJ(q.c),j,"0"),10,D,S,!0);if(S<0&&q.c[0])_="-"+_}return _},W.valueOf=W.toJSON=function(){return b(this)},W._isBigNumber=!0,W[Symbol.toStringTag]="BigNumber",W[Symbol.for("nodejs.util.inspect.custom")]=W.valueOf,$!=null)L.set($);return L}function sJ($){var J=$|0;return $>0||$===J?J:J-1}function tJ($){var J,Y,X=1,W=$.length,Z=$[0]+"";for(;X<W;){J=$[X++]+"",Y=Q0-J.length;for(;Y--;J="0"+J);Z+=J}for(W=Z.length;Z.charCodeAt(--W)===48;);return Z.slice(0,W+1||1)}function N7($,J){var Y,X,W=$.c,Z=J.c,G=$.s,Q=J.s,H=$.e,z=J.e;if(!G||!Q)return null;if(Y=W&&!W[0],X=Z&&!Z[0],Y||X)return Y?X?0:-Q:G;if(G!=Q)return G;if(Y=G<0,X=H==z,!W||!Z)return X?0:!W^Y?1:-1;if(!X)return H>z^Y?1:-1;Q=(H=W.length)<(z=Z.length)?H:z;for(G=0;G<Q;G++)if(W[G]!=Z[G])return W[G]>Z[G]^Y?1:-1;return H==z?0:H>z^Y?1:-1}function V6($,J,Y,X){if($<J||$>Y||$!==aJ($))throw Error(u1+(X||"Argument")+(typeof $=="number"?$<J||$>Y?" out of range: ":" not an integer: ":" not a primitive number: ")+String($))}function IN($){var J=$.c.length-1;return sJ($.e/Q0)==J&&$.c[J]%2!=0}function kN($,J){return($.length>1?$.charAt(0)+"."+$.slice(1):$)+(J<0?"e":"e+")+J}function tW($,J,Y){var X,W;if(J<0){for(W=Y+".";++J;W+=Y);$=W+$}else if(X=$.length,++J>X){for(W=Y,J-=X;--J;W+=Y);$+=W}else if(J<X)$=$.slice(0,J)+"."+$.slice(J);return $}var BU$=Va(),Na=BU$;var OU$=24,Ow=32,PU$=()=>{if(typeof globalThis<"u"&&globalThis.crypto&&typeof globalThis.crypto.getRandomValues==="function")return()=>{let $=new Uint32Array(1);return globalThis.crypto.getRandomValues($),$[0]/4294967296};return Math.random},wk=PU$(),Kk=($=4,J=wk)=>{let Y="";while(Y.length<$)Y=Y+Math.floor(J()*36).toString(36);return Y};function SU$($){let J=new Na(0);for(let Y of $.values())J=J.multipliedBy(256).plus(Y);return J}var La=($="")=>{return SU$(Da(new TextEncoder().encode($))).toString(36).slice(1)},_a=Array.from({length:26},($,J)=>String.fromCharCode(J+97)),AU$=($)=>_a[Math.floor($()*_a.length)],jU$=({globalObj:$=typeof global<"u"?global:typeof window<"u"?window:{},random:J=wk}={})=>{let Y=Object.keys($).toString(),X=Y.length?Y+Kk(Ow,J):Kk(Ow,J);return La(X).substring(0,Ow)},EU$=($)=>()=>{return $++},CU$=476782367,qa=({random:$=wk,counter:J=EU$(Math.floor($()*CU$)),length:Y=OU$,fingerprint:X=jU$({random:$})}={})=>{if(Y>Ow)throw Error(`Length must be between 2 and ${Ow}. Received: ${Y}`);return function(){let Z=AU$($),G=Date.now().toString(36),Q=J().toString(36),H=Kk(Y,$),z=`${G+H+Q+X}`;return`${Z+La(z).substring(1,Y)}`}},eJ=TU$(qa);function TU$($){let J;return()=>{if(!J)J=$();return J()}}var W4=r8("admin",{id:F$().primaryKey().$defaultFn(()=>eJ()),userId:F$().notNull(),name:F$().notNull(),email:F$().notNull(),phoneNumber:F$().notNull(),status:F$().default("pending").notNull(),createdAt:k0().defaultNow().notNull(),updatedAt:k0().defaultNow().$onUpdate(()=>new Date).notNull()});var Uk={};k4(Uk,{verification:()=>Ba,userRelations:()=>Oa,user:()=>aW,sessionRelations:()=>Pa,session:()=>Pw,accountRelations:()=>Sa,account:()=>Sw});var aW=r8("user",{id:F$("id").primaryKey(),name:F$("name").notNull(),email:F$("email").notNull().unique(),emailVerified:GQ("email_verified").default(!1).notNull(),image:F$("image"),createdAt:k0("created_at").defaultNow().notNull(),updatedAt:k0("updated_at").defaultNow().$onUpdate(()=>new Date).notNull(),role:F$("role"),banned:GQ("banned").default(!1),banReason:F$("ban_reason"),banExpires:k0("ban_expires"),phoneNumber:F$("phone_number").unique(),phoneNumberVerified:GQ("phone_number_verified")}),Pw=r8("session",{id:F$("id").primaryKey(),expiresAt:k0("expires_at").notNull(),token:F$("token").notNull().unique(),createdAt:k0("created_at").defaultNow().notNull(),updatedAt:k0("updated_at").$onUpdate(()=>new Date).notNull(),ipAddress:F$("ip_address"),userAgent:F$("user_agent"),userId:F$("user_id").notNull().references(()=>aW.id,{onDelete:"cascade"}),impersonatedBy:F$("impersonated_by")},($)=>[h1("session_userId_idx").on($.userId)]),Sw=r8("account",{id:F$("id").primaryKey(),accountId:F$("account_id").notNull(),providerId:F$("provider_id").notNull(),userId:F$("user_id").notNull().references(()=>aW.id,{onDelete:"cascade"}),accessToken:F$("access_token"),refreshToken:F$("refresh_token"),idToken:F$("id_token"),accessTokenExpiresAt:k0("access_token_expires_at"),refreshTokenExpiresAt:k0("refresh_token_expires_at"),scope:F$("scope"),password:F$("password"),createdAt:k0("created_at").defaultNow().notNull(),updatedAt:k0("updated_at").$onUpdate(()=>new Date).notNull()},($)=>[h1("account_userId_idx").on($.userId)]),Ba=r8("verification",{id:F$("id").primaryKey(),identifier:F$("identifier").notNull(),value:F$("value").notNull(),expiresAt:k0("expires_at").notNull(),createdAt:k0("created_at").defaultNow().notNull(),updatedAt:k0("updated_at").defaultNow().$onUpdate(()=>new Date).notNull()},($)=>[h1("verification_identifier_idx").on($.identifier)]),Oa=oJ(aW,({many:$})=>({sessions:$(Pw),accounts:$(Sw)})),Pa=oJ(Pw,({one:$})=>({user:$(aW,{fields:[Pw.userId],references:[aW.id]})})),Sa=oJ(Sw,({one:$})=>({user:$(aW,{fields:[Sw.userId],references:[aW.id]})}));var _7=r8("student",{id:F$().primaryKey().$defaultFn(()=>eJ()),userId:F$().notNull(),schoolId:F$().notNull().references(()=>D$.id,{onDelete:"cascade"}),name:F$().notNull(),dob:k0().defaultNow().notNull(),email:F$().notNull(),phoneNumber:F$().notNull(),image:F$().default("").notNull(),address:F$().default("").notNull(),batchIds:F$().array().default([]).notNull(),status:F$().default("pending").notNull(),createdAt:k0().defaultNow().notNull(),updatedAt:k0().defaultNow().$onUpdate(()=>new Date).notNull()},($)=>[h1("student_schoolId_idx").on($.schoolId),h1("student_userId_idx").on($.userId)]),RU$=oJ(_7,({one:$})=>({school:$(D$,{fields:[_7.schoolId],references:[D$.id]})}));var IU$=["teacher","admin","principal","master_admin"],g$=r8("teacher",{id:F$().primaryKey().$defaultFn(()=>eJ()),userId:F$().notNull(),schoolId:F$().notNull().references(()=>D$.id,{onDelete:"cascade"}),name:F$().notNull(),dob:k0().defaultNow().notNull(),email:F$().notNull(),phoneNumber:F$().notNull(),image:F$().default("").notNull(),address:F$().default("").notNull(),roles:F$().array().default(["teacher"]).notNull(),batchIds:F$().array().default([]).notNull(),status:F$().default("pending").notNull(),createdAt:k0().defaultNow().notNull(),updatedAt:k0().defaultNow().$onUpdate(()=>new Date).notNull()},($)=>[h1("teacher_schoolId_idx").on($.schoolId),h1("teacher_userId_idx").on($.userId),h1("teacher_roles_idx").on($.roles)]),kU$=oJ(g$,({one:$})=>({school:$(D$,{fields:[g$.schoolId],references:[D$.id]})}));var VQ=r8("batch",{id:F$().primaryKey().$defaultFn(()=>eJ()),schoolId:F$().notNull().references(()=>D$.id,{onDelete:"cascade"}),name:F$().notNull(),description:F$(),image:F$(),status:F$().default("active").notNull(),teacherIds:F$().array().default([]).notNull(),studentIds:F$().array().default([]).notNull(),createdAt:k0().defaultNow().notNull(),updatedAt:k0().defaultNow().$onUpdate(()=>new Date).notNull()},($)=>[h1("batch_schoolId_idx").on($.schoolId),h1("batch_status_idx").on($.status)]),bU$=r8("batch_assignment_history",{id:F$().primaryKey().$defaultFn(()=>eJ()),batchId:F$().notNull().references(()=>VQ.id,{onDelete:"cascade"}),action:F$().notNull(),createdBy:F$(),createdAt:k0().defaultNow().notNull(),updatedAt:k0().defaultNow().$onUpdate(()=>new Date).notNull()}),vU$=oJ(VQ,({one:$})=>({school:$(D$,{fields:[VQ.schoolId],references:[D$.id]})}));var D$=r8("school",{id:F$().primaryKey().$defaultFn(()=>eJ()),schoolCode:F$().notNull().unique(),name:F$().notNull(),email:F$().notNull().unique(),phone:F$().notNull(),address:F$().notNull(),city:F$().notNull(),state:F$().notNull(),country:F$().notNull(),postalCode:F$().notNull(),logo:F$(),website:F$(),description:F$(),establishedYear:F$(),board:F$(),status:F$().default("active").notNull(),maxStudents:F$(),currentStudents:F$().default("0"),maxTeachers:F$(),currentTeachers:F$().default("0"),accreditation:F$(),facilities:F$(),createdAt:k0().defaultNow().notNull(),updatedAt:k0().defaultNow().$onUpdate(()=>new Date).notNull()}),fU$=oJ(D$,({many:$})=>({students:$(_7),teachers:$(g$),batches:$(VQ)}));var O0=RN(Qa.DATABASE_URL,{schema:Fk});n0();$0();WK();var Dk=($,J)=>{let Y=null,X=(G)=>({getFieldName:Q,options:H})=>{function z(U){let V=J.schema||G._.fullSchema;if(!V)throw new q$("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");let N=V[U];if(!N)throw new q$(`[# Drizzle Adapter]: The model "${U}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return N}let K=async(U,V,N,P)=>{if(J.provider!=="mysql")return(await V.returning())[0];await V.execute();let B=z(U),L=V.config?.values;if(P?.length){let g=w(P.map((k)=>{if(N[k.field]!==void 0)return{...k,value:N[k.field]};return k}),U);return(await G.select().from(B).where(...g))[0]}else if(L&&L[0]?.id?.value){let g=L[0]?.id?.value;if(!g)g=(await G.select({id:d`LAST_INSERT_ID()`}).from(B).orderBy(DQ(B.id)).limit(1))[0].id;return(await G.select().from(B).where(h0(B.id,g)).limit(1).execute())[0]}else if(N.id)return(await G.select().from(B).where(h0(B.id,N.id)).limit(1).execute())[0];else{if(!("id"in B))throw new q$(`The model "${U}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await G.select().from(B).orderBy(DQ(B.id)).limit(1).execute())[0]}};function w(U,V){let N=z(V);if(!U)return[];if(U.length===1){let I=U[0];if(!I)return[];let O=Q({model:V,field:I.field});if(!N[O])throw new q$(`The field "${I.field}" does not exist in the schema for the model "${V}". Please update your schema.`);if(I.operator==="in"){if(!Array.isArray(I.value))throw new q$(`The value for the field "${I.field}" must be an array when using the "in" operator.`);return[UQ(N[O],I.value)]}if(I.operator==="not_in"){if(!Array.isArray(I.value))throw new q$(`The value for the field "${I.field}" must be an array when using the "not_in" operator.`);return[FQ(N[O],I.value)]}if(I.operator==="contains")return[rJ(N[O],`%${I.value}%`)];if(I.operator==="starts_with")return[rJ(N[O],`${I.value}%`)];if(I.operator==="ends_with")return[rJ(N[O],`%${I.value}`)];if(I.operator==="lt")return[KQ(N[O],I.value)];if(I.operator==="lte")return[wQ(N[O],I.value)];if(I.operator==="ne")return[QQ(N[O],I.value)];if(I.operator==="gt")return[HQ(N[O],I.value)];if(I.operator==="gte")return[zQ(N[O],I.value)];return[h0(N[O],I.value)]}let P=U.filter((I)=>I.connector==="AND"||!I.connector),B=U.filter((I)=>I.connector==="OR"),L=M7(...P.map((I)=>{let O=Q({model:V,field:I.field});if(I.operator==="in"){if(!Array.isArray(I.value))throw new q$(`The value for the field "${I.field}" must be an array when using the "in" operator.`);return UQ(N[O],I.value)}if(I.operator==="not_in"){if(!Array.isArray(I.value))throw new q$(`The value for the field "${I.field}" must be an array when using the "not_in" operator.`);return FQ(N[O],I.value)}if(I.operator==="contains")return rJ(N[O],`%${I.value}%`);if(I.operator==="starts_with")return rJ(N[O],`${I.value}%`);if(I.operator==="ends_with")return rJ(N[O],`%${I.value}`);if(I.operator==="lt")return KQ(N[O],I.value);if(I.operator==="lte")return wQ(N[O],I.value);if(I.operator==="gt")return HQ(N[O],I.value);if(I.operator==="gte")return zQ(N[O],I.value);if(I.operator==="ne")return QQ(N[O],I.value);return h0(N[O],I.value)})),g=PN(...B.map((I)=>{let O=Q({model:V,field:I.field});if(I.operator==="in"){if(!Array.isArray(I.value))throw new q$(`The value for the field "${I.field}" must be an array when using the "in" operator.`);return UQ(N[O],I.value)}if(I.operator==="not_in"){if(!Array.isArray(I.value))throw new q$(`The value for the field "${I.field}" must be an array when using the "not_in" operator.`);return FQ(N[O],I.value)}if(I.operator==="contains")return rJ(N[O],`%${I.value}%`);if(I.operator==="starts_with")return rJ(N[O],`${I.value}%`);if(I.operator==="ends_with")return rJ(N[O],`%${I.value}`);if(I.operator==="lt")return KQ(N[O],I.value);if(I.operator==="lte")return wQ(N[O],I.value);if(I.operator==="gt")return HQ(N[O],I.value);if(I.operator==="gte")return zQ(N[O],I.value);if(I.operator==="ne")return QQ(N[O],I.value);return h0(N[O],I.value)})),k=[];if(P.length)k.push(L);if(B.length)k.push(g);return k}function F(U,V,N){if(!U)throw new q$("Drizzle adapter failed to initialize. Drizzle Schema not found. Please provide a schema object in the adapter options object.");for(let P in N)if(!U[P])throw new q$(`The field "${P}" does not exist in the "${V}" Drizzle schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli@latest generate".`)}return{async create({model:U,data:V}){let N=z(U);return F(N,U,V),await K(U,G.insert(N).values(V),V)},async findOne({model:U,where:V,join:N}){let P=z(U),B=w(V,U);if(H.experimental?.joins)if(!G.query||!G.query[U])C$.error(`[# Drizzle Adapter]: The model "${U}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),C$.info("Falling back to regular query");else{let g,k=[];if(N){g={};let O=Object.entries(N);for(let[b,D]of O){let _=D.limit??H.advanced?.database?.defaultFindManyLimit??100,q=D.relation==="one-to-one",S=q||J.usePlural?"":"s";if(g[`${b}${S}`]=q?!0:{limit:_},!q)k.push(`${b}${S}`)}}let I=await G.query[U].findFirst({where:B[0],with:g});if(I)for(let O of k){let b=!J.usePlural?O.slice(0,-1):O;if(I[b]=I[O],O!==b)delete I[O]}return I}let L=await G.select().from(P).where(...B);if(!L.length)return null;return L[0]},async findMany({model:U,where:V,sortBy:N,limit:P,offset:B,join:L}){let g=z(U),k=V?w(V,U):[],I=N?.direction==="desc"?DQ:SN;if(H.experimental?.joins)if(!G.query[U])C$.error(`[# Drizzle Adapter]: The model "${U}" was not found in the query object. Please update your Drizzle schema to include relations or re-generate using "npx @better-auth/cli@latest generate".`),C$.info("Falling back to regular query");else{let _,q=[];if(L){_={};let E=Object.entries(L);for(let[T,R]of E){let v=R.relation==="one-to-one",h=R.limit??H.advanced?.database?.defaultFindManyLimit??100,y=v||J.usePlural?"":"s";if(_[`${T}${y}`]=v?!0:{limit:h},!v)q.push(`${T}${y}`)}}let S=void 0;if(N?.field)S=[I(g[Q({model:U,field:N?.field})])];let j=await G.query[U].findMany({where:k[0],with:_,limit:P??100,offset:B??0,orderBy:S});if(j)for(let E of j)for(let T of q){let R=!J.usePlural?T.slice(0,-1):T;if(R===T)continue;E[R]=E[T],delete E[T]}return j}let O=G.select().from(g),b=P,D=B;if(typeof b<"u")O=O.limit(b);if(typeof D<"u")O=O.offset(D);if(N?.field)O=O.orderBy(I(g[Q({model:U,field:N?.field})]));return await O.where(...k)},async count({model:U,where:V}){let N=z(U),P=V?w(V,U):[];return(await G.select({count:$a()}).from(N).where(...P))[0].count},async update({model:U,where:V,update:N}){let P=z(U),B=w(V,U);return await K(U,G.update(P).set(N).where(...B),N,V)},async updateMany({model:U,where:V,update:N}){let P=z(U),B=w(V,U);return await G.update(P).set(N).where(...B)},async delete({model:U,where:V}){let N=z(U),P=w(V,U);return await G.delete(N).where(...P)},async deleteMany({model:U,where:V}){let N=z(U),P=w(V,U),B=await G.delete(N).where(...P),L=0;if(B&&"rowCount"in B)L=B.rowCount;else if(Array.isArray(B))L=B.length;else if(B&&(("affectedRows"in B)||("rowsAffected"in B)||("changes"in B)))L=B.affectedRows??B.rowsAffected??B.changes;if(typeof L!=="number")C$.error("[Drizzle Adapter] The result of the deleteMany operation is not a number. This is likely a bug in the adapter. Please report this issue to the Better Auth team.",{res:B,model:U,where:V});return L},options:J}},W=null;W={config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:J.usePlural??!1,debugLogs:J.debugLogs??!1,supportsUUIDs:J.provider==="pg"?!0:!1,supportsJSON:J.provider==="pg"?!0:!1,supportsArrays:J.provider==="pg"?!0:!1,transaction:J.transaction??!1?(G)=>$.transaction((Q)=>{return G(TW({config:W.config,adapter:X(Q)})(Y))}):!1},adapter:X($)};let Z=TW(W);return(G)=>{return Y=G,Z(G)}};$0();function bN($){return{authorize(J,Y="AND"){let X=!1;for(let[W,Z]of Object.entries(J)){let G=$[W];if(!G)return{success:!1,error:`You are not allowed to access resource: ${W}`};if(Array.isArray(Z))X=Z.every((Q)=>G.includes(Q));else if(typeof Z==="object"){let Q=Z;if(Q.connector==="OR")X=Q.actions.some((H)=>G.includes(H));else X=Q.actions.every((H)=>G.includes(H))}else throw new q$("Invalid access control request");if(X&&Y==="OR")return{success:X};if(!X&&Y==="AND")return{success:!1,error:`unauthorized to access resource "${W}"`}}if(X)return{success:X};return{success:!1,error:"Not authorized"}},statements:$}}function NQ($){return{newRole(J){return bN(J)},statements:$}}var Aa={user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]},Mk=NQ(Aa),ja=Mk.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password","get","update"],session:["list","revoke","delete"]}),Ea=Mk.newRole({user:[],session:[]}),Aw={admin:ja,user:Ea};var vN=async($)=>{let J=$.context.returned;if(!J)return null;if(J instanceof Response){if(J.status!==200)return null;return await J.clone().json()}if(J instanceof x)return null;return J};_0();var I4=Y4({FAILED_TO_CREATE_USER:"Failed to create user",USER_ALREADY_EXISTS:"User already exists.",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",YOU_CANNOT_BAN_YOURSELF:"You cannot ban yourself",YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE:"You are not allowed to change users role",YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS:"You are not allowed to create users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS:"You are not allowed to list users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS:"You are not allowed to list users sessions",YOU_ARE_NOT_ALLOWED_TO_BAN_USERS:"You are not allowed to ban users",YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS:"You are not allowed to impersonate users",YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS:"You are not allowed to revoke users sessions",YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS:"You are not allowed to delete users",YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD:"You are not allowed to set users password",BANNED_USER:"You have been banned from this application",YOU_ARE_NOT_ALLOWED_TO_GET_USER:"You are not allowed to get user",NO_DATA_TO_UPDATE:"No data to update",YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS:"You are not allowed to update users",YOU_CANNOT_REMOVE_YOURSELF:"You cannot remove yourself",YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE:"You are not allowed to set a non-existent role value",YOU_CANNOT_IMPERSONATE_ADMINS:"You cannot impersonate admins",INVALID_ROLE_TYPE:"Invalid role type"});var o8=($)=>{if($.userId&&$.options?.adminUserIds?.includes($.userId))return!0;if(!$.permissions&&!$.permission)return!1;let J=($.role||$.options?.defaultRole||"user").split(","),Y=$.options?.roles||Aw;for(let X of J)if(Y[X]?.authorize($.permission??$.permissions)?.success)return!0;return!1};$0();y$();var $Y=j0(async($)=>{let J=await M0($);if(!J)throw new x("UNAUTHORIZED");return{session:J}});function Vk($){return Array.isArray($)?$.join(","):$}var gU$=c({userId:D0.string().meta({description:"The user id"}),role:w6([A().meta({description:"The role to set. `admin` or `user` by default"}),l$(A().meta({description:"The roles to set. `admin` or `user` by default"}))]).meta({description:"The role to set, this can be a string or an array of strings. Eg: `admin` or `[admin, user]`"})}),Ca=($)=>H$("/admin/set-role",{method:"POST",body:gU$,requireHeaders:!0,use:[$Y],metadata:{openapi:{operationId:"setUserRole",summary:"Set the role of a user",description:"Set the role of a user",responses:{200:{description:"User role updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async(J)=>{if(!o8({userId:J.context.session.user.id,role:J.context.session.user.role,options:$,permissions:{user:["set-role"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let Y=$.roles;if(Y){let W=Array.isArray(J.body.role)?J.body.role:[J.body.role];for(let Z of W)if(!Y[Z])throw new x("BAD_REQUEST",{message:I4.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}let X=await J.context.internalAdapter.updateUser(J.body.userId,{role:Vk(J.body.role)});return J.json({user:o$(J.context.options,X)})}),xU$=c({id:A().meta({description:"The id of the User"})}),Ta=($)=>H$("/admin/get-user",{method:"GET",query:xU$,use:[$Y],metadata:{openapi:{operationId:"getUser",summary:"Get an existing user",description:"Get an existing user",responses:{200:{description:"User",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(J)=>{let{id:Y}=J.query;if(!o8({userId:J.context.session.user.id,role:J.context.session.user.role,options:$,permissions:{user:["get"]}}))throw J.error("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_GET_USER,code:"YOU_ARE_NOT_ALLOWED_TO_GET_USER"});let X=await J.context.internalAdapter.findUserById(Y);if(!X)throw new x("NOT_FOUND",{message:V$.USER_NOT_FOUND});return o$(J.context.options,X)}),yU$=c({email:A().meta({description:"The email of the user"}),password:A().optional().meta({description:"The password of the user. If not provided, the user will be created without a credential account (useful for magic link or social login only users)."}),name:A().meta({description:"The name of the user"}),role:w6([A().meta({description:"The role of the user"}),l$(A().meta({description:"The roles of user"}))]).optional().meta({description:'A string or array of strings representing the roles to apply to the new user. Eg: "user"'}),data:a$(A(),W0()).optional().meta({description:"Extra fields for the user. Including custom additional fields."})}),Ra=($)=>H$("/admin/create-user",{method:"POST",body:yU$,metadata:{openapi:{operationId:"createUser",summary:"Create a new user",description:"Create a new user",responses:{200:{description:"User created",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},async(J)=>{let Y=await M0(J);if(!Y&&(J.request||J.headers))throw J.error("UNAUTHORIZED");if(Y){if(!o8({userId:Y.user.id,role:Y.user.role,options:$,permissions:{user:["create"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS})}let X=J.body.email.toLowerCase();if(!O6().safeParse(X).success)throw new x("BAD_REQUEST",{message:V$.INVALID_EMAIL});if(await J.context.internalAdapter.findUserByEmail(X))throw new x("BAD_REQUEST",{message:I4.USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL});let W=await J.context.internalAdapter.createUser({email:X,name:J.body.name,role:(J.body.role&&Vk(J.body.role))??$?.defaultRole??"user",...J.body.data});if(!W)throw new x("INTERNAL_SERVER_ERROR",{message:I4.FAILED_TO_CREATE_USER});if(J.body.password){let Z=await J.context.password.hash(J.body.password);await J.context.internalAdapter.linkAccount({accountId:W.id,providerId:"credential",password:Z,userId:W.id})}return J.json({user:o$(J.context.options,W)})}),hU$=c({userId:D0.string().meta({description:"The user id"}),data:a$(W0(),W0()).meta({description:"The user data to update"})}),Ia=($)=>H$("/admin/update-user",{method:"POST",body:hU$,use:[$Y],metadata:{openapi:{operationId:"updateUser",summary:"Update a user",description:"Update a user's details",responses:{200:{description:"User updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(J)=>{if(!o8({userId:J.context.session.user.id,role:J.context.session.user.role,options:$,permissions:{user:["update"]}}))throw J.error("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS,code:"YOU_ARE_NOT_ALLOWED_TO_UPDATE_USERS"});if(Object.keys(J.body.data).length===0)throw new x("BAD_REQUEST",{message:I4.NO_DATA_TO_UPDATE});if(Object.prototype.hasOwnProperty.call(J.body.data,"role")){if(!o8({userId:J.context.session.user.id,role:J.context.session.user.role,options:$,permissions:{user:["set-role"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});let X=J.body.data.role,W=Array.isArray(X)?X:[X];for(let Z of W){if(typeof Z!=="string")throw new x("BAD_REQUEST",{message:I4.INVALID_ROLE_TYPE});if($.roles&&!$.roles[Z])throw new x("BAD_REQUEST",{message:I4.YOU_ARE_NOT_ALLOWED_TO_SET_NON_EXISTENT_VALUE})}J.body.data.role=Vk(W)}let Y=await J.context.internalAdapter.updateUser(J.body.userId,J.body.data);return J.json(o$(J.context.options,Y))}),mU$=c({searchValue:A().optional().meta({description:'The value to search for. Eg: "some name"'}),searchField:N0(["email","name"]).meta({description:'The field to search in, defaults to email. Can be `email` or `name`. Eg: "name"'}).optional(),searchOperator:N0(["contains","starts_with","ends_with"]).meta({description:'The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`. Eg: "contains"'}).optional(),limit:A().meta({description:"The number of users to return"}).or(H0()).optional(),offset:A().meta({description:"The offset to start from"}).or(H0()).optional(),sortBy:A().meta({description:"The field to sort by"}).optional(),sortDirection:N0(["asc","desc"]).meta({description:"The direction to sort by"}).optional(),filterField:A().meta({description:"The field to filter by"}).optional(),filterValue:A().meta({description:"The value to filter by"}).or(H0()).or(m$()).optional(),filterOperator:N0(["eq","ne","lt","lte","gt","gte","contains"]).meta({description:"The operator to use for the filter"}).optional()}),ka=($)=>H$("/admin/list-users",{method:"GET",use:[$Y],query:mU$,metadata:{openapi:{operationId:"listUsers",summary:"List users",description:"List users",responses:{200:{description:"List of users",content:{"application/json":{schema:{type:"object",properties:{users:{type:"array",items:{$ref:"#/components/schemas/User"}},total:{type:"number"},limit:{type:"number"},offset:{type:"number"}},required:["users","total"]}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{user:["list"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS});let X=[];if(J.query?.searchValue)X.push({field:J.query.searchField||"email",operator:J.query.searchOperator||"contains",value:J.query.searchValue});if(J.query?.filterValue)X.push({field:J.query.filterField||"email",operator:J.query.filterOperator||"eq",value:J.query.filterValue});try{let W=await J.context.internalAdapter.listUsers(Number(J.query?.limit)||void 0,Number(J.query?.offset)||void 0,J.query?.sortBy?{field:J.query.sortBy,direction:J.query.sortDirection||"asc"}:void 0,X.length?X:void 0),Z=await J.context.internalAdapter.countTotalUsers(X.length?X:void 0);return J.json({users:W.map((G)=>o$(J.context.options,G)),total:Z,limit:Number(J.query?.limit)||void 0,offset:Number(J.query?.offset)||void 0})}catch{return J.json({users:[],total:0})}}),uU$=c({userId:D0.string().meta({description:"The user id"})}),ba=($)=>H$("/admin/list-user-sessions",{method:"POST",use:[$Y],body:uU$,metadata:{openapi:{operationId:"listUserSessions",summary:"List user sessions",description:"List user sessions",responses:{200:{description:"List of user sessions",content:{"application/json":{schema:{type:"object",properties:{sessions:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{session:["list"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS});let X=await J.context.internalAdapter.listSessions(J.body.userId);return J.json({sessions:X.map((W)=>n6(J.context.options,W))})}),dU$=c({userId:D0.string().meta({description:"The user id"})}),va=($)=>H$("/admin/unban-user",{method:"POST",body:dU$,use:[$Y],metadata:{openapi:{operationId:"unbanUser",summary:"Unban a user",description:"Unban a user",responses:{200:{description:"User unbanned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{user:["ban"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});let X=await J.context.internalAdapter.updateUser(J.body.userId,{banned:!1,banExpires:null,banReason:null,updatedAt:new Date});return J.json({user:o$(J.context.options,X)})}),cU$=c({userId:D0.string().meta({description:"The user id"}),banReason:A().meta({description:"The reason for the ban"}).optional(),banExpiresIn:H0().meta({description:"The number of seconds until the ban expires"}).optional()}),fa=($)=>H$("/admin/ban-user",{method:"POST",body:cU$,use:[$Y],metadata:{openapi:{operationId:"banUser",summary:"Ban a user",description:"Ban a user",responses:{200:{description:"User banned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{user:["ban"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});if(!await J.context.internalAdapter.findUserById(J.body.userId))throw new x("NOT_FOUND",{message:V$.USER_NOT_FOUND});if(J.body.userId===J.context.session.user.id)throw new x("BAD_REQUEST",{message:I4.YOU_CANNOT_BAN_YOURSELF});let X=await J.context.internalAdapter.updateUser(J.body.userId,{banned:!0,banReason:J.body.banReason||$?.defaultBanReason||"No reason",banExpires:J.body.banExpiresIn?x4(J.body.banExpiresIn,"sec"):$?.defaultBanExpiresIn?x4($.defaultBanExpiresIn,"sec"):void 0,updatedAt:new Date});return await J.context.internalAdapter.deleteSessions(J.body.userId),J.json({user:o$(J.context.options,X)})}),pU$=c({userId:D0.string().meta({description:"The user id"})}),ga=($)=>H$("/admin/impersonate-user",{method:"POST",body:pU$,use:[$Y],metadata:{openapi:{operationId:"impersonateUser",summary:"Impersonate a user",description:"Impersonate a user",responses:{200:{description:"Impersonation session created",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}}}}}},async(J)=>{if(!o8({userId:J.context.session.user.id,role:J.context.session.user.role,options:$,permissions:{user:["impersonate"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS});let Y=await J.context.internalAdapter.findUserById(J.body.userId);if(!Y)throw new x("NOT_FOUND",{message:"User not found"});let X=(Array.isArray($.adminRoles)?$.adminRoles:$.adminRoles?.split(",")||[]).map((z)=>z.trim()),W=(Y.role||$.defaultRole||"user").split(",");if($.allowImpersonatingAdmins!==!0&&(W.some((z)=>X.includes(z))||$.adminUserIds?.includes(Y.id)))throw new x("FORBIDDEN",{message:I4.YOU_CANNOT_IMPERSONATE_ADMINS});let Z=await J.context.internalAdapter.createSession(Y.id,!0,{impersonatedBy:J.context.session.user.id,expiresAt:$?.impersonationSessionDuration?x4($.impersonationSessionDuration,"sec"):x4(3600,"sec")},!0);if(!Z)throw new x("INTERNAL_SERVER_ERROR",{message:I4.FAILED_TO_CREATE_USER});let G=J.context.authCookies;WJ(J);let Q=await J.getSignedCookie(J.context.authCookies.dontRememberToken.name,J.context.secret),H=J.context.createAuthCookie("admin_session");return await J.setSignedCookie(H.name,`${J.context.session.session.token}:${Q||""}`,J.context.secret,G.sessionToken.attributes),await U0(J,{session:Z,user:Y},!0),J.json({session:Z,user:o$(J.context.options,Y)})}),xa=()=>H$("/admin/stop-impersonating",{method:"POST",requireHeaders:!0},async($)=>{let J=await M0($);if(!J)throw new x("UNAUTHORIZED");if(!J.session.impersonatedBy)throw new x("BAD_REQUEST",{message:"You are not impersonating anyone"});let Y=await $.context.internalAdapter.findUserById(J.session.impersonatedBy);if(!Y)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to find user"});let X=$.context.createAuthCookie("admin_session"),W=await $.getSignedCookie(X.name,$.context.secret);if(!W)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});let[Z,G]=W?.split(":"),Q=await $.context.internalAdapter.findSession(Z);if(!Q||Q.session.userId!==Y.id)throw new x("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});return await $.context.internalAdapter.deleteSession(J.session.token),await U0($,Q,!!G),k6($,X),$.json({session:n6($.context.options,Q.session),user:o$($.context.options,Q.user)})}),lU$=c({sessionToken:A().meta({description:"The session token"})}),ya=($)=>H$("/admin/revoke-user-session",{method:"POST",body:lU$,use:[$Y],metadata:{openapi:{operationId:"revokeUserSession",summary:"Revoke a user session",description:"Revoke a user session",responses:{200:{description:"Session revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{session:["revoke"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await J.context.internalAdapter.deleteSession(J.body.sessionToken),J.json({success:!0})}),nU$=c({userId:D0.string().meta({description:"The user id"})}),ha=($)=>H$("/admin/revoke-user-sessions",{method:"POST",body:nU$,use:[$Y],metadata:{openapi:{operationId:"revokeUserSessions",summary:"Revoke all user sessions",description:"Revoke all user sessions",responses:{200:{description:"Sessions revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{session:["revoke"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await J.context.internalAdapter.deleteSessions(J.body.userId),J.json({success:!0})}),iU$=c({userId:D0.string().meta({description:"The user id"})}),ma=($)=>H$("/admin/remove-user",{method:"POST",body:iU$,use:[$Y],metadata:{openapi:{operationId:"removeUser",summary:"Remove a user",description:"Delete a user and all their sessions and accounts. Cannot be undone.",responses:{200:{description:"User removed",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async(J)=>{let Y=J.context.session;if(!o8({userId:J.context.session.user.id,role:Y.user.role,options:$,permissions:{user:["delete"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS});if(J.body.userId===J.context.session.user.id)throw new x("BAD_REQUEST",{message:I4.YOU_CANNOT_REMOVE_YOURSELF});if(!await J.context.internalAdapter.findUserById(J.body.userId))throw new x("NOT_FOUND",{message:"User not found"});return await J.context.internalAdapter.deleteUser(J.body.userId),J.json({success:!0})}),rU$=c({newPassword:A().nonempty("newPassword cannot be empty").meta({description:"The new password"}),userId:D0.string().nonempty("userId cannot be empty").meta({description:"The user id"})}),ua=($)=>H$("/admin/set-user-password",{method:"POST",body:rU$,use:[$Y],metadata:{openapi:{operationId:"setUserPassword",summary:"Set a user's password",description:"Set a user's password",responses:{200:{description:"Password set",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},async(J)=>{if(!o8({userId:J.context.session.user.id,role:J.context.session.user.role,options:$,permissions:{user:["set-password"]}}))throw new x("FORBIDDEN",{message:I4.YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD});let{newPassword:Y,userId:X}=J.body,W=J.context.password.config.minPasswordLength;if(Y.length<W)throw J.context.logger.error("Password is too short"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_SHORT});let Z=J.context.password.config.maxPasswordLength;if(Y.length>Z)throw J.context.logger.error("Password is too long"),new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_LONG});let G=await J.context.password.hash(Y);return await J.context.internalAdapter.updatePassword(X,G),J.json({status:!0})}),oU$=c({userId:D0.string().optional().meta({description:'The user id. Eg: "user-id"'}),role:A().optional().meta({description:'The role to check permission for. Eg: "admin"'})}).and(w6([c({permission:a$(A(),l$(A())),permissions:LW()}),c({permission:LW(),permissions:a$(A(),l$(A()))})])),da=($)=>{return H$("/admin/has-permission",{method:"POST",body:oU$,metadata:{openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{"200":{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}},$Infer:{body:{}}}},async(J)=>{if(!J.body?.permission&&!J.body?.permissions)throw new x("BAD_REQUEST",{message:"invalid permission check. no permission(s) were passed."});let Y=await M0(J);if(!Y&&(J.request||J.headers))throw new x("UNAUTHORIZED");if(!Y&&!J.body.userId&&!J.body.role)throw new x("BAD_REQUEST",{message:"user id or role is required"});let X=Y?.user||(J.body.role?{id:J.body.userId||"",role:J.body.role}:null)||(J.body.userId?await J.context.internalAdapter.findUserById(J.body.userId):null);if(!X)throw new x("BAD_REQUEST",{message:"user not found"});let W=o8({userId:X.id,role:X.role,options:$,permissions:J.body.permissions??J.body.permission});return J.json({error:null,success:W})})};var ca={user:{fields:{role:{type:"string",required:!1,input:!1},banned:{type:"boolean",defaultValue:!1,required:!1,input:!1},banReason:{type:"string",required:!1,input:!1},banExpires:{type:"date",required:!1,input:!1}}},session:{fields:{impersonatedBy:{type:"string",required:!1}}}};$0();var fN=($)=>{let J={...$||{},defaultRole:$?.defaultRole??"user",adminRoles:$?.adminRoles??["admin"],bannedUserMessage:$?.bannedUserMessage??"You have been banned from this application. Please contact support if you believe this is an error."};if($?.adminRoles){let Y=(Array.isArray($.adminRoles)?$.adminRoles:[...$.adminRoles.split(",")]).filter((X)=>!Object.keys($?.roles||Aw).map((W)=>W.toLowerCase()).includes(X.toLowerCase()));if(Y.length>0)throw new q$(`Invalid admin roles: ${Y.join(", ")}. Admin roles must be defined in the 'roles' configuration.`)}return{id:"admin",init(){return{options:{databaseHooks:{user:{create:{async before(Y){return{data:{role:$?.defaultRole??"user",...Y}}}}},session:{create:{async before(Y,X){if(!X)return;let W=await X.context.internalAdapter.findUserById(Y.userId);if(W.banned){if(W.banExpires&&new Date(W.banExpires).getTime()<Date.now()){await X.context.internalAdapter.updateUser(Y.userId,{banned:!1,banReason:null,banExpires:null});return}if(X&&(X.path.startsWith("/callback")||X.path.startsWith("/oauth2/callback"))){let Z=X.context.options.onAPIError?.errorURL||`${X.context.baseURL}/error`;throw X.redirect(`${Z}?error=banned&error_description=${J.bannedUserMessage}`)}throw new x("FORBIDDEN",{message:J.bannedUserMessage,code:"BANNED_USER"})}}}}}}}},hooks:{after:[{matcher(Y){return Y.path==="/list-sessions"},handler:j0(async(Y)=>{let X=await vN(Y);if(!X)return;let W=X.filter((Z)=>{return!Z.impersonatedBy});return Y.json(W)})}]},endpoints:{setRole:Ca(J),getUser:Ta(J),createUser:Ra(J),adminUpdateUser:Ia(J),listUsers:ka(J),listUserSessions:ba(J),unbanUser:va(J),banUser:fa(J),impersonateUser:ga(J),stopImpersonating:xa(),revokeUserSession:ya(J),revokeUserSessions:ha(J),removeUser:ma(J),setUserPassword:ua(J),userHasPermission:da(J)},$ERROR_CODES:I4,schema:j1(ca,J.schema),options:$}};_0();var tU$=Y4({INVALID_EMAIL_FORMAT:"Email was not generated in a valid format",FAILED_TO_CREATE_USER:"Failed to create user",COULD_NOT_CREATE_SESSION:"Could not create session",ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY:"Anonymous users cannot sign in again anonymously",FAILED_TO_DELETE_ANONYMOUS_USER:"Failed to delete anonymous user",USER_IS_NOT_ANONYMOUS:"User is not anonymous",DELETE_ANONYMOUS_USER_DISABLED:"Deleting anonymous users is disabled"});_0();_0();_0();y$();var aS0=c({key:A().meta({description:"The key to verify"}),permissions:a$(A(),l$(A())).meta({description:"The permissions to verify."}).optional()});_0();y$();var QA0=c({name:A().meta({description:"Name of the Api Key"}).optional(),expiresIn:H0().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable().default(null),userId:D0.string().meta({description:'User Id of the user that the Api Key belongs to. server-only. Eg: "user-id"'}).optional(),prefix:A().meta({description:"Prefix of the Api Key"}).regex(/^[a-zA-Z0-9_-]+$/,{message:"Invalid prefix format, must be alphanumeric and contain only underscores and hyphens."}).optional(),remaining:H0().meta({description:"Remaining number of requests. Server side only"}).min(0).optional().nullable().default(null),metadata:W0().optional(),refillAmount:H0().meta({description:"Amount to refill the remaining count of the Api Key. server-only. Eg: 100"}).min(1).optional(),refillInterval:H0().meta({description:"Interval to refill the Api Key in milliseconds. server-only. Eg: 1000"}).optional(),rateLimitTimeWindow:H0().meta({description:"The duration in milliseconds where each request is counted. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 1000"}).optional(),rateLimitMax:H0().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),rateLimitEnabled:m$().meta({description:"Whether the key has rate limiting enabled. server-only. Eg: true"}).optional(),permissions:a$(A(),l$(A())).meta({description:"Permissions of the Api Key."}).optional()});y$();var VA0=c({keyId:A().meta({description:"The id of the Api Key"})});_0();y$();var AA0=c({id:A().meta({description:"The id of the Api Key"})});_0();_0();y$();var pA0=c({keyId:A().meta({description:"The id of the Api Key"}),userId:D0.string().meta({description:'The id of the user which the api key belongs to. server-only. Eg: "some-user-id"'}).optional(),name:A().meta({description:"The name of the key"}).optional(),enabled:m$().meta({description:"Whether the Api Key is enabled or not"}).optional(),remaining:H0().meta({description:"The number of remaining requests"}).min(1).optional(),refillAmount:H0().meta({description:"The refill amount"}).optional(),refillInterval:H0().meta({description:"The refill interval"}).optional(),metadata:W0().optional(),expiresIn:H0().meta({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable(),rateLimitEnabled:m$().meta({description:"Whether the key has rate limiting enabled."}).optional(),rateLimitTimeWindow:H0().meta({description:"The duration in milliseconds where each request is counted. server-only. Eg: 1000"}).optional(),rateLimitMax:H0().meta({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. server-only. Eg: 100"}).optional(),permissions:a$(A(),l$(A())).meta({description:"Update the permissions on the API Key. server-only."}).optional().nullable()});var Hj0={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY};_0();var L7=Y4({INVALID_METADATA_TYPE:"metadata must be an object or undefined",REFILL_AMOUNT_AND_INTERVAL_REQUIRED:"refillAmount is required when refillInterval is provided",REFILL_INTERVAL_AND_AMOUNT_REQUIRED:"refillInterval is required when refillAmount is provided",USER_BANNED:"User is banned",UNAUTHORIZED_SESSION:"Unauthorized or invalid session",KEY_NOT_FOUND:"API Key not found",KEY_DISABLED:"API Key is disabled",KEY_EXPIRED:"API Key has expired",USAGE_EXCEEDED:"API Key has reached its usage limit",KEY_NOT_RECOVERABLE:"API Key is not recoverable",EXPIRES_IN_IS_TOO_SMALL:"The expiresIn is smaller than the predefined minimum value.",EXPIRES_IN_IS_TOO_LARGE:"The expiresIn is larger than the predefined maximum value.",INVALID_REMAINING:"The remaining count is either too large or too small.",INVALID_PREFIX_LENGTH:"The prefix length is either too large or too small.",INVALID_NAME_LENGTH:"The name length is either too large or too small.",METADATA_DISABLED:"Metadata is disabled.",RATE_LIMIT_EXCEEDED:"Rate limit exceeded.",NO_VALUES_TO_UPDATE:"No values to update.",KEY_DISABLED_EXPIRATION:"Custom key expiration values are disabled.",INVALID_API_KEY:"Invalid API key.",INVALID_USER_ID_FROM_API_KEY:"The user id from the API key is invalid.",INVALID_API_KEY_GETTER_RETURN_TYPE:"API Key getter returned an invalid key type. Expected string.",SERVER_ONLY_PROPERTY:"The property you're trying to set can only be set from the server auth instance only.",FAILED_TO_UPDATE_API_KEY:"Failed to update API key",NAME_REQUIRED:"API Key name is required."});var Nk=($)=>{return{id:"bearer",hooks:{before:[{matcher(J){return Boolean(J.request?.headers.get("authorization")||J.headers?.get("authorization"))},handler:j0(async(J)=>{let Y=J.request?.headers.get("authorization")?.replace("Bearer ","")||J.headers?.get("Authorization")?.replace("Bearer ","");if(!Y)return;let X="";if(Y.includes("."))X=Y.replace("=","");else{if($?.requireSignature)return;X=(await pz("",Y,J.context.secret)).replace("=","")}try{let G=decodeURIComponent(X);if(!await EW("SHA-256","base64urlnopad").verify(J.context.secret,G.split(".")[0],G.split(".")[1]))return}catch{return}let W=J.request?.headers||J.headers,Z=new Headers({...Object.fromEntries(W?.entries())});return Z.append("cookie",`${J.context.authCookies.sessionToken.name}=${X}`),{context:{headers:Z}}})}],after:[{matcher(J){return!0},handler:j0(async(J)=>{let Y=J.context.responseHeaders?.get("set-cookie");if(!Y)return;let X=d9(Y),W=J.context.authCookies.sessionToken.name,Z=X.get(W);if(!Z||!Z.value||Z["max-age"]===0)return;let G=Z.value,Q=J.context.responseHeaders?.get("access-control-expose-headers")||"",H=new Set(Q.split(",").map((z)=>z.trim()).filter(Boolean));H.add("set-auth-token"),J.setHeader("set-auth-token",G),J.setHeader("Access-Control-Expose-Headers",Array.from(H).join(", "))})}]},options:$}};var Ew={CLOUDFLARE_TURNSTILE:"cloudflare-turnstile",GOOGLE_RECAPTCHA:"google-recaptcha",HCAPTCHA:"hcaptcha",CAPTCHAFOX:"captchafox"},sU$={[Ew.CLOUDFLARE_TURNSTILE]:"https://challenges.cloudflare.com/turnstile/v0/siteverify",[Ew.GOOGLE_RECAPTCHA]:"https://www.google.com/recaptcha/api/siteverify",[Ew.HCAPTCHA]:"https://api.hcaptcha.com/siteverify",[Ew.CAPTCHAFOX]:"https://api.captchafox.com/siteverify"};_0();var Cw=Y4({VERIFICATION_FAILED:"Captcha verification failed",MISSING_RESPONSE:"Missing CAPTCHA response",UNKNOWN_ERROR:"Something went wrong"}),Tw=Y4({MISSING_SECRET_KEY:"Missing secret key",SERVICE_UNAVAILABLE:"CAPTCHA service unavailable"});y$();var AE0=l6(c({disableCookieCache:m$().meta({description:"Disable cookie cache and fetch session from database"}).or(A().transform(($)=>$==="true")).optional(),disableRefresh:m$().meta({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()}));_0();var JY=Y4({INVALID_DEVICE_CODE:"Invalid device code",EXPIRED_DEVICE_CODE:"Device code has expired",EXPIRED_USER_CODE:"User code has expired",AUTHORIZATION_PENDING:"Authorization pending",ACCESS_DENIED:"Access denied",INVALID_USER_CODE:"Invalid user code",DEVICE_CODE_ALREADY_PROCESSED:"Device code already processed",POLLING_TOO_FREQUENTLY:"Polling too frequently",USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_SESSION:"Failed to create session",INVALID_DEVICE_CODE_STATUS:"Invalid device code status",AUTHENTICATION_REQUIRED:"Authentication required"});y$();var gE0=c({client_id:A().meta({description:"The client ID of the application"}),scope:A().meta({description:"Space-separated list of scopes"}).optional()}),xE0=c({error:N0(["invalid_request","invalid_client"]).meta({description:"Error code"}),error_description:A().meta({description:"Detailed error description"})});var yE0=c({grant_type:bz("urn:ietf:params:oauth:grant-type:device_code").meta({description:"The grant type for device flow"}),device_code:A().meta({description:"The device verification code"}),client_id:A().meta({description:"The client ID of the application"})}),hE0=c({error:N0(["authorization_pending","slow_down","expired_token","access_denied","invalid_request","invalid_grant"]).meta({description:"Error code"}),error_description:A().meta({description:"Detailed error description"})});var XF$=H$("/device",{method:"GET",query:c({user_code:A().meta({description:"The user code to verify"})}),error:c({error:N0(["invalid_request"]).meta({description:"Error code"}),error_description:A().meta({description:"Detailed error description"})}),metadata:{openapi:{description:"Verify user code and get device authorization status",responses:{200:{description:"Device authorization status",content:{"application/json":{schema:{type:"object",properties:{user_code:{type:"string",description:"The user code to verify"},status:{type:"string",enum:["pending","approved","denied"],description:"Current status of the device authorization"}}}}}}}}}},async($)=>{let{user_code:J}=$.query,Y=J.replace(/-/g,""),X=await $.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:Y}]});if(!X)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:JY.INVALID_USER_CODE});if(X.expiresAt<new Date)throw new x("BAD_REQUEST",{error:"expired_token",error_description:JY.EXPIRED_USER_CODE});return $.json({user_code:J,status:X.status})}),WF$=H$("/device/approve",{method:"POST",body:c({userCode:A().meta({description:"The user code to approve"})}),error:c({error:N0(["invalid_request","expired_token","device_code_already_processed","unauthorized","access_denied"]).meta({description:"Error code"}),error_description:A().meta({description:"Detailed error description"})}),requireHeaders:!0,metadata:{openapi:{description:"Approve device authorization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async($)=>{let J=await M0($);if(!J)throw new x("UNAUTHORIZED",{error:"unauthorized",error_description:JY.AUTHENTICATION_REQUIRED});let{userCode:Y}=$.body,X=Y.replace(/-/g,""),W=await $.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:X}]});if(!W)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:JY.INVALID_USER_CODE});if(W.expiresAt<new Date)throw new x("BAD_REQUEST",{error:"expired_token",error_description:JY.EXPIRED_USER_CODE});if(W.status!=="pending")throw new x("BAD_REQUEST",{error:"invalid_request",error_description:JY.DEVICE_CODE_ALREADY_PROCESSED});if(W.userId&&W.userId!==J.user.id)throw new x("FORBIDDEN",{error:"access_denied",error_description:"You are not authorized to approve this device authorization"});return await $.context.adapter.update({model:"deviceCode",where:[{field:"id",value:W.id}],update:{status:"approved",userId:J.user.id}}),$.json({success:!0})}),ZF$=H$("/device/deny",{method:"POST",body:c({userCode:A().meta({description:"The user code to deny"})}),error:c({error:N0(["invalid_request","expired_token","unauthorized","access_denied"]).meta({description:"Error code"}),error_description:A().meta({description:"Detailed error description"})}),requireHeaders:!0,metadata:{openapi:{description:"Deny device authorization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},async($)=>{let J=await M0($);if(!J)throw new x("UNAUTHORIZED",{error:"unauthorized",error_description:JY.AUTHENTICATION_REQUIRED});let{userCode:Y}=$.body,X=Y.replace(/-/g,""),W=await $.context.adapter.findOne({model:"deviceCode",where:[{field:"userCode",value:X}]});if(!W)throw new x("BAD_REQUEST",{error:"invalid_request",error_description:JY.INVALID_USER_CODE});if(W.expiresAt<new Date)throw new x("BAD_REQUEST",{error:"expired_token",error_description:JY.EXPIRED_USER_CODE});if(W.status!=="pending")throw new x("BAD_REQUEST",{error:"invalid_request",error_description:JY.DEVICE_CODE_ALREADY_PROCESSED});if(W.userId&&W.userId!==J.user.id)throw new x("FORBIDDEN",{error:"access_denied",error_description:"You are not authorized to deny this device authorization"});return await $.context.adapter.update({model:"deviceCode",where:[{field:"id",value:W.id}],update:{status:"denied",userId:W.userId||J.user.id}}),$.json({success:!0})});y$();c({id:A(),deviceCode:A(),userCode:A(),userId:A().optional(),expiresAt:U4(),status:A(),lastPolledAt:U4().optional(),pollingInterval:H0().optional(),clientId:A().optional(),scope:A().optional()});y$();var ta=SX(($)=>{if(typeof $!=="string")return!1;try{return xj($),!0}catch{return!1}},{message:"Invalid time string format. Use formats like '30m', '5s', '1h', etc."}),GF$=c({expiresIn:ta.default("30m").describe("Time in seconds until the device code expires. Use formats like '30m', '5s', '1h', etc."),interval:ta.default("5s").describe("Time in seconds between polling attempts. Use formats like '30m', '5s', '1h', etc."),deviceCodeLength:H0().int().positive().default(40).describe("Length of the device code to be generated. Default is 40 characters."),userCodeLength:H0().int().positive().default(8).describe("Length of the user code to be generated. Default is 8 characters."),generateDeviceCode:SX(($)=>typeof $==="function",{message:"generateDeviceCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a device code. If not provided, a default random string generator will be used."),generateUserCode:SX(($)=>typeof $==="function",{message:"generateUserCode must be a function that returns a string or a promise that resolves to a string."}).optional().describe("Function to generate a user code. If not provided, a default random string generator will be used."),validateClient:SX(($)=>typeof $==="function",{message:"validateClient must be a function that returns a boolean or a promise that resolves to a boolean."}).optional().describe("Function to validate the client ID. If not provided, no validation will be performed."),onDeviceAuthRequest:SX(($)=>typeof $==="function",{message:"onDeviceAuthRequest must be a function that returns void or a promise that resolves to void."}).optional().describe("Function to handle device authorization requests. If not provided, no additional actions will be taken."),verificationUri:A().optional().describe("The URI where users verify their device code. Can be an absolute URL (https://example.com/device) or relative path (/custom-path). This will be returned as verification_uri in the device code response. If not provided, defaults to /device."),schema:SX(()=>!0)});$0();_0();y$();var xN=["email-verification","sign-in","forget-password"],HF$=Y4({OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",TOO_MANY_ATTEMPTS:"Too many attempts"}),qC0=c({email:A({}).meta({description:"Email address to send the OTP"}),type:N0(xN).meta({description:"Type of the OTP"})});var BC0=c({email:A({}).meta({description:"Email address to send the OTP"}),type:N0(xN).meta({required:!0,description:"Type of the OTP"})});var OC0=c({email:A({}).meta({description:"Email address the OTP was sent to"}),type:N0(xN).meta({required:!0,description:"Type of the OTP"})});var PC0=c({email:A().meta({description:"Email address the OTP was sent to"}),type:N0(xN).meta({required:!0,description:"Type of the OTP"}),otp:A().meta({required:!0,description:"OTP to verify"})});var SC0=c({email:A({}).meta({description:"Email address to verify"}),otp:A().meta({required:!0,description:"OTP to verify"})});var AC0=c({email:A({}).meta({description:"Email address to sign in"}),otp:A().meta({required:!0,description:"OTP sent to the email"})});var jC0=c({email:A().meta({description:"Email address to send the OTP"})});var EC0=c({email:A().meta({description:"Email address to send the OTP"})});var CC0=c({email:A().meta({description:"Email address to reset the password"}),otp:A().meta({description:"OTP sent to the email"}),password:A().meta({description:"New password"})});_0();var aa=Y4({INVALID_OAUTH_CONFIGURATION:"Invalid OAuth configuration",TOKEN_URL_NOT_FOUND:"Invalid OAuth configuration. Token URL not found.",PROVIDER_CONFIG_NOT_FOUND:"No config found for provider",PROVIDER_ID_REQUIRED:"Provider ID is required",INVALID_OAUTH_CONFIG:"Invalid OAuth configuration.",SESSION_REQUIRED:"Session is required"});$0();y$();var ET0=c({providerId:A().meta({description:"The provider ID for the OAuth provider"}),callbackURL:A().meta({description:"The URL to redirect to after sign in"}).optional(),errorCallbackURL:A().meta({description:"The URL to redirect to if an error occurs"}).optional(),newUserCallbackURL:A().meta({description:'The URL to redirect to after login if the user is new. Eg: "/welcome"'}).optional(),disableRedirect:m$().meta({description:"Disable redirect"}).optional(),scopes:l$(A()).meta({description:"Scopes to be passed to the provider authorization request."}).optional(),requestSignUp:m$().meta({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider. Eg: false"}).optional(),additionalData:a$(A(),W0()).optional()});var CT0=c({code:A().meta({description:"The OAuth2 code"}).optional(),error:A().meta({description:"The error message, if any"}).optional(),error_description:A().meta({description:"The error description, if any"}).optional(),state:A().meta({description:"The state parameter from the OAuth2 request"}).optional()});var TT0=c({providerId:A(),callbackURL:A(),scopes:l$(A()).meta({description:"Additional scopes to request when linking the account"}).optional(),errorCallbackURL:A().meta({description:"The URL to redirect to if there is an error during the link process"}).optional()});_0();var wR0=Y4({PASSWORD_COMPROMISED:"The password you entered has been compromised. Please choose a different password."});$0();$0();y$();var hR0=c({payload:a$(A(),W0()),overrideOptions:a$(A(),W0()).optional()}),mR0=c({token:A(),issuer:A().optional()});y$();var YI0=c({email:O6().meta({description:"Email address to send the magic link"}),name:A().meta({description:'User display name. Only used if the user is registering for the first time. Eg: "my-name"'}).optional(),callbackURL:A().meta({description:"URL to redirect after magic link verification"}).optional(),newUserCallbackURL:A().meta({description:"URL to redirect after new user signup. Only used if the user is registering for the first time."}).optional(),errorCallbackURL:A().meta({description:"URL to redirect after error."}).optional()}),XI0=c({token:A().meta({description:"Verification token"}),callbackURL:A().meta({description:'URL to redirect after magic link verification, if not provided the user will be redirected to the root URL. Eg: "/dashboard"'}).optional(),errorCallbackURL:A().meta({description:"URL to redirect after error."}).optional(),newUserCallbackURL:A().meta({description:"URL to redirect after new user signup. Only used if the user is registering for the first time."}).optional()});y$();c({clientId:A(),clientSecret:A().optional(),type:N0(["web","native","user-agent-based","public"]),name:A(),icon:A().optional(),metadata:A().optional(),disabled:m$().optional().default(!1),redirectUrls:A(),userId:A().optional(),createdAt:U4(),updatedAt:U4()});y$();var lI0=c({accept:m$(),consent_code:A().optional().nullish()}),nI0=a$(W0(),W0()),iI0=c({redirect_uris:l$(A()).meta({description:'A list of redirect URIs. Eg: ["https://client.example.com/callback"]'}),token_endpoint_auth_method:N0(["none","client_secret_basic","client_secret_post"]).meta({description:'The authentication method for the token endpoint. Eg: "client_secret_basic"'}).default("client_secret_basic").optional(),grant_types:l$(N0(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).meta({description:'The grant types supported by the application. Eg: ["authorization_code"]'}).default(["authorization_code"]).optional(),response_types:l$(N0(["code","token"])).meta({description:'The response types supported by the application. Eg: ["code"]'}).default(["code"]).optional(),client_name:A().meta({description:'The name of the application. Eg: "My App"'}).optional(),client_uri:A().meta({description:'The URI of the application. Eg: "https://client.example.com"'}).optional(),logo_uri:A().meta({description:'The URI of the application logo. Eg: "https://client.example.com/logo.png"'}).optional(),scope:A().meta({description:'The scopes supported by the application. Separated by spaces. Eg: "profile email"'}).optional(),contacts:l$(A()).meta({description:'The contact information for the application. Eg: ["admin@example.com"]'}).optional(),tos_uri:A().meta({description:'The URI of the application terms of service. Eg: "https://client.example.com/tos"'}).optional(),policy_uri:A().meta({description:'The URI of the application privacy policy. Eg: "https://client.example.com/policy"'}).optional(),jwks_uri:A().meta({description:'The URI of the application JWKS. Eg: "https://client.example.com/jwks"'}).optional(),jwks:a$(W0(),W0()).meta({description:'The JWKS of the application. Eg: {"keys": [{"kty": "RSA", "alg": "RS256", "use": "sig", "n": "...", "e": "..."}]}'}).optional(),metadata:a$(W0(),W0()).meta({description:'The metadata of the application. Eg: {"key": "value"}'}).optional(),software_id:A().meta({description:'The software ID of the application. Eg: "my-software"'}).optional(),software_version:A().meta({description:'The software version of the application. Eg: "1.0.0"'}).optional(),software_statement:A().meta({description:"The software statement of the application."}).optional()});n0();_0();y$();var Bk0=c({redirect_uris:l$(A()),token_endpoint_auth_method:N0(["none","client_secret_basic","client_secret_post"]).default("client_secret_basic").optional(),grant_types:l$(N0(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).default(["authorization_code"]).optional(),response_types:l$(N0(["code","token"])).default(["code"]).optional(),client_name:A().optional(),client_uri:A().optional(),logo_uri:A().optional(),scope:A().optional(),contacts:l$(A()).optional(),tos_uri:A().optional(),policy_uri:A().optional(),jwks_uri:A().optional(),jwks:a$(A(),W0()).optional(),metadata:a$(W0(),W0()).optional(),software_id:A().optional(),software_version:A().optional(),software_statement:A().optional()}),Ok0=a$(W0(),W0());_0();y$();var kk0=Y4({INVALID_SESSION_TOKEN:"Invalid session token"}),bk0=c({sessionToken:A().meta({description:"The session token to set as active"})}),vk0=c({sessionToken:A().meta({description:"The session token to revoke"})});n0();y$();var ak0=c({callbackURL:A().meta({description:"The URL to redirect to after the proxy"}),cookies:A().meta({description:"The cookies to set after the proxy"})});y$();var Gb0=c({idToken:A().meta({description:"Google ID token, which the client obtains from the One Tap API"})});y$();var Lb0=c({token:A().meta({description:'The token to verify. Eg: "some-token"'})});$0();_0();var Us={organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]},yN=NQ(Us),DF$=yN.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"],ac:["create","read","update","delete"]}),MF$=yN.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"],ac:["create","read","update","delete"]}),VF$=yN.newRole({organization:[],member:[],invitation:[],team:[],ac:["read"]});var hN=j0(async()=>{return{}}),_Q=j0({use:[F6]},async($)=>{return{session:$.context.session}});_0();var LQ=Y4({YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION:"You are not allowed to create a new organization",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS:"You have reached the maximum number of organizations",ORGANIZATION_ALREADY_EXISTS:"Organization already exists",ORGANIZATION_SLUG_ALREADY_TAKEN:"Organization slug already taken",ORGANIZATION_NOT_FOUND:"Organization not found",USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION:"User is not a member of the organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION:"You are not allowed to update this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION:"You are not allowed to delete this organization",NO_ACTIVE_ORGANIZATION:"No active organization",USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION:"User is already a member of this organization",MEMBER_NOT_FOUND:"Member not found",ROLE_NOT_FOUND:"Role not found",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM:"You are not allowed to create a new team",TEAM_ALREADY_EXISTS:"Team already exists",TEAM_NOT_FOUND:"Team not found",YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER:"You cannot leave the organization as the only owner",YOU_CANNOT_LEAVE_THE_ORGANIZATION_WITHOUT_AN_OWNER:"You cannot leave the organization without an owner",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER:"You are not allowed to delete this member",YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION:"You are not allowed to invite users to this organization",USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION:"User is already invited to this organization",INVITATION_NOT_FOUND:"Invitation not found",YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION:"You are not the recipient of the invitation",EMAIL_VERIFICATION_REQUIRED_BEFORE_ACCEPTING_OR_REJECTING_INVITATION:"Email verification required before accepting or rejecting invitation",YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION:"You are not allowed to cancel this invitation",INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION:"Inviter is no longer a member of the organization",YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE:"You are not allowed to invite a user with this role",FAILED_TO_RETRIEVE_INVITATION:"Failed to retrieve invitation",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS:"You have reached the maximum number of teams",UNABLE_TO_REMOVE_LAST_TEAM:"Unable to remove last team",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER:"You are not allowed to update this member",ORGANIZATION_MEMBERSHIP_LIMIT_REACHED:"Organization membership limit reached",YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to create teams in this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to delete teams in this organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM:"You are not allowed to update this team",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_TEAM:"You are not allowed to delete this team",INVITATION_LIMIT_REACHED:"Invitation limit reached",TEAM_MEMBER_LIMIT_REACHED:"Team member limit reached",USER_IS_NOT_A_MEMBER_OF_THE_TEAM:"User is not a member of the team",YOU_CAN_NOT_ACCESS_THE_MEMBERS_OF_THIS_TEAM:"You are not allowed to list the members of this team",YOU_DO_NOT_HAVE_AN_ACTIVE_TEAM:"You do not have an active team",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM_MEMBER:"You are not allowed to create a new member",YOU_ARE_NOT_ALLOWED_TO_REMOVE_A_TEAM_MEMBER:"You are not allowed to remove a team member",YOU_ARE_NOT_ALLOWED_TO_ACCESS_THIS_ORGANIZATION:"You are not allowed to access this organization as an owner",YOU_ARE_NOT_A_MEMBER_OF_THIS_ORGANIZATION:"You are not a member of this organization",MISSING_AC_INSTANCE:"Dynamic Access Control requires a pre-defined ac instance on the server auth plugin. Read server logs for more information",YOU_MUST_BE_IN_AN_ORGANIZATION_TO_CREATE_A_ROLE:"You must be in an organization to create a role",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_ROLE:"You are not allowed to create a role",YOU_ARE_NOT_ALLOWED_TO_UPDATE_A_ROLE:"You are not allowed to update a role",YOU_ARE_NOT_ALLOWED_TO_DELETE_A_ROLE:"You are not allowed to delete a role",YOU_ARE_NOT_ALLOWED_TO_READ_A_ROLE:"You are not allowed to read a role",YOU_ARE_NOT_ALLOWED_TO_LIST_A_ROLE:"You are not allowed to list a role",YOU_ARE_NOT_ALLOWED_TO_GET_A_ROLE:"You are not allowed to get a role",TOO_MANY_ROLES:"This organization has too many roles",INVALID_RESOURCE:"The provided permission includes an invalid resource",ROLE_NAME_IS_ALREADY_TAKEN:"That role name is already taken",CANNOT_DELETE_A_PRE_DEFINED_ROLE:"Cannot delete a pre-defined role"});y$();var Fv0=Number.POSITIVE_INFINITY;var Dv0=c({organizationId:A().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."}),role:A().meta({description:"The name of the role to create"}),permission:a$(A(),l$(A())).meta({description:"The permission to assign to the role"})});var Mv0=c({organizationId:A().optional().meta({description:"The id of the organization to create the role in. If not provided, the user's active organization will be used."})}).and(w6([c({roleName:A().nonempty().meta({description:"The name of the role to delete"})}),c({roleId:A().nonempty().meta({description:"The id of the role to delete"})})]));var Vv0=c({organizationId:A().optional().meta({description:"The id of the organization to list roles for. If not provided, the user's active organization will be used."})}).optional();var Nv0=c({organizationId:A().optional().meta({description:"The id of the organization to read a role for. If not provided, the user's active organization will be used."})}).and(w6([c({roleName:A().nonempty().meta({description:"The name of the role to read"})}),c({roleId:A().nonempty().meta({description:"The id of the role to read"})})])).optional();var _v0=w6([c({roleName:A().nonempty().meta({description:"The name of the role to update"})}),c({roleId:A().nonempty().meta({description:"The id of the role to update"})})]);$0();y$();var fv0=c({email:A().meta({description:"The email address of the user to invite"}),role:w6([A().meta({description:"The role to assign to the user"}),l$(A().meta({description:"The roles to assign to the user"}))]).meta({description:'The role(s) to assign to the user. It can be `admin`, `member`, owner. Eg: "member"'}),organizationId:A().meta({description:"The organization ID to invite the user to"}).optional(),resend:m$().meta({description:"Resend the invitation email, if the user is already invited. Eg: true"}).optional(),teamId:w6([A().meta({description:"The team ID to invite the user to"}).optional(),l$(A()).meta({description:"The team IDs to invite the user to"}).optional()])});var gv0=c({invitationId:A().meta({description:"The ID of the invitation to accept"})});var xv0=c({invitationId:A().meta({description:"The ID of the invitation to reject"})});var yv0=c({invitationId:A().meta({description:"The ID of the invitation to cancel"})});var hv0=c({id:A().meta({description:"The ID of the invitation to get"})});var mv0=c({organizationId:A().meta({description:"The ID of the organization to list invitations for"}).optional()}).optional();$0();y$();var ev0=c({userId:D0.string().meta({description:'The user Id which represents the user to be added as a member. If `null` is provided, then it\'s expected to provide session headers. Eg: "user-id"'}),role:w6([A(),l$(A())]).meta({description:'The role(s) to assign to the new member. Eg: ["admin", "sale"]'}),organizationId:A().meta({description:`An optional organization ID to pass. If not provided, will default to the user's active organization. Eg: "org-id"`}).optional(),teamId:A().meta({description:'An optional team ID to add the member to. Eg: "team-id"'}).optional()});var $f0=c({memberIdOrEmail:A().meta({description:"The ID or email of the member to remove"}),organizationId:A().meta({description:'The ID of the organization to remove the member from. If not provided, the active organization will be used. Eg: "org-id"'}).optional()});var Jf0=c({role:w6([A(),l$(A())]).meta({description:'The new role to be applied. This can be a string or array of strings representing the roles. Eg: ["admin", "sale"]'}),memberId:A().meta({description:'The member id to apply the role update to. Eg: "member-id"'}),organizationId:A().meta({description:'An optional organization ID which the member is a part of to apply the role update. If not provided, you must provide session headers to get the active organization. Eg: "organization-id"'}).optional()});var Yf0=c({organizationId:A().meta({description:'The organization Id for the member to leave. Eg: "organization-id"'})});var Xf0=c({userId:A().meta({description:"The user ID to get the role for. If not provided, will default to the current user's"}).optional(),organizationId:A().meta({description:`The organization ID to list members for. If not provided, will default to the user's active organization. Eg: "organization-id"`}).optional(),organizationSlug:A().meta({description:`The organization slug to list members for. If not provided, will default to the user's active organization. Eg: "organization-slug"`}).optional()}).optional();y$();var Vf0=c({name:A().min(1).meta({description:"The name of the organization"}),slug:A().min(1).meta({description:"The slug of the organization"}),userId:D0.string().meta({description:'The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server. server-only. Eg: "user-id"'}).optional(),logo:A().meta({description:"The logo of the organization"}).optional(),metadata:a$(A(),W0()).meta({description:"The metadata of the organization"}).optional(),keepCurrentActiveOrganization:m$().meta({description:"Whether to keep the current active organization active after creating a new one. Eg: true"}).optional()});var Nf0=c({slug:A().meta({description:'The organization slug to check. Eg: "my-org"'})});var _f0=c({name:A().min(1).meta({description:"The name of the organization"}).optional(),slug:A().min(1).meta({description:"The slug of the organization"}).optional(),logo:A().meta({description:"The logo of the organization"}).optional(),metadata:a$(A(),W0()).meta({description:"The metadata of the organization"}).optional()});var Lf0=c({organizationId:A().meta({description:"The organization id to delete"})});var qf0=l6(c({organizationId:A().meta({description:"The organization id to get"}).optional(),organizationSlug:A().meta({description:"The organization slug to get"}).optional(),membersLimit:H0().or(A().transform(($)=>parseInt($))).meta({description:"The limit of members to get. By default, it uses the membershipLimit option which defaults to 100."}).optional()}));var Bf0=c({organizationId:A().meta({description:'The organization id to set as active. It can be null to unset the active organization. Eg: "org-id"'}).nullable().optional(),organizationSlug:A().meta({description:'The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided. Eg: "org-slug"'}).optional()});y$();var Ds=A(),NF$=N0(["pending","accepted","rejected","canceled"]).default("pending"),Sf0=c({id:A().default(T6),name:A(),slug:A(),logo:A().nullish().optional(),metadata:a$(A(),PX()).or(A().transform(($)=>JSON.parse($))).optional(),createdAt:U4()}),Af0=c({id:A().default(T6),organizationId:A(),userId:D0.string(),role:Ds,createdAt:U4().default(()=>new Date)}),jf0=c({id:A().default(T6),organizationId:A(),email:A(),role:Ds,status:NF$,teamId:A().nullish(),inviterId:A(),expiresAt:U4(),createdAt:U4().default(()=>new Date)}),_F$=c({id:A().default(T6),name:A().min(1),organizationId:A(),createdAt:U4(),updatedAt:U4().optional()}),Ef0=c({id:A().default(T6),teamId:A(),userId:A(),createdAt:U4().default(()=>new Date)}),Cf0=c({id:A().default(T6),organizationId:A(),role:A(),permission:a$(A(),l$(A())),createdAt:U4().default(()=>new Date),updatedAt:U4().optional()}),Fs=["admin","member","owner"],Tf0=w6([N0(Fs),l$(N0(Fs))]);y$();var cf0=c({name:A().meta({description:'The name of the team. Eg: "my-team"'}),organizationId:A().meta({description:'The organization ID which the team will be created in. Defaults to the active organization. Eg: "organization-id"'}).optional()});var pf0=c({teamId:A().meta({description:'The team ID of the team to remove. Eg: "team-id"'}),organizationId:A().meta({description:`The organization ID which the team falls under. If not provided, it will default to the user's active organization. Eg: "organization-id"`}).optional()});var lf0=l6(c({organizationId:A().meta({description:'The organization ID which the teams are under to list. Defaults to the users active organization. Eg: "organization-id"'}).optional()}));var nf0=c({teamId:A().meta({description:"The team id to set as active. It can be null to unset the active team"}).nullable().optional()});var if0=l6(c({teamId:A().optional().meta({description:"The team whose members we should return. If this is not provided the members of the current active team get returned."})}));var rf0=c({teamId:A().meta({description:"The team the user should be a member of."}),userId:D0.string().meta({description:"The user Id which represents the user to be added as a member."})});var of0=c({teamId:A().meta({description:"The team the user should be removed from."}),userId:D0.string().meta({description:"The user which should be removed from the team."})});y$();var og0=c({organizationId:A().optional()}).and(w6([c({permission:a$(A(),l$(A())),permissions:LW()}),c({permission:LW(),permissions:a$(A(),l$(A()))})]));_0();var N6=Y4({INVALID_PHONE_NUMBER:"Invalid phone number",PHONE_NUMBER_EXIST:"Phone number already exists",PHONE_NUMBER_NOT_EXIST:"phone number isn't registered",INVALID_PHONE_NUMBER_OR_PASSWORD:"Invalid phone number or password",UNEXPECTED_ERROR:"Unexpected error",OTP_NOT_FOUND:"OTP not found",OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",PHONE_NUMBER_NOT_VERIFIED:"Phone number not verified",PHONE_NUMBER_CANNOT_BE_UPDATED:"Phone number cannot be updated",SEND_OTP_NOT_IMPLEMENTED:"sendOTP not implemented",TOO_MANY_ATTEMPTS:"Too many attempts"});$0();y$();var qF$=c({phoneNumber:A().meta({description:'Phone number to sign in. Eg: "+1234567890"'}),password:A().meta({description:"Password to use for sign in."}),rememberMe:m$().meta({description:"Remember the session. Eg: true"}).optional()}),Ms=($)=>H$("/sign-in/phone-number",{method:"POST",body:qF$,metadata:{openapi:{summary:"Sign in with phone number",description:"Use this endpoint to sign in with phone number",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"},session:{$ref:"#/components/schemas/Session"}}}}}},400:{description:"Invalid phone number or password"}}}}},async(J)=>{let{password:Y,phoneNumber:X}=J.body;if($.phoneNumberValidator){if(!await $.phoneNumberValidator(J.body.phoneNumber))throw new x("BAD_REQUEST",{message:N6.INVALID_PHONE_NUMBER})}let W=await J.context.adapter.findOne({model:"user",where:[{field:"phoneNumber",value:X}]});if(!W)throw new x("UNAUTHORIZED",{message:N6.INVALID_PHONE_NUMBER_OR_PASSWORD});if($.requireVerification){if(!W.phoneNumberVerified){let H=Bk($.otpLength);if(await J.context.internalAdapter.createVerificationValue({value:H,identifier:X,expiresAt:x4($.expiresIn,"sec")}),$.sendOTP)await J.context.runInBackgroundOrAwait($.sendOTP({phoneNumber:X,code:H},J));throw new x("UNAUTHORIZED",{message:N6.PHONE_NUMBER_NOT_VERIFIED})}}let Z=(await J.context.internalAdapter.findAccountByUserId(W.id)).find((H)=>H.providerId==="credential");if(!Z)throw J.context.logger.error("Credential account not found",{phoneNumber:X}),new x("UNAUTHORIZED",{message:N6.INVALID_PHONE_NUMBER_OR_PASSWORD});let G=Z?.password;if(!G)throw J.context.logger.error("Password not found",{phoneNumber:X}),new x("UNAUTHORIZED",{message:N6.UNEXPECTED_ERROR});if(!await J.context.password.verify({hash:G,password:Y}))throw J.context.logger.error("Invalid password"),new x("UNAUTHORIZED",{message:N6.INVALID_PHONE_NUMBER_OR_PASSWORD});let Q=await J.context.internalAdapter.createSession(W.id,J.body.rememberMe===!1);if(!Q)throw J.context.logger.error("Failed to create session"),new x("UNAUTHORIZED",{message:V$.FAILED_TO_CREATE_SESSION});return await U0(J,{session:Q,user:W},J.body.rememberMe===!1),J.json({token:Q.token,user:o$(J.context.options,W)})}),BF$=c({phoneNumber:A().meta({description:'Phone number to send OTP. Eg: "+1234567890"'})}),Vs=($)=>H$("/phone-number/send-otp",{method:"POST",body:BF$,metadata:{openapi:{summary:"Send OTP to phone number",description:"Use this endpoint to send OTP to phone number",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},async(J)=>{if(!$?.sendOTP)throw J.context.logger.warn("sendOTP not implemented"),new x("NOT_IMPLEMENTED",{message:N6.SEND_OTP_NOT_IMPLEMENTED});if($.phoneNumberValidator){if(!await $.phoneNumberValidator(J.body.phoneNumber))throw new x("BAD_REQUEST",{message:N6.INVALID_PHONE_NUMBER})}let Y=Bk($.otpLength);return await J.context.internalAdapter.createVerificationValue({value:`${Y}:0`,identifier:J.body.phoneNumber,expiresAt:x4($.expiresIn,"sec")}),await J.context.runInBackgroundOrAwait($.sendOTP({phoneNumber:J.body.phoneNumber,code:Y},J)),J.json({message:"code sent"})}),OF$=c({phoneNumber:A().meta({description:'Phone number to verify. Eg: "+1234567890"'}),code:A().meta({description:'OTP code. Eg: "123456"'}),disableSession:m$().meta({description:"Disable session creation after verification. Eg: false"}).optional(),updatePhoneNumber:m$().meta({description:"Check if there is a session and update the phone number. Eg: true"}).optional()}),Ns=($)=>H$("/phone-number/verify",{method:"POST",body:OF$,metadata:{openapi:{summary:"Verify phone number",description:"Use this endpoint to verify phone number",responses:{"200":{description:"Phone number verified successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the verification was successful",enum:[!0]},token:{type:"string",nullable:!0,description:"Session token if session is created, null if disableSession is true or no session is created"},user:{type:"object",nullable:!0,properties:{id:{type:"string",description:"Unique identifier of the user"},email:{type:"string",format:"email",nullable:!0,description:"User's email address"},emailVerified:{type:"boolean",nullable:!0,description:"Whether the email is verified"},name:{type:"string",nullable:!0,description:"User's name"},image:{type:"string",format:"uri",nullable:!0,description:"User's profile image URL"},phoneNumber:{type:"string",description:"User's phone number"},phoneNumberVerified:{type:"boolean",description:"Whether the phone number is verified"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the user was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the user was last updated"}},required:["id","phoneNumber","phoneNumberVerified","createdAt","updatedAt"],description:"User object with phone number details, null if no user is created or found"}},required:["status"]}}}},400:{description:"Invalid OTP"}}}}},async(J)=>{if($?.verifyOTP){if(!await $.verifyOTP({phoneNumber:J.body.phoneNumber,code:J.body.code},J))throw new x("BAD_REQUEST",{message:N6.INVALID_OTP});let X=await J.context.internalAdapter.findVerificationValue(J.body.phoneNumber);if(X)await J.context.internalAdapter.deleteVerificationValue(X.id)}else{let X=await J.context.internalAdapter.findVerificationValue(J.body.phoneNumber);if(!X||X.expiresAt<new Date){if(X&&X.expiresAt<new Date)throw new x("BAD_REQUEST",{message:N6.OTP_EXPIRED});throw new x("BAD_REQUEST",{message:N6.OTP_NOT_FOUND})}let[W,Z]=X.value.split(":"),G=$?.allowedAttempts||3;if(Z&&parseInt(Z)>=G)throw await J.context.internalAdapter.deleteVerificationValue(X.id),new x("FORBIDDEN",{message:N6.TOO_MANY_ATTEMPTS});if(W!==J.body.code)throw await J.context.internalAdapter.updateVerificationValue(X.id,{value:`${W}:${parseInt(Z||"0")+1}`}),new x("BAD_REQUEST",{message:N6.INVALID_OTP});await J.context.internalAdapter.deleteVerificationValue(X.id)}if(J.body.updatePhoneNumber){let X=await M0(J);if(!X)throw new x("UNAUTHORIZED",{message:V$.USER_NOT_FOUND});if((await J.context.adapter.findMany({model:"user",where:[{field:"phoneNumber",value:J.body.phoneNumber}]})).length)throw J.error("BAD_REQUEST",{message:N6.PHONE_NUMBER_EXIST});let W=await J.context.internalAdapter.updateUser(X.user.id,{[$.phoneNumber]:J.body.phoneNumber,[$.phoneNumberVerified]:!0});return J.json({status:!0,token:X.session.token,user:o$(J.context.options,W)})}let Y=await J.context.adapter.findOne({model:"user",where:[{value:J.body.phoneNumber,field:$.phoneNumber}]});if(!Y){if($?.signUpOnVerification){if(Y=await J.context.internalAdapter.createUser({email:$.signUpOnVerification.getTempEmail(J.body.phoneNumber),name:$.signUpOnVerification.getTempName?$.signUpOnVerification.getTempName(J.body.phoneNumber):J.body.phoneNumber,[$.phoneNumber]:J.body.phoneNumber,[$.phoneNumberVerified]:!0}),!Y)throw new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_CREATE_USER})}}else Y=await J.context.internalAdapter.updateUser(Y.id,{[$.phoneNumberVerified]:!0});if(!Y)throw new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_UPDATE_USER});if(await $?.callbackOnVerification?.({phoneNumber:J.body.phoneNumber,user:Y},J),!J.body.disableSession){let X=await J.context.internalAdapter.createSession(Y.id);if(!X)throw new x("INTERNAL_SERVER_ERROR",{message:V$.FAILED_TO_CREATE_SESSION});return await U0(J,{session:X,user:Y}),J.json({status:!0,token:X.token,user:o$(J.context.options,Y)})}return J.json({status:!0,token:null,user:o$(J.context.options,Y)})}),PF$=c({phoneNumber:A()}),_s=($)=>H$("/phone-number/request-password-reset",{method:"POST",body:PF$,metadata:{openapi:{description:"Request OTP for password reset via phone number",responses:{"200":{description:"OTP sent successfully for password reset",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the OTP was sent successfully",enum:[!0]}},required:["status"]}}}}}}}},async(J)=>{let Y=await J.context.adapter.findOne({model:"user",where:[{value:J.body.phoneNumber,field:$.phoneNumber}]}),X=Bk($.otpLength);if(await J.context.internalAdapter.createVerificationValue({value:`${X}:0`,identifier:`${J.body.phoneNumber}-request-password-reset`,expiresAt:x4($.expiresIn,"sec")}),!Y)return J.json({status:!0});if($.sendPasswordResetOTP)await J.context.runInBackgroundOrAwait($.sendPasswordResetOTP({phoneNumber:J.body.phoneNumber,code:X},J));return J.json({status:!0})}),SF$=c({otp:A().meta({description:'The one time password to reset the password. Eg: "123456"'}),phoneNumber:A().meta({description:'The phone number to the account which intends to reset the password for. Eg: "+1234567890"'}),newPassword:A().meta({description:'The new password. Eg: "new-and-secure-password"'})}),Ls=($)=>H$("/phone-number/reset-password",{method:"POST",body:SF$,metadata:{openapi:{description:"Reset password using phone number OTP",responses:{"200":{description:"Password reset successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the password was reset successfully",enum:[!0]}},required:["status"]}}}}}}}},async(J)=>{let Y=await J.context.internalAdapter.findVerificationValue(`${J.body.phoneNumber}-request-password-reset`);if(!Y)throw new x("BAD_REQUEST",{message:N6.OTP_NOT_FOUND});if(Y.expiresAt<new Date)throw new x("BAD_REQUEST",{message:N6.OTP_EXPIRED});let[X,W]=Y.value.split(":"),Z=$?.allowedAttempts||3;if(W&&parseInt(W)>=Z)throw await J.context.internalAdapter.deleteVerificationValue(Y.id),new x("FORBIDDEN",{message:N6.TOO_MANY_ATTEMPTS});if(J.body.otp!==X)throw await J.context.internalAdapter.updateVerificationValue(Y.id,{value:`${X}:${parseInt(W||"0")+1}`}),new x("BAD_REQUEST",{message:N6.INVALID_OTP});let G=await J.context.adapter.findOne({model:"user",where:[{field:"phoneNumber",value:J.body.phoneNumber}]});if(!G)throw new x("BAD_REQUEST",{message:N6.UNEXPECTED_ERROR});let Q=J.context.password.config.minPasswordLength,H=J.context.password.config.maxPasswordLength;if(J.body.newPassword.length<Q)throw new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_SHORT});if(J.body.newPassword.length>H)throw new x("BAD_REQUEST",{message:V$.PASSWORD_TOO_LONG});let z=await J.context.password.hash(J.body.newPassword);if(await J.context.internalAdapter.updatePassword(G.id,z),await J.context.internalAdapter.deleteVerificationValue(Y.id),J.context.options.emailAndPassword?.revokeSessionsOnPasswordReset)await J.context.internalAdapter.deleteSessions(G.id);return J.json({status:!0})});function Bk($){return K6($,"0-9")}var qs={user:{fields:{phoneNumber:{type:"string",required:!1,unique:!0,sortable:!0,returned:!0},phoneNumberVerified:{type:"boolean",required:!1,returned:!0,input:!1}}}};var Ok=($)=>{let J={expiresIn:$?.expiresIn||300,otpLength:$?.otpLength||6,...$,phoneNumber:"phoneNumber",phoneNumberVerified:"phoneNumberVerified",code:"code",createdAt:"createdAt"};return{id:"phone-number",hooks:{before:[{matcher:(Y)=>Y.path==="/update-user"&&("phoneNumber"in Y.body),handler:j0(async(Y)=>{throw new x("BAD_REQUEST",{message:N6.PHONE_NUMBER_CANNOT_BE_UPDATED})})}]},endpoints:{signInPhoneNumber:Ms(J),sendPhoneNumberOTP:Vs(J),verifyPhoneNumber:Ns(J),requestPasswordResetPhoneNumber:_s(J),resetPasswordPhoneNumber:Ls(J)},schema:j1(qs,$?.schema),rateLimit:[{pathMatcher(Y){return Y.startsWith("/phone-number")},window:60000,max:10}],options:$,$ERROR_CODES:N6}};y$();var kx0=c({walletAddress:A().regex(/^0[xX][a-fA-F0-9]{40}$/i).length(42),chainId:H0().int().positive().max(2147483647).optional().default(1)});_0();var BQ=Y4({OTP_NOT_ENABLED:"OTP not enabled",OTP_HAS_EXPIRED:"OTP has expired",TOTP_NOT_ENABLED:"TOTP not enabled",TWO_FACTOR_NOT_ENABLED:"Two factor isn't enabled",BACKUP_CODES_NOT_ENABLED:"Backup codes aren't enabled",INVALID_BACKUP_CODE:"Invalid backup code",INVALID_CODE:"Invalid code",TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE:"Too many attempts. Please request a new code.",INVALID_TWO_FACTOR_COOKIE:"Invalid two factor cookie"});_0();y$();var Xy0=c({code:A().meta({description:'A backup code to verify. Eg: "123456"'}),disableSession:m$().meta({description:"If true, the session cookie will not be set."}).optional(),trustDevice:m$().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"}).optional()}),Wy0=c({userId:D0.string().meta({description:'The user ID to view all backup codes. Eg: "user-id"'})}),Zy0=c({password:A().meta({description:"The users password."})});$0();y$();var Oy0=c({code:A().meta({description:'The otp code to verify. Eg: "012345"'}),trustDevice:m$().optional().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"})}),Py0=c({trustDevice:m$().optional().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"})}).optional();$0();y$();var py0=c({secret:A().meta({description:"The secret to generate the TOTP code"})}),ly0=c({password:A().meta({description:"User password"})}),ny0=c({code:A().meta({description:'The otp code to verify. Eg: "012345"'}),trustDevice:m$().meta({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time. Eg: true"}).optional()});$0();y$();var _h0=c({password:A().meta({description:"User password"}),issuer:A().meta({description:"Custom issuer for the TOTP URI"}).optional()}),Lh0=c({password:A().meta({description:"User password"})});_0();var Os=Y4({INVALID_USERNAME_OR_PASSWORD:"Invalid username or password",EMAIL_NOT_VERIFIED:"Email not verified",UNEXPECTED_ERROR:"Unexpected error",USERNAME_IS_ALREADY_TAKEN:"Username is already taken. Please try another.",USERNAME_TOO_SHORT:"Username is too short",USERNAME_TOO_LONG:"Username is too long",INVALID_USERNAME:"Username is invalid",INVALID_DISPLAY_USERNAME:"Display username is invalid"});$0();y$();var fh0=c({username:A().meta({description:"The username of the user"}),password:A().meta({description:"The password of the user"}),rememberMe:m$().meta({description:"Remember the user session"}).optional(),callbackURL:A().meta({description:"The URL to redirect to after email verification"}).optional()}),gh0=c({username:A().meta({description:"The username to check"})});var RF$=nR({emailAndPassword:{enabled:!0},plugins:[Nk(),fN(),Ok({sendOTP:({phoneNumber:$,code:J})=>{console.log(`phoneNumber: ${$}`),console.log(`otp: ${J}`)}})],database:Dk(O0,{provider:"pg",schema:Uk})}),mX=RF$.api;var _5=new f8({name:"auth middleware"}).guard({headers:W$.object({authorization:W$.string("required auth token")})}).resolve(async({headers:$})=>{let J=await mX.getSession({headers:$});if(!J)throw new v6({msg:"invalid auth token"});return{userId:J.user.id}}).as("scoped");var IF$=new f8({prefix:"/api/admin"}).use(_5).get("/",async()=>{let $=await O0.select({id:W4.id,name:W4.name,email:W4.email,phoneNumber:W4.phoneNumber,status:W4.status,createdAt:W4.createdAt,updatedAt:W4.updatedAt}).from(W4);return q4({data:$})}).get("/:id",async({params:$})=>{let[J]=await O0.select({id:W4.id,name:W4.name,email:W4.email,phoneNumber:W4.phoneNumber,status:W4.status,createdAt:W4.createdAt,updatedAt:W4.updatedAt}).from(W4).where(h0(W4.id,$.id));if(!J)throw new v6({msg:"admin not found",code:404});return q4({data:J})},{params:W$.object({id:W$.string("id required")})}).post("/",async({body:$})=>{let[J]=await O0.insert(W4).values({userId:$.userId,name:$.name,email:$.email,phoneNumber:$.phoneNumber,status:$.status??"pending"}).returning();return q4({data:J,msg:"admin created successfully"})},{body:W$.object({userId:W$.string("userId required"),name:W$.string("name required"),email:W$.email("email required"),phoneNumber:W$.string("phoneNumber required"),status:W$.literal(["active","inactive"]).optional()})}).put("/:id",async({params:$,body:J})=>{let[Y]=await O0.select({id:W4.id}).from(W4).where(h0(W4.id,$.id));if(!Y)throw new v6({msg:"admin not found",code:404});let[X]=await O0.update(W4).set({name:J.name,email:J.email,phoneNumber:J.phoneNumber,status:J.status}).where(h0(W4.id,$.id)).returning();return q4({data:X,msg:"admin updated successfully"})},{params:W$.object({id:W$.string("id required")}),body:W$.object({name:W$.string().optional(),email:W$.email().optional(),phoneNumber:W$.string().optional(),status:W$.literal(["active","inactive","pending"]).optional()})}).delete("/:id",async({params:$})=>{let[J]=await O0.select({id:W4.id}).from(W4).where(h0(W4.id,$.id));if(!J)throw new v6({msg:"admin not found",code:404});return await O0.delete(W4).where(h0(W4.id,$.id)),q4({msg:"admin deleted successfully"})},{params:W$.object({id:W$.string("id required")})}),Ps=IF$;var kF$=new f8({prefix:"/api/auth"}).post("/sign-up",async({body:$})=>{let[J]=await O0.select({id:D$.id}).from(D$),Y=await mX.signUpEmail({body:{name:$.name,email:$.email,password:$.password,phoneNumber:$.contact}});if($.type==="student")await O0.insert(_7).values({name:$.name,email:$.email,phoneNumber:$.contact,userId:Y.user.id,schoolId:J.id});if($.type==="teacher")await O0.insert(g$).values({name:$.name,email:$.email,phoneNumber:$.contact,userId:Y.user.id,schoolId:J.id});return q4({data:{token:Y.token}})},{body:W$.object({type:W$.literal(["teacher","student"],"need valid user type"),email:W$.email("email required"),password:W$.string("password required").min(5,"password minimum length should be 5"),name:W$.string("name required").min(1,"need name field"),contact:W$.string("contact required").length(10,"invalid contact"),schoolCode:W$.string("school code required").length(1,"invalid school code")})}).post("/sign-in",async({body:$})=>{if($.loginMethod==="email"){let J=await mX.signInEmail({body:{email:$.email,password:$.password}});return q4({data:{token:J.token}})}if($.loginMethod==="contact")return q4({data:{token:"mock-contact-token"}})},{body:W$.discriminatedUnion("loginMethod",[W$.object({loginMethod:W$.literal("email","required login method"),type:W$.literal(["teacher","student"],"required user type"),email:W$.email("email required"),password:W$.string("password required").min(5,"password minimum length should be 5")}),W$.object({loginMethod:W$.literal("contact","required login method"),type:W$.literal(["teacher","student"],"required user type"),contact:W$.string("contact required").length(10,"invalid contact")})],"required valid login type")}).post("/admin/sign-in",async({body:$})=>{let J=await mX.signInEmail({body:{email:$.email,password:$.password}});return q4({data:{token:J.token}})},{body:W$.object({email:W$.email("required email"),password:W$.string("required password")})}),Ss=kF$;var bF$=new f8({prefix:"/api/health"}).use(_5).get("/",async({status:$,userId:J})=>{return $(200,`healthy ok ${J}`)}),As=bF$;var vF$=new f8({prefix:"/api/school"}).use(_5).get("/",async()=>{let $=await O0.select({id:D$.id,schoolCode:D$.schoolCode,name:D$.name,email:D$.email,phone:D$.phone,address:D$.address,city:D$.city,state:D$.state,country:D$.country,postalCode:D$.postalCode,logo:D$.logo,website:D$.website,description:D$.description,establishedYear:D$.establishedYear,board:D$.board,status:D$.status,maxStudents:D$.maxStudents,currentStudents:D$.currentStudents,maxTeachers:D$.maxTeachers,currentTeachers:D$.currentTeachers,accreditation:D$.accreditation,facilities:D$.facilities,createdAt:D$.createdAt,updatedAt:D$.updatedAt}).from(D$);return q4({data:$})}).get("/:id",async({params:$})=>{let[J]=await O0.select({id:D$.id,schoolCode:D$.schoolCode,name:D$.name,email:D$.email,phone:D$.phone,address:D$.address,city:D$.city,state:D$.state,country:D$.country,postalCode:D$.postalCode,logo:D$.logo,website:D$.website,description:D$.description,establishedYear:D$.establishedYear,board:D$.board,status:D$.status,maxStudents:D$.maxStudents,currentStudents:D$.currentStudents,maxTeachers:D$.maxTeachers,currentTeachers:D$.currentTeachers,accreditation:D$.accreditation,facilities:D$.facilities,createdAt:D$.createdAt,updatedAt:D$.updatedAt}).from(D$).where(h0(D$.id,$.id));if(!J)throw new v6({msg:"school not found",code:404});return q4({data:J})},{params:W$.object({id:W$.string("id required")})}).post("/",async({body:$})=>{let[J]=await O0.select({id:D$.id}).from(D$).where(h0(D$.schoolCode,$.schoolCode));if(J)throw new v6({msg:"school code already exists",code:400});let[Y]=await O0.select({id:D$.id}).from(D$).where(h0(D$.email,$.email));if(Y)throw new v6({msg:"email already exists",code:400});let[X]=await O0.insert(D$).values({schoolCode:$.schoolCode,name:$.name,email:$.email,phone:$.phone,address:$.address,city:$.city,state:$.state,country:$.country,postalCode:$.postalCode,logo:$.logo,website:$.website,description:$.description,establishedYear:$.establishedYear,board:$.board,status:$.status??"active",maxStudents:$.maxStudents,maxTeachers:$.maxTeachers,accreditation:$.accreditation,facilities:$.facilities}).returning(),W=await mX.signUpEmail({body:{name:$.adminName,email:$.adminEmail,password:$.adminPassword,phoneNumber:$.adminPhone}});return await O0.insert(g$).values({userId:W.user.id,schoolId:X.id,name:$.adminName,email:$.adminEmail,phoneNumber:$.adminPhone,roles:["admin"],status:"active"}),q4({data:X,msg:"school created successfully with admin teacher"})},{body:W$.object({schoolCode:W$.string("schoolCode required"),name:W$.string("name required"),email:W$.email("email required"),phone:W$.string("phone required"),address:W$.string("address required"),city:W$.string("city required"),state:W$.string("state required"),country:W$.string("country required"),postalCode:W$.string("postalCode required"),logo:W$.string().optional(),website:W$.string().optional(),description:W$.string().optional(),establishedYear:W$.string().optional(),board:W$.string().optional(),status:W$.literal(["active","inactive"]).optional(),maxStudents:W$.string().optional(),maxTeachers:W$.string().optional(),accreditation:W$.string().optional(),facilities:W$.string().optional(),adminName:W$.string("admin name required"),adminEmail:W$.email("admin email required"),adminPassword:W$.string("admin password required").min(5),adminPhone:W$.string("admin phone required")})}).put("/:id",async({params:$,body:J})=>{let[Y]=await O0.select({id:D$.id}).from(D$).where(h0(D$.id,$.id));if(!Y)throw new v6({msg:"school not found",code:404});if(J.schoolCode){let[W]=await O0.select({id:D$.id}).from(D$).where(h0(D$.schoolCode,J.schoolCode));if(W&&W.id!==$.id)throw new v6({msg:"school code already exists",code:400})}if(J.email){let[W]=await O0.select({id:D$.id}).from(D$).where(h0(D$.email,J.email));if(W&&W.id!==$.id)throw new v6({msg:"email already exists",code:400})}let[X]=await O0.update(D$).set({schoolCode:J.schoolCode,name:J.name,email:J.email,phone:J.phone,address:J.address,city:J.city,state:J.state,country:J.country,postalCode:J.postalCode,logo:J.logo,website:J.website,description:J.description,establishedYear:J.establishedYear,board:J.board,status:J.status,maxStudents:J.maxStudents,maxTeachers:J.maxTeachers,accreditation:J.accreditation,facilities:J.facilities}).where(h0(D$.id,$.id)).returning();return q4({data:X,msg:"school updated successfully"})},{params:W$.object({id:W$.string("id required")}),body:W$.object({schoolCode:W$.string().optional(),name:W$.string().optional(),email:W$.email().optional(),phone:W$.string().optional(),address:W$.string().optional(),city:W$.string().optional(),state:W$.string().optional(),country:W$.string().optional(),postalCode:W$.string().optional(),logo:W$.string().optional(),website:W$.string().optional(),description:W$.string().optional(),establishedYear:W$.string().optional(),board:W$.string().optional(),status:W$.literal(["active","inactive"]).optional(),maxStudents:W$.string().optional(),maxTeachers:W$.string().optional(),accreditation:W$.string().optional(),facilities:W$.string().optional()})}).delete("/:id",async({params:$})=>{let[J]=await O0.select({id:D$.id}).from(D$).where(h0(D$.id,$.id));if(!J)throw new v6({msg:"school not found",code:404});return await O0.delete(D$).where(h0(D$.id,$.id)),q4({msg:"school deleted successfully"})},{params:W$.object({id:W$.string("id required")})}),js=vF$;var fF$=new f8({prefix:"/api/teacher"}).use(_5).get("/",async()=>{let $=await O0.select({id:g$.id,userId:g$.userId,schoolId:g$.schoolId,name:g$.name,dob:g$.dob,email:g$.email,phoneNumber:g$.phoneNumber,image:g$.image,address:g$.address,roles:g$.roles,batchIds:g$.batchIds,status:g$.status,createdAt:g$.createdAt,updatedAt:g$.updatedAt}).from(g$);return q4({data:$})}).get("/:id",async({params:$})=>{let[J]=await O0.select({id:g$.id,userId:g$.userId,schoolId:g$.schoolId,name:g$.name,dob:g$.dob,email:g$.email,phoneNumber:g$.phoneNumber,image:g$.image,address:g$.address,roles:g$.roles,batchIds:g$.batchIds,status:g$.status,createdAt:g$.createdAt,updatedAt:g$.updatedAt}).from(g$).where(h0(g$.id,$.id));if(!J)throw new v6({msg:"teacher not found",code:404});return q4({data:J})},{params:W$.object({id:W$.string("id required")})}).post("/",async({body:$})=>{let[J]=await O0.select({id:g$.id}).from(g$).where(h0(g$.email,$.email));if(J)throw new v6({msg:"teacher email already exists",code:400});let Y=await mX.signUpEmail({body:{name:$.name,email:$.email,password:$.password,phoneNumber:$.phoneNumber}}),[X]=await O0.insert(g$).values({userId:Y.user.id,schoolId:$.schoolId,name:$.name,email:$.email,phoneNumber:$.phoneNumber,image:$.image??"",address:$.address??"",roles:$.roles??["teacher"],status:$.status??"pending"}).returning();return q4({data:X,msg:"teacher created successfully"})},{body:W$.object({schoolId:W$.string("schoolId required"),name:W$.string("name required"),email:W$.email("email required"),phoneNumber:W$.string("phone required"),password:W$.string("password required").min(5),image:W$.string().optional(),address:W$.string().optional(),roles:W$.array(W$.enum(["teacher","school_admin"])).optional(),status:W$.literal(["active","inactive","pending"]).optional()})}).put("/:id",async({params:$,body:J})=>{let[Y]=await O0.select({id:g$.id}).from(g$).where(h0(g$.id,$.id));if(!Y)throw new v6({msg:"teacher not found",code:404});if(J.email){let[W]=await O0.select({id:g$.id}).from(g$).where(h0(g$.email,J.email));if(W&&W.id!==$.id)throw new v6({msg:"email already exists",code:400})}let[X]=await O0.update(g$).set({name:J.name,email:J.email,phoneNumber:J.phoneNumber,image:J.image,address:J.address,roles:J.roles,status:J.status}).where(h0(g$.id,$.id)).returning();return q4({data:X,msg:"teacher updated successfully"})},{params:W$.object({id:W$.string("id required")}),body:W$.object({name:W$.string().optional(),email:W$.email().optional(),phoneNumber:W$.string().optional(),image:W$.string().optional(),address:W$.string().optional(),roles:W$.array(W$.enum(["teacher","admin","principal","master_admin"])).optional(),status:W$.literal(["active","inactive","pending"]).optional()})}).delete("/:id",async({params:$})=>{let[J]=await O0.select({id:g$.id}).from(g$).where(h0(g$.id,$.id));if(!J)throw new v6({msg:"teacher not found",code:404});return await O0.delete(g$).where(h0(g$.id,$.id)),q4({msg:"teacher deleted successfully"})},{params:W$.object({id:W$.string("id required")})}),Es=fF$;var gF$=new f8().error({BaseError:iV}).onError(({code:$,error:J,status:Y})=>{if($==="VALIDATION")return q4({msg:J.messageValue?.message,data:J.all});if(J instanceof x)return Y(500,q4({msg:J.message}))}).use(gx()).use(As).use(Ss).use(Ps).use(js).use(Es),Kd0=gF$;export{Kd0 as default};
